<?php

$view = new View();
$rs = null;
$data = new Data("db");
/*
 * VIEW GENERATION PROCESS
 * -- GET SYSTEM DATA - WHICH INCLUDES STATE OF CURRENT ACCESS BY USER DEVICE - system -> data
 * ------- IF STATE EXITS - RETURN STATE INFORMATION FOR USER VIEW GENERATION
 * ------- ELSE CREATE NEW STATE - TO START FROM THE INITIAL ACCESS STATE
 * -- BASED ON SYSTEM STATE DATA
 * -------  IF STATE EXISTS - GET USER DATA RELATED TO THE STATE - system -> user -> data
 * -------  ELSE GET DEFAULT USER DATA FOR INITIAL STATE
 * -- THE STATE INFORMATION AIDS IN GETTING THE SECURITY DETAILS THAT NEED TO BE MATCHED WITH USER SECURITY DATA FOR VIEW GENERATION - system -> security -> user -> data
 * -- IF ALL SECURITY ISSUES ARE CLEAR FOR THE REQUIRED STATE AND USER DATA
 * -- GENERATE STATE USER VIEW - system -> user -> data
 */

function user_view_state(){
    //USING USER DEVICE ID DATA
    //CHECK IF SYSTEM DATA has STATE INFORMATION FOR THIS DEVICE
    //IF TRUE - LOAD STATE
    //ELSE CREATE NEW STATE 
}

function user_view_generator(){

    global $view;
    
    $view->view_type = "develop/timetable/load/sphs/teachers/allocations";
    //echo "TYPE ".$view->view_type."<br>";
    
    $view->setView('view_head!:!'.user_view_head());
   
    //echo "WORKED ".$view->getView('view_head');
            
    $view->addView('page', $view->getView('view_head'));
    
    //BODY DEPENDING ON VIEW LAYOUT OR THEME LAYOUT - IF NO THEME LAYOUT VIEW LAYOUT TAKES PRECEDENCE
    $view->setView('view_body!:!'.user_view_body());
    
    //echo "GET VIEW".$view->getView('view_body');
   
    $view->addView('page', $view->getView('view_body'));
    
    echo $view->getView('page');
}

function user_view_body(){

    $body = new Body();

    //Timetable User Pop-Up Menu
    $body->setBody("menu!:!".user_view_body_menu());
    $body->addBody($body->menu);
    
    //Timetable User Header
    $body->setBody("header_cache!:!".user_view_body_header());
    $body->addBody($body->header_cache);
    
    //Timetable User Content
    $body->setBody("content_cache!:!".user_view_body_content());
    $body->addBody($body->content_cache);
    
    //Timetable User Footer
    $body->setBody("footer_cache!:!".user_view_body_footer());
    $body->addBody($body->footer_cache);
    
    //$message = "body!:!Testing Body!,!body_style!:!'background: #1E90FF;'";
    $message = "body_style!:!'background: #1E90FF;'";
    
    $body->setBody($message);
    
    return $body->getBody();
    
    
}

function user_view_body_footer(){

    $footer = new Footer();
    
    $message = "class!:!'navbar navbar-default navbar-custom navbar-fixed-bottom'!,!style!:!'margin:auto; color:#FFFFFF; background-color:#1E90FF; height:5%; position: fixed'";
    $footer->setFooterSettings($message);
    
    $container = new Container();
    $message = "class!:!container";
    $container->setContainerSettings($message);
    
    $year = date('Y');
    
    $div = new DIV();
    $message_queue = array ();
    
    $message_queue[] = "class!:!col-sm-2!#!paragraph!?!style!:!''!,!text!:!&copy SchoolLMS $year";
    //<p style="align-right: true">Powered by Ekasi IT & Sunward Park High School</p>
    $message_queue[] = "class!:!col-sm-5!#!paragraph!?!style!:!'align-right: true'!,!text!:!Powered by Ekasi IT & Sunward Park High School";
    $message_queue[] = "class!:!col-sm-3!#!paragraph!?!style!:!'align-right: true'!,!text!:!Follow Us On Social Media";
    $message_queue[] = "class!:!col-sm-2!#!paragraph!?!style!:!'padding-left: 0px; margin-left: 0;'!,!text!:!<a href='https://www.facebook.com/schoollms/?fref=ts' target='_blank'><i class='fa fa-facebook-square fa-2x'  style='color: #FFFFFF'></i></a>  
                    <a href='https://twitter.com/school_lms' target='_blank'><i class='fa fa-twitter-square fa-2x'  style='color: #FFFFFF'></i></a>";
    
    foreach ($message_queue as $key => $message) {
        if (strpos($message, "!#!")){
            $message_tokens = explode("!#!", $message);
            foreach ($message_tokens as $index => $msg) {
                if (strpos($msg, "!?!")){
                    $msg_tokens = explode("!?!", $msg);
                    switch ($msg_tokens[0]) {
                        case 'paragraph':
                            $p = new Paragraph();
                            $p->setParagraphSettings($msg_tokens[1]);
                            $p->setParagraph();
                            //echo "user_view_body_footer MSG : ".$p->getParagraph(); 
                            $div->setDIVItems($p->getParagraph());
                            $p->clearParagraph();
                            $div->setDIV();
                            $container->setContainerItems($div->getDIV());
                            $div->clearDIV();
                            break;

                        default:
                            break;
                    }
                } else {
                    $div->setDIVSettings($msg);
                }
            }
            
        }
    }
   
    $container->setContainer();
    $footer->setFooterItems($container->getContainer());
    $footer->setFooter();
    
    return $footer->getFooter();
}

function user_view_body_content(){
 
    global $view;
    //<div class="content">
//<div id="content" style="margin-top: 115px">
    //STYLE
    $content = new Content();
    $div = new DIV();
    $message = "class!:!content";
    $div->setDIVSettings($message);
    $message = "id!:!content!,!style!:!'margin-top: 138px'";
    $content->setContentOptions($message);
    
    //IF USER IS GUEST
    if ($view->view_type == "guest"){
        //PUBLIC HOME PAGE
        $content->setContentItem(user_view_body_content_guest());
    } else {
        //TIMETABLE TABS
        $content->setContentItem(user_view_body_content_tabs());
    }
    $content->setContent();
    $div->setDIVItems($content->getContent());
    $div->setDIV();
    return $div->getDIV();
    
}

function user_view_body_content_guest_eltracker(){
    
    //global $view;
    
    global $data;
    
    $div = new DIV();
    //<div style="margin-top: 95px; padding-top: 95px;">
    $message = "style!:!'margin-top: 95px; padding-top: 95px;'";
    $div->setDIVSettings($message);
    //<h1 style="color: #428bca " style="margin-top: 10px; margin-bottom: 30px"><center>E-Learning Tracker</center></h1>
    $message = "h1!?!style!:!'color: #428bca;margin-top: 10px; margin-bottom: 30px;'";
    $h = new Heading();
    $h->openHeading($message);
    $p = new Paragraph();
    $message = "style!:!''!,!text!:!E-Learning Tracker";
    $p->openParagraph($message);
    $p->setParagraph();
    $c = new Center();
    $heading = $c->openCenter().$p->getParagraph().$c->closeCenter();
    $h->setHeadingItems($heading);
    $message = $h->closeHeading("h1");
    $div->setDIVItems($message);
    
    //GET GUEST TIMETABLE
    
    $div->setDIVItems(call_user_func("timetable_view"));
    
    $div->setDIV();
    
    return $div->getDIV();
    
    //exit;
}

function user_view_body_content_guest(){
    
    //global $view;
    
    global $data;
    
    $div = new DIV();
    
    $message = "id!:!content!,!style!:!'margin-top: 100px'";
    $div->setDIVSettings($message);
    
    $list = new Lists();
    //id="myTab" class="nav nav-tabs responsive with-nav-tabs.panel-primary hidden-xs" style="margin-top: 50px;"
    $message = "ul!?!id!:!'myTab'!,!class!:!'nav nav-tabs responsive with-nav-tabs.panel-primary hidden-xs'!,!style!:!'margin-top: 50px;'";
    //echo "MSG: $message <br>";
    $div->setDIVItems($list->openList($message));
    
    //GET GUEST TABS
    $guesttabs = array ();
    $guesttabs[] = "active;#live;Live;eltracker";
    $guesttabs[] = "-;#demo;Demo;demo";
    $guesttabs[] = "-;#install;Install;install";
    $guesttabs[] = "-;#login;Login;login";

    foreach ($guesttabs as $key => $items) {
        $item_tokens = explode(";", $items);
        $class = $item_tokens[0] == "-" ? "": $item_tokens[0];
        $href = $item_tokens[1];
        $title = $item_tokens[2];
        $loader = $item_tokens[3];
    
        $message = "class!:!'$class'";
        //echo "MSG: $message <br>";
        $list->openListItem($message);

        //LIVE
        $link = new Link();
        $message = "href!:!$href";
        //echo "MSG: $message <br>";
        $link->setLinkOptions($message);

        $p = new Paragraph();
        $message = "text!:!$title";
        //echo "MSG: $message <br>";
        $p->setParagraphSettings($message);
        $p->setParagraph();
        $link->setLinkItems($p->getParagraph());
        $p->clearParagraph();
        $link->setLink();
        $list->setListItemItems($link->getLink());
        $link->clearLink();
        $list->closeListItem();
        $div->setDIVItems($list->getListItems());
        $list->clearListItems();
    }
    
    
    $div->setDIVItems($list->closeListItem());
    
    $div->setDIV();
    
    //echo "DIV ITEMS SO FAR ".$div->getDIV();
    
    //exit;
    
    $guestdiv1 = new DIV();
    //<div class="tab-content responsive" style="margin-top: 100px;" style="margin-top: 50px;">
    $message = "class!:!'tab-content responsive'!,!style!:!'margin-top: 100px;margin-top: 50px;'";
    $guestdiv1->setDIVSettings($message);
    
    $guestdiv2 = new DIV();
    foreach ($guesttabs as $key => $items) {
        $item_tokens = explode(";", $items);
        $class = $item_tokens[0] == "-" ? "": $item_tokens[0];
        $href = $item_tokens[1];
        $id = strtolower($item_tokens[2]);
        $loader = $item_tokens[3];
        
        //<div class="tab-pane active" id="live" style="border: none">
        $message = "class!:!'tab-pane $class'!,!id!:!'$id'!,!style!:!'border: none'";
        $guestdiv2->setDIVSettings($message);
        
        $guestdiv2->setDIVItems(call_user_func("user_view_body_content_guest_$loader"));
        
        break;
    }
    $guestdiv2->setDIV();
    
    $div->setDIVItems($guestdiv2->getDIV());
    
    $div->setDIV();
    
    //echo $div->getDIV();
    
    //exit;
    return $div->getDIV();  
}

function user_view_body_content_tabs(){

    global $view;
    
    global $data;
    
    $break = new NewLine();
    $tabs = new Tabs();
    $message = "id!:!tabs!,!class!:!'easyui-tabs scroller tabs-container easyui-fluid'!,!style!:!'width: 1477px; height: 663px; flex: 1 1 0%; overflow: auto; margin-left: 14px; position: fixed'";
    $tabs->setTabOptions($message);
    
    switch ($view->view_type) {

        case 'develop/data/manage/service':
            $year_id = 4;
            $dsn = "mysql:host=localhost;dbname=sphslms_dev_teach;charset=utf8";
            $opt = [ PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
                        //PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
                        PDO::ATTR_EMULATE_PREPARES   => false,
                    ];

            $link = new PDO ($dsn, 'root', '$0W3t0');

            //GET HIGHEST UID
            $q = "SELECT uid FROM users";
            //$q_data = array();
            $query = $link->prepare($q);
            $query->execute();
            $highest_uid = 0;
            while ($row = $query->fetch()){
                if ($highest_uid < $row['uid']){
                    $highest_uid = $row['uid'];
                }
            }
            
            $q = "select distinct grade_id,class_id,subject_id,teacher_id from schoollms_schema_userdata_school_timetable_items where year_id = ? order by grade_id, class_id asc";
            $q_data = array($year_id);
            $data->prepareDataDatabaseQuery($q);
            $data->db_query->execute($q_data);
            $count_rows = count($data->db_query->fetchAll());
            echo "COUNT $count_rows <br>";
            if ($count_rows > 0){
                $data->db_query->execute($q_data);
                $teacher_tt_items = $data->db_query->fetchAll();
                //print_r($teacher_tt_items);
                //echo "I GET HERE<br>";
                foreach($teacher_tt_items as $ttkey=>$ttrow){
                    if ($ttrow['teacher_id'] == 0){
                        continue;
                    }
                    
                    $teacher_id = $ttrow['teacher_id'];
                    //Check if teacher has account in CMS by looking at the table 
                    //If not create account
                    $q = "SELECT * FROM schoollms_schema_securitydata_user_identities WHERE user_id = ?";
                    $q_data = array($year_id);
                    $data->prepareDataDatabaseQuery($q);
                    $data->db_query->execute($q_data);
                    $count_rows = count($data->db_query->fetchAll());
                    
                    
                        
                    if ($count_rows == 1){
                        $data->db_query->execute($q_data);
                        $securityrow = $data->db_query->fetch();
                        $identities = $securityrow['identities'];
                        echo "TEACHER HAS IDENTITIES $identities<br>";
                        continue;
                    } elseif($count_rows == 0) {
                        $q = "SELECT * FROM schoollms_schema_userdata_access_profile WHERE user_id = ?";
                        $q_data = array($teacher_id);
                        $data->prepareDataDatabaseQuery($q);
                        $data->db_query->execute($q_data);
                        $row = $data->db_query->fetch();
                        $name = $row['name'];
                        $surname = $row['surname'];
                        $username = "$name $surname";
                        $access_id = $row['access_id'];
                        echo "TEACHER $username <br>";
                        $q = "SELECT * FROM users WHERE name = ?";
                        $q_data = array($username);
                        $query = $link->prepare($q);
                        $query->execute($q_data);
                        $num_rows = count($query->fetchAll());
                        if ($num_rows == 1){
                            $query->execute($q_data);
                            $row = $data->db_query->fetch();
                            $uid = $row['uid'];
                            echo "SAVING $username IDENTITIES FIRST<br>";
                            $q = "INSERT INTO schoollms_schema_securitydata_user_identities VALUES (?, ?)";
                            $q_data = array($teacher_id,"teach:$uid");
                            $data->prepareDataDatabaseQuery($q);
                            $data->db_query->execute($q_data);
                        } elseif($num_rows == 0){
                            $q = "SELECT * FROM users WHERE name = ?";
                            $q_data = array("T Nkosi");
                            $query = $link->prepare($q);
                            $query->execute($q_data);
                            $num_rows = count($query->fetchAll());
                            if ($num_rows == 1){
                                $query->execute($q_data);
                                $pass_row = $query->fetch();
                                $pass = $pass_row['pass'];
                                //GET ROLE DETAILS
                                $uid = $pass_row['uid'];
                                $roles = array ();
                                $q = "SELECT * FROM users_roles WHERE uid = ?";
                                $q_data = array($uid);
                                $query = $link->prepare($q);
                                $query->execute($q_data);
                                while ($row = $query->fetch()){
                                    $roles [] = $row['rid'];
                                }
                                echo "CREATING CMS $username IDENTITIES FIRST<br>";
                                $q = "INSERT INTO users VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,NULL)";
                                //insert into users values (2901, 'T Nkosi','$S$DPc9nKHN3u9SOmRadz4vVfbO8Zb9/wovNNv2M7hTJsgYve.M84jo', 'thobileking@gmail.com', '','','html','1466583829','0','0',1,'Africa/Johannesburg','',0,'thobileking@gmail.com', NULL,'', NULL);
                                $q_data = array($highest_uid,"$username",$pass,"$access_id@schoollms.net",'','','html','1466583829','0','0',1,'Africa/Johannesburg','',0,"$access_id@schoollms.net", NULL,'');
                                
                                $query = $link->prepare($q);
                                $query->execute($q_data);     
//                                $q = "SELECT * FROM users WHERE name = ? AND email LIKE ?";
//                                $q_data = array("$username", "%$access_id%");
//                                $query = $link->prepare($q);
//                                $query->execute($q_data);
//                                $row = $data->db_query->fetch();
//                                $uid = $row['uid'];
                                echo "SAVING $username IDENTITIES SECOND<br>";
                                $q = "INSERT INTO schoollms_schema_securitydata_user_identities VALUES (?, ?)";
                                $q_data = array($teacher_id,"teach:$highest_uid");
                                $data->prepareDataDatabaseQuery($q);
                                $data->db_query->execute($q_data);
                                
                                foreach ($roles as $rkey=>$rid){
                                    $q = "INSERT INTO users_roles VALUES (?,?)";
                                    $q_data = array ($highest_uid,$rid);
                                    $query = $link->prepare($q);
                                    $query->execute($q_data);
                                }
                                $highest_uid++;
                            } elseif ($num_rows == 0){
                                
                            } else {
                                
                            }
                            
                        } else {
                            
                        }
                    }
                    
                    
                    
                    $grade_id = $ttrow['grade_id'];
                    $class_id = $ttrow['class_id'];
                    $subject_id = $ttrow['subject_id'];
                    //FIX TEACHER SCHOOLDETAILS TABLE
                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE timetable_item_type_id = ? AND timetable_label LIKE ?";
                    $q_data = array ($user_id, "%$name%$surname%");
                    $data->prepareDataDatabaseQuery($q);
                    $data->db_query->execute($q_data);
                    $num_rows = count($data->db_query->fetchAll());
                    //Check if teacher is in class and subject of the CMS
                    //Fix accordingly
                    
                    //Using grade_id, class_id and year_id 
                    //We can get the learners in the teachers
                    
                    
                            
                 
                }
            }
            exit;
            break;
        
        case 'develop/upload/schools':
            
            $schools = array ();
            //$files_dir = DATA_FILES_DIR; 
            $fh = fopen(DATA_FILES_DIR.'/gp_schools.csv','r');
            while ($line = fgets($fh)) {
              $schools[] = $line;
            }
            fclose($fh);
            
            $school_acronym = array ();
            foreach($schools as $skey=>$school){
                $school_tokens = explode("!", $school);
                $school_name = str_replace("(", "", $school_tokens[0]);
                $school_name = str_replace(")", "", $school_name);
                
                $school_type = $school_tokens[1];
                $longitude = str_replace("\n", '', $school_tokens[2]);
                $latitude = str_replace("\n", '', $school_tokens[3]);
                
                $school_type_tokens = explode(" ", $school_type);
                $school_type = strtolower($school_type_tokens[0]);
                $q = "SELECT type_id FROM schoollms_schema_userdata_school_type WHERE type_title = ?";
                $q_data = array($school_type);
                $data->prepareDataDatabaseQuery($q);
                $data->db_query->execute($q_data);
                $type_id = $data->db_query->fetchColumn();
                
                $school_name_tokens = explode(" ", $school_name);
                $acronym = "";
                //$not_acronym = array ("(",")");
                foreach($school_name_tokens as $snkey=>$name_item){
                    $temp_name = $name_item;
                    $acronym .= $temp_name[0];
                }
                
                if (array_key_exists($acronym, $school_acronym)){
                    $school_acronym["$acronym"]++;
                    $acronym .= $school_acronym["$acronym"];
                    
                } else {
                    $school_acronym["$acronym"] = 1;
                }
                $acronym = strtolower($acronym);
                
                $school_emblem = "images/$acronym"."logo.png";
                
                $q = "SELECT * FROM schoollms_schema_userdata_schools WHERE UPPER(school_name) = ?";
                $q_data = array(strtoupper($school_name));
                $data->prepareDataDatabaseQuery($q);
                $data->db_query->execute($q_data);
                $count_rows = count($data->db_query->fetchAll());
                if ($count_rows == 1){
                    echo "UPDATING $school_name WITH TYPE ID $type_id ACRONYM $acronym EMBLEM $school_emblem <br>";
                    $data->db_query->execute($q_data);
                    $row = $data->db_query->fetch();
                    $school_id = $row['school_id'];
                    $q = "UPDATE schoollms_schema_userdata_schools SET longitude = ?, latitude = ?, school_server_ip = ?, school_acronym = ?, school_emblem= ? WHERE school_id = ?";
                    $q_data = array($longitude,$latitude,"172.16.0.9",$acronym,$school_emblem, $school_id);
                    $data->prepareDataDatabaseQuery($q);
                    $data->db_query->execute($q_data);
                } elseif($count_rows > 1){
                    echo "There are more than one $school_name - FIX DB";
                    exit;
                } else {
                    echo "INSERTING $school_name WITH TYPE ID $type_id ACRONYM $acronym EMBLEM $school_emblem <br>";
                    $q = "INSERT INTO schoollms_schema_userdata_schools VALUES (NULL,?,?,?,?,?,?,?)";
                    $q_data = array($school_name,$type_id,$longitude,$latitude,"172.16.0.9",$acronym,$school_emblem);
                    $data->prepareDataDatabaseQuery($q);
                    $data->db_query->execute($q_data);
                }
            }
            exit;
            break;
        
        case 'develop/install/user':
            /*
             * INSTALLATION OF ALL USERS MUST START ONLINE AT www.schoollms.net OR school IP
             * INSTALLATION FOR TABLETS AND SMARTPHONES WILL START WITH THE INSTALLER APP
             * THE INSTALLER APP FACILITATES THE AUTHENTICATION OF THE USER AND DEVICE
             * AFTER COMPLETING THE AUTHENTICATION
             * THE SYSTEM MUST READ A MESSAGE TO SETUP THE USER MIRROR
             */
            
            $message = "user_id:1,device_id:kkkkkkk";  
            //GET USER PROFILE
            $message_tokens = explode(",", $message);
            $user_tokens = explode(":", $message_tokens[0]);
            $user_id = $user_tokens[1];
            break;
        
        case 'develop/live':
            
            break;
        
        case 'develop/report':
            $message_queue = array ();
            //<div class="tabs-selected" title="View/Modify Time Table" style="padding:10px">
            //<div id="timetabletab" title="Reports" style="padding:10px">
            $message_queue["timeline"] = "class!:!'tabs-selected'!,!title!:!'Timeline Report'!,!style!:!'padding:10px'";
            $message_queue["timetable"] = "class!:!'tabs-selected'!,!title!:!'Timetable Report'!,!style!:!'padding:10px'";
            $message_queue["text"] = "class!:!'timetabletab'!,!title!:!'Text Report'!,!style!:!'padding:10px'";
            
            foreach ($message_queue as $message_key => $message) {
                $div = new DIV();$grade_attendance = array ();
                //GET SCHOOL GRADES from SETTINGS
                //FOREACH GRADE
                //--- FOREACH DAY PAST SINCE SCHOOL START DATE TO DATE
                //------- GET TOTAL NUMBER OF LEARNERS PRESENT
                //------- BY SUBTRACTING TOTAL NUMBER OF LEARNERS IN ABSENTEES FOR THE GRADE
                //------- ASSOCIATE DATE AND ATTENDANCE PER GRADE
                $q = "SELECT settings FROM schoollms_schema_userdata_timetable_settings WHERE school_id = ?";
                $q_data = array ($school_id);
                $data->prepareDataDatabaseQuery($q);
                $data->db_query->execute($q_data);
                $settings = $data->db_query->fetchColumn();

                $settings_tokens = explode("|", $settings);
                $from_grade_tokens = explode ("=", $settings_tokens[5]);
                $to_grade_tokens = explode ("=", $settings_tokens[6]);

                if ($from_grade_tokens[1] == 'R'){
                    $from_grade = 0;
                } else {
                    $from_grade = $from_grade_tokens[1];
                }

                $to_grade = $to_grade_tokens[1];

                //GET SYS ARCH
                $out = array();
                exec("wmic cpu get DataWidth", $out);
                $bits = strstr(implode("", $out), "64") ? 64 : 32;

                //TODAY
                $today = date('D:d M:m Y H:i:s');

                //GET START DATE
                //Get Today Items
                $today_items = explode(" ", $today);
                //echo "today Items : $today_items";
                $year = $today_items[2];
                $q = "SELECT year_id FROM schoollms_schema_userdata_school_year WHERE year_label = ?";
                 $q_data = array ($year);
                 $data->prepareDataDatabaseQuery($q);
                 $data->db_query->execute($q_data);
                 $num_rows = count($data->db_query->fetchAll());
                 if ($num_rows == 1){
                     $data->db_query->execute($q_data);
                     $row = $data->db_query->fetch();
                     $year_id = $row['year_id'];
                 } else {
                     //ADD NEW YEAR

                 }
                $month_items = explode(":", $today_items[1]);
                $day_items = explode(":", $today_items[0]);
                $clock_items = explode(":", $today_items[3]);

                //Get Year Start Date
                $q = "SELECT start_time FROM schoollms_schema_userdata_school_year_calendar WHERE calendar_type = 1 AND year_id IN (SELECT year_id FROM schoollms_schema_userdata_school_year WHERE year_label = ?)";

                //$data = new Data("db");
                $data->prepareDataDatabaseQuery($q);

                $q_data = array ($year);

                $data->db_query->execute($q_data);

                //$row = $data->db_query->fetchColumn();

                $start = $data->db_query->fetchColumn();//$row['start_time'];//"2017|01|02|00|00|00"

                $year_start_date_items = explode("|", $start);

                //Fix Date Format to YYYY-MM-DD
                //Find Todays Timetable Day
                $today_token = "$year-$month_items[1]-$day_items[1]";
                $start_date_token = "$year_start_date_items[0]-$year_start_date_items[1]-$year_start_date_items[2]";

                $count_grade = $from_grade;
                while ($count_grade <= $to_grade){
                    //GET NUM LEARNERS
                    $q = "SELECT DISTINCT * FROM schoollms_schema_userdata_learner_schooldetails WHERE grade_id = ? AND class_id IN (SELECT class_id FROM schoollms_schema_userdata_school_classes WHERE year_id = ? AND class_label LIKE ?)";
                    //echo "Q $q <br>";
                    $data->prepareDataDatabaseQuery($q);

                    $q_data = array ($count_grade,$year_id,"CLASS%");

                    $data->db_query->execute($q_data);

                    $total_grade_learners = count($data->db_query->fetchAll());

                    //$total_grade_learners = $row["num_learners"];

                    $count_days = 1;
                    $new_num_days = 0;
                    $last_day = $start_date_token;

                    //Get Num Days
                    $message = "$start_date_token!~!$today_token!~!%a";
                    $num_days = timetable_date_difference($message);

                    //echo "NUM DAYS $num_days";

                    //echo "<br> START DAY $last_day";
                    //Weekends
                    $weekends = array ("Sat", "Sun");

                    while ($count_days <= $num_days){
                        $message = "$last_day!~!1!~!0!~!0";
                        $next_day =  timetable_add_date($message);
                        $next_day_tokens = explode(" ", $next_day);

                        //echo "<br> NEXT DAY $next_day";

                        $year = $next_day_tokens[2];
                        $month_items = explode(":", $next_day_tokens[1]);
                        $day_items = explode(":", $next_day_tokens[0]);
                        $clock_items = explode(":", $next_day_tokens[3]);

                        //Check Weekends
                        if (in_array($day_items[0], $weekends)){
                            //Do Nothing
                        } elseif (timetable_day_is_holiday($next_day)) {//Check Holidays
                            //Do Nothing
                        } else {
                            $day_string = "$day_items[1]-$month_items[1]-$year";
                            $day_string2 = "$day_items[1]-$month_items[0]-$year";
                            //echo "DAY $count_days DATE $next_day <br>";
                            $time = strtotime($day_string);
                            $time = gmdate("M d Y", $time);
                            $time = timetable_adjust_time($bits, $time);

                            $q = "SELECT DISTINCT(learner_id) FROM schoollms_schema_userdata_learner_attendance_record WHERE day_date = ? AND class LIKE ?";
                            $data->prepareDataDatabaseQuery($q);
                            $q_data = array ($day_string2,"CLASS%$count_grade%");
                            $data->db_query->execute($q_data);

                            $total_grade_learners_absent = count($data->db_query->fetchAll());
                            $total_grade_learners_present = $total_grade_learners - $total_grade_learners_absent;

                            //echo "BITS $bits DAY $day_string STRTIME $time TOTAL GRADE $count_grade LEARNERS $total_grade_learners ABSENT $total_grade_learners_absent PRESENT $total_grade_learners_present<br>";

                        }

                        $next_day = "$year-$month_items[1]-$day_items[1]";
                        $last_day = $next_day;
                        $count_days++;
                    }
                    //exit;

                    $count_grade++;
                }
                //echo "user_view_body_content_tabs MSG: $message <br>";
                $div->setDIVSettings($message);
               
                switch ($message_key) {
                    
                    case 'timeline':
                        $school_id = 1;
                        $grade_attendance = array ();
                        //GET SCHOOL GRADES from SETTINGS
                        //FOREACH GRADE
                        //--- FOREACH DAY PAST SINCE SCHOOL START DATE TO DATE
                        //------- GET TOTAL NUMBER OF LEARNERS PRESENT
                        //------- BY SUBTRACTING TOTAL NUMBER OF LEARNERS IN ABSENTEES FOR THE GRADE
                        //------- ASSOCIATE DATE AND ATTENDANCE PER GRADE
                        $q = "SELECT settings FROM schoollms_schema_userdata_timetable_settings WHERE school_id = ?";
                        $q_data = array ($school_id);
                        $data->prepareDataDatabaseQuery($q);
                        $data->db_query->execute($q_data);
                        $settings = $data->db_query->fetchColumn();

                        $settings_tokens = explode("|", $settings);
                        $from_grade_tokens = explode ("=", $settings_tokens[5]);
                        $to_grade_tokens = explode ("=", $settings_tokens[6]);
                        
                        if ($from_grade_tokens[1] == 'R'){
                            $from_grade = 0;
                        } else {
                            $from_grade = $from_grade_tokens[1];
                        }
                        
                        $to_grade = $to_grade_tokens[1];
                        
                        //GET SYS ARCH
                        $out = array();
                        exec("wmic cpu get DataWidth", $out);
                        $bits = strstr(implode("", $out), "64") ? 64 : 32;
                        
                        //TODAY
                        $today = date('D:d M:m Y H:i:s');
                        
                        //GET START DATE
                        //Get Today Items
                        $today_items = explode(" ", $today);
                        //echo "today Items : $today_items";
                        $year = $today_items[2];
                        $q = "SELECT year_id FROM schoollms_schema_userdata_school_year WHERE year_label = ?";
                         $q_data = array ($year);
                         $data->prepareDataDatabaseQuery($q);
                         $data->db_query->execute($q_data);
                         $num_rows = count($data->db_query->fetchAll());
                         if ($num_rows == 1){
                             $data->db_query->execute($q_data);
                             $row = $data->db_query->fetch();
                             $year_id = $row['year_id'];
                         } else {
                             //ADD NEW YEAR

                         }
                        $month_items = explode(":", $today_items[1]);
                        $day_items = explode(":", $today_items[0]);
                        $clock_items = explode(":", $today_items[3]);

                        //Get Year Start Date
                        $q = "SELECT start_time FROM schoollms_schema_userdata_school_year_calendar WHERE calendar_type = 1 AND year_id IN (SELECT year_id FROM schoollms_schema_userdata_school_year WHERE year_label = ?)";

                        //$data = new Data("db");
                        $data->prepareDataDatabaseQuery($q);

                        $q_data = array ($year);

                        $data->db_query->execute($q_data);

                        //$row = $data->db_query->fetchColumn();

                        $start = $data->db_query->fetchColumn();//$row['start_time'];//"2017|01|02|00|00|00"

                        $year_start_date_items = explode("|", $start);

                        //Fix Date Format to YYYY-MM-DD
                        //Find Todays Timetable Day
                        $today_token = "$year-$month_items[1]-$day_items[1]";
                        $start_date_token = "$year_start_date_items[0]-$year_start_date_items[1]-$year_start_date_items[2]";

                        $count_grade = $from_grade;
                        while ($count_grade <= $to_grade){
                            //GET NUM LEARNERS
                            $q = "SELECT DISTINCT * FROM schoollms_schema_userdata_learner_schooldetails WHERE grade_id = ? AND class_id IN (SELECT class_id FROM schoollms_schema_userdata_school_classes WHERE year_id = ? AND class_label LIKE ?)";
                            //echo "Q $q <br>";
                            $data->prepareDataDatabaseQuery($q);

                            $q_data = array ($count_grade,$year_id,"CLASS%");

                            $data->db_query->execute($q_data);

                            $total_grade_learners = count($data->db_query->fetchAll());

                            //$total_grade_learners = $row["num_learners"];
                        
                            $count_days = 1;
                            $new_num_days = 0;
                            $last_day = $start_date_token;

                            //Get Num Days
                            $message = "$start_date_token!~!$today_token!~!%a";
                            $num_days = timetable_date_difference($message);

                            //echo "NUM DAYS $num_days";

                            //echo "<br> START DAY $last_day";
                            //Weekends
                            $weekends = array ("Sat", "Sun");

                            while ($count_days <= $num_days){
                                $message = "$last_day!~!1!~!0!~!0";
                                $next_day =  timetable_add_date($message);
                                $next_day_tokens = explode(" ", $next_day);

                                //echo "<br> NEXT DAY $next_day";

                                $year = $next_day_tokens[2];
                                $month_items = explode(":", $next_day_tokens[1]);
                                $day_items = explode(":", $next_day_tokens[0]);
                                $clock_items = explode(":", $next_day_tokens[3]);

                                //Check Weekends
                                if (in_array($day_items[0], $weekends)){
                                    //Do Nothing
                                } elseif (timetable_day_is_holiday($next_day)) {//Check Holidays
                                    //Do Nothing
                                } else {
                                    $day_string = "$day_items[1]-$month_items[1]-$year";
                                    $day_string2 = "$day_items[1]-$month_items[0]-$year";
                                    //echo "DAY $count_days DATE $next_day <br>";
                                    $time = strtotime($day_string);
                                    $time = gmdate("M d Y", $time);
                                    $time = timetable_adjust_time($bits, $time);
                                    
                                    $q = "SELECT DISTINCT(learner_id) FROM schoollms_schema_userdata_learner_attendance_record WHERE day_date = ? AND class LIKE ?";
                                    $data->prepareDataDatabaseQuery($q);
                                    $q_data = array ($day_string2,"CLASS%$count_grade%");
                                    $data->db_query->execute($q_data);

                                    $total_grade_learners_absent = count($data->db_query->fetchAll());
                                    $total_grade_learners_present = $total_grade_learners - $total_grade_learners_absent;
                                    
                                    echo "BITS $bits DAY $day_string STRTIME $time TOTAL GRADE $count_grade LEARNERS $total_grade_learners ABSENT $total_grade_learners_absent PRESENT $total_grade_learners_present<br>";
                                    
                                }

                                $next_day = "$year-$month_items[1]-$day_items[1]";
                                $last_day = $next_day;
                                $count_days++;
                            }
                            //exit;
                            
                            $count_grade++;
                        }
                        exit;
                        break;
                    
                    case 'timetable':
                        
                        break;
                    
                    case 'text':
                        
                        break;
                    default:
                        break;
                }
            }
            break;
        
        case 'develop/install':
            $message_queue = array ();
            //<div class="tabs-selected" title="View/Modify Time Table" style="padding:10px">
            //<div id="timetabletab" title="Reports" style="padding:10px">
            $message_queue["install"] = "class!:!'tabs-selected'!,!title!:!'Install Registration'!,!style!:!'padding:10px'";
            $message_queue["track"] = "class!:!'tabs-selected'!,!title!:!'Develop '!,!style!:!'padding:10px'";
            $message_queue["timetable"] = "class!:!'timetabletab'!,!title!:!'Develop Timetable'!,!style!:!'padding:10px'";
            $message_queue["classes"] = "class!:!'tabs-selected'!,!title!:!'Develop Classes'!,!style!:!'padding:10px'";
            $message_queue["teacher"] = "class!:!'timetabletab'!,!title!:!'Develop Teachers'!,!style!:!'padding:10px'";
            $message_queue["learners"] = "class!:!'tabs-selected'!,!title!:!'Develop Learners'!,!style!:!'padding:10px'";
            $message_queue["subjects"] = "class!:!'tabs-selected'!,!title!:!'Develop Subjects'!,!style!:!'padding:10px'";
            $message_queue["marks"] = "class!:!'tabs-selected'!,!title!:!'Develop Marks'!,!style!:!'padding:10px'";
            $message_queue["calendar"] = "class!:!'tabs-selected'!,!title!:!'Develop Calendar'!,!style!:!'padding:10px'";
        
            break;
        
        case 'develop/timetable/load/mhs/learners':
            $message_queue = array ();
            //<div class="tabs-selected" title="View/Modify Time Table" style="padding:10px">
            //<div id="timetabletab" title="Reports" style="padding:10px">
            $message_queue["load"] = "class!:!'tabs-selected'!,!title!:!'Load Timetable Data'!,!style!:!'padding:10px'";
            $message_queue["filter"] = "class!:!'tabs-selected'!,!title!:!'Filter'!,!style!:!'padding:10px'";
            $message_queue["view"] = "class!:!'timetabletab'!,!title!:!'View'!,!style!:!'padding:10px'";
            
            foreach ($message_queue as $message_key => $message) {
                $div = new DIV();
                //echo "user_view_body_content_tabs MSG: $message <br>";
                $div->setDIVSettings($message);
               
                switch ($message_key) {
                    
                    case 'load':
                        $school_id = 2;
                        $user_type = 2;
                        
                        $dsn = "mysql:host=localhost;dbname=mhslms_qa_vas_timetable;charset=utf8";
                        $opt = [ PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
                                    //PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
                                    PDO::ATTR_EMULATE_PREPARES   => false,
                                ];

                        $link = new PDO ($dsn, 'root', '$0W3t0');
                        $data_message = array();
//                        $data_message["db"] = "sphslms_qa_vas_timetable";
//                        $data_message["engine"] = "mysql";
//                        $data_message["type"] = "db";
//                        $data_message["username"] = "root";
//                        $data_message["password"] = "$0W3t0";
//                        $data_message["host"] = "localhost";
//                        $data_message["charset"] = "utf8";
                        
                        //$schooldb = new Data($data_message);
                        $school_settings = array ();
                        $school_settings["periods"] = 9;
                        $school_settings["days"] = 10;
                        
                        $grades = array ();
                        $grades[] = "8";
                        $grades[] = "9";
                        $grades[] = "10";
                        $grades[] = "11";
                        $grades[] = "12";
                        
                        $school_subjects = array ();
                        $school_subjects[] = array('abrev' => "AFRA", 'name'=> "Afrikaans Eerste Addisionele Taal");
                        $school_subjects[] = array('abrev' => "AFRH", 'name'=> "Afrikaans Huistaal");
                        $school_subjects[] = array('abrev' => "BSTD", 'name'=> "Besigheidstudies / Business Studies");
                        $school_subjects[] = array('abrev' => "EBWR", 'name'=> "EBW Rek / EMS Acc");
                        $school_subjects[] = array('abrev' => "ECON", 'name'=> "Ekonomie / Economics");
                        $school_subjects[] = array('abrev' => "EBW", 'name'=> "Ekonomiese Bestuurswetenskappe / Economic Business Management");
                        $school_subjects[] = array('abrev' => "ENGA", 'name'=> "English First Additional Language");
                        $school_subjects[] = array('abrev' => "ENGH", 'name'=> "English Home Language");                        
                        $school_subjects[] = array('abrev' => "ENVI", 'name'=> "Enviro");
                        $school_subjects[] = array('abrev' => "PHSC", 'name'=> "Fisiese Wetenskappe / Physical Sciences");
                        $school_subjects[] = array('abrev' => "HOSP", 'name'=> "Gasvryheidstudies / Hospitality Studies");
                        $school_subjects[] = array('abrev' => "GEOG", 'name'=> "Geografie / Geography");
                        $school_subjects[] = array('abrev' => "IGO", 'name'=> "Ingenieursgrafika en Ontwerp / Engineering graphics and Design");
                        $school_subjects[] = array('abrev' => "IT", 'name'=> "Inligtingstegnologie / Information Technology");
                        $school_subjects[] = array('abrev' => "LAP", 'name'=> "Landbou Plantkunde /Agri Botany");
                        $school_subjects[] = array('abrev' => "LAV", 'name'=> "Landbou Veekunde / Animal Science");
                        $school_subjects[] = array('abrev' => "AGRM", 'name'=> "Landboubestuurspraktyk / Argricultural Management Practice");
                        $school_subjects[] = array('abrev' => "AGRT", 'name'=> "Landboutegnologie / Agricultural Technology");
                        $school_subjects[] = array('abrev' => "AGRS", 'name'=> "Landbouwetenskap / Agricultural Sciences");
                        $school_subjects[] = array('abrev' => "LEE", 'name'=> "Lees / Reading");
                        $school_subjects[] = array('abrev' => "LIFE", 'name'=> "LewensoriÃ«ntering / Life Orientation");
                        $school_subjects[] = array('abrev' => "LFSC", 'name'=> "Lewenswetenskappe / Life Sciences");
                        $school_subjects[] = array('abrev' => "PT", 'name'=> "Liggaamlike Opvoeding / Physical Training");
                        $school_subjects[] = array('abrev' => "NW_F", 'name'=> "Natuurwetenskappe (Fisiese Wetenskappe) / Natural Sciences (Physical Sciences)");
                        $school_subjects[] = array('abrev' => "NW_L", 'name'=> "Natuurwetenskappe (Lewenswetenskappe) / Natural Sciences (Life");
                        $school_subjects[] = array('abrev' => "CATN", 'name'=> "Rekenaartoepassingstegnologie / Computer Application Technology");
                        $school_subjects[] = array('abrev' => "RV", 'name'=> "Rekenaarvaardigheid / Computer Literacy");
                        $school_subjects[] = array('abrev' => "ACCN", 'name'=> "Rekeningkunde / Accounting");
                        $school_subjects[] = array('abrev' => "SEPH", 'name'=> "Sepedi Home Language");
                        $school_subjects[] = array('abrev' => "CVLT", 'name'=> "Siviele Tegnologie / Civil Technology");
                        $school_subjects[] = array('abrev' => "SK", 'name'=> "Skeppende Kuns / Creative Arts");                                      
                        $school_subjects[] = array('abrev' => "SW_A", 'name'=> "Sosiale Wetenskappe (Geografie) / Social Sciences (Geography)");                       
                        $school_subjects[] = array('abrev' => "SW_G", 'name'=> "Sosiale Wetenskappe (Geskiedenis) / Social Sciences (History)");
                        $school_subjects[] = array('abrev' => "TEKN", 'name'=> "Tegniese Tekene / Technical Drawing");
                        $school_subjects[] = array('abrev' => "TEGN", 'name'=> "Tegnologie / Technology");                        
                        $school_subjects[] = array('abrev' => "TRSM", 'name'=> "Toerisme / Tourism");
                        $school_subjects[] = array('abrev' => "TO", 'name'=> "Toesig / Supervision");                        
                        $school_subjects[] = array('abrev' => "TOA", 'name'=> "Toesig A / Supervision A");                        
                        $school_subjects[] = array('abrev' => "TOB", 'name'=> "Toesig B / Supervision B");                                                
                        $school_subjects[] = array('abrev' => "MATH", 'name'=> "Wiskunde / Mathematics");                      
                        $school_subjects[] = array('abrev' => "MLIT", 'name'=> "Wiskunde Geletterdheid / Maths Literacy");
                        $school_subjects[] = array('abrev' => "WIVR", 'name'=> "Wiskunde verryking / Mathematic Enrichment");
                        $school_subjects[] = array('abrev' => "XITH", 'name'=> "Xitsonga Home Language");   
                        $school_subjects[] = array('abrev' => "BYBEL", 'name'=> "Bible / Bybel");
                        $school_subjects[] = array('abrev' => "ALGS", 'name'=> "Algemene Gesyferdheid / General Numeracy");
                        $school_subjects[] = array('abrev' => "SAAL", 'name'=> "Assembly");
                        $school_subjects[] = array('abrev' => "TEST", 'name'=> "Test");
                        $school_subjects[] = array('abrev' => "LO", 'name'=> "Life Orientation");
                        $school_subjects[] = array('abrev' => "XITH/WVER", 'name'=>"XITH/WVER");
                        $school_subjects[] = array('abrev' => "XITH/LO", 'name'=>"XITH/LO");
                        $school_subjects[] = array('abrev' => "XITH/PT", 'name'=>"XITH/PT");
                        $school_subjects[] = array('abrev' => "XITH/ALG", 'name'=>"XITH/ALG");
                        $school_subjects[] = array('abrev' => "XITH/LAV", 'name'=>"XITH/LAV");
                        $school_subjects[] = array('abrev' => "XITH/LAP", 'name'=>"XITH/LAP");
                        $school_subjects[] = array('abrev' => "XITH/GST", 'name'=>"XITH/GST");
                        $school_subjects[] = array('abrev' => "XITH/ALGS", 'name'=>"XITH/ALGS");
                        $school_subjects[] = array('abrev' => "XITH/LEES", 'name'=>"XITH/LEES");
                        $school_subjects[] = array('abrev' => "XITH/TEKN", 'name'=>"XITH/TEKN");
                        $school_subjects[] = array('abrev' => "XITH/READ", 'name'=>"XITH/READ");
                        $school_subjects[] = array('abrev' => "XITH/RV", 'name'=>"XITH/RV");
                        $school_subjects[] = array('abrev' => "MATH/WWG", 'name'=>"MATH/WWG");
                        $school_subjects[] = array('abrev' => "MATH/MML", 'name'=>"MATH/MML");
                        $school_subjects[] = array('abrev' => "WIVR/WVER", 'name'=>"WIVR/WVER");
                        $school_subjects[] = array('abrev' => "SEPH/WVER", 'name'=>"SEPH/WVER");
                        $school_subjects[] = array('abrev' => "SEPH/READ", 'name'=>"SEPH/READ");
                        $school_subjects[] = array('abrev' => "SEPH/LO", 'name'=>"SEPH/LO");
                        $school_subjects[] = array('abrev' => "SEPH/PT", 'name'=>"SEPH/PT");
                        $school_subjects[] = array('abrev' => "SEPH/ALG", 'name'=>"SEPH/ALG");
                        $school_subjects[] = array('abrev' => "SEPH/ALGS", 'name'=>"SEPH/ALGS");
                        $school_subjects[] = array('abrev' => "SEPH/LAV", 'name'=>"SEPH/LAV");
                        $school_subjects[] = array('abrev' => "SEPH/RV", 'name'=>"SEPH/RV");
                        $school_subjects[] = array('abrev' => "SEPH/TEKN", 'name'=>"SEPH/TEKN");
                        $school_subjects[] = array('abrev' => "SEPH/LEES", 'name'=>"SEPH/LEES");
                        
                        $learner_timetable_load = array ();
//                        $learner_timetable_load[] = "BARBEIRO N-11A#Bezuidenhout,Laryn+Botha,Xander Carolus+Brooks,Aricia Clarisse+De Klerk,Alexander+Du Toit,Ronel+Elbrecht,Bianca+Erasmus,Reinhardt+Fourie,LinÃ©+Gerber,Barri JandrÃ¨+Geyer,Marichelle+Jansen Van Rensburg,Kyle+Kristensen,Hilma Camilla+Lombard,Antje Marise+Lubbe,Frederick Heinke+Maree,Heinrich Georg+Mc Lean,Anri+Mellett,Jason David+Oosthuizen,DonnÃ©+Schoeman,Kyla+Smith,Jean Francois+Spaumer,Johanna Christina Joleen+Van Den Bergh,SimonÃ© Jacqueline+Van Der Merwe,Corli+Van Der Merwe,Genevieve+Van Der Merwe,Petrus Stephanus+Van Heerden,James William Trollip+Van Wyk,TwanÃ©+Venter,Carmi+Venter,CinÃ©+Venter,Mathilda";
//                        $learner_timetable_load[] = "BARBEIRO N-ACCN-K1_11#BrÃ¼mmer,Christelle+De Klerk,Alexander+Geyer,Marichelle+Khoza,Xavani Bruce+Kirstensen,Hilma+Ledwaba,Boitumelo+Mankgabe,Sampson Serabole+Maponya,Tetelo Joseph+Mc Lean,Anri+Mohale,Clide+Mokgola,Thapelo+Ngobeni,Tlangelani+PÃ¶hl,Letilda+Raolane,Mahlatse William+Schreuder,Hugo Amos+Shai,Thabiso Maile+Shaikh,Shaahil Mohmedsoeb+Venter,Carmi";
//                        $learner_timetable_load[] = "BARBEIRO N-ACCN-K4_11#Ahir,Bhumika+Bhuiyan,Mohammed,All Mukaddim+Dipela,Lesetja+Glazer,Anya+Mabidilala,Glory Mosima+Mabunda,Desiree+Malahlela,Reneiloe Pearl+Malepe,Maboke Austin+Mamorobela,Kgabo Onica+Maphoto,Melvyn Takatso M+Mbhalati,Xitshembiso Promise+Modiba,Tumiso Gideon Modibe+Mohale,Nelson+Monyela,Boney Tshepo+Pheeha,Lawrence Thato+Rabothata,Phetole Tshepang+Ralekgokgo,Mosotho Rebotile+RammutlaNkabinde,Kamogelo Karabo+Ramoshaba,Nicholas Neo+Selatlha,Amogelang Seemole+Shokane,Thato";+
//                        $learner_timetable_load[] = "BARBEIRO N-ACCN-K1_12#Avdysh,Lera+Coetzee,Zulike+Lephata,Dineo+Maswanganyi,Chantelle+Matlala,Reshoketswe+McLean,Marlu+Mokoena,Tumelo+Muller,Joh Hendrik+Munduku,Nehemie+Nzadi,Belinda+Pretorius,Stefan+Rabapane,Joy+Schalkwyk,Jean-Luc+Schoeman,Zenelde+Sedutla,Karabo+Sekgobela,Kgathalo+Shipalana,Ndzhaka+Tema,Javulani+Van Heerden,Verena+Van Heerden,Danelle+Venter,Clariska+Wevell,Magaret";
//                        $learner_timetable_load[] = "BARBEIRO N-ACCN-K3_12#Devdhara,Viraj+Devenish,Jenna+Hlungwani,Musa+Hussein,Abdulaa+Ibrahim,Faizel+Lebea,Makoma+Lebepe,Magadima+Legodi,Patricia+Letsoalo,Elsworth+Mabilo,Noko+Madshiga,Qiniso+Maponya,Sammy+Moshwana,Bongani+Mpiana,Perside+Mthembi,Peter+Ndala,Ntsako+Nkuna,Precious+Prinsloo,Stefan+Schlebusch,Chelsea+Sedutla,Utshehone+Senyolo,Mohlao";
//                        $learner_timetable_load[] = "BARBEIRO N-8B#Abdul,Miriam Bibi+Albertus,Kadin+Anderson,Thryck Dean+Buys,Hayley-Kay+Chiloane,Peace Maditlou+Dagra,Zaide Majidbhai+Dalrymple-hay,Emma Charlotte+De Sousa,Luca+Feerawala,Rizwana Aiyub+Junqueira,Saira-Louisa+Kalla,Muhammad Yasseen Yusuf+Kaundi,Nyasha Mosa+Knott,Gavin Benjamin+Kurten,Katelyn+Mahlane,Kgadi Selaelo Anele+Maila,Mukovhe Charlotte+Makgoba,Mpho+Malatji,Marubini Salphinah+Malatji,Tebogo Khothatso+Malepe,Thapelo Knowledge+Malik,Sanah Kulsum+Mande,Mwema Junior+Marais,Ariane+Modika,Rebotile+Modjela,Katlego Paseka+Murhombo,Ntwanano Singwa+Myburgh,Matt+Patel,Kishankumar Sanjaykumar+Pelzer,Zandre+Ralekgokgo,Tshegofatso+Ramokhola,Khomotso Charmaine+Rodrigues,Donovan Bettencourt+Sathekge,Ditsepu Brendan+Shingwenyane,Akani Dedeya+Thobisi,Ivakele Oko+Van Den Dool,Erik+Van Zyl,Erin Rayne";
//                        $learner_timetable_load[] = "BARBEIRO N-8F#Hlaisi,Tiyani+Hlongwane,Naledi Emmeretia+Jerenyama,Keith+Kgatla,Bokang Prosper+Lepulana,Kabelo Will+Maapolela,Itumeleng Mokete+Mabasa,Hlonipho Kheightly+Mafambe,Mark Gordon+Mahasha,Lethabo Motsatsi+Makgoba,Regaogetswe Motale+Malatji,Kamogelo Joy+Malebe,Mabora Onicca Edith+Maphalle,Llokoane Annah+Mashapa,Mpho Teko+Mathebula,Hlulani Victory+Matlou,Botse Lerato Pila+Memba,Rikitai Chipo+Mkhwana,Lulama Angel+Mmola,Mahlatse+Mogoboya,Tiisetso Masilo+Mohale,Mogale Thato Hondrius Benedict+Mongwe,Mark Antony+Moseamedi,Precious Relebogile+Nkgapele,Kgaugelo Moses+Nkolele,Nyiko+Nkuna,Khanyisile Mia+Nkuna,Lulama Wisani Themba+Rabapane,Karabo Victor JNT+Rikhotso,Lungile Mturukani+Sebola,Veronica+Sekhula,Motlatso Precious Tshegofatso+Shiluvane,Palesa Praise+Shingange,Khanyisa Kurhula+Shingange,Rocken+Zandile,Sindiso Lungile";
//                        $learner_timetable_load[] = "BARBEIRO N-8D#Bols,Joelle Gabrielle Bridgette+Botha,Louis+Coppen,Kita Stewart+Dagra,Aamina+Griffiths,Ethan Jed+Ismail,Shaakir Ibrahim+Khosa,Mixo Prince+Kotze,Amelia+Kubayi,Mikateko Nhlaiseko+Leshebane,Fortune Mahlatse+Liliwala,Zuveriyah Yusuf+Livingstone,Theodora Boikanyo+Loughor-Clarke,Samuel Martin+Malatji,Kamogelo+Manthata,Lebohang Phillipine+Maponya,Ronel Modjadji+Matjokotja,Thapelo Mapula+Matsepane,Nkgabole Abraham+Modiba,Matsatsi Linah+Modika,Rendani+Mohale,Dinoka Enerst+Molemane,Rethakgetse Mankwana+Motau,Mothibedi Clyde+Mthembi,Mbuyelo Malcolm+Muhammad,Abu Huraira+Mushwana,Ketekile Darlene Fikila+Ngonyoza,Shumikazi Sarah Jnr+Nyakale,Manto Herbelin+Page,Michaela Valerie+Patel,Mohammed Aadil Akhter Husain+Radzuma,Unanne Remembrance+Sekgobela,Kgabo Lebatamela Blaze+Sekhula,Barak Matome+Seshoene,Sunday Robert+Shaikh,Sana Fatima Muhammed Soeb+Shingange,Hlayisanani Ruth+Terblanche,Rain Logan+Van Der Heever,Morne";
//                        $learner_timetable_load[] = "BARBEIRO N-TO-K3_10#Vandermerwe,Jamie+Schoeman,Ruette+Ali,Farhiya+Hunter,Ross bird+Chaput,Bevan David Jean+Engelbrecht,Quen+Wewege,Rohan Jaun+Kader,Zoe Ann+Letsoalo,Motsiri kabelo+Caroto,Ruben+J v vuuren,Nakishka+Vermeulen,Cecil Petrus+Scholtz,Keagan+Modika,Phetole";
                        $learner_timetable_load[] = "BOUWER S-9C#Bester,Edna+Botha,Jessica Marnel+Brummer,Michelle+Bruwer,Albertus Jacobus+Cloete,Meggan+Corbett,Suandrie+Delport,Neil+Du Preez,Lerese+Fourie,Gerhardus+Gouws,Abby+Horn,Pierre+Hunt,Ashley+Janse Van Rensburg,Jason+Jansen,Malcolm+Kirstein,Crystal+Kruger,Ruan+Lombard,Mienke+Meyer,Tenay+O'brien,Liam Troy+Ouwenkamp,Clarissa+Pieterse,Melissa+Prinsloo,Bianca+Schenettler,Ebertes Fritz+Schutte,Simone+Stucki,Ignatius+Swart,Gerhaedus Lodewikus+Van Der Schyff,Ruan+Van Der Walt,Weener Neels+Van Heerden,Dawid+Van Schalkwyk,Manica+VanStaden,Gerhardus+Viviers,Adre";
                        $learner_timetable_load[] = "BOUWER S-TRSM-K3_10#Lelope,Moswatse Tshepo+Blessie,Leon+Dancer,Nicholas Luke+Armstrong,Chatharina Petronella+Pretorius,Jacqueline+Mills,Tamzyn-Jade+MÃ¶ller,CharnÃ©+Yacoob,Humairaa+Ramakgolo,Tokollo+J Van Vuuren,Theunis Johannes+Fourie,Ruan Chris+Van Rooyen,Arno+Cloete,Stian+Muller,Megan+Mac,Nicol Meghan+Kgapola,Karabo+Mabilo,Masilo+O'reilly,Emile+Haagner,Dewald+Loam,Paddy+V Der Westhuizen,Andrew Baird+Ramokgano,Mosibudi Bridget+Rae,Charney Carma+Tonsing,Arnu Ernset+Ramodisa,Poela Delvin";
                        $learner_timetable_load[] = "BOUWER S-TRSM-K4_11#Booysen,Hein+Brits,Helga-Marie+Buys,Cameron+Dannhauser,Tammy+De Klerk,Alexander+Erasmus,Anilia+Ferreira,Carmen+Geldenhuys,Anromien+Goosen,Jehan+Hlokwe,Modjadji+Jooste,Delux+Lottering,Belinda+Luckhoff,Belinda+Luus,Juane+Maenetje,Kgutatso+Makumbila,Comfort+Malogadithlare,Kgopotso+Manamela,Masedi+Maree,Lie-Elen+Maritz,JJ+Moagi,Austin+Muller,Karisha+Nothnagel,Francois+O'Brain,Courtney+Pieterse,Daneyl+Pretorius,Alicia+Saunders,Berendt+Shaik,Shadmaan+Shiels,Daniella+Smith,Simone+Swart,Vincent+Tromp,Eden+Venter,Michelle+Young,Jordin";
                        $learner_timetable_load[] = "BOUWER S-SW_G-9A#Albertiyn,Tenia Megan+Booysen,Zane+Ceney,Gerhardes Jan-Hendrik+Coetzee,Frederick Johann+Coppen,Jade+Du Plessis,Devon+Gerber,Endriku Spuy+Geyer,Jane Arona+Gubitz,Duan+Holtshaudzen,Gerhardus Josua+Human,Conrika+Jackson,Canell+Janse Van Rensburg, Wandri+Knoetze,Reuben Juvan+Le Roux,Christiaan Luke+Liversage,Juane+Meyer,Charlize+Muller,Nicole+Naude,Jan Daniel+Nieuwoudt,Leandre+Pienaar,Jaun-Paul+Pieters,Chantelle+Pretorius,Janette+Rassouw,Duan+Schuch,Istvan+Swanepoel,Heidi+Van Swegen,Gerhard Jacobus+Van Der Merwe,Andries Petrus+Van Der Westhuizen,Lache+VilJoen,Myrna Veronica+Wiers,Roland Anrich";
//                        $learner_timetable_load[] = "CLAASEN B-12D#Bill,Jason Chris+Botes,Megan+Bridger,Courtney Ann+Chu,Britney+Coetzer,Francois Paul+Coleman,Richard+Coppen,Wayne Stewart+De Agrela,Jessica+Delport,Nikita+Devdhara,Viraj Sinh+Devenish,Jenna+Dix-Peek,CÃ©an Wayne+Gangat,Raabia Ahmed+Ibrahim,Faizel+Kader,Adam Zachariah+Lind,Angelique+Middleton,Amelia+Modan,Aaliya+Mokoena,Tumelo+Moosa,Tahiyya+Mthembi,Peter Vrey+Ndala,Ntsako Rufaro Ebenezer+Neophytou,Marco+Nzadi,Ilunga Belinda+Patel,Sana Maqsood+Schalkwyk,Jean-Luc+Schlebusch,Chelsea Victoria+Snyman,Henrentia+Stephenson,Hayley Kirstie+Stevens,Jordan Thomas+Tromp,Benjamin+Van Der Westhuizen Avdysh,Valeriia  Albertivna";
//                        $learner_timetable_load[] = "CLASSEN B-TO-K1_12#Theron,Wileen+Bothma,Christiaan+Eva,Charlotte+Grobler,Alicia+Middleton,Amelia+Moshwana,Bongani+Mostert,Phillipus+Oberholzer,Johan+Snyman Rentia";
//                        $learner_timetable_load[] = "CLASSEN N-8E#Basson,Karen+Bovil,Ruvan+Brits,Chenae+De Beer,Jacques Jason Michiel+De Klerk,Franco Eduard+Du Preez,Dillion Charl+Du Toit,Jone+Erasmus,Hercules Philippus+Fritz,Lune+Gouws,Dean Russel+Hugo,Aldrich+Jourbert,Carika+Katzke,Gunther+Kilian,Abigail+Liebenberg,Sherize+Lordan,Andries Stefanus+Meyer,Abraham Christiaan+Nothnagel,Christopher Willem+Olivier,Kayla+Pienaar,Jean-Jacques+Potgieter,Stephanie+Rheeder,Jaden Donovan+Rood,Annalene+Seaman,Jean-Pierre+Smit,Jayden+Smith,Cornelia+Stucki,Jan-Hendrik+Taylor,Charize+Tolmay,George+Van Niekerk,Thomas+Venter,Andre+Visagie,Leola+Visagie,Luandi+Visser,Jaco Dylan";
//                        $learner_timetable_load[] = "CLAASEN N-BSTD-K3_11#Bhuiyan,Mohammed All Mukaddim+Buys,Cameron-Lynn+Dipela,Lesetja+Geldenhuys,Anromien+Herrendoerfer,Dylan Tyron+Khoza,Xavani Bruce+Kruger,Anje+Ledwaba,Boitumelo+Luckhoff,Belinda+Luus,Juane+Maenetje,Kgutatso Hasmon+Makumbila,Nkateko Comfort+Bhumika,Abir+Mamorobela,Kgabo Onica+Manamela,Masedi Tony+Mohale,Clide+Mokgola,Thapelo+Muller,Karisha+Ngobeni,Tlangelani+Nothnagel,Francois Johan+O'Brein,Courtney Stephany+Pohl,Letilda+Pretorius,Alicia+Ramoshaba,Nicholas Neo+Raolane,Mahlatse William+Schoeman,Kyla+Shaikh,Shaahil Mohmedsoeb+Spaumer,Johanna+Young,Jordin Leigh";
//                        $learner_timetable_load[] = "CLAASEN N-BSTD-K4_11#Adendorff,Shea Gabriella+Banade,Bernalee+BrÃ¼mmer,Christelle+Geyer,Marichelle+Jansen van Vuuren,Tayla Ann+Joubert,Jaco-Jacques+Kirstensen,Hilma+Knox,Hennerien+Maake,Lekgolo Piet+Maakomela,Shibu Judy+Mabasa,Pascaline+Mabunda,Thembikile+Mailula,Pontsho Dorothy+Malogadithlore,Kgopotso+Malope,Mosima+Mande,Mbuyi Jenny+Matevula,Dzunisani+Mc Intosh,Ashley+Monyela,Kabelo+Nkolel,Makungu+Nortje,Nadia+Oosthuizen,DonnÃ©+Preece,Dee-Anne+Sparrow,Courtney Jade+Stephenson,Paige+Van Vuuren,Imcke+Van Zyl,Jeanette+Viljoen,Tima+Viviers,Jordan";
//                        $learner_timetable_load[] = "COETZEE N-TO-K1_10#Badenhorst,Mianke+Cloete,Stian+Hunt,Sean John+Pieterse,Heinrich Carl+Ras,Nicolene";
//                        $learner_timetable_load[] = "COETZEE N-HOSP-K4_10#Pretorius,Adriaan+Smith,Alexander Johannes+Maila,Reineth+Joubert,JeandrÃ©+Strydom,Tuney+Modiba,Mpho Koketso Natasha+Masenya,Mpho Danielle+Bezuidenhout,Ockert+Du Preez,Siegfried Pieter+Badenhorst,Mianke+Van den Dool,Karl+Malapane,Mantsha Johannah+Nkoana,Meriam Mmatapa+Brits,Janca Chrizel+Goosen,Marno+Kader,Zoe Ann+Letsoalo,Motsiri Kabelo+Vermeulen,Cecil Petrus+Fourie,Ruan Chris+Cloete,Stian+Muller,Megan+O'reilly,Emile+Rae,Charney Carma";
//                        $learner_timetable_load[] = "COETZEE N-HOSP-K1_11#BuÃ¿s,Cameron-Lynn+Kloppers,Esme+Goosen,Jehan+Lotterin,Laurene Belinda+Luus,Juane+Maenetje,Lerato Bernice+Matevula,Dzunisani+Oosthuizen,DonnÃ©+Pieterse,Danyel+Preece,Dee-Anne+Pretorius,Alicia+Schoeman,Kyla+Smith,SimonÃ©+Sparrow,Courtney Jade+Venter,Michelle+Viljoen,Timna+Vorster,Gideon+Young,Jordin Leigh";
//                        $learner_timetable_load[] = "COETZEE N-HOSP-K2_11#Brummer,Christtelle+De Klerk,Alexander+Du Plessis,Dennis+Du Toit,Ronel+Goosen,Johannes Jurgens+Jansen Van Vuuren,Tayla Ann+Joubert,Jaco-Jacques+Lind,Jessica+Mailula,Pontsho Dorothy+Malogadithlare,Tevin Sandile T+Maila,Fikile Elgin+Mcintosh,Ashley+Mouton,Joane+O'Brein,Courtney+Ralekgokgo,Mosotho Rebotile+Saunders,Brendon+Small,Marne+Sparrow,Courtney+Stephenson,Paige+Theron,Juan Jacques+Tromp,Eden+Van Niekkerk,Sancha+Viviers,Jordan+Woodwaed,Shade Temat";
//                        $learner_timetable_load[] = "COETZEE N-HOSP-K2_12#Baker,Cara-Mia+Bothma,Christiaan+Eva,Charlotte+Grobler,Alicia+Horne,Adri+Immelman,Amore+Modan,Aaliya+Moller,Wilmari+Mostert,Phillipus+Slabber,John+Smith,Damian+Van Helsdingen,Vivian";
//                        $learner_timetable_load[] = "COETZEE N-HOSP-K3_12#Brink,Nicola+Broodryk,Willa+Davis,JJ+De Agrela,Jessica+Delport,Nikita+Lind,Kirsten+Van Wyngaardt,Lara+Venter,Clariska+Warmenhoven,RiÃ«tte+Wolmarans,DenÃ©"; 
//                        $learner_timetable_load[] = "DOHSE F-9G#kiapway,Mashadi Linsia+Kiapway,Nadine Ndadunya+Letsoalo,Omkemetse Moses+Maake,Itumeleng Innocent+Maake,Njabadi Fazel+Maenetja,Mohale Kabelo Ally+Magabane,Lepudi+Mahasha,Phetole Patrick+Makwela,Mashilo Relebogile+Malatji,Dimpho Maropeng+Malematja,Ngwanamogale Robby+Maluleke,Nkutsulo+Mankgape,Phetole Willium+Manyama,Florence Maropeng+Masiakwala,Trinity+Maswanganyi,Nyeleti Precious+Mathebula,Mamaila Shantel+Mathye,Rirhandzu+Mhlari,Katekai Roy+Mhlongo,Mixo+Mojela,Nthabiseng Edwinah+Monyethabene,Koketso Chantel+Moshwane,Cheyeza Tintswalo+Mosila,Koketso+Mothobuka,Makhulwana Molatela+Motshekga,Matsobane Raletsatsi+Mthembi,Ndzalama Shaun+Ramokgoma,Nonhlanhla Mokgadi+Sedutla,Tumiso+Siwisa,Sinethemba Ntsakisi";
//                        $learner_timetable_load[] = "DOHSE F-AGRT-K2_10#Spaumer,Garreth+Beukes,Revan De Leeuw+D'aecy,Bradley+Kleynhans,Doran+O'Reilly,Emile+Vermeulen,Cecil Petrus+Bezuidenhout,Ockert+Crinje,Armand+Fivaz,Dian+Grobler,Marnus+Kok,Christiaan Pieter+De Lange,Dillon+Du Preez,Siegfried Piter+Haanger,Dewald+Loam,Paddy+Sander,Jerome+V D Westhuizen,Andrew Baird+Van Den,Dool Karl+Van Wyk,Willem Christoff+Albertus,Kieran+Gows,Pieter+van Niekerk,Colin+Scholtz,Keagan";
//                        $learner_timetable_load[] = "DOHSE F-AGRT-K3_10#Le,Grange ArnÃ©+Mare,Petrus,paulus+Strydom,Johannes Gerhardus+DeSouse,Simeon+Mauwane,Moeletsi prince+Graham,Andrew Lyle+Pieterse,Heinrich carl+Ras,Nicolene+Engelbrecht,Gideon+Koster,Ulrich+Niemann,Gert jacobus+Corbett,Stefanus Johannes+Hartzenberg,Ruben+Hunt,Sean John+Mafa,Mojalefa Trevor+Goosen,Marno+Van Onselen,Kevin";
//                        $learner_timetable_load[] = "DU PREEZ I-9F#Ali,Rahma Abdikadar Mohammed+Blandin De Chalain,Dominique Lee+Botes,Jennifer+Chikuwa,Charline+Delawala,Mohammed Mahmud Manzurhusen+Hendriks,Kyla+Ismail,Ubaidullah Ibrahim+Jackson,Tristan Halkett+Jeanson,Caleb+Kesa,Kapil Sharmesh+Machimana,Phatimani+Makda,Talhah+Malatji,Lethabo Pearl+Mametja,Pheladi Mamokone+Masehela,Refilwe Ntsakisi+Mbiza,Vasizakele+Mc Intosh,Kellan Navarre+Mhlongo,Vutlhari Tlangelani+Mohamed Goolam,Huisain+Muhammad,Shah Zaib+Ntshaba,Asanda Siphesihle+Patel,Ashraf+Patel,Mohammed Harun+Rametse,Kgomotso Katlego Maria+Rasetsoke,Tshepo Vanessa+Rijkenberg,Robert Fredderick+Sefomolo,Lekgolo Tumiso+Shibamba,Xihlovo Ofana+Taylor,Matthew Twentyman+Titi,Rethabile+Vos,Tayla Soann+Yassin,Zain";
//                        $learner_timetable_load[] = "DREYER A-TO-K2_10#Goosen,Marno+Mabotja,Kabelo Darren+Nukeri,Zenesia Gavaza+Rabothata,Mohale Glen+Rae,Charney Carma+Van Onselen,Kevin+Leshabane,Lebepa+Mabunda,Prince+Molawa,Solomon+Brits,Janca Chrizel+Shiels,Mathew+Tonsing,Arnu Ernst+Haynes,Louis+Brahmbhatt,Simran Darshan+Gibson,Chelsey";
//                        $learner_timetable_load[] = "DREYER A-TO-K3_12#Burger,Jean-Luc+Findlay,Chantelle+Horne,Adri+Mohale,Karabo+Moller,Wilmari+Muhlarhi,Nyeleti+Potgieter,Roelien+Van Heerden,Verena+Lind,Kirsten+Pohl,Lilly";
//                        $learner_timetable_load[] = "FOURIE D-CATN-K2_10#Dagra,Husen,Hanif+Lelope,Moswatse Tshepo+Patel,Mubin+VanDerMerwe,Jamie+Blessie,Leon+Dancer,Nocholasluke+Ngobeni,Molemisi+Modika,Phetole Emmanuel+Naude,Eduan+Armstong,Chatharina Petronella+Basson,Anize+Schoeman,Ruette+Venter,Juanet+Le Grange,Arne+Schoeman,Janet+Ali,Farhiya+Botha,Tiaan+De Klerk,Willem Abraham+Jacobs,Reinette+Kuisis,Chistopher+Maguire,Lisa+Mostert,Lize+Ramango,Mosibudi+Rosslee,Shani+Sekhula,Ernesto+Singo,Siwe+Theron,Danielle Casey+Warren,Kyle Jordan";
//                        $learner_timetable_load[] = "FOURIE D-CATN-K3_11#Jansen Va Vuuren,Tayla Ann+Joubert,Jaco-Jacques+Lambane,Risana+Lind,Jessica+Malahlela,Renelioe Pearl+Malope,Mosima+Maphoto,Melvyn Takatso M+Maswanganyi,Masana Shapiro+Mogabe,Kwena+Monyela,Kabelo+Ngobeni,Kenan Ashley M+Oosthuizen,Donne+Rabothana,Phetole Tshepang+Skinner,Bianca+Smith,Simone+Sparrow,Courtney Jade+Stephenson,Paige+Weidemann,Morne+Wilders,Jurie";
//                        $learner_timetable_load[] = "FOURIE D-CATN-K4_11#Bahre,Ulrich+Bezuidenhout,Laryn+Bhumika,Ahir+Botes,Clari+Du Toit,Ronel+Fourie,LinÃ©+Hlaisi,Nanadi+Jansen Van Rensburg,Kyle+KrÃ¼ger,Anje+Mafaralala,Tshwarelo Noah+Malogadithlare,Tevin Sandile T+Mathebula,Pleasure Nhlengiwe+Mawila,Fikile Elgin+Mbhalati,Phumla Nadine+Mc Lean,Anri+Mohawa,Lisa+Shikhati,Gladys Nkateko+Stoltz,Casper+Van Coller,Carla+Van der Merwe,Corli+Van Jaarsveld,Willem Dawid+Woodward,Shade";
//                        $learner_timetable_load[] = "FOURIE D-CATN-K1_12#Beetge,Rudolph+Brink,Nicola+Broodryk,Willa+Coertz,Messhell+Davis,JJ+Findlay,Chantelle+Homu,Ronnel+Horne,Adri+Immelman,Amore+Jordaan,Casper Hendrik+Mohale,Karabo+Moller,Wilmari+Niewoudt,Hanro+Pohl,Lilly+Potgieter,Roelien+Van Helsdingen,Vivian+Van Wyngaardt,Lara";
//                        $learner_timetable_load[] = "FOURIE D-CATN-K4_12#Avdysh,Lera+Coetzee,Zulike+Devenish,Jenna+Du Toit,Brandon+Greeff,Ulrich+Human,Elmie+Kadar,Adam+Maponya,Jason P A+McLean,Marlu+Meintjies,Johan+Middleton,Amelia+Ndala,Ntsako+Nkuna,Precious+Schlebusch,Chelsea+Sedutla,Karabo+Slabber,John+Venter,Clariska+Warmenhoven,RiÃ«tte";
//                        $learner_timetable_load[] = "FOURIE L-CVLT-K1_11#Bahre,Ulrich+Botes,Clari+Brits,Helga-Marie+Erasmus,Anilia+Erasmus,Reinhardt+Fourie,Jeandre+Hoyer,JP+Lubbe,Heinke+Maree,Heinrich+Mohawa,Lisa+Ngobeni,Prince+Pieterse,Gerhard+Pretorius,Bester+Sambo,Enslin+Sanderson,Lionel+Schambriel,Luan+Smuts,Roy+V d Merwe,Petrus Stephanus+Visagie,Stephan+Wigginton,Marc";
//                        $learner_timetable_load[] = "FOURIE L-AGRT-K3_11#Aucamp,Tiaan+Ball,Johnathan Dennis+Booysen,Hein+Booysen,JeandrÃ©+Du Plessis,Dennis+Jooste,Delux+Knox,Hennerien+Kubannek,Benjamin Perscy+Saunders,Berent+Scholtz,Wynand+Small,Morne+Swart,Vincent+Theunissen,Martin+Vorster,Gideon";
//                        $learner_timetable_load[] = "FOURIE L-AGRT-K4_11#Fourie,JeandrÃ¨ Stephanus+Gouws,Gullis+Janse,v Rensburg,Alanso+Janse v Rensburg,Rankin+Nel,JC+Pieterse,Gerhard+Pretorius,Bester+Schambriel,Calvin+Schambriel,Luan+Smuts,Roy+Stoop,Juan-Claude+V Jaarsveld,Dawie+Van Rooyen,Martin+Visagie,Stephan Mauritz+Von Burich,Ryno+Weideman,Morne+Wilders,Jurie";
//                        $learner_timetable_load[] = "FOURIE L-CVLT-K1_12#Banyini,Rivoningo+Botes,JohandrÃ©+Coetzer,Pieter+De Jongh,Anesca+Du Toit,Brandon+Erasmus,Cameron+Fernandes,Ockert+Greeff,Ulrich+Hugo,Ezri+Jardine,Leon+Kok,Johann+Meintjies,Johan+Mostert,Erich+O'Reilly,Eduard+Prinsloo,Stefan+Rabothata,Gabriel+Smith,Damian+Stephenson,Hayley+Stevens,Jordan+Swart,Ludique+Van Coller,Arnold+Van den Bergh,Kevin";
//                        $learner_timetable_load[] = "FOURIE L-AGRT-K3_12#Botes,JohandrÃ©+Coetzer,Pieter+Du Toit,Brandon+Erasmus,Cameron+Eva,Charlotte+Jardine,Leon+Jordaan,Casper Hendrik+Kok,Johann+Meintjies,Johan+Mostert,Phillipus+MÃ¼ller,Helgard+Niewoudt,Hanro+O'Reilly,Eduard+Slabber,John+Smith,Damian+Stevens,Jordan+Swart,Ludique+Van Coller,Arnold";
//                        $learner_timetable_load[] = "FOURIE L-AGRT-K4_12#Fourie,AJ+Beetge,Rudolph+Bothma,Christiaan+Coetzer,Francois+Coppen,Wayne+Davis,JJ+Delport,Nikita+Horne,Helgardt+Le Grange,JD+Lombard,Barend,Petrus+Oberholzer,Johan+Pretorius,Jan-Carel+Schutte,Ralph+Snyman,Rentia+Van Rooyen,Pieter+Venter,Timothy";
//                        $learner_timetable_load[] = "GERBER C-12E#Banyini,Rivoningo+Hlongwane,Nomathamsanqa Melany+Hlungwani,Musa+Homu,Ronnel Tintswalo+Kubayi,Musa+Legodi,Patricia Kgomotlokwa+Malatji,Noko Meshack+Maluleke,Somi Shadi Daemeon+Malundu,Rose Ndaye+Maponya,Jason Peagane Anaias+Maponya,Mashile Samuel+Mashao,Harshy Khomotso+Mboweni,Nwananga Hlangano Bukuta+Moshwana,Bongani Greatful+Munduku,Nehemie Ngamayamu Dagoga+Nkuna,Modjadji Precious+Rabothata,Gabriel+Sedutla,Karabo+Sedutla,Utshehone+Shipalana,Ndzhaka Keren";
//                        $learner_timetable_load[] = "HAAR H-8C#Basson,Janke+Bezuidenhout,Kacques+Breed,Danielle+De Klerk,Erik Johannes+Dreyer,Desire+Du Plessis,Leon Willem+Eloff,Johannes Frederick+Ferns,Zuleika+Fourie,Retief Pieter De Villiers+Honiball,John Robert+Jardine,Megan+Joubert,Salmon Christof Johannes+Le Roux,Marie-Louise+Le Roux,Richard+Maritz,Christiaan+Myburgh,Marcus+Nienaber,Marinka+Oosthuizen,Dylan Stephen+Potgieter,Marine+Pretorius,Juan+Robson,Jaimie Isabella+Rossouw,Lizmari+Schambriel,Shaun+Schutte,Mariesa+Smit,Daniel Ross+Strydom,Francois Johan+Strydom,Megan+Theron,Alex+Thompson,William Roland+Van Der Westhuizen,Stefan+Van Veenhuysen,Nikita Salmone+Van Zyl,Zandre+Venter,Jolene+Visagie,Harry+Wiers,Armand Wilhelm";
//                        $learner_timetable_load[] = "HAY E-9B#Barnard,Marne+Coetzee,Johannes, Cornelius+De Lange,Stephanus Jacobus+Du Plessis,Rohan+Du Toit,Joha+Fleischmann,Judi+Gerhardt,Carlien+Hamilton,John-Paul+Haynes,Johan+Horak,Elizma+Human,Henrico+Jacobs,Johannes Stephanus+Jansen Van Rensburg,Eruzanne+Kasselman,Danielle+Keizer,Marise+Kok, Ruan+Le Roux,Iszabella+Meyer,Johann De Marco+Natorp,Colleen Emilia+Nkuna,Stella+Pretorius,Janique+Schmidt,Cherlyn Kay Stephanie+Schultz,Heinrich+Spaimer,Jodi Marie+Van Biljon,Bertie Pieter Barnard+Van Der Merwe,Juvan Phillipus Lodewickus+Van Nikkelen Kuyper,Mariska+Viljoen,Tiaan";
//                        $learner_timetable_load[] = "KATZEKE M-11E#Dipela,Lesetja+Hlokwe,Modjadji Reatile+Ledwaba,Boitumelo+Maakomela,Shibu Judy+Mabasa,Angel Pascaline+Maenetje,Kgutatso Hasmon+Maenetje,Lerato Bernice+Mafaralala,Tshwarelo Noah+Mailula,Pontsho Dorothy+Maimele,Ebenezer Ntsakiso+Makumbila,Nkateko Comfort+Malahlela,Reneiloe Pearl+Malogadihlare Lion,Kgopotso Jerome+Malogadihlare,Tevin Sandile Tebogo+Malope,Katlego Sharon+Mamorobela,Kgabo Onica+Mande,Mbuyi Jenny+Mathevula,Dzunisani Tshepiso+Mawila,Fikile Elgin+Moagi,Austine Mogau+Mohale,Nelson+Mokgola,Thapelo+Molawa,Simon Ramphidi+Ngobeni,Hlulani Harold+Ngobeni,Keenan Ashley Minkhenso+Ngobeni,Tlangelani+Pheeha,Lawrence Thato+Rabothata,Phetole Tshepang+Rammutla Nkabinde,Kamogelo Karabo+Raolane,Mahlatse William+Selatlha,Amogelang Seemole+Shai,Katlego+Shaik,Shadmaan+Shokane,Thato";
//                        $learner_timetable_load[] = "KATZEKE M-LFSC-K2_11#Albertyn,Dirk+Ball,Jonathan+Booysen,Hein+Booysen,Jeandre+Botha,Carlene+Maimela,Ebenezer+Malogadithlare,Kgopotso+Malope,Mosima+Maphoto,Melvyn Takatso M+Maswanganyi,Masana Shapiro+Ngobeni,Kenan Ashley M+Oosthuizen,Donne+Pio,Allisdar+Preece,Dee-Anne+Rammutla,Nkabinde Kamogelo Karabo+Saunders,Berent+Shiels,Daniella+Skinner,Bianca+Smith,Simone+Swart,Vincent+theunissen,Martin+Trzeciak,Angella Keletjo+Van Coller,Carla+Van Vuuren,Imcke+Weideman,Morne";
//                        $learner_timetable_load[] = "KATZEKE M-LFSC-K3_11#Bezuidenhout,Laryn+Brooks,Aricia Clarisse+Geyer,Marichell+Ferreira,Carmen+Gerber,Barri JandrÃ¨+Maake,Lekgolo Piet+Mabulana,Ngwakwana Ephodia+Mafaralala,Tshwarelo Noah+Mailula,Pontsho Dorothy+Mande,Mbuyi Jenny+Mankgabe,Sampson Serabole+Mbhalati,Phumla Nadine+Mc Lean,Anri+Mokgobi,Hope Mponeng+Molawa,Simon Ramphidi+Mouton,JohannÃ©+Sambo,Enslin+Hlaisi,Fumo+Fivaz,Michelle+Schreuder,Hugo Amos+Selatlha,Amogelang Seemole+Shai,Thabiso Maile+Shikhati,Gladys Nkateko+Maphoto,Melvyn+Van den Bergh,SimonÃ© Jacqueline+Van der Merwe,Genevieve+Viviers,Jordan+Hlokwe,Modjadji+Malagadithlare,Kgopotso+Glazer,Anya+Bernade,Barnalee+V Jaarsveld,Dawie+Kirstensen,Hilma+Viljoen,Timna+Lottering,Laurene Belinda+Pieterse,Danyal";
//                        $learner_timetable_load[] = "KATZEKE M-LFSC-K4_11#Aucamp,Tiaan+Chabalala,Fumo+Elbrecht,Bianca+Kesa,Jhillika Dharmesh+Kubbanek,Bennie+Lambane,Risana+Maenetje,Lerato Bernice+Maswangnayi,Honour+Mogale,Kwena+Molewa,Maruruu Basil+Ngobeni,Hlulani Harold+Ngobeni,Prince+Saunders,Brendon+Sekgobela,Khubi+Tengu,Praise Lumande+Theron,Juan Jacques+Van Der Bergh,Simone+Van der Merwe,Genevieve+Van Helsdingen,Hendrik J G+Van Wyk,Twane+Venter,Carmi+Venter,Cine+Venter,Mathilda+Zhanda,Monique Tovimba";
//                        $learner_timetable_load[] = "KOCH C-9D#Booysen,Karien+Botha,Renate+Burger,Anton Hendrik+Coertzen,Ian+Crafford,Dirk Willem+Demos,Chandler Glen+Els, Elyon+Engelbrecht,Pieter Ingenatius+Gaigher,Kayla+Grbler,Wessel Badenhorst+Ikel,Samantha Tracy+Janse Van Rensburg,Noelene+Joubert,Edward+Klopper,Johandrie+Liebenberb,Isak Johannes+Malherbe,Dian+Mokwena,Sippe Sello+Nelson,Adrie-Marie+Oosthuizen,Alexia Gerbriella+Potgieter,Dirk-Daniel+Potgieter,Frans-Hendrik+Pretorius,Amelda+Robertson,Jamie+Schreuder,Johannes Hendrik+Slabbert,Leone+Swan,Victor Adam+Theron,Jene+Tonsing,Tiaan+Van Der Berg,Shilo+Van Der westhuizen,Eloise+Van Niekerk,Zonica+Venter,Bercha+Wallace, Christo";
//                        $learner_timetable_load[] = "LAST A-8B#Abdul,Miriam Bibi+Albertus,Kadin+Anderson,Thryck Dean+Buys,Hayley-Kay+Chiloane,Peace Maditlou+Dagra,Zaide Majidbhai+Dalrymple-hay,Emma Charlotte+De Sousa,Luca+Feerawala,Rizwana Aiyub+Junqueira,Saira-Louisa+Kalla,Muhammad Yasseen Yusuf+Kaundi,Nyasha Mosa+Knott,Gavin Benjamin+Kurten,Katelyn+Mahlane,Kgadi Selaelo Anele+Maila,Mukovhe Charlotte+Makgoba,Mpho+Malatji,Marubini Salphinah+Malatji,Tebogo Khothatso+Malepe,Thapelo Knowledge+Malik,Sanah Kulsum+Mande,Mwema Junior+Marais,Ariane+Modika,Rebotile+Modjela,Katlego Paseka+Murhombo,Ntwanano Singwa+Myburgh,Matt+Patel,Kishankumar Sanjaykumar+Pelzer,Zandre+Ralekgokgo,Tshegofatso+Ramokhola,Khomotso Charmaine+Rodrigues,Donovan Bettencourt+Sathekge,Ditsepu Brendan+Shingwenyane,Akani Dedeya+Thobisi,Ivakele Oko+Van Den Dool,Erik+Van Zyl,Erin Rayne";
//                        $learner_timetable_load[] = "LAST A-AGRM-K1_10#Brits,Janca Chrizel+Caroto,Ruben+De,lange Dillon+Dent,Diane+Du,preez Siegfried Pieter+Haagner,Dewald+Hunter,Ross Bird+J v vuuren,Nakishka+Jackson,Ryan Lee+Loam,Paddy+Mac,Nicol Meghan+Mare,Petrus Paulus+Modika,Phetole emmanuel+MÃ¶ller,CharnÃ©+Naude,Eduan+Shiels,Mathew+Smith,Nicolette christine+Stander,Jerome+Strydom,Johannes Gerhardus+Tonsing,Arnu Ernst+V D westhuizen,Andrew Baird+Van Den,Dool,Karl+Van wyk Willem,Christoff";
//                        $learner_timetable_load[] = "LABUSCHAGNE E-IT-K4_12#Bill,Jason+Chu,Britney+Craffor,Lize+Fernandes,Ockert+Fleischmann,Eljana+GrovÃ©,Hermanus+Ibrahim,Faizel+Jordaan,Casper Hendrik+Mashao,Harshy Khomotso+Mboweni,Nwananga+Mostert,Erich+Mthembi,Peter+Munduku,Nehemie+Niewoudt,Hanro+Nzadi,Belinda+Prinsloo,Stefan+Rabothata,Gabriel";
//                        $learner_timetable_load[] = "LEUWNER M-CATN-K1_10#Beukes,Revan,de Leeuw+Botha,Luann Moureys+Chaput,Bevan David jean+Dale,Micaela Leigh+D'arcy,Bradley+Delport,Sinead+Engelbrecht,Quen+Fourie,Ruan Chris+Kgatla,Reabetswe+Kleynhans,Doran+Marobela,Mokgadi+Mills,Tamzyn-Jade+Moller,Juan-Jacques+O'reilly,Emile+Pretorius,Adriaan+Rabothata,Mohale Glen+Rae,Charney Carma+Roberts,Jade Marilyn+Schoeman,AimÃ©Ã©+Snyman,Liza-Ri+Van Onselen,Kevin+Van Rooyen,Arno+Vermeulen,Cecil Petrus";
//                        $learner_timetable_load[] = "LEUWNER M-CATN-K1_11#Benade,Bernalee+Ferreira,Carmen+Geldenhuys,Anromien+Gerber,Barri+Glazer,Anya+Maakomela,Shibu Judy+Maimela,Ebenezer+Maree,Lie -Elen+Maritz,Jacobus+Molawa,Simon Ramphidi+Molew,Maruruu Basil+Shiels,Daniella+Stoop,Juan-Claude+Theunissen,Martin+Trzeciak,Angella Keletjo+Van den,Bergh SimonÃ©+Van Rooyen,Marthinus+Van Wyk,TwanÃ©+Van Zyl,Jeanette+Venter,CinÃ©+Zhanda Monique,Tovimba";
//                        $learner_timetable_load[] = "LEUWNER M-CATN-K2_11#Adendorff,Shea Gabriella+Ahir,Bhumika+Bhuiyan,Mohammed All Mukaddim+Buys,Cameron-Lynn+Chabalala,Fumo+Dipelja,Lesetja+Elbrecht,Bianca+Erasmus,Anilia Jeme+Gouws,Gullis+Herrendoerfer,Dylan Toron+Hoyer,Johann Peet+Jooste,Delux+Khoza,Xavani Bruce+Kubbanek,Bennie+Luu,Juane+Malepe,Maboke Austin+Maphoto,Melvyn+Matevula,Dzunisani+Nothnagel,Francois Johan+Pohl,Letilda+Schoeman,Kyla+Shaikh,Shaahil Mohmedsoeb+Smuts,Rot+Tengu,Praise Lumande+V Jaarveld,dawie+Van Colle,Carla+Venter,Carmi+Venter,Michelle+Viljoen,Timna+Young,Jordin Leigh";
//                        $learner_timetable_load[] = "LEUWNER M-CATN-K2_12#Ali,Iqqr+Kader,Adam+Klopper,Dewald+Lordan,CronjÃ©+MacNicol,Hamish+Madshiga,Qiniso+Mpiana,Perside+Patel,Sana+Pretorius,Stefan+Schutte,Ralph+Sedutla,Utshehone+Shipalana,Ndzhaka+Stephenson,Hayley+Van Rooyen,Pieter+Van Rooyen,Andries";
//                        $learner_timetable_load[] = "LEUWNER M-CATN-K3_12#Baker,Cara-Mia+Botes,Megan+Crafford,Lize+De Jonge,Jeanne-Mari+Engelbrecht,Elzanne+Fernandes,Ockert+Fleischmann,Eljana+Grobler,Alicia+Hlongwane,Melany+Hugo,Ezri+Malatji,Noko+Mashianoke,Thato+Maswanganyi,Prince+Muller,John-Hendrik+Neophytou,Marco+Schoeman,Zenelde+Tromp,Benjamin+Van Dyk,Elzette+Van Rooyen,Andries+Wevell,Magaret";
//                        $learner_timetable_load[] = "LE ROUX A-10A#Badenhorst,Hugo willem+Basson,Anize+Blignaut,Janco abel+Botha, Luann Moureys+Conradie,Chaileen+Corbett,Stefanus Johannes+De Jonge,Jenelle+De Klerk,Willem Abraham+De lange,Steph-Marie+Engelbrecht,Gideon+Grobler,Marnus+Jacobs,Reinette+Kleynhans,Doran+Koster,Ulrich+Kristensen,Roelof Jakob Nicolai+Kuisis,Christopher+Maguire,Lisa+Moller,Juan-Jacques+Mostert,Lize+Naude,Eduan+Pohl,Kesia+Rautenbach,Gerhardus Ignatius+Rosslee,Shani+Schoeman,Ruette+Scholtz,Keagan+Snyman,Liza-ri+Spaumer,Garreth+Theron,Lin-Mari+Van Niekerk,Jan-Carel+Venter,Juanet+Wewege,Rohan Jaun";
//                        $learner_timetable_load[] = "MAPHATA V-10E#Barnatt,Paige+Caroto,Ruben+Chaput,Bevan David Jean+Dale,Micaela Leigh+Dancer,Nicholas Luke+Delport,Sinead+Freitas,Neville Elon Lees+Hlabyago,Shaun Kagiso Frederick+Howard,Kayla Tia+Hunter,Ross Bird+Jansen Van Vuuren,Nakishka+Kader,Zoe Ann+Leshabane,Lebepa+Lind,Jessica+Loam,Patrick Robert Langsford+Mabotja,Kabelo Darren+Maila,Reineth+Masete,Mampe+Maunatlala,Karabo Shibu+Mauwane,Moeletsi Prince+Molawa,Solomon Mokone Reabetswe+Molokwane,Mapula  Phillipine+Ngobeni,Molemisi+Nkuna,Munene Vukheta+Nyautore,Audrey ChiedzaPatel,Mubin+Rabothata,Mantsha Phomello+Rabothata,Mohale Glen+Rae,Charney Carma+Ramakgolo,Tokollo Maurice+Rapatsa,Mahlatse Matshapo Anna+Roberts,Jade Marilyn+Schoeman,AimeÃ©+Sekhula,Masilo Ernesto+Shai,Shirley+Shiels,Matthew+Van Den Dool,Karl+Yacoob,Humairaa";
//                        $learner_timetable_load[] = "MAPHATA V-XITH-K2_10#Mkhantswa,Siphosihle,Nomkhuleko+Maluleke,Khanimambo Victoria+Mamiane,Mmarema ketumile+Mboweni,Geraldine+Mdumela,Katekani Terence+Mkhabele,Vutomi Katekani+Nkuna,Munene+Mabunda,Suprise Bright+Mathye,Kulani Brighton+Mkhabela,Mvethi Velt+Ramodisa,Poela Delvin+Baloyi,Nyiko+Banyini,Shihluke+Mabuza,Justinah Mantuba";
//                        $learner_timetable_load[] = "MAPHATA V-XITH-K2_11#Chabalala,Fumo Mbhazima+Hlaisi,Nanadi Berthcandice+Lambane,Risana+Ledwaba,Boitumelo+Mabunda,Thembekile Desiree+Maenetje,Lerato Bernice+Maenetje,kgutatso Hasmon+Makumbila,Nkateko Comfort+Maswanganyi,Honour+Mathebula,Pleasure Nhlengiwe+Mbhalati,Phumla Nadine+Mbhalati,Xitshembiso Promise+Ngobeni,Xongani Prince+Ngobeni,Hlulani Harold+Ngobeni,Tlangelani+Nkolele,Mehleketo Makungu+Sambo,Enslin+Shikwambana,Andile Joy";
//                        $learner_timetable_load[] = "MAPHATA V-XITH-K2_12#Bill,Jason+Homu,Ronnel+Mabuza,Obed+Mageza,Khensani+Malungana,Hlawuleka+Mashele,Lemuka+Mbhalati,Xanani+Mokoena,Tumelo+Shikwambana,Nhlavutelo+Shokane,Dineo";
                        //$learner_timetable_load[] = "MARAIS W-12B#Beetge,Rudolph Johannes+Brink,Nicola+Burger,Jean-Luc Francois+Coetzer,Pieter Willem+Fernandes,Ockert Johannes+Findlay,Charnelle Chantelle Christel+Grobler,Alicia+Hugo,Ezri+Kok,Johannes Jacobus+Le Grange,Jean Daniel+Lordan,Johan Hermanus CronjÃ¨+MÃ¶ller,Wilmari+MÃ¼ller,Helgard+Oberholzer,Johan+O'neill,Roelien Jennefer+Pieterse,Leon Eugene+Pohl,Lilly-Dalene+Pretorius,Jan-Carel+Schutte,Ralph+Smit,Mariena+Swart,Ludique+Theron,Wileen+Van Rooyen,Pieter Johannes+Van Wyngaardt,Lara+Wolmarans,DenÃ©";                        $learner_timetable_load[] = "MASETE G-SEPH-K2_10#kapa,Motsewe+Letwane,Sewela Louisa+Maunatlala,Karabo+Kgatla,Reabetswe Mantsha+Marobela,Mokgadi+Maake,Karabo Andrew+Mashau,Prisca+Ramokgano,Mosibudi Bridget+Sethe,Thato+Kapa,Masindi Juliete+Lathane,Phuti Seth+Mfa,Mojalefa Trevor+Malatji,Tshegofatso Mohale+Masete,Mamape+Sekhula,Shawn Tumelo+Mlapane,Mantsha Johannah+Moremi,Mapula+Nkoana,Meriam Mmatapa+Boke,Madidimalo Mosima+Seima,Koketso Helen Ramokone";
//                        $learner_timetable_load[] = "MASETE G-SEPH-K2-11#Hlokwe,Modjadji Reatile+Maake,Lekgolo Piet+Mabidilala,Glory Mosima+Mabulana,Ngwakwana Ephodia+Mahlalela,Reneiloe Pearl+Mamorobela,Kgabo Onica+Mankgabe,Sampson Serabole+Maponya,Telelo Joseph+Modiba,Tumiso Gideon Modibe+Mogale,Karabo Kwena Tyson+Mohale,Clide+Mohale,Nelson+Mokgobi,Hope Mponeng+Mokgola,Thapelo+Molawa,Simon Ramphidi+Molewa,Maruruu Basil+Monyela,Boney Tshepo+Pheeha,Lawrence Thato+Raolane,Mahlatse William+Shai,Katlego";
//                        $learner_timetable_load[] = "MASETE G-SEPH-K2_12#Lebea,Makoma+Lebepe,Magadima+Legodi,Patricia+Lephata,Dineo+Letsoalo,Elsworth+Maake,Mankopane,Ngoako+Mabilo,Noko+Mahasha,Moleko+Makwala,Shoki+Makwala,Thato+Marobela,Katlego+Mashianoke,Thato+Miyeni,Koketso+Modiba,Samuel+Molewa,Naledi+Rabapane,Joy+Rampedi,Lerato+Sekgobela,Kgathalo+Senyolo,Mohlao+Tema,Javulani";
//                        $learner_timetable_load[] = "MASETE G-TO-K4_12#Botes,Megan+Coleman,Richard+Hussein,Abdulaa+Immelman,Amore+Kadar,Adam+Kok,Johann+Maponya,Jason+Pieterse,Eugene+Van Dyk,Elzette";
//                        $learner_timetable_load[] = "MUSHWANA G-10F#Albertus, Kieran+Ali,Farhiya Abdikadir Mohamed+Bala Patel,Maliha Maqsood+Bala Patel,Muhammad Maqsood+Baloyi,Nyiko Rhyllies+Brahmbhatt,Simran Darshan+Dagra,Husen Hanif+De Lange,Dillon+De Sousa,Simeon+Fourie,Ruan Chris+Gallant,Kgantsho Mafa Siyanda+Gibson,Chelsey+Graham,Andrew Lyle+Ivy,Daniella  Ashlea+Jackson,Ryan Lee+Joubert,JeandrÃ©+Kallaiger,Ruzba Fakirmohummad+Kgapola,Karabo+Mabilo,Masilo Mogau+Mabunda,Prince+Makhubela,Itumeleng+Manyama,Lethabo Nsatimuni+Masenya,Mpho Danielle+Modika,Ramoshaba Eugine+Molapisane,Radikhasa Sekgopo Aaron+Moosa,Rifqah+Moremi,Mapula Phildern+Nukeri,Zenesia Gavaza+Patel,Aasiya  Akhterhusain+Ramango,Mosibudi Katlego+Ramatseba,Kgaogelo Tebogo Comfort+SingoSiwe+Stander,Jerome+Theron,Danielle Casey+Warren,Kyle Jordan";
                        //$learner_timetable_load[] = "OLIVIER C-11C#Aucamp,Tiaan+Booysen,JeandrÃ©+Botha,Corlene+Brits,Helga-MariÃ©+Dannhauser,Tammeren+Du Plessis,Dennis Jnr+Geldenhuys,Anromien+Goosen,Johannes Jurgens+Gouws,Gullis Cornelius+Hoyer,Johann Peet+Jansen Van Rensburg,Alanso+Jansen Van Rensburg,Rankin+Kubannek,Benjamin Perscy+Lottering,Laurene Belinda+Luus,Juane+Maree,Lie-Elen+Maritz,Jacobus Johannes+MÃ¼ller,Karisha+Nel,Jc+Pieters,Johannes Gerhardus+Pieterse,Danyel+Pretorius,Alicia+Pretorius,Bester+Saunders,Brendon+Schambriel,Calvin+Schambriel,Luan+Scholtz,Wynand+Small,Jean MornÃ©+Swart,Vincent+Theunissen,Marthinus Phillipus+Van Burick,Ryno+Van Zyl,Jeanette Jani+Weideman,MornÃ¨";                        $learner_timetable_load[] = "OLIVIER C-HOSP-K2_10#Barnatt,Paige+Mulder,Joane+Pretorius,Jacqueline+Rabothata,Mantsha Phomello+Swart,Liezel+Dale,Micaela Leigh+Mills,Tamzyn-Jade+Schoeman,Aimee+Snyman,Liza-Ri+Howard,Kayla Tia+Molokwane,Mapula Phillipine+Lind,Jessica+Rautenbach,Gerhardus Ignatius+Hunter,Ross Bird+Moller,Charnr+Smith,Nicolette Christine+Nond,Dominique+De Jonge,Jenelle+Flattery,Cara+Oosthuizen,Ariel Zara+Ivy, Daniella Ashlea";
                        //$learner_timetable_load[] = "OLIVIER D-11F#Adendorff,Shea Gabriella+Bhuiyan,Mohammed All Mukaddim+Buys,Cameron-Lynn+Ferreira,Carmen+Herrendoerfer,Dylan Tyron+Jansen Van Vuuren,Tayla Ann+Lambane,Risana+Maake,Lekgolo Piet+Mabidilala,Glory Mosima+Mabunda,Thembekile Desiree+Manamela,Masedi Tony+Mankgabe,Sampson Sebabole+Maswanganyi,Honour+Maswanganyi,Masana Shapiro+Mathebula,Pleasure Nhlengiwe+Mc Intosh,Ashley+Modiba,Tumiso Gideon Modibe+Mogale,Karabo Kwena Tyson+Mohale,Clide+Molewa,Maruruu Basil+Monyela,Boney Tshepo+Monyela,Kabelo+Ngobeni,Xongani Prince+Nkolele,Mehleketo Makungu+Pio, Alisdair Sean+Preece,Dee-Anne+Ramoshaba,Nicholas Neo+Sambo,Enslin+Shaikh,Shaahil Mohmedsoeb+Shiels,Daniella+Shikwambana,Andile Joy+Skinner,Bianca+Sparrow,Courtney Jade+Stephenson,Paige+Theron,Jaun Jacques+Tromp,Eden+Trzeciak,Angela Keletjo+Viviers,Jordan+Woodward,Shade Temay+Young,Jordin Leigh";
//                        $learner_timetable_load[] = "OLIVIER D-IGO-K1_10#Badenhorst,Hugo Willem+Bezuidenhout,Ockert+Blignaut,Janco Abel+Cronje,Armand+Engelbrecht,Gideon+Fivaz,Dian+Gallant,Kgantsho+Grobler,Marnus+Joubert,JeandrÃ©+Kapa,Masindi Juliete+Kok,Christiaan Pieter+Koster,Ulrich+Kristensen,Roelof+Lathane,Phuti Seth+Lind,Jessica+Mabunda,Suprise Bright+Mathye,Kulani Brighton+Mkhabela,Mvethi Velt+Molawa,Solomon+Muller,Megan+Niemann,Gert Jacobus+Rautenbach,Gerhardus+Strydom,Tuney+Van Dyk,Lourencia Louisa+Verster,Arne+Wewege,Rohan Jaun";
//                        $learner_timetable_load[] = "OLIVIER D-IGO-K2_10#Botha,Luan Moureys+Chaput,Bevan David Jean+Moller,Juan-Jacques+Pretorius,Adriaan+Roberts,Jade Matilyn+Jackson,Ryan Lee+Mare,Petrus Paulus+Strydom,jOhannes Gerhadus+Freitas,neville elon lees+Smith,Alexander Johannes+Yacoob,Humairaa+De Sousa,Simeon+Mauwane,Moeletse Prince+Meyer,Megan+Pretorius,Noci+Graham,Andrew Lyle+Ramakgolo,Tokollo+Pieterse,Heinrich Carl+Ras,Nicolene";
//                        $learner_timetable_load[] = "OLIVIER D-IGO-K1_11#Du Toit,Ronel+Erasmus,Reinhardt+Fernandez,Dean+Jansen Van Rensburg,Kyle+Kloppers,EsmÃ©+Malogadithlare,Kgopotso+Mbhalati,Phumla Nadine+Mogale,Kwena+Sekgobela,Khubi+Selatlha,Amogelang Seemole+Smith,Francois+Spaumer,Johanna Christina J+Stephenson,Paige+Van Coller,Carla+Van Helsdingen,Hendrik J G+Venter,Mathilda+Wilders,Jurie Johannes+Woodward,Shade";
//                        $learner_timetable_load[] = "OLIVIER D-IGO-K3_11#Botes,Clari+Brits,Helga-Marie+Dalrymple-Hay,Angus C+Erasmus,Reinhardt+Fourie,Jeandre+Gouws,Gullis Cornelius+Hoyer,Johann Peet+Kloppers,Esme+Labuschagne,Joshua+Lubbe,Frederick Heinke+Mahowa,Lisa Mmabatho+Maree,Heinrich Georg+Muller,Sheldon Morland+Pieters,Gerhard+Sanderson,Jason+Schambriel,Luan+Smuts,Julius Roy+Stoop,Juan-Claude+Van Burich,Ryno+Van der Merwe,Petrus Stephanus+Van Niekerk,Sancha+Van Tonder,Donovan Craig+Visagie,Stephan+Wigginton,Marc Johan";
//                        $learner_timetable_load[] = "OLIVIER D-IGO-K2_12#Banyini,Rivoningo+Brink,Nicola+Burger,Jean-Luc+Chu,Britney+Davis,JJ+Du Toit,Brandon+Greeff,Ulrich+Kok,Johann+Lind,Kirsten+Lombard,Barend Petrus+Mashao,Harshy Khomotso+Mostert,Erich+Oberholzer,Johan+O'Reilly,Eduard+Rabothata,Gabriel+Snyman,Rentia+Kadar,Adam";
//                        $learner_timetable_load[] = "OLIVIER D-IGO-K4_12#Botes,JohandrÃ©+De Jongh,Anesca+Erasmus,Cameron+Eva,Charlotte+Jardine,Leon+Kader,Adam+Klopper,Dewald+Maake,Mankopane,Ngoako+Makwala,Thato+Maswanganyi,Chantelle+Miyeni,Koketso+Moshwana,Bongani+Pretorius,Stefan+Smith,Damian+Stephenson,Hayley+Stevens,Jordan+Swart,Ludique+Tromp,Benjamin+Van Coller,Arnold+Van den,BerghKevin";
//                        $learner_timetable_load[] = "OOSTHUIZEN S-LFSC-K1_11#Barnatt,Jade Catherine+Botha,Xander Carolus+Dannhauser,Tammy+Fivaz,Michelle+Fourie,LinÃ©+Gouws,Gullis+Hlaisi,Nanadi+Janse v Vuuren,Tayla+Jooste,Delux+KrÃ¼ger,Anje+Lombard,Antje+Mabidilala,Glory Mosima+Mabunda,Thembekile Desiree+Mathebula,Pleasure Nhlengiwe+Mawila,Fikile Elgin+Mbhalati,Xitshembiso Promise+Mcintosh,Ashley+Mellett,Jason David+Modiba,Tumiso Gideon Modibe+Mohale,Nelson+Monyela,Boney Tshepo+Monyela,Kabelo+MÃ¼ller,Karisha+Nortje,Nadia+NÃ¶thnagel,Francois Johan+Pheeha,Lawrence Thato+Ralekgokgo,Mosotho Rebotile+Shai,Katlego+Shikwambana,Andile Joy+Shokane,Thato+Sparrow,Courtney+Van Der Merwe,Corli+Van Heerden,James Wiliam T+Viviers,Jordan";
//                        $learner_timetable_load[] = "OOSTHUIZEN S-LFSC-K1-12#Baker,Cara+Bill,Jason+Botes,Megan+Chu,Britney+Crafford,Lize+Dix-Peek,Cean+Fleischmann,Eljana+Human,Elmie+Kader,Adam+Kubayi,Musa+Lordan,CronjÃ©+Maake,Mankopane Ngoako+Mashao,Harshy Khomotso+Ndala,Ntsako+O'Neill,Roelien+Patel,Sana+Pohl,Lilly+Slabber,John+Van Dyk,Elzette+Van Rooyen,Andries+Warmenhoven,RiÃ«tte";
//                        $learner_timetable_load[] = "OOSTHUIZEN S-LFSC-K3_12#Ali,Iqqr+Avdysh,Lera+Bridger,Courtney+Coetzee,Zulike+oetzer,Pieter+Coleman,Richard+GrovÃ©,Hermanus+Malatji,Noko+Maluleke,Somi+Maponya,Jason P A+Marobela,Katlego+Maswanganyi,Chantelle+Mboweni,Nwananga+McLean,Marlu+Middleton,Amelia+Miyeni,Koketso+Mthombeni,Tsundzu+Nzadi,Belinda+Pieterse,Eugene+Sedutla,Karabo+Theron,Wileen";
//                        $learner_timetable_load[] = "OOSTHUIZEN S-LFSC-K4_12#Banyini,Rivoningo+Brink,Nicola+Coetzer,Pieter+Engelbrecht,Elzanne+Gangat,Raabia+Grobler,Alicia+Hlungwani,Musa+Homu,Ronnel+Hugo,Ezri+J v Rensburg,Anri+Legodi,Patricia+Mabuza,Obed+Mageza,Khensani+Malungana,Hlawuleka+Modan,Aaliya+Molewa,Naledi+Moosa,Tahiyya+Mothlele,Segopotso+MÃ¼ller,Helgard+O'Reilly,Eduard+Pohl,Lilly+Schalkwyk,Jean-Luc+Schoeman,Zenelde+Shokane,Dineo+Smit,Mariena+Van Heerden,Danelle+Van Wyngaardt,Lara+Wolmarans,DenÃ©+Van Dyk,Elzette";
//                        $learner_timetable_load[] = "PEROLD S-AGRS-K4_10#De lange,Dillon+Oosthuizen,Ariel Zara+Shiels,Mathew+Bond,Dominique+Schoeman,Janet+Smith,Nicolette Christine+Jackson,Ryan lee+Mauwane,MoeletsiPprince+Basson,Anize+Flattery,Cara+Manyama,Lethabo+Dent,Diane+Nyautore,Audrey+Hunter,Ross bird+Caroto,Ruben+J v vuuren,Nakishka+Haagner,Dewald+Tonsing,Arnu ernst";
//                        $learner_timetable_load[] = "PEROLD S-AGRM-K1_11#Albertyn,Dirk Lemont+Aucamp,Tiaan+Ball,Johnathan Dennis+Bezuidenhout,Laryn+Booysen,Hein+Booysen,JeandrÃ©+Botha,Carlene+Brooks,Aricia Clarisse+Dalrymple-Hay,Angus C+Du Plessis,Dennis+Jansen v Rensburg,Alanso+Jansen v Rensburg,Rankin+Knox,Hennerien+Kubannek,Benjamin Perscy+Labuschagne,Joshua+Ngobeni,Kenan Ashley M+Saunders,Berent+Saunders,Brendon+Schambriel,Calvin+Scholtz,Wynand+Skinner,Bianca+Van Burich,Ryno+Van der Merwe,Genevieve+Van Jaarsveld,Willem Dawid+Van Niekerk,Sancha+Van Tonder,Donovan Craig+Weideman,MornÃ©";
//                        $learner_timetable_load[] = "PEROLD S-AGRS-K4_11#Albertyn,Dirk+Ball,Johnathan Dennis+Booysen,JeandrÃ©+Botha,Corlen+Brooks,Aricia Clarisse+Dalrymple-Hay,Angus C+Fivaz,Michelle+Labuschagne,Joshua+Maswanganyi,Masana Shapiro+Mouton,JohannÃ©+Scholtz,Wynand+Skinner,Bianca+Small,Morne+Theunissen,Marthinus P+Van Heerden,James Wiliam T+Van Tonder,Donovan Craig";
//                        $learner_timetable_load[] = "PEROLD S-AGRS-K1_12#Coleman,Richard+De Jonge,Jeanne-Mari+Engelbrecht,Elzanne+Fourie,AJ+GrovÃ©,Hermanus+J v Rensburg,Anri+Le Grange,JD+MacNicol,Hamish+Mboweni,Nwananga+MÃ¼ller,Helgard+Pieterse,Eugene+Schutte,Ralph+Van Rooyen,Pieter+Venter,Timothy";
//                        $learner_timetable_load[] = "PEROLD S-AGRM-K3_12#Beetge,Rudolph+Bothma,Christiaan+Coppen,Wayne+De Jongh,Anesca+Fourie,AJ+Horne,Helgardt+Le Grange,JD+Lombard,Barend Petrus+Lordan,CronjÃ©+MacNicol,Hamish+Oberholzer,Johan+O'Neill,Roelien+Pretorius,Jan-Carel+Schutte,Ralph+Smit,Mariena+Snyman,Rentia+Van den Bergh,Kevin+Van Rooyen,Pieter+Venter,Timothy";
                        //$learner_timetable_load[] = "PIRIE A-9E#Ajmal,Mohd-Hammad+Bezuidenhout,Juan+Bham,Aaliyan+Chauke,Hlamulo Well+Coppen,Jamie+Dipela,Tiisho Katse+Freitas,Benjamini Rui+Glazer,Nichola Louise+Griffiths,Talon Ernest+Herrendoerfer,Shannon Kashmira+Kalla,Abdur Rahmaan Yusuf+Loughor-Clarke,Kian John+Mahmood,Sibha+Mashile,Mmakhomo Keabetswe+Mashinya,Itumeleng+Mathebula,Bonga Ripfumelo+Mistry,Khushi+Modan,Zainab+Mohlala,Leshike Liken+Mohlele,Khutso Peace+Muller,Bevan Frank+Musara,Tadiwanashe Udelle+Nzita,Manashe+Patsikadova,Tadiwanashe Nester Nicole+Phalane,Thato Clyde+Selowa,Khomotso Primrose+Shaikh,Faaizah+Shilubane,Tivani+Skinner,Danika+Stanley,Michaela Eleanor+Tengu,Mukeina-Suzette+Van Zyl,Tertius";
//                        $learner_timetable_load[] = "PRINSLOO A-LFSC-K1_10#Albertus,Kieran+Armstrong,Chatharina,Petronella+Basson,Anize+Bond,Dominique+Corbett,Stefanus Johannes+Dejonge,Jenelle+Flattery,Cara+Freitas,Neville Elon Lees+Gouws,Pieter+GrovÃ©,Nina+Hartzenberg,Ruben+Haynes,Louis+Kader,Zoe Ann+Mafa,Mojalefa Trevor+Malatji,Tshegofatso Mohale+Masete,Mamape+Oosthuizen,Ariel Zara+Ramodisa,Poela Delvin+Schoeman,Ruette+Sekhula,Shawn Tumelo+Smith,Alexander Johannes+Van niekerk,Colin+Venter,Juanet+Yacoob,Humairaa";
//                        $learner_timetable_load[] = "PRINSLOO A-LFSC-K2_10#Kallaiger,Ruzba,Fakirmohummad+Modiba,Mpho Koketso Nathasha+Molapisane,Radi+Naude,Mia+Pohl,Danielle+Delport,Sinead+Maila,Reineth+Manyama,Lethabo+Shai,Shirley+Muller,Megan+Caroto,Ruben+Dent,Diane+J V Vuuren,Nakishka+Mac,Nicol Meghan+Delport,Sinead+Kgapola,Karabo+Mabilo,Masilo+Macgregor,Megan+Makhubela,Itumeleng+Masenya,Mpho Danielle+Moosa,Rifqah+Patel,Maliha Maqsood+Patel,Bala Muhammad Maqsood+De Lange,Steph-Marie+Knox,Marushke+Nyautore,Audrey+Pohl,Kesia+Ramatseba,Kgaogelo+Theron,Lin-Mari+Van Niekerk,Jan-Carel+Badenhorst,Mianke";
//                        $learner_timetable_load[] = "PRINSLOO A-LFSC-K3_10#Schoeman,Janet+Dale,Micaela,Leigh+Schoeman,Aimee+Snyman,Liza-Ri+Molokwane,Mapula Phillipine+Lind,Jessica+Smith,Nicolette Christine+Ivy,Daniela Ashlea+Moller,Juan-Jacques+Jackson,Ryan Lee+Gallant,Kgantsho Mafa Siyanda+Van Dyk,Lourencia Louisa+Spaumer,Garreth+Beukes,Revan De Leeuw+Kleynhans,Doran+Van Den Dool,Karl+Kapa,MasindiJuliete+Malapane,Mantsha Johannah+Nkoana,Meriam Mmatapa+Molawa,Solomon Mokone,Reabetswe+Brits,Janca Chrizel+Brahmhatt,Simran Darshan+Mboweni,Geraldine+Nkuna,Munene+Mabunda,Suprise Bright+Mabuza,Justinah Mantuba";
//                        $learner_timetable_load[] = "PRINSLOO A-LFSC-K4_10#Marobela,Mokgadi Puseletso Rishoketswe+Mashau,Prisca+Sethe,Thato+Moremi,Mapula+Mamiane,Mmarena ketumile+Barnatt,Paige+Mulder,JoanÃ©+Meyer,Megan+Kok,Christiaan Pieter+Verster,Arne+Van wyk,Willem Christoff+Mkhantswa,Siphosinhle Nomkhuleko+Maluleke,Khanimambo Victoria+Baloyi,Nyiko+Hlabyago,Shaun kagiso Frederick+Letwane,Sewela Louisa+Le grange,ArnÃ©+Strydom,Johannes Gerhardus+Graham,Andrew Lyle+Rautenbach,Gerhardus Ignatius+Botha,Luann Moureys+Blignaut,Janco Abel+Marcos,Marco Luis+Cronje,Armand+Maunatlala,Karabo+Lathane,Phuti Seth+Mabotja,Kabelo Darren+Chaput,Bevan David Jean+Lelope,Moswatse Tshepo+Van Der Westhuizen,Andrew Baird";
//                        $learner_timetable_load[] = "PRINSLOO A-TO-K2_11#Aucamp,Tiaan+Benade,Bernalee+Dannhauser,Tammeren+Ferreira,Carmen+Geldenhuys,Anromien+Geyer,Marichelle+Goosen,Johannes Jurgens+Jansev V Rensburg,Alanso+Jansen V Rensburg,Rankin+Kesa,Jhillika Dharmesh+Kruger,Anje+Lottering,Laurene Belinda+Luckhoff,Belinda+Manamel,Masedi Tony+Mareen,Lie-Elen+Maritz,Jacobus+Mounton,Johanne+Muller,Karisha+Nortje,Nadia+O'Brein,Courtney Stephany+Pieters,Gerhard+Pieterse,Danyel+Pretorius,Alicia+Pretorius,Bester+Schambriel,Calvin+Schambriel,Luan+Schoeman,Kyla+Scholtz,Wynand+Shaik,Shadmaan+Shikhati,Gladys Nkateko+Stoop,Juan-ClaudeTromp Eden+Van Burich,Ryno+Van Heerden,James William T+Van Rooyen,Marthinus+Van Zyl,Jeanette+Venter,Cine+Venter,Mathilda";
//                        $learner_timetable_load[] = "PRINSLOO A-TO-K2_12#Botes,JohandrÃ©+Broodryk,Willa+Coertz,Messhell+Coetzer,Pieter+Coetzer,Francois+Coppen,Wayne+De Agrela,Jessica+Delport,Nikita+Dix-Peek,Cean+Erasmus,Cameron+Fernandes,Ockert+Gangat,Raabia+Hlongwane,Melany+Horne,Helgardt+Hugo,Ezri+Human,Elmie+J v Rensburg,Anri+Jardine,Leon+Jordaan,Casper,Hendrik+Kubayi,Musa+Le Grange,JD+Moosa,Tahiyya+Mothlele,Segopotso+Munduku,Nehemie+Neophytou,Marco+O'Neill,Roelien+Pretorius,Jan-Carel+Schalkwyk,Jean-Luc+Schlebusch,Chelsea+Swart,Ludique+Tromp,Benjamin+Van den Bergh,Kevin+Van Rooyen,Andries+Venter,Timothy";
                        //$learner_timetable_load[] = "RAUTENBACH Y-11B#Albertyn,Dirk Lemont+BÃ¤hre,Ulrich+BenadÃ©,Bernalee+Booysen,Heine+Botes,Clari+BrÃ¼mmer,Christelle+Erasmus,Anilia JemÃ©+Jooste,Delux+Joubert,Jaco-Jacques+Knox,Hennerien+KrÃ¼ger,Anje+Mouton,JohannÃ©+Nortje,Nadia+NÃ¶thnagel,Francois Johan+O'brien,Courtney Stephany+PÃ¶hl,Letilda+Saunders,Berent+Schreuder,Hugo Amos+Smith,SimonÃ©+Smuts,Julius-Roy+Stoltz,Jacobus Casparus+Stoop,Juan-Claude+Van Coller,Carla+Van Helsdingen,Hendrik Johannes Gerhardus+Van Jaarsveld,Willem Dawid+Van Niekerk,Sancha+Van Rooyen,Marthinus+Van Vuuren,Imcke+Venter,Michelle+Viljoen,Timna+Visagie,Stephan Mauritz+Vorster,Gideon Jacobus Mare+Wilders,Jurie Johannes";
//                        $learner_timetable_load[] = "RAUTENBACH Y-BSTD-K1_10#Barnatt,Paige+Dagra,Husen Hanif+Goosen,Marno+Hlabyago,Shaun kagiso Frederick+VanVuuren,Theunis Johannes+Kallaiger,Ruzba Fakirmohummad+Kapa,Motsewe+Lelope,Moswatse Tshepo+Letwane,Sewela Louisa+Mabotja,Kabelo Darren+Maunatlala,Karabo+Mkhantswa,Siphosinhle Nomkhuleko+Modiba,Mpho koketso Natasha+Molapisane,Radi+Mulder,JoanÃ©+Naude,Mia+Nukeri,Zenesia Gavaza+Patel,Mubin+PÃ¶hl,Danielle+Pretorius,Jacqueline+Rabothata,Mantsha Phomello+Spaumer,Garreth+Swart,Liezel+Van Der Merwe,Jamie";
//                        $learner_timetable_load[] = "RAUTENBACH Y-BSTD-K3_10#Ngobeni,Molemisi+Naude,Eduan+Pretorius,Adriaan+Roberts,Jade Marilyn+Smith,Alexander Johannes+Modika,Ramoshaba Eugine+Patel,Aasiya Akhterhusain+Maila,Reineth+Shai,Shirley+Patel,Maliha Maqsood+D'acy,Bradley+De Lange,Dillon+Gouws,Pieter+Marobela,Mokgadi Puseletso Rishoketswe+Maake,Karabo Andrew+Mashau,Prisca+Sethe,Thato+Malatji,Tshegofatso+Masete,Mamape+Moremi,Mapula+Leshabane,Lebepa+Mabunda,Prince+Maimane,Mmarena Ketumile+Mkhabele,Vutomi Katekani+Mkhabele,Mvethi,Velt";
//                        $learner_timetable_load[] = "RAUTENBACH Y-BSTD-K4_10#Howard,Kayla Tia+Freitas,Neville Elon Lees+Macgregor,Megan+PatelbalaMuhammad,Maqsood+Botha,Tiaan+De klerk,Willem Abraham+Maguire,Lisa+Mostert,Lize+Ramango,Mosibudi+Sekhula,Ernesto+Theron,Danielle Casey+Warren,Kyle Jordan+Delport,Sinead+Delport,Sinead+Ramatseba,Kgaogelo+Kgatla,Reabetswe Mantsha+Boke,Madidimalo Mosima+SeimaKoketso,Helen Ramokone+Rabothata,Mohale Glen+Dale,Micaela Leigh+Ivy,Daniella Ashlea+Venter,Juanet+Jacobs,Reinette+GrovÃ©,Nina+Pohl,Kesia+Ali,Farhiya+Engelbrecht,Quen+Blessie,Leon+Dancer,Nicholas Luke+Armstrong,Chatharina Petronella+Mac nicol,Meghan+Ramokgano,Mosibudi Bridget";
//                        $learner_timetable_load[] = "RAUTENBACH Y-BSTD-K2_12#Beetge,Rudolph+Bridger,Courtney+Coleman,Richard+De Jonge,Jeanne-Mari+Devdhara,Viraj+Findlay,Chantelle+Hussein,Abdulaa+Ibrahim,Faizel+Maluleke,Somi+Maswanganyi,Prince+Mohale,Karabo+Mthembi,Peter+Mthombeni,Tsundzu+Muhlarhi,Vanessa+MÃ¼ller,Helgard+Niewoudt,Hanro+Nkuna,Precious+Pieterse,Eugene+Pohl,Lilly+Potgieter,Roelien+Smit,Mariena+Theron,Wileen+Van Heerden,Verena+Van Wyngaardt,Lara+Venter,Clariska+Wevell,Margra+Wolmarans,DenÃ©+Mothlele,Sekgopotso";
//                        $learner_timetable_load[] = "RAUTENBACH Y-BSTD-K3_12#Coertz,Messhell+Coetzer,Francois+Immelman,Amore+Lephata,Dineo+Mabuza,Obed+Mageza,Khensani+Mahasha,Moleko+Mashele,Lemuka+Matlala,Reshoketswe+Mbhalati,Xanani+Modiba,Samuel+Mokoena,Tumelo+Rabapane,Joy+Rampedi,Lerato+Sekgobela,Kgathalo+Shikwambana,Nhlavutelo+Shipalana,Ndzhaka+Stevens,Jordin+Tema,Javulani+Van Helsdingen,Vivian";
//                        $learner_timetable_load[] = "SCHOEMAN A-8F#Hlaisi,Tiyani+Hlongwane,Naledi Emmeretia+Jerenyama,Keith+Kgatla,Bokang Prosper+Lepulana,Kabelo Will+Maapolela,Itumeleng Mokete+Mabasa,Hlonipho Kheightly+Mafambe,Mark Gordon+Mahasha,Lethabo Motsatsi+Makgoba,Regaogetswe Motale+Malatji,Kamogelo Joy+Malebe,Mabora Onicca Edith+Maphalle,Llokoane Annah+Mashapa,Mpho Teko+Mathebula,Hlulani Victory+Matlou,Botse Lerato Pila+Memba,Rikitai Chipo+Mkhwana,Lulama Angel+Mmola,Mahlatse+Mogoboya,Tiisetso Masilo+Mohale,Mogale Thato Hondrius Benedict+Mongwe,Mark Antony+Moseamedi,Precious Relebogile+Nkgapele,Kgaugelo Moses+Nkolele,Nyiko+Nkuna,Khanyisile Mia+Nkuna,Lulama Wisani Themba+Rabapane,Karabo Victor JNT+Rikhotso,Lungile Mturukani+Sebola,Veronica+Sekhula,Motlatso Precious Tshegofatso+Shiluvane,Palesa Praise+Shingange,Khanyisa Kurhula+Shingange,Rocken+Zandile,Sindiso Lungile";
//                        $learner_timetable_load[] = "SCHOEMAN A-TO-K3_10#Vandermerwe,Jamie+Schoeman,Ruette+Ali,Farhiya+Hunter,Ross bird+Chaput,Bevan David Jean+Engelbrecht,Quen+Wewege,Rohan Jaun+Kader,Zoe Ann+Letsoalo,Motsiri kabelo+Caroto,Ruben+J v vuuren,Nakishka+Vermeulen,Cecil Petrus+Scholtz,Keagan+Modika,Phetole";
//                        $learner_timetable_load[] = "SCHOEMAN A-TO-K4_10#Roberts,Jade Marilyn+Rosslee,Shani+Mare,Petrus Paulus+Mills,Tamzyn-Jade+MÃ¶ller,CharnÃ©+Loam,Paddy";
                       // $learner_timetable_load[] = "STANDER S-10B#Armstrong,Chatharina Petronella+Beukes,Revan De Leeuw+Botha,Tiaan+Cronje,Armand+D'arcy,Bradley+Dent,Diane+Engelbrecht,Quen+Fivaz,Dian+Flattery,Cara+Gouws,Pieter+GrovÃ©,Nina+Hartzenberg,Ruben+Kok,Christiaan Pieter+Le Grange,ArnÃ©+Mac Nicol,Meghan+Macgregor,Megan+Mare,Petrus Paulus+Meyer,Megan+Muller,Megan+Naude,Mia+Oosthuizen,Ariel Zara+O'reilly,Emile+PÃ¶hl,Danielle+Pretorius,Jacqueline+Pretorius,Nico+Schoeman,Janet+Smith,Alexander Johannes+Strydom,Johannes Gerhardus+Van Der Merwe,Jamie+Van Niekerk,Colin+Van Onselen,Kevin+Van Rooyen,Arno+Verster,Arne";
                       // $learner_timetable_load[] = "STEYN M-10D#Banyini,Shihluke+Boke,Madidimalo Mosima+Kapa,Masindi Juliete+Kapa,Motsewe+Kgatla,Reabetswe Mantsha+Lathane,Phuti Seth+Letwane,Sewela  Louisa+Maake,Karabo Andrew+Mabunda,Suprise Bright+Mabuza,Justinah Mantuba+Mafa,Mojalefa Trevor+Malapane,Mantsha Johannah+Malatji,Tshegofatso Mohale+Mamiane,Mmarena Ketumile+Marobela,Mokgadi Puseletso Rishoketswe+Mashau,Prisca Mabotse+Mathye,Kulani Brighton+Mboweni,Geraldine+Mdumela,Katekani Terence+Mkhabela,Mvethi Velt}Mkhabele,Vutomi Katekani+Mkhantswa,Siphosinhle Nomkhuleko+Nkoana,Meriam Mmatapa+Ramokgano,Mosibudi Bridget+Seima,Koketso Helen Ramokone+Sekhula,Shawn Tumelo+Sethe,Thato";
//                        $learner_timetable_load[] = "STEYN M-IT-K2_10#Hlabyago,Shaun,Kagiso,Frederick+JvanVuuren,Theunis Johannes+Engelbrecht,Quen+Fourie,Ruan Chris+Van,Rooyen Aeno+Modika,Ramoshaba Eugine+Badenhorst,Hugo Willem+Blignuut,Janco Abel+Engelbrecht,Gideon+Gallant,Kgantsho Mafa Syanda+Joubert,Jeqandre+Konster,Ulrich+Kristensen,Roelof Jacob Nicolai+Niemaan,Gert Jacobus+Strydom,Tuney+Van Dyk,Lourencia Louisa+Wewege,Rohan Juan+Cobertt,Stefanus Johannes+Hartzenberg,Ruben+Kader,Zoe Ann+Letsoalo,Motsiri Kabelo+Marcos,Marco Luis+Patel,Aasiya Akhterhusain+Cloete,Stian+Hunt,Sean John";
//                        $learner_timetable_load[] = "STEYN M-CATN-K3_10#Barnatt,Paige+Mulder,Joane+GHoward,Kayla Tia+Oosthuizen,Ariel Zara+Freitas,Neville Elon Lees+Meyer,Megan+Pretorius,Nico+Joubert,Jeandre+Kristensen,Roelof Jacob Nicolai+Strydom,Tuney+Modiba,Mpho Koketso Nathasha+Macgregor,Megan+Masenya,mpho Danielle+Patel,Bala Muhammad Macqsood+De Lange,Steph-Marie+Knox,Marushke+Bezuidenhout,Ockert+Kok,Chistiaan Pieter+Verster,Arne+Du Preez,Siegfried Pieter+Stander,Jerome+Van Wyk,Willem Christoff+Albertus,Kieran+Nukeri,Zenesia Gavaza+Shiels,Mathew+Haynes,Louis+Mkhantswa,Siphosihle Nomkhuleko+Maluleke,Khanimambo Victoria+Baloyi Nyiko+Bond,Dominique";
//                        $learner_timetable_load[] = "STEYN M-CATN-K4_10#Modika,Ramoshaba Eugine+Shai,Shirley+Malatji,Tshegofatso Mohale+Leshabane,Lebepa+Mkhabela,Mvethi Velt+Swart,Liezel+PÃ¶hl,Danielle+Moosa,Rifqah+Gibson,Chelsey+Molokwane,Mapula Phillipine+Molawa,Solomon Mokone Reabetswe+Mabunda,Suprise Bright+De Souse,Simeon+Pieterse,Heinrich Carl+Ras,Nicolene+Niemann,Gert Jacobus+Hartzenberg,Ruben+Hunt,Sean John+De jonge,Jenelle+Badenhorst,Hugo Willem+Theron,Lin-Mari+Van Niekerk,Jan-Carel+Grobler,Marnus+Molapisane,Radi+Pretorius,Jacqueline+Yacoob,Humairaa+Ramakgolo,Tokollo+J van Vuuren,Theunis,Johannes";
//                        $learner_timetable_load[] = "STEYN M-IT-K2_11#Bahre,Ulrich+Botha,Xander Carolus+Erasmus,Reinhardt+Fernandez,Dean+Jansen Van,Rensburg Kyle+Loppers,Esme+Lubbe,Frederick Heinke+Mafaralala,Tshwarelo Noah+Maree,Heinrich Georg+Mallett,Jason David+Muller,Sheldon Morland+Schreuder,Hugo Amos+Shokane,Thato+Smith,Jean Francois+Spaumer,Johanna Christina J+Stoltz,Jacobus Casparus+Van Der Merwe,Petrus Stephanus+Vorster,Gideon+Wigginton,Marc Johan";
//                        $learner_timetable_load[] = "STREICHER Y-8D#Bols,Joelle Gabrielle Bridgette+Botha,Louis+Coppen,Kita Stewart+Dagra,Aamina+Griffiths,Ethan Jed+Ismail,Shaakir Ibrahim+Khosa,Mixo Prince+Kotze,Amelia+Kubayi,Mikateko Nhlaiseko+Leshebane,Fortune Mahlatse+Liliwala,Zuveriyah Yusuf+Livingstone,Theodora Boikanyo+Loughor-Clarke,Samuel Martin+Malatji,Kamogelo+Manthata,Lebohang Phillipine+Maponya,Ronel Modjadji+Matjokotja,Thapelo Mapula+Matsepane,Nkgabole Abraham+Modiba,Matsatsi Linah+Modika,Rendani+Mohale,Dinoka Enerst+Molemane,Rethakgetse Mankwana+Motau,Mothibedi Clyde+Mthembi,Mbuyelo Malcolm+Muhammad,Abu Huraira+Mushwana,Ketekile Darlene Fikila+Ngonyoza,Shumikazi Sarah Jnr+Nyakale,Manto Herbelin+Page,Michaela Valerie+Patel,Mohammed Aadil Akhter Husain+Radzuma,Unanne Remembrance+Sekgobela,Kgabo Lebatamela Blaze+Sekhula,Barak Matome+Seshoene,Sunday Robert+Shaikh,Sana Fatima Muhammed Soeb+Shingange,Hlayisanani Ruth+Terblanche,Rain Logan+Van Der Heever,Morne";
//                        $learner_timetable_load[] = "STREICHER Y-ENGA-9B#Barnard,Marne+Coetzee,Johannes, Cornelius+De Lange,Stephanus Jacobus+Du Plessis,Rohan+Du Toit,Joha+Fleischmann,Judi+Gerhardt,Carlien+Hamilton,John-Paul+Haynes,Johan+Horak,Elizma+Human,Henrico+Jacobs,Johannes Stephanus+Jansen Van Rensburg,Eruzanne+Kasselman,Danielle+Keizer,Marise+Kok, Ruan+Le Roux,Iszabella+Meyer,Johann De Marco+Natorp,Colleen Emilia+Nkuna,Stella+Pretorius,Janique+Schmidt,Cherlyn Kay Stephanie+Schultz,Heinrich+Spaimer,Jodi Marie+Van Biljon,Bertie Pieter Barnard+Van Der Merwe,Juvan Phillipus Lodewickus+Van Nikkelen Kuyper,Mariska+Viljoen,Tiaan";
//                        $learner_timetable_load[] = "STREICHER Y-ENGA-9A#Albertiyn,Tenia Megan+Booysen,Zane+Ceney,Gerhardes Jan-Hendrik+Coetzee,Frederick Johann+Coppen,Jade+Du Plessis,Devon+Gerber,Endriku Spuy+Geyer,Jane Arona+Gubitz,Duan+Holtshaudzen,Gerhardus Josua+Human,Conrika+Jackson,Canell+Janse Van Rensburg, Wandri+Knoetze,Reuben Juvan+Le Roux,Christiaan Luke+Liversage,Juane+Meyer,Charlize+Muller,Nicole+Naude,Jan Daniel+Nieuwoudt,Leandre+Pienaar,Jaun-Paul+Pieters,Chantelle+Pretorius,Janette+Rassouw,Duan+Schuch,Istvan+Swanepoel,Heidi+Van Swegen,Gerhard Jacobus+Van Der Merwe,Andries Petrus+Van Der Westhuizen,Lache+VilJoen,Myrna Veronica+Wiers,Roland Anrich";                      
//                        $learner_timetable_load[] = "STREICHER Y-ENGA-9E#Ajmal,Mohd-Hammad+Bezuidenhout,Juan+Bham,Aaliyan+Chauke,Hlamulo Well+Coppen,Jamie+Dipela,Tiisho Katse+Freitas,Benjamini Rui+Glazer,Nichola Louise+Griffiths,Talon Ernest+Herrendoerfer,Shannon Kashmira+Kalla,Abdur Rahmaan Yusuf+Loughor-Clarke,Kian John+Mahmood,Sibha+Mashile,Mmakhomo Keabetswe+Mashinya,Itumeleng+Mathebula,Bonga Ripfumelo+Mistry,Khushi+Modan,Zainab+Mohlala,Leshike Liken+Mohlele,Khutso Peace+Muller,Bevan Frank+Musara,Tadiwanashe Udelle+Nzita,Manashe+Patsikadova,Tadiwanashe Nester Nicole+Phalane,Thato Clyde+Selowa,Khomotso Primrose+Shaikh,Faaizah+Shilubane,Tivani+Skinner,Danika+Stanley,Michaela Eleanor+Tengu,Mukeina-Suzette+Van Zyl,Tertius";
//                              $learner_timetable_load[] = "VAN DER MERWE M-BSTD-K1_12#Ali,Iqqr+Coppen,Wayne+De Agrela,Jessica+Delport,Nikita+Hlongwane,Melany+Lebea,Makoma+Lebepe,Magadima+Letsoalo,Elsworth+Mabilo,Noko+Madshiga,Qiniso+Marobela,Katlego+Mashianoke,Thato+Modan,Aaliya+Mpiana,Perside+Neophytou,Marco+Sedutla,Utshehone+Senyolo,Mohlao+Shokane,Dineo";
//                        $learner_timetable_load[] = "VAN DER WESTHUIZEN A-10C#Badenhorst,Mianke+Bezuidenhout,Ockert Jacobus+Blessie,Leon Ian+Bond,Dominique+Brits,Janca Chrizel+Du Preez,Siegfried Pieter+Goosen,Marno+Haagner,Dewald+Haynes,Louis+Hunt,Sean John+Jansen Van Vuuren,Theunis Johannes+Mills,Tamzyn Jade+MÃ¶ller,CharnÃ©+Niemann,Gert Jacobus+Pieterse,Heinrich Carl+Pretorius,Adriaan+Ras,Nicolene+Smith,Nicolette Christine+Strydom,Tuney+Swart,Liezel+Tonsing,Arnu Ernst+Van Der Westhuizen,Andrew Baird+Van Wyk,Willem Christoff+Vermeulen,Cecil Petrus";
                        //$learner_timetable_load[] = "VERSTER E-8G#Beukes,Marjone Dorhehl+Breytenbach,Justin Nicolas+Brits,Nika+De Beer,Shaun+Delport,Shaun-Dee+Du Preez,Phillipus Jacobus+Elbrecht,Michaela+Erasmus,Johannes Jacobus+Gericke,Mandie+Hassbroek,Dehan Daniel+Hermann,Sune+Hoyer,Jelize+Hoyer,Lenize Marie+Jordaan,David Gideon+Kotze,Jurgens Hermanus+Lombard,Salome+Miller,Andru+O'Connell,Francois+Piek,Zandelien+Pieterse,Jeanre Marco+Pohl,Nikita Nina+Potgieter,Phillip Ruben+Pretorius,Jo-Leigh+Richter,Brett+Slippers,Juandre+Smith,Dudley+Spies,Luzaan+Valentine,Ethan+Van Jaarsveld,Andrea Estelle+Van Rooyen,Adolph Joan+Van Zyl,Kayla+Venter,Martinus Nicolaas+Vogel,Larissa+Whelan,Abram Mathys";
//                        $learner_timetable_load[] = "VERSTER E-ACCN-K1_10#Ali,Farhiya+Boke,Madidimalo Mosima+Botha,Tiaan+De,klerk Willem Abraham+De,lange Steph-Marie+Gibson,Chelsey+Graham,Andrew Lyle+Jacobs,Reinette+Knox,Marushke+Kuisis,Christopher+Letsoalo,Motsiri kabelo+Maguire,Lisa+Marcos,Marco Luis+Mostert,Lize+Nyautore,Audrey+Patel,Aasiya Akhterhusain+Pohl,Kesia+Ramakgolo,Tokollo+Ramango,Mosibudi+Ramatseba,Kgaogelo+Rosslee,Shani+Seima,Koketso Helen Ramokone+Sekhula,Ernesto+Singo,Siwe+Theron,Lin-Mari+Theron,Danielle Casey+Van niekerk,Jan-Carel+Warren,Kyle Jordan";
//                        $learner_timetable_load[] = "VERSTER E-ACCN-K4_10#Ngobeni,Molemisi+Naude,Eduan+D'arcy,Bradley+Maake,Karabo Andrew+Mabunda,Prince+Mkhabele,Vutomi katekani+Pretorius,Nico+Nukeri,Zenesia Gavaza+Dagra,Husen Hanif+Patel,Mubin+Rabothata,Mantsha Phomello+Makhubela,Itumeleng+Banyini,Shihluke+Brahmbhatt,Simran Darshan+Mboweni,Geraldine+Van onselen,Kevin+Kallaiger,Ruzba Fakirmohummad+Mdumela,Katekani Terence+Mathye,Kulani Brighton+Van Der Merwe,Jamie+Wewege,Rohan Jaun+Kgapola,Karabo";
//                        $learner_timetable_load[] = "VENTER A-PHSC-K1_11#Chabalala,Fumo Mbhazima+Elbrecht,Bianca+Joubert,Jaco-Jacques+Kesa,Jhillika+Lambane,Risana+Maake,Lekgolo Piet+Mafaralala,Tshwarelo Noah+Malahlela,Reneiloe Pearl+Maphoto,Melvyn Takatso M+Maswangnayi,Honour+Shikati,Gladys+Stoltz,Jacobus+Tengu,Praise Lumande+Van Vuuren,Imcke+Van Wyk,Twane";
//                        $learner_timetable_load[] = "VENTER A-PHSC-K3_11#Albertyn,Dirk Lemont+De Klerk,Alexander+Elbrecht,Bianca+Fivaz,Michelle+Hlaisi,Nanadi Berthcandice+Jansen Van Rensburg,Kyle+Kloppers,EsmÃ©+Maakomela,Shibu Judy+Mabidilala,Glory Mosima+Mabunda,Thembekile Desiree+Mathebula,Pleasure Nhlengiwe+Mawila,Fikile Elgin+Mbhalati,Xitshembiso Promise+Modiba,Tumiso Gideon Modibe+Mohale,Nelson+Molewa,Maruruu Basil+Monyela,Boney Tshepo+Moshole,Kgothatso+Ngobeni,Xongani Prince+Ngobeni,Hlulani Harold+Nkolele,Mehleketo Makungu+Pheeha,Lawrence Thato+Ralekgokgo,Mosotho Rebotile+RammutlaNkabinde,Kamogelo Karabo+Shokane,Thato+Van Heerden,James Wiliam T+Van Wyk,TwanÃ©+Venter,Carmi+Venter,CinÃ©";
//                        $learner_timetable_load[] = "VENTER A-PHSC-K2_12#Avdysh,Lera+Botes,Megan+Coetzee,Zulike+Crafford,Lize+De Jongh,Anesca+Devenish,Jenna+Engelbrecht,Elzanne+Fleischmann,Eljana+Fourie,AJ+GrovÃ©,Hermanus+Hlungwani,Musa+Malatji,Noko+Maponya,Jason P A+Maponya,Sammy+Maswanganyi,Chantelle+Mboweni,Nwananga+McLean,Marlu+Meintjies,Johan+Middleton,Amelia+Moshwana,Bongani+Muller,John-Hendrik+Ndala,Ntsako+Nzadi,Belinda+Prinsloo,Stefan+Schoeman,Zenelde+Sedutla,Karabo+Van Coller,Arnold+Van Dyk,Elzette+Warmenhoven,RiÃ«tte";
//                        $learner_timetable_load[] = "VENTER A-PHSC-K3_12#Banyini,Rivoningo+Bill,Jason+Chu,Britney+Dix-Peek,Cean+Gangat,Raabia+Greeff,Ulrich+Homu,Ronnel+Human,Elmie+J v Rensburg,Anri+Klopper,Dewald+Kubayi,Musa+Maake,Mankopane Ngoako+Makwala,Thato+Malungana,Hlawuleka+Mashao,Harshy Khomotso+Modan,Aaliya+Molewa,Naledi+Moosa,Tahiyya+Mostert,Erich+Munduku,Nehemie+Patel,Sana+Pretorius,Stefan+Rabothata,Gabriel+Schalkwyk,Jean-Luc+Shokane,Dineo+Stephenson,Hayley+Van Heerden,Danelle";
//                        $learner_timetable_load[] = "VERMAAK R-MLIT-12A#Coetzee,Zulike+Crafford,Lize+De Jonge,Jeanne-Mari+De Jongh,Anesca+Engelbrecht,Elsie Susara+Fleischmann,Eljana+Fourie,Andries Joubert+Greeff,Ulrich+GrovÃ©,Hermanus+Human,Elmie+Janse Van Rensburg,Anri+Jordaan,Casper Hendrik+Klopper,Dewald+Lombard,Barend Petrus+Maswanganyi,Chantelle Mhlavasi+Mc Lean,Marlu+Meintjes,Pieter Johan+Mostert,Erich Johann+Muller,John-Hendrik+Nieuwoudt,Johannes Stefanus+O'reilly,Peter Eduard+Pretorius,Stefan+Prinsloo,Stefan+Schoeman,Zenelde+Smith,Daniel Willem Jacobus+Van Coller,Arnold+Van Dyk,Elzette+Van Heerden,DanellÃ©+Van Heerden,Verena+Venter,Clariska+Warmenhoven,Riette+Wevell,Margaret Adeline";
                       // $learner_timetable_load[] = "VAN HEERDEN V-12C#Baker,Cara Mia+Botes,JohandrÃ©+Bothma,Christiaan+Broodryk,Willa Johanna+Coertz,Meshell Zackuline+Davis,John Corneluis+Du Toit,Brandon Lee+Erasmus,Cameron Lee+Eva,Charlotte Cathryn+Horne,Adri Louise+Horne,Helgardt+Immelman,AmorÃ¨+Jardine,Leon Ignacio+Mac Nicol,Hamish+Mostert,Phillipus Jacobus+Potgieter,Roelien+Slabber,Llewelyn John+Van Den Bergh,Kevin DaniÃ«l+Van Helsdingen,Vivien+Van Rooyen,Andries Cornelius+Venter,Timothy";
//                        $learner_timetable_load[] = "VAN HEERDEN V-ECON-K1_10#Blessie,Leon+Dancer,Nicholas luke+Howard,Kayla tia+Leshabane,Lebepa+Maake,Karabo andrew+Mabunda,Prince+Maila,Reineth+Maluleke,Victoria+Mamiane,Mmarena ketumile+Manyama,Lethabo+Mashau,Prisca+Mboweni,Geraldine+Mdumela,Katekani terence+Mkhabele,Vutomi katekani+Modika,Ramoshaba Eugine+Molokwane,Mapula Phillipine+Ngobeni,Molemisi+Nkuna,Munene+Ramokgano,Mosibudi bridget+Sethe,Thato+Shai,Shirley";
//                        $learner_timetable_load[] = "VAN HEERDEN V-ECON-K3_10#Dagra,JHusen Hanif+Patel,Mubin+Botha,Tiaan+DeKlerk,Willem Abraham+Kuisis,Christopher+Maguire,Lisa+Mostert,Lize+Ramango,Mosibudi+Rosslee,Shani+Sekhula,Ernesto+Singo,Siwe+Theron,Danielle Casey+Warren,Kyle Jordan+Rabothata,Mantsha Phomello+Swart,Liezel+Hlabyango,Shaun kagiso frederick+Naude,Mia+Pohl,Dnielle+Delport,Sinead+Delport,Sinead+Makhubela,Itumeleng+Moosa,Rifqah+Ramatseba,Kgaogelo+Badenhost,Mianke+Kapa,Motsewe+Letwane,Sewela Louisa+Kgatla,Reabetswe Mantsha+Sekhula,Shawn Tumelo+Boke,Madidimalo Mosima+Seima,Koketso Hellen Ramokone+Rabithata,Mohale Glen+Gibson,Chelsey+Banyini,Shihluke";
//                        $learner_timetable_load[] = "VAN NIEKERK W-11D#Ahir,Bhumika Dineshabhai+Ball,Johnathan Dennis+Barnatt,Jade Catherine+Chabalala,Fumo Mbhazima+Dalrymple-Hay,Angus Christopher+Fernandez,Dean+Fivaz,Michelle+Fourie,Jeandre Stephanus+Glazer,Anya Wanda+Hlaisi,Nandi Berthcandice+Kesa,Jhillika Dharmesh+Khoza,Xavani Bruce+Labuschagne,Joshua+Mahowa,Lisa Mmabatho+Malepe,Maboke Austin+Maphoto,Melvyn Takatso Mosenya+Maponya,Tetelo Joseph+Marais,Athena+Mbhalati,Phumla Nadine+Mbhalati,Xitshembiso Promise+Muller,Sheldon Morland+Ralekgokgo,Mosotho Rebotile+Sanderson,Jason Lione+Sekgobela,Makhobane+Shai,Thabiso Maile+Shikhati,Gladys Nkateko+Tengu,Praise Lumande+Van Tonder,Donovan Craig+Wigginton,Marc Johan+Zhanda,Monique Tovimba";
//                        $learner_timetable_load[] = "VAN NIEKERK W-ECON-K1_11#Adendorff,Shea Gabriella+Ahir,Bhumika+Bhuiyan,Mohammed All Mukaddim+Dipela,Lesetja+Hlokwe,Modjadji Reatile+Luckhoff,Belinda+Mabasa,Pascaline+Maenetje,Kgutatso+Mailula,Pontsho Dorothy+Makumbila,Comfort+Malepe,Maboke Austin+Malogadithlare,Kgopotso Jerome+Malope,Mosima+Mamaorobela,Kgabo+Manamel,Masedi Tony+Mande,Mbuyi Jenny+Maswanganyi,Masana Shapiro+Moagi,Austin+Muller,Sheldon Morland+Ngobeni,Hlulani Harold+Nkolele,Maungu+Rabotata,Tsepang+RammutlaNkabinde,Kamogelo Karabo+Ramoshaba,Nicholas Neo+Shaik,Shadmaan";
//                        $learner_timetable_load[] = "VAN NIEKERK W-ECON-K4_11#Herrendoerfer,Dylan Tyron+Khoza,Xavani Bruce+Ledwaba,Boitumelo+Maponya,Tetelo Joseph+Mohale,Clide+Mokgola,Thapelo+Ngobeni,Tlangelani+Pio,Allisdair+PÃ¶hl,Letilda+Raolane,Mahlatse William+Schoeman,Kyla+Shai,Thabiso Maile+Shaikh,Shaahil,Mohmedsoeb+Trzeciak,Angella";
//                        $learner_timetable_load[] = "VAN NIEKERK W-ECON-K1_12#Bridger,Courtney+Devdhara,Viraj+Devenish,Jenna+Hlungwani,Musa+Hussein,Abdulaa+Ibrahim,Faizel+Legodi,Patricia+Maponya,Sammy+Mashele,Lemuka+Mbhalati,Xanani+Moosa,Tahiyya+Mthembi,Peter+Mthombeni,Tsundzu+Muhlarhi,Nyeleti+Nkuna,Precious+Rampedi,Lerato+Schlebusch,Chelsea+Shikwambana,Nhlavutelo";
//                        $learner_timetable_load[] = "VAN NIEKERK W-ECON-K4_12#Ali,Iqqr+De Jonge,Jeanne-Mari+Hlongwane,Melany+Lebea,Makoma+Lebepe,Magadima+Lephata,Dineo+Letsoalo,Elsworth+Madshiga,Qiniso+Mahasha,Moleko+Maluleke,Somi+Malundu,Rose+Marobela,Katlego+Matlala,Reshoketswe+Modiba,Samuel+Mokoena,Tumelo+Mpiana,Perside+Muller,John-Hendrik+Neophytou,Marco+Rabapane,Joy+Sedutla,Utshehone+Sekgobela,Kgathalo+Senyolo,Mohlao+Shipalana,Ndzhaka+Tema,Javulani+Van Heerden,Verena+Wevell,Magaret";
//                        $learner_timetable_load[] = "VOSLOO J-GEOG-K4_10#Patel,Maliha Maqsood+Gouws,Pieter+Haynes,Louis+Naude,Mia+Modika,Phetole Emmanuel+Schoeman,AimÃ©Ã©+Lind,Jessica+Spaumer,Garreth+Beukes,Revan de Leeuw+Mabuza,Justinah Mantuba+Fivaz,Dian+Van Niekerk,Colin+Scholtz,Keagan+Mabilo,Masilo+Ramodisa,Poela Delvin";
//                        $learner_timetable_load[] = "VOSLOO J-GEOG-K3_11#Bahre,Ulrich+Barnatt,Jade Catherine+Botha,Xander Carolus+Brits, Helgs-Marie+Dannhauser,Tammy+Erasmus,Anilia Jeme+Fernandez,Dean+Fourie,Line+Goosen,Johannes Jurgens+J v Rensburg,Alanso+J v Rensburg,Rankin+Lombard,Antje+Maenetje,Lerato Bernice+Maimela,Ebenezer+Maree,Lie-Elen+Maritz,Jacobus+Maswangnayi,Honour+Matevula,Dzunisani+Nortje,Nadia+O'Brein,Courtney+Schambriel,Calvin+Shai,Katlego+Shiels,Daniella+Shikwambana,Andile Joy+Tengu,Praise Lumande+Tromp,Eden+Van Coller,Carla+Van der Merwe,Corli+Van Rooyen,Marthinus+Van Zyl,Jeanette+Venter,Mathilda+Venter,Michelle";
//                        $learner_timetable_load[] = "VOSLOO J-GEOG-K1_12#Burger,Jean-Luc+Coetzer,Francois+Gangat,Raabia+Horne,Helgardt+Klopper,Dewald+Lind,Kirsten+Lombard,Barend Petrus+Mabuza,Obed+Mageza,Khensani+Mahasha,Moleko+Makwala,Thato+Maluleke,Somi+Malungana,Hlawuleka+Maponya,Jason+Maswanganyi,Prince+Miyeni,Koketso+Modiba,Samuel+Molewa,Naledi+Mothlele,Segopotso+Pretorius,Jan-Carel+Smit,Mariena+Tromp,Benjamin+Wolmarans,DenÃ©";
                        //$learner_timetable_load[] = "VAN SCHALKWYK J-12F#Ali,Iqqr Ismael Ismael+Hussein,Abdul Aziz ArmadLebea,Makoma Gaopalelwe+Lebepe,Magadima+Lephata,Dineo Pamela+Letsoalo,Elsworth Eustace+MabokeMaake,Mankopane+NgoakoMabilo,Noko+Mabuza,Obed Yunees Tebogo+Madzhiga,Ngoho Qiniso+Mageza,Khensani Jennifer+Mahasha,Moleko Khomotso+Makwala,Thato Esrom+Malungana,Hlawuleka+Marobela,Katlego+Mashele,Lemuka Thommy+Mashianoke,Thato Mongane+Mashimbye Mthombeni,Tsundzukani+Maswanganyi,Tshikani Prince+Matlala,Reshoketswe Precious+Mbhalati,Xanani Lybon+Miyeni,Koketso Lucy Mamobe+Modiba,Mabule Samuel+Mohale,Karabo+Molewa,Naledi+Mothlele,Segopotso+Muhlarhi,Vannesa Nyeleti+Musuamba,Mpiana Perside+Rabapane,Joy Ntsako+Rampedi,Lerato Presca+Sekgobela,Kgothalo+Senyolo,Mohlao+Shikwambana,Nhlavutelo Priority+Shokane,Dineo Praise+Tema,Dimphurile Javulani";
                        //$learner_timetable_load[] = "VAN STADEN G-9A#Albertiyn,Tenia Megan+Booysen,Zane+Ceney,Gerhardes Jan-Hendrik+Coetzee,Frederick Johann+Coppen,Jade+Du Plessis,Devon+Gerber,Endriku Spuy+Geyer,Jane Arona+Gubitz,Duan+Holtshaudzen,Gerhardus Josua+Human,Conrika+Jackson,Canell+Janse Van Rensburg, Wandri+Knoetze,Reuben Juvan+Le Roux,Christiaan Luke+Liversage,Juane+Meyer,Charlize+Muller,Nicole+Naude,Jan Daniel+Nieuwoudt,Leandre+Pienaar,Jaun-Paul+Pieters,Chantelle+Pretorius,Janette+Rassouw,Duan+Schuch,Istvan+Swanepoel,Heidi+Van Swegen,Gerhard Jacobus+Van Der Merwe,Andries Petrus+Van Der Westhuizen,Lache+VilJoen,Myrna Veronica+Wiers,Roland Anrich";
//                        $learner_timetable_load[] = "VAN STADEN G-PHSC-K1_10#Baloyi,Nyiko+Banyini,Shihluke+Brahmbhatt,imran darshan+De,souse Simeon+Delport,Sinead+Ivy,Daniella ashlea+Kgapola,Karabo+Legrange,ArnÃ©+Mabilo,Masilo+Mabuza,Justinah Mantuba+Macgregor,Megan+Makhubela,Itumeleng+Malapane,Mantsha Johannah+Masenya,Mpho Danielle+Mauwane,Moeletsi Prince+Meyer Megan+Moosa Rifqah+Moremi,Mapula+Nkoana,Meriam Mmatapa+Patel,Maliha Maqsood+PatelbalaMuhammad,Maqsood+Pretorius,Nico+Schoeman,Janet+Scholtz,Keagan";
//                        $learner_timetable_load[] = "VAN STADEN G-PHSC-K3_10#Basson,Anize+Venter,Juanet+Jacobs,Reinette+Rautenbach,Gerhardus Ignatius+DeJonge,Jenelle+Flattery,Cara+GrovÃ©,Nina+Botha,Luann Moureys+Badenhorst,Hugo Willem+Blignaut,Janco Abel+Marcos,Marco Luis+Kallaiger,Ruzba Fakirmohummad+Manyama,Lethabo+Dent,Diane+Nyautore,Audrey+Pohl,Kesia+Theron,Lin-mari+Van Niekerk,Jan-carel+Cronje,Armand+Fivaz,Dian+Grobler,Marnus+Van Niekerk,Colin+Maunatlala,Karabo+Lathane,Phuti seth+Mabotja,Kabelo darren+Mdumela,Katekani terence+Mathye,Kulani brighton+Molapisane,Radi";
//                        $learner_timetable_load[] = "VAN STADEN G-PHSC-K4_10#Patel,Aasiya Akhterhusain+Masete,Mamape+Kristensen,Roelof Jakob Nicolai+De lange,Steph-Marie+Knox,Marushke+Stander,Jerome+Albertus,Kieran+Kuisis,Christopher+Singo,Siwe+Kapa,Motsewe+Sekhula,Shawn Tumelo+Snyman Liza-Ri+Moller,Juan-Jacques+Gallant,Kgantsho Mafa Siyanda+Van dyk,Lourencia Louisa+Kleynhans Doran+Kapa,Masindi Juliete+Nkuna,Munene+Engelbrecht,Gideon+Koster,Ulrich+Corbett,Stefanus Johannes+Mafa,Mojalefa Trevor+Schoeman,Ruette+Van rooyen,Arno";
//                        $learner_timetable_load[] = "VAN STADEN G-PHSC-K2_11#Bezuidenhout,Laryn+Brooks,Aricia Clarisse+Dalrymple-Hay,Angus C+Fourie,Jeandre Stephanus+Fourie,Line+Gerber,Barri+Glazer,Anya+Kirstensen,Hilma+Labuschagne,Joshua+Maakomela,Judy+Mahowa,Lisa Mmabatho+Mabasa,Pascaline+Mande,Mbuyi Jenny+Mc Lean,Anri+Monyela,Kabelo+Sanderson,Jason Lionel+Sekgobela,Khubi+Selatlha,Amogelang Seemole+Shai,Thabiso Maile+Shikhati,GladysNkateko+Van Den Bergh,Simone Jcqueline+Van Der Merwe,Corli+Van Der Merwe,Hendrick J G+Van Tonder,Donovan Craig+Visagie,Stephan Mauritz+Zhanda,Monique Tovimba";
//                        $learner_timetable_load[] = "VAN STADEN G-PHSC-K4_11#Barnatt,Jade Catherine+Botha,Xander Carolus+Erasmus,Reinhardt+Fernandez,Dean+Kloppers,Esme+Lubbe,Heinke+Maimela,Ebenezer+Mankgabe,Sampson Serabole+Maree,Heinrich+Mellett,Jason David+Molawa,Simon Ramphidi+Muller,Sheldon Morland+Ngobeni,Kenan Ashley M+Sambo,Enslin+Schreuder,Hugo Amos+Shai,Katlego+Shikwambana,Andile Joy+Smith,Francois+Spaumer,Johanna Christina J+V d Merwe,Petrus+Wigginton,Marc";
                       // $learner_timetable_load[] = "VAN WYK E-8A#Arlow,Marcel+Basch,Willem Sternberg+Cloete,Wieman+De Beer,Jomari+De Bruin,Hendrik Johannes+Dippenaar,Jacobus Petrus+Eckard,Petrus Jacobus+Faber,Rhode+Fleischmann,Jahdin+Grobler,Jaden+Hamilton,Kyle-Bradley+Jansen,Kay-Lee+Jourbert,Reghardt Willem Gerhardt+Krause,Charlize+Le Grange,Simone+Lordan,Joshua John+Mitchell,Rynard+Mphahlele,Reabetswe Mokgadi Sara+Olivier,Christiaan+Riley,Lee Helen+Roux,Adriaan Johannes+Roux,Colette Charmain+Smit,Adriaan Johan+Steenkamp,Celize+Steyn,Xander+Theron,Ronan+Theunissen,Johannes Marthinus+Van Der Gryp,Willem Adriaan+Van Rooyen,Ruan+Van Schalkwyk,Lizane+Venter,Anke+Vermeulen,Phillip+Whitcomb,Sydney";

                        $school_classes = array ();
                        
                        $year = date('Y');
                         $q = "SELECT year_id FROM schoollms_schema_userdata_school_year WHERE year_label = ?";
                         $q_data = array ($year);
                         $query = $link->prepare($q);
                         $query->execute($q_data);
                         $num_rows = count($query->fetchAll());
                         if ($num_rows == 1){
                             $query->execute($q_data);
                             $row = $query->fetch();
                             $year_id = $row['year_id'];
                         } else {
                             //ADD NEW YEAR

                         }
                         
                        foreach($learner_timetable_load as $lkey => $learner_classlist){
                            $classlist_tokens = explode("#", $learner_classlist);
                            
                            $subject_class_tokens = explode("-", $classlist_tokens[0]);
                            if (count($subject_class_tokens) == 2){
                                $teacher = $subject_class_tokens[0];
                                //GET TEACHER ID
                                $list_teachers_in_class = array ();
                                 if (strpos($teacher, "/") !== FALSE){ //LOOKING AT 2 OR MORE TEACHERS
//                                     echo "FOUND MORE TEACHERS <br>";
                                     $teacher_tokens = explode("/", $teacher);
                                     foreach ($teacher_tokens as $tkey=>$teacher){
//                                         echo "ADDING TEACHER $teacher <br>";
                                         $list_teachers_in_class[] = $teacher;
                                     }
                                 } else {
                                     $list_teachers_in_class[] = $teacher;
                                 }

                                 $list_class_teacher_ids = array ();
                                 foreach($list_teachers_in_class as $lkey=>$teacher){
//                                     echo "LIST TEACHER $teacher <br>";
                                    $teacher_tokens = explode(" ", $teacher);
                                    if (count($teacher_tokens) >= 2){
                                        $surname = "";
                                        if (count($teacher_tokens) > 2){
                                            $count_surname = 0;
                                            $tokens_count =  count($teacher_tokens)-1;
                                            while($count_surname < $tokens_count){
                                                $surname .= $teacher_tokens[$count_surname]." ";
                                                $count_surname++;
                                            }
                                            $surname = trim($surname);
                                            $initials = $teacher_tokens[$tokens_count];
                                        } else {
                                            $surname = $teacher_tokens[0];
                                            $initials = $teacher_tokens[1];
                                        }
//                                        echo "SURNAME $surname INITIALS $initials USER TYPE $user_type <br>";
                                        $q = "SELECT * FROM schoollms_schema_userdata_access_profile WHERE school_id = ? AND type_id = ? AND name LIKE ? AND surname LIKE ?";
                                        $q_data = array ($school_id, 4, "%$initials%", "%$surname%");
                                    } else {
//                                        echo "TEACHER $teacher<br>";
                                        $q = "SELECT * FROM schoollms_schema_userdata_access_profile WHERE school_id = ? AND type_id = ? AND surname LIKE ?";
                                        $q_data = array ($school_id, 4, "%$teacher%");
                                    }

                                    $query = $link->prepare($q);
                                    $query->execute($q_data);
                                    $num_rows = count($query->fetchAll());
                                    echo "TEACHER NUM ROWS $num_rows <br>";
                                    if ($num_rows == 1){//FOUND THE TEACHER
                                        //GET USER DETAILS 
                                        $query->execute($q_data);
                                        $row = $query->fetch();
                                        //var_dump($row);
                                        //exit;
                                        $user_id = $row['user_id'];
                                        $list_class_teacher_ids[] = $user_id;
                                        $name = $row['name'];
                                        $surname = $row['surname'];
                                    }
                                }

                                $count_teachers = count($list_class_teacher_ids);
//                                echo "COUNT TEACHERS $count_teachers <br>";
                                if (empty($list_class_teacher_ids)){
                                    continue;
                                }
                                
                                $class = $subject_class_tokens[1];
                                $grade_number = preg_replace('/[^\-\d]*(\-?\d*).*/','$1',$class);
                                 $class_abrev = "$class";
                                 $class_search = "CLASS $class";
                                 
                                 echo "CLASS SEARCH $class_search GRADE NUMBER $grade_number<br>";

                                 //Dealing with grade class
                                 $q = "SELECT * FROM schoollms_schema_userdata_school_classes WHERE school_id = ? AND year_id = ? AND grade_id = ? AND class_label LIKE ?";
                                 $q_data = array ($school_id,$year_id,$grade_number,"%$class_search%");

                                 $query = $link->prepare($q);
                                 $query->execute($q_data);
                                 $num_rows = count($query->fetchAll());
    //                                             echo "CLASS NUM ROWS $num_rows YEAR_ID $year_id<br>";
                                 if ($num_rows == 1){
                                     $query->execute($q_data);
                                     $row = $query->fetch();
                                     $class_id = $row['class_id'];
                                     $class_label = $row['class_label'];
                                     $grade_id = $row['grade_id'];
                                     $class = $class_label;
                                     //echo "$class WITH ID $class_id FOUND<br>";
                                 } else {
                                     echo "CLASS $class NOT FOUND<br>";
                                     continue;

                                 }
                            } else {
                                $teacher = $subject_class_tokens[0];
                                //GET TEACHER ID
                                $list_teachers_in_class = array ();
                                 if (strpos($teacher, "/") !== FALSE){ //LOOKING AT 2 OR MORE TEACHERS
//                                     echo "FOUND MORE TEACHERS <br>";
                                     $teacher_tokens = explode("/", $teacher);
                                     foreach ($teacher_tokens as $tkey=>$teacher){
//                                         echo "ADDING TEACHER $teacher <br>";
                                         $list_teachers_in_class[] = $teacher;
                                     }
                                 } else {
                                     $list_teachers_in_class[] = $teacher;
                                 }

                                 $list_class_teacher_ids = array ();
                                 foreach($list_teachers_in_class as $lkey=>$teacher){
//                                     echo "LIST TEACHER $teacher <br>";
                                    $teacher_tokens = explode(" ", $teacher);
                                    if (count($teacher_tokens) >= 2){
                                        $surname = "";
                                        if (count($teacher_tokens) > 2){
                                            $count_surname = 0;
                                            $tokens_count =  count($teacher_tokens)-1;
                                            while($count_surname < $tokens_count){
                                                $surname .= $teacher_tokens[$count_surname]." ";
                                                $count_surname++;
                                            }
                                            $surname = trim($surname);
                                            $initials = $teacher_tokens[$tokens_count];
                                        } else {
                                            $surname = $teacher_tokens[0];
                                            $initials = $teacher_tokens[1];
                                        }
//                                        echo "SURNAME $surname INITIALS $initials USER TYPE $user_type <br>";
                                        $q = "SELECT * FROM schoollms_schema_userdata_access_profile WHERE school_id = ? AND type_id = ? AND name LIKE ? AND surname LIKE ?";
                                        $q_data = array ($school_id, 4, "%$initials%", "%$surname%");
                                    } else {
//                                        echo "TEACHER $teacher<br>";
                                        $q = "SELECT * FROM schoollms_schema_userdata_access_profile WHERE school_id = ? AND type_id = ? AND surname LIKE ?";
                                        $q_data = array ($school_id, 4, "%$teacher%");
                                    }

                                    $query = $link->prepare($q);
                                    $query->execute($q_data);
                                    $num_rows = count($query->fetchAll());
//                                    echo "TEACHER NUM ROWS $num_rows <br>";
                                    if ($num_rows == 1){//FOUND THE TEACHER
                                        //GET USER DETAILS 
                                        $query->execute($q_data);
                                        $row = $query->fetch();
                                        //var_dump($row);
                                        //exit;
                                        $user_id = $row['user_id'];
                                        $list_class_teacher_ids[] = $user_id;
                                        $name = $row['name'];
                                        $surname = $row['surname'];
                                    }
                                }

                                $count_teachers = count($list_class_teacher_ids);
//                                echo "COUNT TEACHERS $count_teachers <br>";
                                if (empty($list_class_teacher_ids)){
                                    continue;
                                }

                                $subject = $subject_class_tokens[1];
                                $class = $subject_class_tokens[2];

                                //GET GRADE ID FROM $class
                                $grade_tokens = explode("_", $class);
                                $grade_id = $grade_tokens[1];
                                //GET KEY/CLASS NUMBER
                                $class_number = substr($grade_tokens[0], -1);
                                //GET SUBJECT ID
                                $subject_id_found = FALSE;
                                foreach($school_subjects as $subjectkey=>$subjectdetails){
                                     if ((strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE || strtoupper($subject) == strtoupper($subjectdetails['abrev']) || strtoupper($subject) == strtoupper($subjectdetails['name'])) && array_key_exists('id', $subjectdetails)){
                                         $subject_id = $subjectdetails['id'];
                                         $subject = $subjectdetails['name'];
                                         $subject_abrev = $subjectdetails['name'];
                                         $subject_id_found = TRUE;
                                         break;
                                     } elseif(strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE || strtoupper($subject) == strtoupper($subjectdetails['abrev']) || strtoupper($subject) == strtoupper($subjectdetails['name'])){
                                         $subject_abrev = $subjectdetails['name'];
                                     }
                                 }

                                 //GET SUBJECT DETAILS FROM LMS
                                 if (!$subject_id_found){
                                     $subject_found = FALSE;
                                     $subject_key = -1;
                                     foreach($school_subjects as $subjectkey=>$subjectdetails){
                                         //echo "CHECK SUBJECT ABREV ".strtoupper($subjectdetails['abrev'])." SUBJECT ".strtoupper($subject)."<br>";
                                         if (strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE || strtoupper($subject) == strtoupper($subjectdetails['abrev']) || strtoupper($subject) == strtoupper($subjectdetails['name'])){
                                             $subject = $subjectdetails['name'];
                                             $subject_found = TRUE;
                                             $subject_key = $subjectkey;
                                             break;
                                         }
                                     }

                                     if ($subject_found){
                                         $subject_found = FALSE;
                                         $q = "SELECT * FROM schoollms_schema_userdata_school_subjects WHERE subject_title = ?";
                                         $q_data = array ("$subject");
                                         $query = $link->prepare($q);
                                         $query->execute($q_data);
                                         $num_rows = count($query->fetchAll());
                                         //echo "SUBJECT NUM ROWS $num_rows <br>";
                                         if ($num_rows == 1){
                                             $query->execute($q_data);
                                             $row = $query->fetch();
                                             $subject_id = $row['subject_id'];
                                             $subject_found = TRUE;
                                             //echo "SUBJECT ID $subject_id <br>";
                                         } else {
//                                            $q = "INSERT INTO schoollms_schema_userdata_school_subjects VALUES (NULL, ?, ?, ?)";
//                                            $q_data = array ($subject,"SchoolLMS",'');
//                                            $schooldb->prepareDataDatabaseQuery($q);
//                                            $schooldb->db_query->execute($q_data);
//                                            $q = "SELECT subject_id FROM schoollms_schema_userdata_school_subjects WHERE subject_title = ?";
//                                            $q_data = array($subject);
//                                            $schooldb->prepareDataDatabaseQuery($q);
//                                            $schooldb->db_query->execute($q_data);
//                                            $row = $schooldb->db_query->fetch();
//                                            $subject_id = $row['subject_id'];
                                         }
                                     } else {
                                         echo "SUBJECT $subject NEEDS TO BE ADDED TO SUBJECTS ARRAY IN CODE <br>";
                                         exit;
                                     }

                                     if ($subject_found){
                                        $school_subjects[$subject_key]['id'] = $subject_id;
                                     } else {
                                         continue;
                                     }
                                 }

                                 $teacher_user_id = $list_class_teacher_ids[0];
                                 $q = "SELECT * FROM schoollms_schema_userdata_teacher_schooldetails WHERE user_id = ? AND school_id = ? AND grade_id = ? AND subject_id = ? AND year_id = ? ORDER BY class_id";
                                 $q_data = array ($teacher_user_id, $school_id,$grade_id,$subject_id,$year_id);

                                 $query = $link->prepare($q);
                                 $query->execute($q_data);
                                 if (count($query->fetchAll()) > 1){
                                     $query->execute($q_data);
                                     $row = $query->fetchAll();
                                     $class_id_found = FALSE;
                                     foreach($row as $row_index=>$row_details){
                                         $temp_class_id = $row_details["class_id"];
                                         $q = "SELECT * FROM schoollms_schema_userdata_school_classes WHERE class_id = ?";
                                         $q_data = array ($temp_class_id);
                                         $query = $link->prepare($q);
                                         $query->execute($q_data);
                                         $row2 = $query->fetch();
                                         $temp_class_label_tokens = explode(" ", $row2["class_label"]);
                                         $count_class_label_tokens = count($temp_class_label_tokens);
                                         if ($class_number <= $temp_class_label_tokens[$count_class_label_tokens-1]){
                                             $class_number = $temp_class_label_tokens[$count_class_label_tokens-1];
                                             $class_id = $temp_class_id;
                                             $class_id_found = TRUE;
                                             break;
                                         }                                                          
                                     }
                                     if (!$class_id_found){
                                         continue;
                                     }
                                 } else {
                                     $query->execute($q_data);
                                     $row = $query->fetch();
                                     $class_id = $row["class_id"];
                                 }
                            }
                            
                            

                             
                             //$school_classes[] = array ('abrev' => $class_abrev, 'class_label' => $class, 'class_id' => $class_id, 'grade_id'=>$grade_id);
                             
                             //FOREACH LEARNER
                             //GET USER ID - IF EXISTS
                             //CHECK IF LEARNER IS LOADED IN CLASS FOR THIS YEAR - IF NOT LOAD LEARNER
                             $learners = explode("+", $classlist_tokens[1]);
                             $lnoid_count = rand(1, count($learners));
                             foreach($learners as $ckey=>$learner){
                                 $learner_tokens = explode(",", $learner);
                                 if (count($learner_tokens) >= 2){
                                     $surname = $learner_tokens[0];
                                     $name_tokens = explode(" ",$learner_tokens[1]);

                                     $q = "SELECT * FROM schoollms_schema_userdata_access_profile WHERE school_id = ? AND type_id = ? AND name LIKE ? AND surname LIKE ?";
                                     $query = $link->prepare($q);
                                     $temp_name_tokens = $name_tokens;
                                     foreach($name_tokens as $nkey=>$name){
                                         $q_data = array ($school_id,$user_type,"%$name%","%$surname%");
                                         $query->execute($q_data);
                                         $num_rows = count($query->fetchAll());
                                         if ($num_rows == 1){
                                             $query->execute($q_data);
                                             $row = $query->fetch();
                                             $user_id = $row["user_id"];
                                             //Check if learner schooldetails for this year exist
                                             //If not - load the learner
                                             echo "Learner $learner has a user_id $user_id <br>";
                                             $q = "SELECT * FROM schoollms_schema_userdata_learner_schooldetails WHERE school_id = ? AND user_id = ? AND class_id = ? AND year_id = ?";
                                             $q_data = array ($school_id,$user_id,$class_id,$year_id);
                                             $query = $link->prepare($q);
                                             $query->execute($q_data);
                                             $num_rows = count($query->fetchAll());
                                             if ($num_rows == 0){
                                                 $q = "INSERT INTO schoollms_schema_userdata_learner_schooldetails VALUES (?,?,?,?,?)";
                                                 $q_data = array ($user_id,$school_id,$grade_id,$class_id,$year_id);
                                                 $query = $link->prepare($q);
                                                 $query->execute($q_data);
                                                 echo "Learner $learner has been added to $class for year $year <br>";
                                             } else {
                                                 echo "Learner $learner is already registered for $class year $year <br>";
                                             }
                                             break;
                                         } elseif($num_rows > 1) {
                                             $query->execute($q_data);
                                             $user_ids = "";
                                             while($row = $query->fetch()){
                                                 $user_ids .= $row["user_id"]." ";
                                             }
                                             $user_ids = trim($user_ids);
                                             echo "Learner $learner has more than 1 user id ($user_ids) <br>";
                                         } else {
                                             $temp_name = implode(" ", $temp_name_tokens);
                                             
                                             //cteate access details for a lea
                                             echo "Learner $learner has no access details <br>";
                                             
                                             $access_id = "LNOID".$lnoid_count;
                                             $lnoid_count++;
                                             $q = "INSERT INTO schoollms_schema_userdata_access_profile VALUES (NULL, ?, ?, ?, ?, ?)";
                                             $q_data  = array ($school_id, $user_type, $access_id, $temp_name, $surname);
                                             $query = $link->prepare($q);
                                             $query->execute($q_data);
                                             echo "Learner $learner access details CREATED $access_id <br>";
                                     
                                             $q = "SELECT * FROM schoollms_schema_userdata_access_profile WHERE school_id = ? AND type_id = ? AND name LIKE ? AND surname LIKE ?";
                                             $query = $link->prepare($q);
                                             $q_data = array ($school_id,$user_type,"%$name%","%$surname%");
                                             $query->execute($q_data);
                                             $row = $query->fetch();
                                             $user_id = $row["user_id"];
                                             
                                             $q = "INSERT INTO schoollms_schema_userdata_learner_schooldetails VALUES (?,?,?,?,?)";
                                             $q_data = array ($user_id,$school_id,$grade_id,$class_id,$year_id);
                                             $query = $link->prepare($q);
                                             $query->execute($q_data);
                                             echo "Learner $learner has been added to $class for year $year <br>";
                                         }
                                     }
                                 } else {
                                     echo "<b>Learner $learner at key $ckey in $class is missing Name or Surname </b><br>";
                                 }
                             }
                        }
                        exit;
                        break;
                    
                }
            }
            break;
            
        case 'develop/timetable/load/sphs/learners':
            $message_queue = array ();
            //<div class="tabs-selected" title="View/Modify Time Table" style="padding:10px">
            //<div id="timetabletab" title="Reports" style="padding:10px">
            $message_queue["load"] = "class!:!'tabs-selected'!,!title!:!'Load Timetable Data'!,!style!:!'padding:10px'";
            $message_queue["filter"] = "class!:!'tabs-selected'!,!title!:!'Filter'!,!style!:!'padding:10px'";
            $message_queue["view"] = "class!:!'timetabletab'!,!title!:!'View'!,!style!:!'padding:10px'";
            
            foreach ($message_queue as $message_key => $message) {
                $div = new DIV();
                //echo "user_view_body_content_tabs MSG: $message <br>";
                $div->setDIVSettings($message);
               
                switch ($message_key) {
                    
                    case 'load':
                        $school_id = 1;
                        $user_type = 2;
                        
                        $data_message = array();
                        $data_message["db"] = "sphslms_qa_vas_timetable";
                        $data_message["engine"] = "mysql";
                        $data_message["type"] = "db";
                        $data_message["username"] = "root";
                        $data_message["password"] = "$0W3t0";
                        $data_message["host"] = "localhost";
                        $data_message["charset"] = "utf8";
                        
                        $schooldb = new Data($data_message);
                        $school_settings = array ();
                        $school_settings["periods"] = 6;
                        $school_settings["days"] = 10;
                        
                        $grades = array ();
                        $grades[] = "8";
                        $grades[] = "9";
                        $grades[] = "10";
                        $grades[] = "11";
                        $grades[] = "12";
                        
                        $school_subjects = array ();
                        $school_subjects[] = array('abrev' => "ZU;IsiZulu", 'name'=> "Zulu");
                        $school_subjects[] = array('abrev' => "ENG;Eng HML;English HML", 'name'=> "English");
                        $school_subjects[] = array('abrev' => "NS", 'name'=> "NATURAL SCIENCES");
                        $school_subjects[] = array('abrev' => "SS", 'name'=> "SOCIAL SCIENCES");
                        $school_subjects[] = array('abrev' => "Afrik/Zulu", 'name'=> "Afrikaans/Zulu");
                        $school_subjects[] = array('abrev' => "L/S;Life Sci;Life Sci.", 'name'=> "LIFE SCIENCES");
                        $school_subjects[] = array('abrev' => "Afrikaans/LO", 'name'=> "Afrikaans/Life Orientation");
                        $school_subjects[] = array('abrev' => "LO;LO1;LO2;LO3", 'name'=> "LIFE ORIENTATION");
                        $school_subjects[] = array('abrev' => "LO Sport/LO", 'name'=> "LO Sport/LO");
                        $school_subjects[] = array('abrev' => "LO Sport", 'name'=> "Life Orientation Sport");
                        $school_subjects[] = array('abrev' => "Art;A/C;ArT", 'name'=> "CREATIVE ARTS");
                        $school_subjects[] = array('abrev' => "EMS", 'name'=> "EMS");
                        $school_subjects[] = array('abrev' => "Maths;Math", 'name'=> "MATHEMATICS");
                        $school_subjects[] = array('abrev' => "MathLit;Math Lit;Math Lit.", 'name'=> "MATHEMATICAL LITERACY");
                        $school_subjects[] = array('abrev' => "CAT", 'name'=> "COMPUTER APPLICATIONS TECHNOLO");
                        $school_subjects[] = array('abrev' => "AFR", 'name'=> "Afrikaans");
                        $school_subjects[] = array('abrev' => "Hist;Hist.", 'name'=> "HISTORY");
                        $school_subjects[] = array('abrev' => "EGD", 'name'=> "ENGINEERING GRAPHICS AND DESIG");
                        $school_subjects[] = array('abrev' => "Tour;Tour.", 'name'=> "TOURISM");
                        $school_subjects[] = array('abrev' => "Geog;Geog.", 'name'=> "GEOGRAPHY");
                        $school_subjects[] = array('abrev' => "B Stud;B. Stud;B. Stud.", 'name'=> "BUSINESS STUDIES");
                        $school_subjects[] = array('abrev' => "Civil", 'name'=> "CIVIL TECHNOLOGY");
                        $school_subjects[] = array('abrev' => "C.Stud;C. Stud.", 'name'=> "CONSUMER STUDIES");
                        $school_subjects[] = array('abrev' => "Phys.Sci;Phys. Sci;Phys. Sci.", 'name'=> "PHYSICAL SCIENCES");
                        $school_subjects[] = array('abrev' => "Techn", 'name'=> "TECHNOLOGY");
                        $school_subjects[] = array('abrev' => "Math Lit/LO", 'name'=> "MATHEMATICAL LITERACY/Life Orientation");
                        $school_subjects[] = array('abrev' => "Math/LO", 'name'=> "MATHEMATICS/Life Orientation");
                        $school_subjects[] = array('abrev' => "Eng HML/LO", 'name'=> "English/Life Orientation");
                        $school_subjects[] = array('abrev' => "IsiZulu/LO", 'name'=> "Zulu/Life Orientation");
                        $school_subjects[] = array('abrev' => "Econ;Econ.", 'name'=> "ECONOMICS");
                        $school_subjects[] = array('abrev' => "Account;Account.", 'name'=> "ACCOUNTING");
                        
                        $learner_timetable_load[] = "8S#Chauke,Kgothatso Alphina+Dubazana,Lethabo Eleihle+Dungayezi,Luyanda Nicole+Gamede,Njabulo+Gumbi,Qiniso Mqapheli+Gumbi,Samukelo Mpho+Kekana,Kamogelo+Khumalo,Thandowethu Chomami+Mabaso,Samkelo+Mabizela,Ntomfuthi+Marumo,Lentswe Lebogang+Maseko,Njabulo+Mathe,Isabella Ntokozo+Mbatha,Anele+Meyer,Ainsley+Mkhaliphi,Nkosingiphile Nyulo+Mlaba,Njabulo Emmanuel+Mpanza,Viwe Princess+Msibi,Noluthando Pinky+Mtshali,Sizwe+Ntuli,Ndalo-enhle+Phakathi,Khanyisile Asenethemba+Phoswa,Lunga+Radebe,Christina Khanyi+Seema,Siyabulela+Sekgoka,Davey Lesedi+Twala,Duduzile+Vilakazi,Siyabonga";
                        $learner_timetable_load[] = "8U#Buthelezi,Ntokozo+Gama,Gerald Marelous+Khoza,Tumishang+Madikoe,Hlompho+Malapane,Tshegofatso Reabetswe Angelique+Mbonani,Lindiwe+Mdlalose,Lunga Wonderboy+Mkhwanazi,Sandile Terrance+Mohale,Keabetsoe Matome+Mokoka,Oratile Reotshepile+Molefe,Kagiso Gift+Motaung,Thato Gaisang+Motloung,Mncedisi+Msimango,Keletso+Ngcobo,Quincy Wandile+Ngobese,Ntokozo+Ngoma,Siyanda+Nketsi,Thato Godfrey+Nkomo,Phillip+Ntseare,Boikhutso+Radebe,Nqobile Mangalani+Sambo,Unathi Nkateko+Sitsapelane,Lesedi Graca+Skosane,Samkelo Thabiso+Tsotetsi,Reuben Katleho+Vikisi,Vuyolwethu Thabiso Musan+Xaba,Siyabonga Collen+Zikalala,Manqoba";
                        $learner_timetable_load[] = "8N#Afrika,Nobuhle Siduduzile+Anwar,Thareeq+Buso,Sibabalwe+Chauke,Amukelani Sylvester+Chipurura,Strive Ngonidzashe+Fortuin,Cuba Kilarmo Deon+Futshane,Lelethu+Galela,Mfiso Sisanda+Jauza,Kalipa+Kgoete,Pheladi Michelle+Kunene,Nqoba Gift+Lekganyane,Tshegofatso Nshera+Lengoasa,Kabelo Tshegofatso+Lesia,Teboho Atlegang+Madzanise,Tracy Tafadzwa+Maganedisa,Neo Welcome+Magazi,Amogelo+Magubane,Malibongwe Sibonelo Fanele+Makhosani,Vutshila+Marufu,Elias Tinovimansahe+Maseteng,Lehlohonolo+Mbaba,Lufuno+Mbele,Cendy+Mkwani,Ofentse+Mohlabi,Kamohelo+Mokoena,Mbuso Menzi+Moreku,Palesa Pearl Mokgarudi+Motaung,Lesedi Khwezi+Mthanti,Nelisiwe Gladness+Ndebele,Nqobile+Nephawe,Rofhiwa Makhadzi Florence+Nkosi,Oretshwanetse Thando+Phakathi,Thandolwethu Siyabonga+Qweqwe,Lukhanyo+Sedibe,Mpho Gift+Sekano,Lodiwe Mduduzi Monecadia+Singh,Karyn+Tshoma,Naledi Charline+Twala,Jamela Xiluva";
                        $learner_timetable_load[] = "8W#Aphane,Tshiamo Boipelo+Buqwini,Sinelizwi+Chuma,Nalingo Minenhle+Fischer,Chloe Beyonce+Gericke,Romeo Jeremy+Jansen,Blaine Xavier+Kgwedi,Mpho+Kubheka,Lunga Ntokozo+Lewis,Reese Ronli+Mahamose,Kopano+Makhohlisa,Khanyisa+Makola,Dimpho Ashante+Makola,Malebo Modjadji+Maleka,Kamohelo Khutso+Mariri,Lebo Dinah+Maseko,Smangaliso Gladwin+Masha,Reitumetse+Mawela,Palesa Phemelo+Mbatha,Siphesihle+Mbele,Sizwe Thandolwenkosi+Mjoli,Joshua Thando+Mkhize,Khanyisile Nandi+Mkhwanazi,Lethokuhle Gift+Mokgalaotse,Motsatsi Makoma Selina+Mokgapa,Mpho Matome+Mokoena,Paballo+Moqechane,Khauhelo+Moropoli,Kamohelo+Mosehla,Koketso Faith+Motaung,Ofentse Gomolemo+Mthethwa,Lindelwa Cebile+Mthethwa,Siyasanga Lukhanyo+Nculu,Anathisisana+Nkosi,Nkanyezi Shawn+Ntshabeleng,Molemo+Sekatane,Karabo Faith+Simelane,Ntokozo Thandolwethu+Sobayeni,Linda+Tshesane,Mmatefo Maruo+Iyali,Siyolisiwe Ovayo";
                        $learner_timetable_load[] = "8A#Baloyi,Njabulo Mitsako+Binda,Owamithando+Dayel,Wanda Mtowoli+Dikobe,Sifiso+Gololo,Kgothatso+Kekana,Karabo Nompumelelo+Khweswa,Santana Lethubuhle+Khumalo,Anesu Trish+Maans,Marcia Vecepia+Mabidilala,Paul Teboho+Mahlangu,Boitumelo Ntula+Maimela,Lebogang Vanessa+Maleka,Mvulani+Mambana,Katlego+Mashigo,Lethabo+Mathebula,Ntsako Ntandokazi Natasha+Mbelebele,Loyiso Thando+Mlotshwa,Ntokoza Nthando+Mngcethe,Onele+Mokoena,Simphiwe Precious+Molefe,Angelica+Msiza,Mmapula Kealeboga+Msomi,Tshepo+Mtintsilana,Sandisiwe Mikateko+Mukhoro,Mukhethwa Susan+Ndlovu,Nondumiso+Ndou,Rokunda+Nhlapo,Gugulethu Noluthando+Nkuna,Bontle Malaika+Ntsala,Kamohelo Kutlwano+Ntshingila,Mzamo+Padayachee,Kayden Haran+Pradeep,Krishna Prasanth+Radebe,Nompumelelo+Ramoshaba,Makoma Annah+Sefatsana,Kabelo+Sibanyoni,Khayalethu+Skosana,Omolemoi+Somera,Ruhan Vinay+Theko,Mohau Ntagile+Zibane,Mbalenhle Angel";
                        $learner_timetable_load[] = "8R#Ahmed,Tesrielle+Banda,Mathews+Barlow,Danyelle+Chiloane,Hlaudi Lebohang+De Beer,Cleo Rhulani Muhluri+Dhlamini,Esethun Swazi+Fritz,Ruwaan Randy+Gomba,Anathi Thandolwethu Madala+Gqoba,Tshiamo Cleopatra+Julius,Liam Brooklynn+Kgoete,Mologadi Charmaine+Khoza,Kimberly Xiluva+Khoza,Vusimusi Itumishang+Mabasa,Neo Charmaine+Mabelane,Moeketsi Junior+Mahlangu,Bongani Romeo+Mahoa,Oratiloe Kgaugelo+Maluleka,Thando Njabulo Nthando+Maluleke,Tlangelani+Mashile,Thabiso Victor+Mduli,Noluthando Kagiso+Mlotshwa,Ntokoza Fortune+Mndawe,Nosipho+Mokoena,Ittetso Peceverance+Molapela,Kgomotso+Motlhabane,Ofentse Tshegofatso+Motshophi,Kgolangano Orephemetse+Mtshali,Njabulo+Ngwenya,Thando Nicole+Ntuli,Namhla Mpumelelo+Otsheleng,Atlile+Ramokoka,Amogeleng+Selepe,Katleho Thabo+Sibanyoni,Ayanda Mbali+Siyaya,Phumi Siphilile+Sukazi,Landi Allexinah+Thango,Zinhle Ntombifuthi+Tsiane,Reitumetse+Tsotetsi,Keitumetse Teboho+Xinindlu,Ayanda";
                        $learner_timetable_load[] = "8D#Banda,Thandiswa Chantel+Bantseke,Lesego+Dhladhla,Lungelo+Dhlamini,Bontle Edith+Cough,Tamicelle+Govender,Keisha Mickayla+Khoza,Meldon Nkateko+Khoza,Nkateko Nkosana+Langa,Siphesihle+Lengoasa,Lesego Nomadlozi+Mabaso,Ziyanda Sibahle+Magadlela,Nosihle Pearl+Magidimisa,Vhutali Junior+Mahlangu,Siyabonga Romen+Mahlase,Masechaba Sentoteng+Makhubu,Siyazi Siyabonga+Makutwane,Boitshepo Lesego+Maluleka,Lutho+Maluleke,Tinyiko+Masenya,Madimetsa Sam+Masinga,Zalina Nokukhanya+Masola,Kgodisho Lethabo+Mbane,Iviwe+Mdeka,Claire+Mmushi,Matshepa+Mncwango,Samelo Njabulo+Mokondo,Seldom+Motloung,Ethan+Mtshali,Sinethemba Hope+Ngubane,Mpho Katleho+Ngwenya,Nomfundo+Ogle,Dante Alcino+Raghunath,Leandro Hrithik+Rajkumar,Gershara+Shili,Joy Tebogo+Shoba,Sibusiso+Tau,Kabelo Junior+Tembe,Louis-Junior Amukelani+Vilakazi,Thando Musa";
                        $learner_timetable_load[] = "8P#Booi,Mehluli Ofentse+Brown,Lebohang Angel+Du Plessis,Cazwynne Erin+Du Plessis,Danielle Cindy+Hill,Dylan Ryan+Hlatshwayo,Siyabonga Njabulo+Khumalo,Njabulo Sandile+Mabotha,Lereko Nyakallo+Mabusela,Neo Carl+Makalima,Ntokozo+Makatini,Nqobile+Manqoba,Musa Nhlapo+Manzini,Lungelo Bridget Sakhile+Matlaweng,Unathi Masego+Matlou,Ofentse Mokgadi+Mbatha,Zandi Cynthia+Mhlanga,Irvin Sandile+Mhlongacala,Bulelwa Lungile+Mkhatshwa,Mthokozisi Keemetswe+Mofokeng,Thatohatsi+Mogabe,Keletso+Mohoaladi,Pallo+Mokoena,Kgothatso Tshepo Jacob+Moloi,Thabang Thokozani+Molomo,Karabo+Morele,Siyabonga Roney+Mpshe,Gift+Mpuru,Tsegafatso+Naidoo,Jaedon Daniel+Nathane,Tshiamo+Nkosi,Babalwa+Padi,Ikaneng Letlhogonolo+Pampoen,Abram Tebogo+Rikhotso,Rivoningo+Rodrigues Da Silva,Amor Alicia+Sidia,Tshegofatso+Sidu,Mthoba Musa Theophillus+Troskie,Shane+Tshabalala,Prince Sthokomele+Zondiwe,Rethabile Loreen";
                        $learner_timetable_load[] = "8K#Boards,Jaylyn Jenay+Buang,Mohale Isreal+Du Plessis,Caleb Victor+Gxabuza,Aphelele Angel+Hlekane,Ngalava Bornwise+Khumalo,Luyanda Mzwenkosi+Kokoane,Tumelo Valentine+Mabuza(Shongwe),Thembelihle Sweetness+Majola,Anele Kim+Makgethe,Onthatile+Manana,Sihle Mabuthi+Maponyane,Phaswana Jaydee+Matladi,Karabo Millicent+Mavuso,Busisiwe Sanelisiwe+Mhlaba,Desire Khayalethu+Mine,Mamotjhane Salaminah+Mofokeng,Sihle Tonny+Mogandei,Oratile+Moleko,Bokang+Monametsi,Zanele+Mosime,Katlego+Mpiyake,Siviwe+Mseleku,Aphelele+Msimango,Sinenhlanhla+Mtemeli,Gugulethu Dephine+Mukansi,Lungile Ntsako+Murugan,Kaylee Leandra+Ncongwane,Thando Nonkululeko+Ndhlovu,Nhlohlori+Nenweli,Tshegofatso Ronewa+Nkosi,Khanyisile+Nkumbi,Princess Luyanda+Padayachee,Tyrique Gaveshen+Patji,Matthew Ponto+Rasebeka,Phomello+Rohan,Nikayla+Sibiya,Sarah Jabulisile+Sikhosana,Iyazi+Thwala,Buhle Perfect Siwela+Tshabalala,Simphiwe";
                        $learner_timetable_load[] = "8H#Biyana,Esihle+Bugwantha,Kavit+Dlamini,Bongani+Huma,Neo+Khumalo,Lindokuhle Walter+Kose,Lihle+Mabika,Benjamin+Machete,Mahlatsi Marupini+Maja,Tsegofatso+Makhanya,Buhle+Mambane,Brigthe Ntlharhi Wise+Marie,Lavesha+Mathebula,Zakhona+Mavuso,Gcina Bradley+Mgandi,Luyolo Nyiko+Miya,Mfundo+Modise,Atlegang Vincent Junior+Mogotlane,Ngwako Kgwatlha+Moodley,Tashlyn Thereshnee+Mpendu,Unathi Untnatile+Msibi,Kutloano Nqobile+Mulane,Mpho Boitumelo+Ncube,Milcent Anele+Nhlapho,Musa Manqoba+Nkosi,Ndumiso Zenzele+Ntsangase,Lunga+Padayachee,Tyrell Gaveshen+Perumal,Kiara+Phoshoko,Tshepo+Qwabe,Buhle+Ramphele,Ofentse+Sachaka,Modisenyana+Sedoaba,Thato Boitumelo+Segwapa,David Lebohang+Sibiya,Lindokuhle Alicia+Simelane,Keketso Thamira+Sithebe,Mnqobi Khulekani+Thwala,Oratile Thandolwethu+Ntshangela,Lilitha Minenhle+Zibula,Senamile Gugulethu Rejoyce";
                        $learner_timetable_load[] = "9S#Bunting,Jude+Dhludhlu,Lungile Nompumelelo+Dunjane,Lindokuhle+Gwebu,Lwazi Khulekani+Hewu,Mpumelolo Kamohelo+Khanyi, Luvuyo Lovejoy+Khumalo, Hlengiwe Princess+ Leseyane, Palesa Shaleen+ Mabija, Chumani Babalo+Maimane, Thabo Fanyana+ Malahlela, Tumelo Nicole+Mashego, Lehlogonolo Rachel+Mataka, Ashley+Mbele, Luvugo+Mdletshe, Konke Lungelo+Mnguni, Unathi+Modisane,Lesego Salome+Mollo, Sibusiso+Morake,Neo+Mqungwana, Ayakha+Mthethwa,Zandile Nthabiseng+Ndhlovu,Naledi+Ndlovu,Zakhele Prince+Nkoana, Thato+Nkosi,Buhle+Phillips,Zanokuhle+Poopedi,Rakodi Katlego+Rasebotje,Semakaleng+Sambo,Lizzy+Sibeko,Tsholofelo+Sithole,Clive Kichini+Tshabalala,Ofentse Nomthandazo+Tshikoma,Maanda Freddy+Zondo,Lethukukhanya";
                        $learner_timetable_load[] = "9U#Bunting,Leeson+Dunga,Grace Admire+Hadebe,Hugo Nkateko+Haynes,Kimm Jade+Khasake,Olarato+Khumalo,Gugu+Lukunku,Esther+Mabena,Mpumelelo+Makate,Sibusiso Musa+Makunyane,Tsholofelo Tebadi+Masikane(Gumede),Lubanzi+Masondo,Owethu Jessica+Mbele,Omphilegape+Mchunu,Celiwe Lwandile+Mnisi,Khanyisile Nomusa+Modipa,Keitumetse+Mohlala,Diketso Danton+Monana,Owethu Nicole+Moraba,Kamogelo+Msibi,Bokang+Msomi,Asanda+Ndhlovu,Thapelo John Sthutha+Ndlovu,Mpumelelo+Nkomo,Ripfumo+Nkosi,Blessing+Phiri,Wezi Patrick+Phungwayo,Sabelo Sanele+Reddy,Mickyle,Owen+Sakala,Sekani,Yasinti+Silangwe,Babalwe Nontuli+Sithole,Cliff Kichini+Tshabalala,Thando Kopano+Tshesa,Khothatso Lucky+Zwane,Anele";
                        $learner_timetable_load[] = "9N#Butelezi,Kholwa+Dlamini,Ntuthuzelo Nomangwane+Hansen,Langelihle Maxwell+Khosa,Deidre Lunga+Khoza,Khethelo+Maasdorp,Nigueshni Leandre+Mabanga,Mthokozisi ntokozo+Makhanya,Siabonga Vutani+Makoe,Palesa+Masilela,Mduduzi Derick+Masombuka(Zwane),Nonhlanhla+Mbonani,Unathi Lebone+Mbuyeleni,Kamvelihle+Mntambo,Wandile+Modiba,Lebohang selina+Momgalaki,Keketso Given+Monyake,Katleho+Msimanga,Lethabo+Msimango,Refilwe+Ndebele,Claudio Sebolelo+Ndlovu,Busiswa+Nkomo,Sean Aneshu+Nkosi,Banele+Phoshoko,Madida+Phoshoko,Simon Thato+Ruiters,Curtley y8+Rwairwai,Asanda+Simelane,Thamsanqa+Sinakhomo,Keabetswe Mokokoti+Tshabangu,Thamsanqa+Tshehla,Tshegofatso Pheladi Manong+Zwane,Thato Sibusiso";
                        $learner_timetable_load[] = "9W#Amigo,Shay-Lee Levandre+Choma,Fiona+Dhlamini,Khotso Timothy+Goliath,Leandre Audrey Cathleen+Govender,Marcelle+Kgaphola,Tukelo Shantel+Kgomo,mmaphuthi Mashadi+Legodi,Morongwoe+Legoete,Kutloana+Magamba,Nomfundo angel+Mahlangu,gerald Zakhele+Maseko,Ziyanda Samkelisiwe+Masemola,Thabiso+Mazibuko,Mmanthuba+Mlombile,Mbulelo Zenande+MMako,Mamogau+Mokwena,Lesedi+Molefe,Palesa Paulette+Moyani,Melissa+mpembe,Buhlebenkosi Sibusiso+Ncube,Thandeka Nicole+Ndaba,Samantha Uyanada+Ngwenya,Ziyanda Nomaswazi+Nhlapo,Lebo Angel+Perumalsamy,Tyron+Peters,Rudean+Ramabu,Mmatlou+Ramoshaba,Tiribele Thapelo+Shirinda,Kristen+Shongwe,Ntokozo Mbasa+Tree,Cashia+Trotters,Jay-Dean+Xulu,Thembelani sabelo+Zana,Tashawell";
                        $learner_timetable_load[] = "9A#Arendsen,Cayla Chrisanne+Chivaviro,May+Dlamini,Sibusiso+Gogoba,Buhle+Gumbi,Nhlakanipho Mpumelelo+Kgabane,Thando Dimakatso+Kgope,Kamogelo Bonolo+Lebelwana,TsolofeloGreat+Lehong,Thato Thabiso+Magabane,RethabileThobile princess+Mahlangu,Princess+Maseko,Mzwandile Chris+Masenya,Kutlwano Rose+Mazibuo,Johan Perseverence Thokozani+Mbangula,Onikwa+Mkontwana,Chulumanca Ndwekazi+Mmokwa,Zoe Segomosti+Mokoena,Yoliswa+Moleke,Nyakallo Walee+Motumisi,Quinton+Mphetha,siyamthanda+Ncube,Phillip CJ Tshepo+Ndaba,Thandiwe+Ngwenya,Thembekile+Nkabinde,Unahi Ntombenhle+Paulsen,Wade Alva+Phakathi,Sabelo Maxwell+Ranlholo,Peter Kabelo+Shangase,Sandile Khulile+Sibanyoni,Ndumis0 Nonkekheli+Thomas,Tiara+Tsenase,Mokopoli+Xaba,Dumehlezi+Zikali,Jotam";
                        $learner_timetable_load[] = "9R#Batubenga,Deborah Ntanga Tshinangi+Chingorivo,Wentzel+Dhlamini,Thandekile+Gegana,Bakithi Onzela+Gwaza,Nokuthaba Sheila+Kaingana,Ayabulela+Khambule,Nonqaba Amkela+Laal,Zane+Lerumo,Lethabo+Mafale,Tshepiso Palesa+Mahlobo,Thokozani+Maseko,Igugulethu Isiphesihle+Mashamate,Pelabela+Mazibuko,Asanda+Mbatha,Nonkululeko+Mkoko,Mpho,+Mnguni,Thando Kutloano+Mokoena,Tshegofatso Lucy+Moletsane,Matshepo Kgomotso+Matsoane,Mpho+Mpikwa,Syabonga+Ncube,Nompumelelo Trinity+Ndevu,Lindokuhle+Ngwenya,Sinenhlamhla+Nkambule,Karabo Te-Besuthu+Osunwa,Ngizika Sandra+Phakathi,Samukelo Martin+Rafahlema,Naledi Kamogelo+Rapudi,Tokollo+Shai,Junior Mphafudi+Sibeko,Mandlenkosi Simon+Thobejane,Kenny+Tshabalala,asanda+Weimers,Zaakirah+Zondi,Sinothando,Amahle]";
                        $learner_timetable_load[] = "9D#Bhaduza,Ayanda+Chiliza,Ogechukwu Kelly+Durwin-Smith,Jean-Michel+Gcuze,Tshwanelo Senamile+Hlabana,Tshenolo Samantha+Jele,Basetsana+Khumalo,Musawenkosi+Laal,Zaheeda+Mabizela,Mnthenjwa+Mafafane,Lehloholono Paballo+Malapile,Ntando Keamogetse Mpho+Martins,Shaydine,Chelsea+Matebesi,Tidimala+Mayeekiso,Mbuleleo+Mdluli,Ayanda Siphiwe+Mkhwanazi,Njabulo+Modise,Boipelo Lesego+Mokoakoa,Boitumelo+Motlhahledi,Khumo Gino+Mtsweni,Musawenkosi Khulani Junior+Ndlovu,Zwe-Aphiwe+Ngwenya,Nqobile Nobuhle+Nkosi,Njabulo+olatunde-Joel,David Fiyinfolowa+Potelwa,Nhlanhla+Radebe,Thandokuhle+Sebati,Lebohang Y8+Shabisha,Nonhlanhla Precious+Sithole,Lebo+Theledi,Sipho'sihle+Tsotetsi,Khopolo Plathuto Qeneheld+Wayama,Musaka";
                        $learner_timetable_load[] = "9P#Billa,Thando+Chetty,Benita Lydia+Durmin-Smith,Marie Michelle+Gagela,Alulutho+Hlatshwayo,Bayanda Theo+Jeje,Isanda michelle+Kolobe,Khutso Kevin+Kumersamy,Aidan Reece+Mabotea,Tlotliseho Orebaballetse Thungthunyane+Madumo,Bothlale Kganya+Malaza,Nkosana+Maphosa,Tshegofatson Stella+Mathinya,Kgothatso Keketso+Mavovana,Velile+Mdluli,Ayanda+Mkhwanazi,Buhle Buzile+Moganedi,Kamogetswe+Mokgotla,Neo+Mosea,Bonolo Dan+Motabo,Lebogang+Mtuti,Lutho+Naidoo,Ryan Christopher+Netshituka,Khuthadzo+Ngwenya,Lindokuhle Pearl+Nkosi,Nokwanda+Oebengu,Loyiso Neo Vuyo+Potsane,Kabelo Dot+Radebe,Samkeliso Bandile+Sedumedi,Kamigelo+Shabalala,Thando Khumo+Smith,Erin+Theledi,Mbalenhle Thabisile Kathy+Tsotetsi,Neiwe Teboho+Vilakazi,Zanele Wendy";
                        $learner_timetable_load[] = "9K#Bopape,Tshepiso Mmabophelo+Chauke,Sibusiso Xoloni+Esbend,Gabriella+Gaga,Nathi+Hlatshwayo,Ntombenhle Gugulethu Princess+Jansen,Shunika+Komane,Tisetso Tarryn+Kumalo,Khensani Patience+Maboka,Lerato+Madelane,Moshoko Angela+Maleka,Siyabonga Philande+Mantloa,Kgomolemo+Matidza,Lesego+Mavimbela,Themba+Mdluli,Hlengiwe+Mhlongo,Thembalami Sabelo Sisulu+Mogashoa,Lesego+Mokgalaka,Khumo Nicole+Mosete,Keamogetswe+Mosweu,Tshepang+Mugandi,Tshepang+Mzozo,Tshepo+Ngobese,Bongiwe+Nguxe,Thozama+Nkosi,Toughman+Nyingwa,Unathi+Qanda,Gugu,Siphesihle+Radebe,Samkelisiwe Nokwanda+Segapo,Tshegohatso+Shabalala,Noluthando+Smith,Samukelo Felicity+Thedise,Koketso+Tsotetsi,Tshepang Rorisang+Vesi,Zwelibanzi";
                        $learner_timetable_load[] = "9H#Bote,Munyaradzi Dickens+Chatikobo,Rukudzo+Fakude,Nhlanhla+Francis,Weslin Blaine+Hlongwane,Sihle+Jaca,Owami Thembelani+Kondo,Brandon Nkosinathi+Kubheka,Simphiwe+Mabudu,Shandukani+Macheoane,Khabane+Malekana,Mogau Segopotse+Manana,Thando+Matimalane,Manyama+Matse,Boipelo+Mdluli,Keabetswe Sihle+Mgcina,Zanele+Mogohle,Tumelo Lucky+Mohlaodi,Sebabatso Lerato+Moshoeshoe,Keagile+Mosweu,Tshegofatso+Mukansi,Sithembinkosi+Myataza,Refilwe+Ngobese,Patience+Nguxe,Hlompho+Nondala,Siphokazi Anele Nomfundo+Nyembe,Siyabonga+Radebe,Ayanda+Radebe,Palesa+Sekatane,Thandeka Nokukhanya+Seretse,Mpho+Sosola,Thabo+Thabethe,Siphesihle+Tsotetsi,Tshepang+Van Wyk,Dewayne Arrie";
                        $learner_timetable_load[] = "9I#Bruwer,Tristan Curil+Buthelezi,Sthule Mpandulo+Fisch,Calleigh Taylor+Fortun,Buren Errin+Hlubi,Sobukwe+Kwuchukwu,Hope Chioma+Konyane,Kamogelo+Kubeka,Soyisile siyabonga+Mabuza,Njabulo Floyd+Machaba,Bontle Thapelo+Malope,KamohelonHomolemo+Maloyi,Somila+Matiza,Tshiamo+Matobako,Kopano+Mdluli,Mandisi Mellissa+Mehlomakulu,Vuyolwethu Mthimkhulu+Mohale<Katleho,Klain-boy+Mosito,Amogelang+Mosoeunyane,Mosebetsi Thato+Mupfeka,Pllip Boikanyo+Mvimbi,Joe-Junipr Xabisekile Tumelo+Ngomane,Sayanda+Ngubeni,Pumla,Ntsapo,Thandiwe+Ntshingila,Bongiswa+Radebe,Lindokuhle+Radebe,Musa+Selolo,Tlou Lethabla+Senamolela,Katlego+Stewart,Nicole+Thabaneng,Yolanda Enhle+Twala,Anele+Van Ryneveld,Mable Nakazi";
                        $learner_timetable_load[] = "10S#Abrahams,Shannon+Adolph,Quinlan+Buso,Skholiwe+Davids,Sherezaad+Du Plessis,Casey+Gombani,Precious+Hlatshwayo,Zithulele+Hlungwani,Rivoningo+Lepele,Mabotse+Maasdorp,Whanita+Mahlangu,Lindiwe+Makama,Abigail+Maloka,Ntokozo+Manikivane,Wandile+Masha,Lesego+Matekane,Thabiso+Mkhonza,Melusi+Mndebele,Nhlanhla+Mofokeng,Boitumelo+Mokolokolo,Lesedi+Mosaafhebe,Legae+,Mothabeng,Mamorena+Mshumpela,Njabulo+Musingadi,Ndivhuwo+Ndiaye,Nonhlanhla+Ngwane,Samukelo+Nkondlwane,Emihle+Ntshingila,Ayanda+Peake,Ashlyn+Ramokolo,Kgaphuru+Sibiya,Andiswa+Sithole,Carol+Tshabalala,Bongiwe+Twala,Nkateko";
                        $learner_timetable_load[] = "10U#Banda,Luyanda+Bowler,Muhammed+Chatikobo,Tadiwanashe+Dlamini,Linda+Du Plessis,Abigale Kim+Gwala,Sibongakanke Simphiwe+Kanyile,Tesa+Leduma,Nikkie Retshedisitswe+Lubisi,Ayanda+Madonsela,Sibongumusa+Mahlanya,Riccah+Malatji,Boitumelo+Manala,Mwalimo+Maseko,Andile+Matsobane,Tiisetso Jeanete+Mgiyakho,Noluthando Nosipho+Mndebele,Sihle+Mofokeng,Matshidiso+Mokoena,Thuto+Moseki,Kamogelo+Motaung,Nonhlanhla+Mthembu,Mbalehle+Mudavanhu,Kathrine+Ndhlovu,Tegoga Pauline Christina+Ngwenya,Itumeleng+Nkosi,Makhosetive+Ntoyi,Kamohelo+Radebe,Phephile+Seema,Itumeleng+Sibisi,Thandolwethu+Sithole,Sihle+Tshikane,Omphile+Ximba,Lungile+Zulu,Nwabisa Joy";
                        $learner_timetable_load[] = "10W#Aphane,Temoso+Beharie,Nina+Bhengu-Mankge,Mbali+Damari,Lufuno+Diemesor,Anaestasia Law+Dos Santos,Candice+Govender,Trystan+Kachoko,Salama,Said+Kivido,Jordan+Langa,Lesedi+Madi,Mphanyeso+Mahlangu,Andile+Majola,Bongani Y8+Maluleke,Romeo+Mangoali,Tumelo+Marutha,Bonolo+Mathobela,Kamogelo+Mkoko,Mthokozisi+Mnguni,Neo+Mokoena,Reatlehile+Molefe,Tshepiso Promise+Motau,Thato+Mphaphuli,Hulisani+Mtshali,Nompumelelo+Ndlovu,Thando+Ngwenya,Simphiwe+Noruwana,Phumla+Ogle,Onesha+Radebe,Wilcox+Rakgalakane,Karabo+Ruiters,Curtley Y8+Sekhuthe,Tshiamo+Sikuni,Mihlali+Tsatsi,Kgotso+Tshabalala,Thembelihle+Xayiya,Qhama";
                        $learner_timetable_load[] = "10N#Bumka,Mbalentle+Buthelezi,Lehlohonolo+Dubazana,Hlobisile+Esbend,Rivaldo+Gxekwa,Khanyisile+Leolo,Nonhlanhla Sina+Mafongana,Noluthando+Mahlanya,Tebello+Malele,Lesedi+Maloka,Leloko Khanyisa+Maphathe,Thato Mothae+Masemola,Olerato+Mashau,Dakalo+Mazibuko,Gontle+Mchunu,Karabo Zakithi+Mkwanazi,Nqobani+Mntambo,Mbali+Mofokeng,Matshidiso+Mohlala,Lebone+Motaung,Teboho+Mpatie,Keran+Mukondeleli,Ambani+Naidoo,Ruvesen+Ndiwa,Thando+Nhlapo,Masego+Nkosi,Malibongwe+Nyakale,Neo+Radebe,Hlompho+Sekhalo,Sabelo+Sibiya,senzokuhle+Thomas,Jade+Tshifure,Tsebo+Weimers,Zaakirah+Zikhali,Sifiso";
                        $learner_timetable_load[] = "10A#De Vries,Drue+Dladla,Tshegofatso+Govender,Simone+Hadebe,Sihle+Kolanisi,Banele+Langa,Londeka+Mabula,Naledi+Mahlangu,Khaya+Makhalimele,Lungelo+Makuwa,Lerato+Manqele,Jacob+Mantshiyane,Owami Jonathan+Mbena,Shiela+Mdingwaze,Sinqobile+Moagi,Nthabeleng+Mokoena,Karabo Vuyolwethu+Mokwana,Katiso+Montle,Bontle+Motloung,Matshidiso+Mphofela,Matshidiso Ngwanankwana+Mpiti,Bohlokoa+Mvelase,Xolile Natacia+Ndebele,Kutlwano+Ngwenya,Thembelihle+Nhlapo,Noluthando+Ntuli,Ntuthuko+Paile(Moshobane),Shatadi+Sangweni,Bridget+Senosi,Kgotso+Sitoto,Musa+Tlhatlhetji,Reamogetse+Trivalgo,Cindy+Yeni,sipho+Zwane,Hlengiwe Thulisile";
                        $learner_timetable_load[] = "10R#Beya,David+Botha,Lashandre+Buthelezi,Ayanda+Choane,Lesego+Dhlame,Nobuhle+Fanana,Again+Gumbi,Lethukuthula+Kekana,Hlologelo+Kubheka,Sandile+Mabe,Sicelo+Madikgetla,Ofentse+Maila,Keitumetse+Makutso,Nomonde+Mandyu,Tshegofatso+Manyathi,Zanele+Mayble,Basetsane+Mdluli,Neo Thokozani+Mngomezulu,Londeka+Moferefere,Kutloano+Mokou,Violet+Motingoe,Rorisang+Mphaphuli,Nyimani+Muzofa,Tapiwa+Naidoo,Kreolin+Ndaba,Sabeloshile+Ngwenya,Noluthando+Nkosi,Baphiwe+Nyandeni,Nothando Senenhlanhla+Phangane,Bothlale+Semake,Siphumelele+Sibeko,Nonkululeko Lipolyte+Tjale,Mahlatse+Tshabalala,Tebello+Zikhali,Ayanda Bongakonke+Zitha,Simphiwe";
                        $learner_timetable_load[] = "10D#Batongo,Bagwangi+Brown,Lameez+Daniels,Tamia+Dlangamandla,Lisakhanya+Gamede,Kamohelo Shantel+Hlalele,Reitumetse Reneiloe+Khumalo,Ntokozo+Kutumela,Thato Bradley+Lebotsa,Gaake+Lelaka,Lerato+Lubisi,Ayanda+Mabizela,Lwazi+Madikgetla,Millenium Maria+Makhubu,Lusanda+Manabalala,Rosie Thato+Maseko,Maria+Matsheko,Andile+Masilela,Lindelwa Mayibongwe+Mazubuko,Sinethemba+Mbuyane,Pride Sthembiso+Mdlalose,Noluthando+Mkhwanazi,Jabu+Mncube,Sinethemba Thato Sibusisiwe+Mokoena,Solomon+Mtshali,Mpho+Ndlpvu,Patience Nonhlanhla+Nqolobe,Luxolo+Padayachee,Carissa+Ramafola,Simphiwe+Reddy,Megan+Singh,Kevin+Smith,Lungelwa+Tshwala,Nompumeleo+Zimba,Elton+Zwane,Nomfundo";
                        $learner_timetable_load[] = "10P#April,Ofentse+Botha,Ttruque Darnel+Bozsik,Janos+Dhladhla,Eutricia+Dube,Mbali+Goba,Sanele+Hadebe,Siphesihle+Kekana,Mogoshadi+Kubheka,Lesego+Maake,Tidimalo+Mabye,Kgetho+Magome,Katlego+Makhanya,Amanda+Makhura,Lethabo Anidah+Malinga,Thando+Mdleleni,Awonke,Lelethu+Mmutle,Thabiso+Moagi,Busisiwe+Moahloli,Rorisang+Moloi,Reabetsoe+Moodley,Ronan,Cole+Mtshepu,Kgomotso+Musingadi,Ndivhuwo+Ncongwane,Lisia+Ngceba,Wandisa+Nkomo,Nonhlanhla+Nyaka,Modiegi+Ramaele,Lindokuhle,Senzani,Junior+Silinda,Simphiwe+Tshabalala,Khanyisile+Xaba,Siphosethu+Zikali,Sharmaine+Zondo,Nonhlanhla";
                        $learner_timetable_load[] = "10K#Antunes,Marco+Bopape,Thando+Daniels,Taryn+Goba,Mapula+Gudu,Salizwa+Khanye,Naledi+Khoza,Betty+Kumalo,Mandisa+Mabena,Mpumelelo+Mahlasela,Ayanda+Malapane,Kamogelo+Malevu,Siphiwe+Mankanda,Palesa+Mapote,Itumeleng+Maseko,Nokwanda+Mbatha,Ayanda+Mchunu,Karabo Zakithi+Mochitela,Neo+Mofokeng,Lesego+Moloi,Moeketsi+Moyo,Nombuso+Mtlaping,Nomfundo+Mulaudzi,Khakhu+Naidoo,Jamaine+Ndlovu,Judy+Ngobese,Linda Ntokozo+Nxumalo,Mamosa+Pelzer,Megan+Radebe,Kamogelo+Segale,Kamogelo+Sikotane,Andile+Somathika,Vuyelwa+Tsotetsi,Katleho+Xakaza,Thobeka";
                        $learner_timetable_load[] = "10H#Baduza,Siphosethu+Baloyi,Jabulani+Boards,Jamie+Bronkhorst,Luke Oliver+Chipurura,Shania+Fokazi,Bulelani,Ndodikho+Hlatshwayo,Zithulele+Hlungwani,Rivoningo+Legodi,Letlhogonol+Lekoko,Maadimo+Lobeni,Micheal+Mabila,Murangi+Macherechedze,Gerald+Mathe,Reynard+Mazimela,Mncedisi+Mbatha,Mandisa+Mbatha,Njabulo Prince+Meko,Nthabeleng+Memela,Lindani+Mngoma,Kholeka+Mniki,Njabulo+Mohammed,Dondre+Moloi,Thabang+Mostert,Ciara+Mtotoba,Mbali+Muchena,Evans+Muranda,Brentley+Ngema,Sphamandla+Nkosi,Smangaliso+Nkosi,Sibusiso Hebron+Nkosi,Temalangeni+Ntuli,Orapeleng+Nyepela,Gift+Skosana,Nomfundo+Swartz,Leandre+Vanga,Zamananga+Vilakazi,Thuto+Zwane,Zanele";
                        $learner_timetable_load[] = "11S#Colbie,Tyrique+Davids,Lushuandre+Kekana,Lefa Elton+Khumalo,Sibusiso Collen+Mabizela,Vangile+Makuwa,Nobuhle+Malinga,Khumo+Maroga,Tsebo+Matimmalane,Thabo Rick+Mazibuko,Mpho+Mcunu,Akhona Sabelo+Medupe,Morena Khothatso+Mnene,Mikateko Faith+Mokhele,Boitumelo+Moloi,Lesedi+Moreko,Naledi Lerato+Motsoeneng,Obakeng+Mphahlele,Pheladi+Mqungwana,Cinga Gerald+Mvelase,Lethuxolo+Ncube,Nonceba+Ndlebe,Mzwandile+Ngobese,Nikita Ntombizile+Nkosi,Siphoesihle+Nkosi,Lwazi+Peter,Chukwuemeka+Phiri,Hannock+Ramnarain,Diya+Schafer,Derek+Shangase,Zamashuku+Sikhosana,Sokhana+Taulelo,Wesley+Thusi,Ntokozo+Tshabalala,Thabiso+Zimucha,Nicole Tanaka";
                        $learner_timetable_load[] = "11U#Bembe,Sandile+Damoyi,Fatima Zoleka+Hlabisa,Gcina Ntandoyenkosi+Hlungwane,Tholakele Tinyiko+Kgapola,Boitumelo+Langa,Ernest Sibusiso+Mabuza,Faith Xiluva+Mahlangu,Bongani+Malebana,Lesego+Maleke,Katlego+Masokela,Keiso+Matlhavana,Lesedi+Mehlwana,Mandisa+Mndaweni,Siyabonga+Makgotla,Palesa,Mohata+Molefe,Mahlohonolo Mamiki+Morare,Kagiso Timothy+Mosehle,Sihle+Msipa,Nkululeko+Mzima,Khanyisa Ntandokasi+Ncube,Nonceba+Ndlovu,Mosa+Ngomane,Lesedi+Nkosi,Ayanda+Nonkwelo,Ze-ande+Qamakwane,Katleho+Mothibe,Retshepisitswe Paballo+Shongwe,Thandiswa Pretty+Siwedi,Andile+Somay,Samant+Vilakazi,Momgameli+Zitha,Ntokozo";
                        $learner_timetable_load[] = "11N#Adamo,Nick Espada+Azevedo,Melissa+Cicero,Wesley+Dhlangamandla,Khethiwe+Golotile,Yolanda+Hlongwane,Jessica+Julius,Eslynn+Klahla,Bandile+Mabaso,Ntabeleng+Magidela,Ayabonga+Magubane,Sandile+Makhafula,Keitumetse+Malepa,Blessing+Manganyi,Hlulani+Masongane,Bafana+Mbaleki,Yolanda+Mejelo,Rowena+Mmbi,Muthaduli+Moima,Linda blessing+Molele,Kgabo+Moloto,Frigale+Motong,Mamoshabe Lebogang+Msimango,Songo Josias+Muchena,Tadiwashe Erecson+Ndebele,Rorisang+Ngxotholazi,Nkosinathi+Nkala,Sukoluhle+Padi,Tshepi+Ralinala,Thabeleo+Sehume,Altehang";
                        $learner_timetable_load[] = "11W#Bosch,Buhle+Dhlamini,Luanda+Gazide,Kutlwano Tshepang+Gumede,Ndumiso+Hlatshwayo,Khanyisile+Kgaabi,Maremane Richard+Khwerana,Talifhani+Langa,Tshwetso Boipelo+Madi,Mabuti+Mahlalela,Deborah Onnicah+Makuwa,Takudzwa+Maluleke,Basetsana+Manganyi,Rivoningo+Masina,Kahisano+Mbele,Mzwakhe+Mjiyakho,Sindiswa+Mofokeng,Matshidiso+Mokoena,Rethabile Happiness+Molopo,Lehlohonolo+Moreosele,Lethlogonolo+Mphuthi,nombuso Vanessa+Mthembu,Thembelihle+Ndala,Lindokuhle+Nel,Samantha+Norman,Alessandro Delron+Qayiyana,Sinethemba+Ratlou,Kamohelo+Shongwe,Nokuthula+Sibiya,Owami+Silagwe,Siphesihle+Soko,Mandisa+Tlhatlha,Mohau+White,Robin Theodore";
                        $learner_timetable_load[] = "11A#Basson,Chelsea+Chiloane,Bokang+Dube,Victor+Fillis,Nathan+Jacobs,Dylan+Khoza,Menzeli Mpumelelo+Lotimba,lucia+Maboea,Mohaladitwe+Malatsi,Rethabile+Mamaroba,Kagiso+Manabalala,Neo Mary+Matla,Tshepo+Mbonani,Nomsa+Mdinisa,Blessing Zinhle+Mkhwanazi,Nondumiso Sibusiso Theodorah+Moganedi,Tshegofatso+Mokoena,Gontse Ofentse+Moletsane,Kelebogile+Mothupi,Karabo+Mthembu,Nombuso+Ndebele,Mbongweni+Ndlovu,Lesego+Nkombyane,Kabelo+Nsibanyoni,Will Yamkela+Phiri,Ngoako+Phiri,Prudence+Radebe,Mduduzi+Rasebotje,Lehlogonolo+Semenya,Thoriso+Shabalala,Reneilwe+Sithole,Irvin Kichinin+Stander,Megan+Subramoney,Dylon Reese+Twayi,Katleho+Williams,Malik+Xulu,Mthunzi";
                        $learner_timetable_load[] = "11R#Boyise.Boitshoko+Chikwariro,Natasha+Dlamini,Thabang+Gwaza,Nkosana+Jacobs,Chadwin Jadin+Jameson,Nkosazana+Khulu,Ntokozo Langalakhe+Khumalo,Nomathasanqa+Leew,Lebohang+Longwe,Wongani+Mabuza,ntokozo+Malebe,ntokozo+Manana,Sanelisiwe+Masiane,Thuto+Masuku,Thembelihle+Mdlala,Katleho+Mekonnen,Gelila+Mokgapa,Moroko+Mokone,Tshepiso+Mosue,Peter Junior+Motjopi,Mbali Ratile+Mthombeni,Nhlamulo+Mtshali,Mawande+Ndlovu,Khanyisile nqobile+Ngwenya,Ludina Jonas+Ntwendala,Inga+Nxumalo,Mbali+Pheeha,Neo+Phiri,John Clement Dimpho+Pilane,Lesego+Selepe,Simphiwe+Siwela,Karabo felicia+Skhosana,Malibongwe+Tshele,Kakanyo+Vilakazi,Thokozane";
                        $learner_timetable_load[] = "11D#Brown,Lendle+Chakane,Tsholofelo+Govender,Mikayla+Greco,Byron+Jansen,Bernito+Kekana,Thato Raisibe+Khoza,Rifumo+Mabuya,Dumisane+Mabuza,Buhle Pamella+Mahopo,Kamogelo+Malaza,Hlengiwe+Manxeba,Unathi+Martins,Sone+Matseke,Ofentse+Mayekiso,Noluthando+Meyer,Beauty+Mndaweni,Nthabiseng Lindiwe+Mofokeng,Thabo+Moleke,Tshegofatso+Mollo,Kamohelo Margret+Monareng,Boitumelo+Mothlaping,Nthabiseng+Mphuthi,Andile+Nkosi,Felicity+Paile(Moshabane),Karabo Phuthi+Papu,Ndumiso+Radebe,Amahle Zesiwe+Retshidisitswe Nyakallo,Mothibe+Seritili,Gift+Shelembe,Cindy+Sibamba,Njabulo+Toka,Tsheamo+Tshabalala,Bongiwe+Zungu,Khensani+Zwane,Nobuhle";
                        $learner_timetable_load[] = "11P#Boroko,Thabiso+Buthelezi,Ndumiso+Do Amaral,Kazlee Randy Amalia+Els,Nathaniel+Hlapisi,Onkarabile+Hlophe,Wanda+Joe,Kundai+Koko,Mosa Pheeha+Liesering,Ashton Lemuel+Magwaza,Skhumbuzo+Makoe,Kutloano+Malinga,Sibusiso Immanuel+Mankazana,Khanyiso+Masemola,Tshegofatso Fortunate+Mavuso, Njabulo+Mhangwana,Shongile+Mlambo,Hope Nomathemba+Mokoena,Naledi+Molefe,Kgosi Amogelang+Mthembu,Njabulo+Muranda,Ashley+Ncube,Nonceba+Ndaba,Keabetswe,Katlego+Ndlovu,Thato+Ngobeni,Gabaza+Nkosi,Zamahlubi Nokuthula+Ntwanambi,Aluta+Phori,Boitumelo+Raeto,Nthabiseng+Sekati,Segametsi+Shabangu,Nhlanhla Blessing+Thomas,Talitha+Tshabalala,Thokozani";
                        $learner_timetable_load[] = "11K#Buthelezi,Nduduzo+Buthelezi,Mpumelelo+Durwin-Smith,Genevieve+Eland,Malefa+Gwaza,Nkosana Emmanuel+Kent-Brown,Riaan Conrad+Kodisang,Oefentse+Lawrence,Lorenzo Lawson+Mabasa,Ntiyiso Barney+Magubane,nqobile+Malaza,Angela+Maluleka,Mandisa+Marumo,Thato+Mathosi,Cebo+Matita,Hope+Mhlawu,Mongameli Sivuyile+Mogorosi,Tsholofelo+Mokoena,Neo+Mokuene,Mosieledi+Moodley,Vishalan Talano+Mpiyake,Sinovuyo Khanyisa+Mthethwa,Sandile Ntuthuko+Mvelase,Phelelani Siphosethu+Ngema,Ntokozo+Njokweni,Thobeka+Nyambuya,Tariro+Qithi,Thobeka+Raman,Demiel+Robinet,Richard Akapelwa+Sibande,Tsepo+Sindane,Zinhle+Tlaka,Boitumelo+Zulu,Sinethemba";
                        $learner_timetable_load[] = "11H#Chikomo,Lencon Tafadzwa+Dalasile,Nonhlanhla+Dick,Tyrinique Tyrone+Ditshoane,Bennedict Taelo+Gcuze,Thembinkosi+Hoosain,Bianca+Jiyane,Umfanelo Khothatso+Maboho,Mpho+Makala,Luyando+Makhubu,Nomaduduzile Masesi+Manana,Lungisani+Mashabela,Justice+Mavuso,Ronald+Mdinisa,Mary-Anne Nonhlanhla+Moetse,Kutlwano+Mokebe,Vuyo+Molete,Lereko+Molobela,Anchor+Monareng,Kgothalo+Moses,Shanice+Mpebe,Thapelo+Nair,Talisa+Ndlovu,Amahle+Nkele,Kagiso+Nkuna,Omphile+Nyandeni,Ntando+O'Kelly,Kaylin+Penn,Keabetswe Boitumelo+Roelofse,Rochelle+Seleka,Tshepiso Hope+Sibanda,Otshepeng+Sithole,Nqobile+Vilakazi,Jabulani";                       
                        $learner_timetable_load[] = "12S#Bham,Saffiya+Buhali,Mbalenhle+Chisanto,Lovejoy Kudakwashe+Chivaviro,Percy+Dhlomo,Nomonde+Dunga,Knowledge+Goliath,Laydin+Hartman,Ruben Shaun+Khumalo,Palesa+Khwinana,Nozuko+Mabasa,Ntsako+Mabuya,Nthabiseng Hope+Magasela,Nombuso+Maleka,Matsatsi+Masinga,Sibusiso+Mathebula,Sindisiwe+Mbena,Annah+Mbobosi,Anovuyo+Mgcina,Nozipo+Mhlauli,Sabelo+Mochochoko,Tumelo+Moloto,Tumelo+Mothibi,Palesa+mthembu,Mpumelelo+Ndlovu,Wakhile+Njibana,Alizwa+Nkuna,Tinyiko+Ntuli,Rixaka+Pillay,Michael+sebetha,Maletsetsa+Sekelenyane,Reabetswe+Sithole,Sakhile+Sukdeo,Tashmika+Wilhase,Jamean+Xubane,Ntombizamaxuban";
                        $learner_timetable_load[] = "12U#Albertyn, Storm+Cebekhulu,Wamukelwe+Colbie,Shaylan+Dladla,Thabo Happy+Finck,Alridge+Hlope,Melusi+Kekana,Mmatlala Shernel+Khasake,Karabo+Lubambo,Nobuhle+Maahlo,Ofentse+Magasela,Simphiwe+Mahlangu,Reitumetse+Makhanya,Khanyisile+Maluleke,Nhlori+Masango,Reneilwe+Mazibuko,Mthandeni+Mbatha,Gugu+Mekonnen,Yeabsera+Mngoma,Nomfundo+Mnyandu,sihawukele Sizwe+Moagi,Tswelopele+Mosenye,Molemo+Motsieloa,Thato+Mtshali,Thulani+Nkosi,Njabulo+Pabu,Christopher+Petersen,Nathaniel Saydean+Phiri,Samkelo Atlegang+Rani,Viwe+Thobejane,Morena+Van Der Merwwe,Mikhail+Xala,Anele";
                        $learner_timetable_load[] = "12N#Chabaku,Thuto+Dludlu,Nonhlanhla+Du Plessis,Jacques+Kgomo,Moroshadi+Kumesamy,Joshua+Maboe,Naledi+Mahlangu,Nkosinathi+Mahlobo,Sinqobile+Maponyane,Lisa+Mashigoana,Nkini+Mbalati,Macho+Mbelle,Humang+Moloi,Hlangwene+Mosupye,Lesego+Ndaba,Makhaya+Ndlela,Simphiwe+Nhlapo,Masejara+Nkomo,Mbali+Petersen,Tarryn+Philibane,Thina+Radinne,Lerato Rejoyce+Rikhotso,Vukosi+Sikhupela,Lubabalo+Singh,Jashoda+Tsie,Hope+Vengatsammy,Thalia+Zwane,Unathi";
                        $learner_timetable_load[] = "12W#Bazi,Onesimo+Boonzaaier,Shade+Chauke,Getrude Ramkoni+Coomans,Jessica Lucille+Dube,Bryan+Goliath,Caitlin+Gxabuza,sphokazi+Hlongwane,S'Bongumusa+Khumalo,Mfundo+Khumalo,Zamatungwa+Mabaso,Thapelo+Manzini,Lebo+Mathetsa,Sethutse+Matladi,Kelebo+Mbata,Ntombikayise+Mdlalose,Banele+Mkhwanazi,Simphiwe+Mokoakoa,Nokukhanya+Mokoena,Lerato Victoria+Mothibi,Karabo+Mthimunye,Elzinah+Ndlovu,Emelda+Ngwenya,Londiwe+Nkosi,Sinenhlanhla Nomfundo+Perumal,Daynerah+Pilane (Nkadimeng),Tshepang+Ramonnye,Tshenolo+Rohan,Nikita+Shabalala,Bhekamuzi+Simelane,Jane Rebecca+Sithole,Shawn Lebo+Tembo,Daliso+Tsolo,Kamogelo";
                        $learner_timetable_load[] = "12A#Bila,Ayanda+Buda,Lesego+Chimsalaz0,Kamogelo+Dlamini,Zinhle Nkululeko+Erasmus,Kyla Ashley+Gounder,Shayleen+Hlabana,Tsireletso+Kaluba,Nhlanhla+Klassens,Britany+Louw,Ryan Timothy+Maboke,Mpho+Majova,Olefa+Makgethe,Amogelang Patrick+Matekane,Amohelang+Mbuyeleni,Sisipho+Mdhluli,Sibusiso+Mkhonza,Kwanele+Mkhulise,Thina Nosipho+Mkhwanazi,Lebone+Molefe,Tshepiso+Moodley,Priyan+Mphahlele,Mokaolo+Ndhlalane,Tshepo+Ndimande,Katlego+Nhlapo,Nonkululeko+Njolo,Kwandile+Padi,Boikanyo+Perssad,Renuka+Qwabe,Ntokozo+Radebe,Maria+Radebe,Thato+Seanego(Matshiane),Promise+Sheffield,Alexander Daniel+Sithole,Nhlanganiso+Smith,Ethan Lylen+Yende,Ntokozo";
                        $learner_timetable_load[] = "12R#Bhengu,Nondumiso+Caluza,Phumelele+Dhlamini,Khethokuhle+Forster,Dylan+Gumede,Siyabulela+Khumalo,Lungiswa+Liesering,Caitlin+Madiba,Mfundi+Magagula,Gugulethu+Malamule,Sikhulile+Manana,Duduzile+Mathebula,Karabo+Matsimbi,Keokeditse+Mavuso,Nkosazana+Mdluli,Blessing Nkosinathi+Mevana,Karabo+Modiselle,Amogetswe+Mokgatle,Nandi+Mpai,Khutso+Mtimkulu,Bondy+Ngobese,Lebone+Ngomane,Kurhula+Nkwanyana,Maremane+Ntuli,Nokwanda+Pillai,Tegan+Shongwe,Zamantimande+Sibasa,Gomolemo+Sookran,Mishka+Tait,Calcey+Wallace,Sarah-Jane";
                        $learner_timetable_load[] = "12D#Bote,Tatenda+Brown,Landon+Chatikobo,Thinashe+Cindi,Ntokozo+Dimba,Nkosinathi+Ferreira,Shelley+Fortuin,Anzlo+Hliso,Moleboheng+Jamekwana,Sandile+Kopiso,Oteng Hope+Kubeka,Siyabonga+Lekeno,Neo+Madlanga,Joshua Siphesihle+Magadlela,Sithembiso Floyd+Makhalanyane,Keletso+Makhubo,Muzikayise+Mazibuko,Simphiwe+Mbayabu,Nathan+Mhaleni,Brian+Mhlongo,Nompumelelo+Mnisi,Smangele+Mofokeng,Katlego+Mosia,Neo+Ndimande,Amukelani+Nhlapo,Hlengiwe+Nkomo,Trixie+Nkosi,Thapelo+Pahlanen,Beda+Phakathi,Thando+pootona,Koketso+Radebe,Thando+Robson-Garth,Caitlin+Sikhosana,Kamohelo+Sikhosana,Simphiwe+Somera,Aanchal+Tutuka,Ayanda";
                        $learner_timetable_load[] = "12P#Botha,Lesedi+Brown,Tyreeq+Buthelezi,Khethiwe+Ditlopo,Keamoleboga+Dube,Thato+Gumede,Gugulethu+Hobyani,Tintswalo+Kondo,Yolanda+Lobeni,Rejoice+Maetisa,Essie Mpho+Makhonjwa,Ivan+Manzini,Angel Sinethemba+Mashabela,Madeline Mathabethe+Matiza,Zenzo+May,Onke+Mazibuko,Ntokozo+Mdlalose,Busisiwe+Mlambo,Precious+Modiga,Precious+Moloyi,Keitumetse+Moodley,Savania+Moshane,Thlonolofatso+Mtanyelwa,Ntsako+Namane,Refiloe+Nketsi,Nthabiseng+Nkokoana,Paballo+Nkosi,Lungile+Pradeep,Preethi+Rammike,Michell+Sambo,Gugulethu+Sandamela,Palesa+Sianda,Lathi+Skosana,Boitumelo+Speelman,Stekeley+Wehmeyer,Chantel+Zulu,Owethu";
                        $learner_timetable_load[] = "Barry B-Life Sci-K2_10#Botha,Tyrique Darnel+Buthelezi,Lehlohonolo+Dhladhla,Eutricia+Dubazana,Hlobisile+Gxekwa,Khanyisile+Kekana,Hlologelo+Khanye,Naledi+Leduma,Nikkie Retshedisitswe+Leolo,Nonhlanhla Sinah+Madikgetla,Ofentse+Makama,Abigail+Malapane,Kamogelo+Manikivane,Wandile+Mbatha,Njabulo Prince+Mdleleni,Awonke Lelethu+Mntambo,Mbali+Mofokeng,Lesego+Moloi,Reabetsoe+Mostert,Ciara+Mthembu,Mbalehle+Muranda,Brentley+Ndiwa,Thando+Nhlapo,Masego+Nkosi,Malibongwe+Nyakale,Neo+Pelzer,Megan+Radebe,Kamogelo+Semake,Siphumelele+Silinda,Simphiwe+Tlhatlhetji,Reamogetse+Zikali,Sharmaine";
                        $learner_timetable_load[] = "Barry B-Life Sci-K4_10#Aphane,Temoso+Botha,Lashandre+Bronkhorst,Luke Oliver+Brown,Lameez+Daniels,Tamia+Dlangamandla,Lisakhanya+Goba,Sanele+Govender,Simone+Govender,Trystan+Gumbi,Lethukuthul+Kivido,Jordan+Mabe,Sicelo+Madi,Mphamanyeso+Mahlangu,Lindiwe+Makhubu,Lusanda+Makutso,Nomonde+Manabalala,Rosie Thato+Mbena,Shiela+Mkoko,Mthokozisi+Mmutle,Thabiso+Mokou,Violet+Moloi,Thabang+Montle,Bontle+Motloung,Matshidiso+Mudavanhu,Kathrine+Ndhlovu,Tegoga Pauline Christina+Ngwane,Samukelo+Ngwenya,Noluthando+Noruwana,Phumla+Padayachee,Carissa+Ramafola,Simphiwe+Sikuni,Mihlali+Singh,Kevin+Tsatsi,Kgotso";
                        $learner_timetable_load[] = "Barry B-Life Sci-K3_11#Boyise,Boitshoko+Brown,Lendle+Durwin-Smith,Genevieve+Govender,Mikayla+Jacobs,Chadwin Jadin+Jameson,Nkosazana+Jansen,Bernito+Lawrence,Lorenzo Lawson+Magubane,Nqobile+Malaza,Angela+Maluleka,Mandisa+Manxeba,Unathi+Masiane,Thuto+Matita,Hope+Mazibuko,Mpho+Mlambo,Hope Nomathemba+Mokoena,Naledi+Mokoena,Neo+Mosue,Peter Junior+Motjopi,Mbali Ratile+Mphahlele,Pheladi+Mtshali,Mawande+Ndlovu,Thato+Ngwenya,Ludina Janas+Nkosi,Felicity+Nyambuya,Tariro+Retshidisitwe Nyakallo,Mothibe+Sekati,Segametsi+Semenya,Thoriso+Sibande,Tsepo+Sindane,Zinhle+Skhosana,Malibongwe+Tlaka,Boitumelo+Vilakazi,Thokozane+Zwane,Nobuhle";
                        $learner_timetable_load[] = "Barry B-Life Sci-K5_12#Bila,Ayanda+Bote,Tatenda+Chimsalazo,Kamohelo+Gxabuza,Sphokazi+Hlongwane,S'Bongumusa+Maboke,Mpho+Mahlangu,Reitumetse+Majova,Olefa+Maluleke,Nhlori+Manzini,Lebo+Masinga,Sibusiso+Matekane,Amohelang+Mhaleni,Brian+Mkhonza,Kwanele+Mkhwanazi,Lebone+Mnisi,Smangele+Molefe,Tshepiso+Mosia,Neo+Mphahlele,Mokaolo+Ndimande,Amukelani+Njolo,Kwandile+Nkosi,Sinenhlanhla Nomfundo+Phakathi,Thando+Pootona,Koketso+Qwabe,Ntokozo+Robson-Garth,Caitlin+Simelane,Jane Rebecca+Tutuka,Ayanda";
                        $learner_timetable_load[] = "Botha C-Afrikaans-K1_10#Aphane,Temoso+Baloyi,Jabulani+Botha,Lashandre+Bronkhorst,Luke Oliver+Buthelezi,Ayanda+Chipurura,Shania+Dlamini,Linda+Du Plessis,Abigale Kim+Fanana,Again+Hadebe,Siphesihle+Kekana,Hlologelo+Leduma,Nikkie Retshedisitswe+Lobeni,Micheal+Mabe,Sicelo+Mabye,Kgetho+Makhanya,Amanda+Makutso,Nomonde+Malinga,Thando+Manabalala,Rosie Thato+Mandyu,Tshegofatso+Mayble,Basetsane+Mdlalose,Noluthando+Mkoko,Mthokozisi+Mniki,Njabulo+Mokou,Violet+Moloi,Reabetsoe+Moseki,Kamogelo+Mphaphuli,Nyimani+Mtshepu,Kgomotso+Muranda,Brentley+Naidoo,Kreolin+Ndaba,Sabeloshile+Noruwana,Phumla+Ntuli,Orapeleng+Rakgalakane,Karabo+Ramafola,Simphiwe+Silinda,Simphiwe+Tsatsi,Kgotso+Vilakazi,Thuto+Zikali,Sharmaine+Zitha,Simphiwe+Zwane,Zanele";
                        $learner_timetable_load[] = "Botha C-Afrikaans-K4_10#Bopape,Thando+Bozsik,Janos+Buso,Skholiwe+Chatikobo,Tadiwanashe+Maasdorp,Whanita+Madonsela,Sibongumusa+Mahlanya,Riccah+Maila,Keitumetse+Malapane,Kamogelo+Malevu,Siphiwe+Mankanda+Manala,Mwalimo+Maphathe,Thato Mothae+Maseko,Andile+Mdleleni,Awonke Lelethu+Mngomezulu,Londeka+Mokoena,Thuto+Mokolokolo,Lesedi+Moletsane,Mphethe+Mpiti,Bohlokoa+Mshumpela,Njabulo+Naidoo,Ruvesen+Ndiaye,Nonhlanhla+Ngwenya,Itumeleng+Nkondlwane,Emihle+Nyaka,Modiegi+Radebe,Kamogelo+Seema,Itumeleng+Sibiya,senzokuhle+Sithole,Carol+Sitoto,Musa+Tlhatlhetji,Reamogetse+Trivangalo,Cindy+Ximba,Lungile";
                        $learner_timetable_load[] = "Botha C-Afrikaans-K5_10#Adolph,Quinlan+Bhengu-Mankge,Mbali+Botha,Tyrique Darnel+Chirwa,Nonkululeko+Daniels,Taryn+Diemesor,Anaestasia Law+Du Plessis,Casey+Goba,Sanele+Hadebe,Sihle+Kubheka,Lesego+Lehong,Thato Thabiso+Lepele,Mabotse+Madi,Mphamanyeso+Maloka,Ntokozo+Manqele,Jacob+Mantshiyane,Owami Jonathan+Mathe,Reynard+Mazimela,Mncedisi+Mmutle,Thabiso+Moagi,Busisiwe+Mochitela,Neo+Moodley,Ronan,Cole+Mostert,Ciara+Moyo,Nombuso+Mtshali,Nompumelelo+Ngwane,Samukelo+Nhlapo,Noluthando+Nyakale,Neo+Radebe,Wilcox+Ruiters,Curtley y8";
                        $learner_timetable_load[] = "Chirambadare-Math-K4_10#Antunes,Marco+Beya,David+Bowler,Muhammed+Buthelezi,Ayanda+De Vries,Drue+Dubazana,Hlobisile+Esbend,Rivaldo+Gxekwa,Khanyisile+Kanyile,Tesa+Kekana,Hlologelo+Kumalo,Mandisa+Madikgetla,Ofentse+Makama,Abigail+Makhanya,Amanda+Malinga,Thando+Maloka,Leloko Khanyisa+Maseko,Nokwanda+Mchunu,Karabo Zakithi+Mntambo,Mbali+Moseki,Kamogelo+Mphofela,Mathshidiso Ngwanankwana+Musingadi,Ndivhuwo+Naidoo,Jamaine+Naidoo,Kreolin+Ndaba,Sabeloshile+Ndebele,Kutlwano+Nhlapo,Masego+Nkosi,Baphiwe+Nyakale,Neo+Pelzer,Megan+Phangane,Bothlale+Segale,Kamogelo+Silinda,Simphiwe+Tjale,Mahlatse+Tshabalala,Khanyisile+Tshabalala,Tebello+Xaba,Siphosethu+Zikali,Sharmaine";
                        $learner_timetable_load[] = "Chirambadare-MathLit-K6_10#Adolph,Quinlan+Buso,Skholiwe+Buthelezi,Lehlohonolo+Davids,Sherezaad+Gombani,Precious+Khoza,Betty+Kolanisi,Banele+Lepele,Mabotse+Mabula,Naledi+Mahlanya,Tebello+Malevu,Siphiwe+Maphathe,Thato Mothae+Mbuyane,Pride Sthembiso+Meko,Nthabeleng+Moagi,Nthabeleng+Mochitela,Neo+Mofokeng,Lesego+Mofokeng,Matshidiso+Moyo,Nombuso+Mtotoba,Mbali+Mulaudzi,Khakhu+Ngwenya,Thembelihle+Nhlapo,Noluthando+Nqolobe,Luxolo+Ntshingila,Ayanda+Ramokolo,Kgaphuru+Reddy,Megan+Sibiya,Andiswa+Skosana,Nomfundo+Trivangalo,Cindy+Vanga,Zamananga+Yeni,sipho";
                        $learner_timetable_load[] = "Chivaviro-Math-K4_11#Azevedo,Melissa+Cicero,Wesley+Durwin-Smith,Genevieve+Greco,Byron+Hlungwane,Tholakele Tinyiko+Jameson,Nkosazana+Khoza,Rifumo+Lodimba,lucia+Mabuza,Buhle Pamella+Makhafula,Keitumetse+Manana,Sanelisiwe+Masokela,Keiso+Masuku,Thembelihle+Matita,Hope+Mehlwana,Mandisa+Meyer,Beauty+Mndaweni,Nthabiseng Lindiwe+Mofokeng,Thabo+Molele,Kgabo+Moodley,Vishalan Talano+Mothupi,Karabo+Mthethwa,Sandile Ntuthuko+Nair,Talisa+Nkosi,Felicity+Nxumalo,Mbali+O'Kelly,Kaylin+Robinet,Richard Akapelwa+Shangase,Thando+Shongwe,Thandiswa Pretty+Siwela,Karabo Felicia+Tlaka,Boitumelo+Williams,Malik+Zungu,Khensani";
                        $learner_timetable_load[] = "Chivaviro-Math-K5_11#Boroko,Thabiso+Brown,Lendle+Dlamini,Thabang+Govender,Mikayla+Jacobs,Chadwin Jadin+Khumalo,Sibusiso Collen+Langa,Tshwetso Boipelo+Lawrence,Lorenzo Lawson+Madi,Mabuti+Mahlalela,Deborah Onnicah+Malaza,Angela+Maluleka,Mandisa+Manxeba,Unathi+Maroga,Tsebo+Mbele,Mzwakhe+Mjiyakho,Sindiswa+Mnene,Mikateko Faith+Mokuene,Mosieledi+Monareng,Boitumelo+Motjopi,Mbali Ratile+Mthembu,Thembelihle+Mtshali,Mawande+Ndaba,Keabetswe Katlego+Ndlovu,Thato+Njokweni,Thobeka+Paile(Moshabane),Karabo Phuthi+Qithi,Thobeka+Retshidisitwe Nyakallo,Mothibe+Selepe,Simphiwe+Shubane,Neo+Soko,Mandisa+Tshabalala,Thokozani+Vilakazi,Thokozane+Zimucha,Nicole Tanaka";
                        $learner_timetable_load[] = "Chivaviro-Math-K2_12#Cindi,Ntokozo+Dladla,Thabo Happy+Dlamini,Zinhle Nkululeko+Forster,Dylan+Hlabana,Tsireletso+Jamekwana,Sandile+Kgomo,Moroshadi+Kopiso,Oteng Hope+Kubeka,Siyabonga+Lekeno,Neo+Maboke,Mpho+Madlanga,Joshua Siphesihle+Mhaleni,Brian+Mkhulise,Thina Nosipho+Mofokeng,Katlego+Moodley,Priyan+Mosia,Neo+Nkomo,Trixie+Ntuli,Nokwanda+Pahlanen,Beda+Persad,Renuka+Phakathi,Thando+Pootona,Koketso+Radebe,Thato+Somera,Aanchal+Sookran,Mishka+Tutuka,Ayanda+Zwane,Unathi";
                        $learner_timetable_load[] = "Chivaviro-Math-K3_12#Buthelezi,Khethiwe+Chabaku,Thuto+Dlamini,Khethokuhle+Du Plessis,Jacques+Kekana,Mmatlala Shernel+Kumersamy,Joshua+Mabuya,Boitumelo+Maponyane,Lisa+Mavuso,Nkosazana+Modiga,Precious+Moodley,Savania+Mpai,Khutso+Nkosi,Njabulo+Pabu,Christopher+Pillai,Tegan+Shongwe,Zamantimande+Sikhupela,Lubabalo+Skosana,Boitumelo+Tait,Calcey+Wallace,Sarah-Jane";
                        $learner_timetable_load[] = "Claassen-Afrikaans-K3_12#Boonzaaier,Shade+Chauke,Getrude+Dube,Bryan+Forster,Dylan+Gxabuza,Sphokazi+Hobyani,Tintswalo+Kgomo,Moroshadi+Khumalo,Mfundo+Liesering,Caitlin+Lubambo,Nobuhle+Maboe,Naledi+Mahlangu,Reitumetse+Mahlobo,Sinqobile+Manzini,Lebo+Masango,Reneilwe+Matsimbi,Keokeditse+Mazibuko,Ntokozo+Mbelle,Humang+Mevana,Karabo+Mkhwanazi,Simphiwe+Mngoma,Nomfundo+Mokoakoa,Nokukhanya+Motsieloa,Thato+Mtimkulu,Bondy+Ndlovu,Emelda+Nketsi,Nthabiseng+Nkokoana,Paballo+Perumal,Daynerah+Petersen,Nathaniel Saydean+Ramonnye,Tshenolo+Sandamela,Palesa+Singh,Jashoda+Sookran,Mishka+Zulu,Owethu";
                        $learner_timetable_load[] = "Claassen-Afrikaans-K6_12#Bham,Saffiya+Botha,Lesedi+Chinsato,Lovejoy Kudakwashe+Dimba,Nkosinathi+Du Plessis,Jacques+Gounder,Shayleen+Hlabana,Tsireletso+Klassens,Britany+Kondo,Yolanda+Louw,Ryan Timothy+Madlanga,Joshua Siphesihle+Maetisa,Essie Mpho+Mahlangu,Nkosinathi+Makhubo,Muzikayise+Mazibuko,Simphiwe+Mbobosi,Anovuyo+Mhlongo,Nompumelelo+Mnisi,Smangele+Mofokeng,Katlego+Moloi,Hlangwene+Mosia,Neo+Ndimande,Amukelani+Ngomane,Kurhula+Njolo,Kwandile+Nkomo,Trixie+Ntuli,Nokwanda+Padi,Boikanyo+Pillay,Michael+Seanego(Matshiane),Promise+Shongwe,Zamantimande+Sikhosana,Simphiwe+Sithole,Nhlanganiso+Somera,Aanchal+Wehmeyer,Chantel";
                        $learner_timetable_load[] = "De Atouguia-Economics-K1_10#Bozsik,Janos+Buso,Skholiwe+Gamede,Kamohelo Shantel+Mafongana,Noluthando+Mahlanya,Riccah+Majola,Bongani Y8+Maphathe,Thato Mothae+Masha,Lesego+Mkhonza,Melusi+Mokolokolo,Lesedi+Moletsane,Mphethe+Mosaathebe,Legae+Motau,Thato+Mothabeng,Mamorena+Mpiti,Bohlokoa+Mukondeleli,Ambani+Ngwenya,Thembelible+Nkosi,Baphiwe+Ntuli,Ntuthuko+Paile(Moshobane),Shatadi+Radebe,Hlompho+Ruiters,Curtley y8+Senosi,Kgotso+Somathika,Vuyelwa+Tshabalala,Thembelihle+Tshifure,Tsebo+Tshwala,Nompumelelo+Tsotetsi,Katleho+Twala,Nkateko+Weimers,Zaakirah+Zikhali,Sifiso";
                        $learner_timetable_load[] = "Devnath A-Math Lit-K5_11#Boyise,Boitshoko+Davids,Lushuandre+Eland,Malefa+Gwaza,Nkosana Emmanuel+Kekana,Lefa Elton+Kgaabi,Maremane Richard+Magubane,Nqobile+Magwaza,Skhumbuzo+Malaza,Hlengiwe+Malinga,Khumo+Maluleke,Basetsana+Mankazana,Khanyiso+Martins,Sone+Masemola,Tshegofatso Fortunate+Masiane,Thuto+Mazibuko,Mpho+Mcunu,Akhona Sabelo+Mekonnen,Gelila+Mokoena,Neo+Mollo,Kamohelo Margret+Moloto,Frigale+Motlhaping,Nthabiseng+Mphuthi,Andile+Mthombeni,Nhlamulo+Ndlovu,Khanyisile Nqobile+Ntwendala,Inga+Peter,Chukwuemeka+Pheeha,Neo+Raman,Demiel+Ramnarain,Diya+Seritili,Gift+Sibamba,Njabulo+Taulelo,Wesley+Thomas,Talitha+Thusi,Ntokozo";
                        $learner_timetable_load[] = "Devnath A-Math Lit-K4_12#Albertyn, Storm+Bham,Saffiya+Brown,Landon+Coomans,Jessica Lucille+Hartman,Ruben Shaun+Hliso,Moleboheng+Kaluba,Nhlanhla+Khasake,Karabo+Khumalo,Mfundo+Louw,Ryan Timothy+Mabaso,Thapelo+Mahlangu,Reitumetse+Makhanya,Khanyisile+Makhubo,Muzikayise+Masinga,Sibusiso+Mazibuko,Simphiwe+Mbayabu,Nathan+Mekonnen,Yeabsera+Mgcina,Nozipho+Mnisi,Smangele+Mokoakoa,Nokukhanya+Mosenye,Molemo+Motsieloa,Thato+Ndimande,Amukelani+Ndimande,Katlego+Nhlapo,Hlengiwe+Njolo,Kwandile+Ntuli,Rixaka+Phiri,Samkelo Atlegang+Radebe,Maria+Sebetha,Malesetsa+Sheffield,Alexander Daniel+Sikhosana,Kamohelo+Sikhosana,Simphiwe+Sithole,Nhlanganiso";
                        $learner_timetable_load[] = "Devnath A-Math Lit-K6_12#Bote,Tatenda+Chimsalazo,Kamohelo+Ditlopo,Keamoleboga+Fortuin,Anzlo+Gumede,Siyabulela+Khumalo,Palesa+Khwinana,Nozuko+Maboe,Naledi+Madiba,Mfundi+Mahlobo,Sinqobile+Majova,Olefa+Malamule,Sikhulile+Mashabela,Madeline Mathabathe+Matekane,Amohelang+Matsimbi,Keokeditse+May,Onke+Mdhluli,Sibusiso+Mdluli,Blessing Nkosinathi+Mkhonza,Kwanele+Mochochoko,Tumelo+Modiselle,Amogetswe+Molefe,Tshepiso+Mphahlele,Mokaolo+Mtanyelwa,Ntsako+Mtimkulu,Bondy+Ndhlalane,Tshepo+Ndlovu,Wakhile+Nhlapo,Nonkululeko+Nkosi,Thapelo+Radinne,Lerato Rejoyce+Robson-Garth,Caitlin+Sekelenyane,Reabetswe+Singh,Jashoda+Tsie,Hope+Wilhase,Jamean";
                        $learner_timetable_load[] = "Du Plessis A-CAT-K1_10#Adolph,Quinlan+Dos Santos,Candice+Kolanisi,Banele+Kutumela,Thato Bradley+Lubisi,Ayanda+Mabena,Mpumelelo+Mabetoa,Tebogo+Mabula,Naledi+Mahlangu,Khaya+Makhalimele,Lungelo+Malevu,Siphiwe+Maluleke,Romeo+Manala,Mwalimo+Mantshiyane,Owami Jonathan+Masemola,Olerato+Mazibuko,Gontle+Mbuyane,Pride Sthembiso+Mdingwaze,Sinqobile+Mochitela,Neo+Mofokeng,Matshidiso+Mokoena,Thuto+Mokwana,Katiso+Moloi,Moeketsi+Moses,Mandisi We-Nqab+Motaung,Teboho+Mphaphuli,Hulisani+Mtshali,Mpho+Mulaudzi,Khakhu+Ndiaye,Nonhlanhla+Ndlovu,Thando+Nqolobe,Luxolo+Seema,Itumeleng+Smith,Lungelwa+Thomas,Jade+Tjale,Mahlatse+Tlhatlhetji,Reamogetse";
                        $learner_timetable_load[] = "Du Plessis A-CAT-K4_11#Boyise.Boitshoko+Chiloane,Bokang+Ditshoane,Bennedict Taelo+Dlamini,Thabang+Do Amaral,Kazlee Randy Amalia+Kgaabi,Maremane Richard+Khulu,Ntokozo Langalakhe+Langa,Tshwetso Boipelo+Mabuza,Ntokozo+Magwaza,Skhumbuzo+Malatsi,Rethabile+Malinga,Sibusiso Immanuel+Manxeba,Unathi+Masemola,Tshegofatso Fortunate+Mashabela,Justice+Mavuso,Njabulo+Mayekiso,Noluthando+Mcunu,Akhona Sabelo+Mdinisa,Mary-Anne Nonhlanhla+Medupe,Morena Khothatso+Mlambo,Hope Nomathemba+Mokoena,Gontse Ofentse+Mokuene,Mosieledi+Molefe,Kgosi Gauretelelwe+Moreko,Naledi Lerato+Moreosele,Lethlogonolo+Motsisi,Kagiso Amogelang+Mphuthi,Andile+Msipa,Nkululeko+Mthembu,Njabulo+Ndlovu,Khanyisile Nqobile+Njokweni,Thobeka+Ramnarain,Diya+Rasebotje,Lehlogonolo+Schafer,Derek+Shabangu,Nhlanhla Blessing+Sibamba,Njabulo+Sithole,Nqobile+Sithole,Irvin Kichinin+Tlhatlha,Mohau+Zulu,Sinethemba";
                        $learner_timetable_load[] = "Du Plessis B-Math Lit-K1_10#Botha,Tyrique Darnel+Chatikobo,Tadiwanashe+Damari,Lufuno+Dhlame,Nobuhle+Goba,Sanele+Kubheka,Lesego+Lebotsa,Gaake+Legodi,Letlhogonol+Maasdorp,Whanita+Madi,Mphamanyeso+Magome,Katlego+Makhura,Lethabo Anidah+Malatji,Boitumelo+Mathe,Reynard+Matsobane,Tiisetso Jeanet+Mbatha,Njabulo Prince+Mmutle,Thabiso+Mndebele,Sihle+Moagi,Busisiwe+Mohammed,Dondre+Mostert,Ciara+Mtshali,Nompumelelo+Ngema,Sphamandla+Ngwenya,Noluthando+Nkomo,Nonhlanhla+Nkosi,Sibusiso Hebron+Nyaka,Modiegi+Ogle,Onesha+Radebe,Willcox+Semake,Siphumelele+Singh,Kevin+Tshikane,Omphile+Ximba,Lungile+Zwane,Nomfundo";
                        $learner_timetable_load[] = "Du Plessis B-Math Lit-K3_10#Botha,Lashandre+Dhladhla,Eutricia+Du Plessis,Abigale Kim+Gamede,Kamohelo Shantel+Lubisi,Ayanda+Maake,Tidimalo+Maila,Keitumetse+Maluleke,Romeo+Manala,Mwalimo+Manyathi,Zanele+Marutha,Bonolo+Masemola,Olerato+Masilela,Lindelwa Mayibongwe+Mathobela,Kamogelo+Mbatha,Ayanda+Mdlalose,Noluthando+Mdluli,Neo Thokozani+Molefe,Tshepiso Promise+Mphaphuli,Nyimani+Mtshali,Mpho+Ngobese,Linda Ntokozo+Nxumalo,Mamosa+Rakgalakane,Karabo+Ramaele,Lindokuhle+Ruiters,Curtley y8+Sibeko,Nonkululeko Lipolyte+Smith,Lungelwa+Weimers,Zaakirah+Xakaza,Thobeka+Zulu,Nwabisa Joy";
                        $learner_timetable_load[] = "Du Plessis B-Math Lit-K4_11#Bembe,Sandile+Buthelezi,Nduduzo+Chakane,Tsholofelo+Damoyi,Fatima Zoleka+Gwaza,Nkosana+Jansen,Bernito+Jiyane,Umfanelo Khothatso+Langa,Ernest Sibusiso+Leew,Lebohang+Mabuya,Dumisane+Malebana,Lesego+Mamaroba,Kagiso+Marumo,Thato+Matseke,Ofentse+Mdlala,Katleho+Mhlamvu,Mongameli Sivuyile+Mokgapa,Moroko+Mokgotla,Palesa Mohata+Mokone,Tshepiso+Mosehle,Sihle+Mosue,Peter Junior+Msimango,Songo Josias+Mvelase,Phelelani Siphosethu+Ngema,Ntokozo+Nkele,Kagiso+Nkuna,Omphile+Papu,Ndumiso+Phiri,Prudence+Radebe,Amahle Zesiwe+Sehume,Altehang+Selepe,Simphiwe+Semenya,Thoriso+Skhosana,Malibongwe+Toka,Tsheamo+Tshabalala,Bongiwe";
                        $learner_timetable_load[] = "Du Preez-Afrikaans-K5_10#Boards,Jamie+Damari,Lufuno+Davids,Sherezaad+Goba,Mapula+Gombani,Precious+Lekoko,Maadimo+Mabetoa,Tebogo+Mabula,Naledi+Magome,Katlego+Makama,Abigail+Maluleke,Romeo+Maseko,Nokwanda+Masha,Lesego+Mathobela,Kamogelo+Mbatha,Njabulo Prince+Mkhonza,Melusi+Mndebele,Nhlanhla+Moagi,Nthabeleng+Mofokeng,Lesego+Mofokeng,Matshidiso+Mokoena,Karabo Vuyolwethu+Mokoena,Lucky Goloka+Mokoena,Reatlehile+Motaung,Teboho+Mphaphuli,Hulisani+Mulaudzi,Khakhu+Naidoo,Jamaine+Ngwenya,Thembelible+Nkomo,Nonhlanhla+Ntshingila,Ayanda+Ogle,Onesha+Radebe,Hlompho+Segale,Kamogelo+Sibiya,Andiswa+Xayiya,Qhama";
                        $learner_timetable_load[] = "Du Preez-Afrikaans-K6_10#Abrahams,Shannon+Daniels,Tamia+De Vries,Drue+Esbend,Rivaldo+Govender,Simone+Gudu,Salizwa+Gxekwa,Khanyisile+Khanye,Naledi+Langa,Londeka+Leolo,Nonhlanhla Sinah+Mahlangu,Lindiwe+Makuwa,Lerato+Manikivane,Wandile+Mankanda,Palesa+Mashau,Dakalo+Masheko,Andile+Masilela,Lindelwa Mayibongwe+Mbena,Shiela+Mntambo,Mbali+Mofokeng,Boitumelo+Mohammed,Dondre+Mokwana,Katiso+Montle,Bontle+Mothabeng,Mamorena+Mphofela,Mathshidiso Ngwanankwana+Mtlaping,Nomfundo+Mukondeleli,Ambani+Ndebele,Kutlwano+Ngema,Sphamandla+Nhlapho,Masego+Nkosi,Smangaliso+Padayac+Paile(Moshobane),Shatadi+Peake,Ashlyn+Senosi,Kgotso+Singh,Kevin+Thomas,Jade+Tshwala,Nompumelelo";
                        $learner_timetable_load[] = "Du Preez-Afrikaans-K1_11#Brown,Lendle+Dalasile,Nonhlanhla+Dhlamini,Luanda+Dick,Tyrique Tyrone+Greco,Byron+Gwaza,Nkosana+Jiyane,Umfanelo Khothatso+Khulu,Ntokozo Langalakhe+Leew,Lebohang+Mabuza,Ntokozo+Makala,Luyando+Malaza,Hlengiwe+Manxeba,Unathi+Masiane,Thuto+Mayekiso,Noluthando+Mbele,Mzwakhe+Meyer,Beauty+Mofokeng,Matshidiso+Molete,Lereko+Mollo,Kamohelo Margret+Monareng,Boitumelo+Mosehle,Sihle+Motlhaping,Nthabiseng+Ndlovu,Khanyisile Nqobile+Nkele,Kagiso+Norman,Alessandro Delron+Phiri,John Clement Dimpho+Qamakwane,Katleho+Ratlou,Kamohelo+Selepe,Simphiwe+Sibamba,Njabulo+Siwela,Karabo Felicia+Tshabalala,Bongiwe+White,Robin Theodore";
                        $learner_timetable_load[] = "Du Preez-Afrikaans-K3_11#Bembe,Sandile+Colbie,Tyrique+Ditshoane,Bennedict Taelo+Golotile,Yolanda+Hlapisi,Onkarabile+Hlatshwayo,Khanyisile+Koko,Mosa Pheeha+Langa,Tshwetso Boipelo+Madi,Mabuti+Makoe,Kutloano+Malinga,Sibusiso Immanuel+Manganyi,Hlulani+Masokela,Keiso+Matlhavana,Lesedi+Mcunu,Akhona Sabelo+Mdinisa,Blessing Zinhle+Mehlwana,Mandisa+Mjiyakho,Sindiswa+Mokebe,Vuyo+Moreosele,Lethlogonolo+Mothupi,Karabo+Msipa,Nkululeko+Mvelase,Lethuxolo+Mzima,Khanyisa Ntandokasi+Ndlebe,Mzwandile+Nel,Samantha+Nkosi,Zamahlubi Nokuthula+Peter,Chukwuemeka+Phiri,Ngoako+Ramnarain,Diya+Shangase,Zamashuku+Sibiya,Owami+Soko,Mandisa+Thusi,Ntokozo+Xoma,Lutho";
                        $learner_timetable_load[] = "Du Preez-Afrikaans-K4_11#Basson,Chelsea+Chikomo,Lencon Tafadzwa+Gcuze,Thembinkosi+Jacobs,Dylan+Kent-Brown,Riaan Conrad+Mabasa,Ntiyiso Barney+Mabuza,Faith Xiluva+Mahlangu,Bongani+Malaza,Angela+Malepa,Blessing+Matla,Tshepo+Mbonani,Nomsa+Mndaweni,Siyabonga+Moganedi,Tshegofatso+Moleke,Tshegofatso+Molobela,Anchor+Morare,Kagiso Timothy+Mpebe,Thapelo+Muchena,Tadiwashe Erecson+Ndlovu,Mosa+Ngwenya,Ludina Janas+Nkala,Sukoluhle+Nkosi,Ayanda+Nyandeni,Ntando+Paile(Moshabane),Karabo Phuthi+Raman,Demiel+Retshidisitwe Nyakallo,Mothibe+Seritili,Gift+Shabalala,Reneilwe+Siwedi,Andile+Somay,Samant+Trotters,Harozane+Vilakazi,Momgameli";
                        $learner_timetable_load[] = "Duda-Hist-K3_11#Buthelezi,Nduduzo+Damoyi,Fatima Zoleka+Gwaza,Nkosana Emmanuel+Gwaza,Nkosana+Kekana,Thato Raisibe+Kodisang,Oefentse+Lodimba,lucia+Maboho,Mpho+Mabuya,Dumisane+Mabuza,Ntokozo+Maluleke,Basetsana+Mamaroba,Kagiso+Medupe,Morena Khothatso+Mkhwanazi,Nondumiso Sibusiso Theodorah+Moganedi,Tshegofatso+Mokgotla,Palesa Mohata+Moleke,Tshegofatso+Moletsane,Kelebogile+Monareng,Boitumelo+Mphuthi,Andile+Msimango,Songo Josias+Ndaba Keabetswe,Katlego+Ngobese,Nikita Ntombizile+Nkosi,Siphoesihle+Penn,Keabetswe Boitumelo+Pheeha,Neo+Pilane,Lesego+Qithi,Thobeka+Radebe,Mduduzi+Selepe,Simphiwe+Thomas,Talitha";
                        $learner_timetable_load[] = "Duda-Hist-K1_12#Albertyn,Storm+Boonzaaier,Shade+Dlamini,Zinhle Nkululeko+Dludlu,Nonhlanhla+Gumede,Siyabulela+Khumalo,Palesa+Khwinana,Nozuko+Maboe,Naledi+Mahlangu,Reitumetse+Mahlobo,Sinqobile+Makhanya,Khanyisile+Malamule,Sikhulile+Masango,Reneilwe+Mathebula,Karabo+Matsimbi,Keokeditse+Mbelle,Humang+Mekonnen,Yeabsera+Mosenye,Molemo+Mosupye,Lesego+Mphahlele,Mokaolo+Ngobese,Lebone+Ngwenya,Londiwe+Nhlapo,Masejara+Njibana,Alizwa+Philibane,Thina+Radinne,Lerato Rejoyce+Rikhotso,Vukosi+Shongwe,Zamantimande+Sibasa,Gomolemo+Singh,Jashoda+Sookran,Mishka+Vengatsammy,Thalia";
                        $learner_timetable_load[] = "Duda-Hist-K5_12#Botha,Lesedi+Brown,Tyreeq+Chauke,Getrude Ramkoni+Chinsato,Lovejoy Kudakwashe+Erasmus,Kyla Ashley+Ferreira,Shelley+Fortuin,Anzlo+Khumalo,Mfundo+Matladi,Kelebo+Mazibuko,Simphiwe+Mdlalose,Banele+Mhlongo,Nompumelelo+Mkhwanazi,Simphiwe+Modiselle,Amogetswe+Mothibi,Karabo+Ndhlalane,Tshepo+Ndlovu,Wakhile+Nhlapo,Hlengiwe+Nhlapo,Nonkululeko+Nkosi,Njabulo+Radebe,Thando+Rohan,Nikita+Sandamela,Palesa+Seanego(Matshiane),Promise+Sheffield,Alexander Daniel+Smith,Ethan Lyle+Van Der Merwe,Mikhail";
                        $learner_timetable_load[] = "Duda-Hist-K6_12#Chabaku,Thuto+Dhlomo,Nomonde+Dube,Thato+Goliath,Caitlin+Hobyani,Tintswalo+Kekana,Mmatlala Shernel+Mabaso,Thapelo+Maboke,Mpho+Makara,Katleho+Maluleke,Nhlori+Mazibuko,Mthandeni+Mbata,Ntombikayise++Mbatha,Gugu+Mdlalose,Busisiwe+Mlambo,Precious+Mngoma,Nomfundo+Moagi,Tswelopele+Moloto,Tumelo+Mthembu,Mpumelelo+Mtshali,Thulani+Ndlovu,Emelda+Nkosi,Sinenhlanhla Nomfundo+Ntuli,Rixaka+Pabu,Christopher+Qwabe,Ntokozo+Radebe,Maria+Sikhosana,Kamohelo+Simelane,Jane Rebecca+Thobejane,Morena+Xubane,Ntombizamaxuban+Yende,Ntokozo+Zulu,Owethu";
                        $learner_timetable_load[] = "Engelbrecht J-Afrikaans-K1_11#Boyise.Boitshoko+Chikwariro,Natasha+Dlamini,Thabang+Govender,Mikayla+Hoosain,Bianca+Kgapola,Boitumelo+Langa,Ernest Sibusiso+Longwe,Wongani+Mahopo,Kamogelo+Makuwa,Takudzwa+Manana,Sanelisiwe+Martins,Sone+Masuku,Thembelihle+Matseke,Ofentse+Mdlala,Katleho+Mofokeng,Thabo+Mokoena,Rethabile Happiness+Mokone,Tshepiso+Molopo,Lehlohonolo+Motjopi,Mbali Ratile+Mphuthi,Andile+Ndlovu,Amahle+Nkuna,Omphile+Papu,Ndumiso+Penn,Keabetswe Boitumelo+Pheeha,Neo+Radebe,Amahle Zesiwe+Seleka,Tshepiso Hope+Shongwe,Thandiswa Pretty+Sithole,Nqobile+Tlhatlha,Mohau+Tshele,Kakanyo+Zungu,Khensani";
                        $learner_timetable_load[] = "Engelbrecht J-Afrikaans-K2_11#+Chiloane,Bokang+Damoyi,Fatima Zoleka+Hlophe,Wanda+Kgaabi,Maremane Richard+Mahlalela,Deborah Onnicah+Malebana,Lesego+Maluleke,Basetsana+Mamaroba,Kagiso+Mankazana,Khanyiso+Masemola,Tshegofatso Fortunate+Mavuso,Njabulo+Mdinisa,Mary-Anne Nonhlanhla+Mhangwana,Shongile+Mokgotla,Palesa+Mokoena,Gontse Ofentse+Moodley,Vishalan Talano+Moses,Shanice+Mphuthi,Nombuso Vanessa+Mthethwa,Sandile Ntuthuko+Nair,Talisa+Ncube,Nonceba+Ngobese,Nikita Ntombizile+Nsibanyoni,Will Yamkela+Phiri,Prudence+Phori,Boitumelo+Roelofse,Rochelle+Sekati,Segametsi+Shabangu,Nhlanhla Blessing+Sikhosana,Sokhana+Stander,Megan+Taulelo,Wesley+Tshabalala,Thokozani+Zimucha,Nicole Tanaka";
                        $learner_timetable_load[] = "Engelbrecht J-Afrikaans-K5_11#Adamo,Nick Espada+Bosch,Buhle+Chakane,Tsholofelo+Gazide,Kutlwano Tshepang+Gumede,Ndumiso+Jameson,Nkosazana+Khoza,Rifumo+Khwerana,Talifhani+Liesering,Ashton Lemuel+Mabizela,Vangile+Mabuza,Buhle Pamella+Makuwa,Nobuhle+Masina,Kahisano+Mhlamvu,Mongameli Sivuyile+Mogorosi,Tsholofelo+Mokoena,Naledi+Molefe,Kgosi Gauretelelwe+Moloi,Lesedi+Motaung,Karabo+Motsoeneng,Obakeng+Msimango,Songo Josias+Muranda,Ashley+Ndala,Lindokuhle+Ngobeni,Gabaza+Nkosi,Felicity+Ntwanambi,Aluta+Pilane,Lesego+Qayiyana,Sinethemba+Schafer,Derek+Shelembe,Cindy+Sibande,Tsepo+Silangwe,Siphesihle+Sindane,Zinhle+Toka,Tsheamo+Wayama,Musumari Archange+Zwane,Nobuhle";
                        $learner_timetable_load[] = "Engelbrecht J-Afrikaans-K4_12#Buhali,Mbalenhle+Cebekhulu,Wamukelwe+Chatikobo,Tinashe+Colbie,Shaylan+Dhlomo,Nomonde+Dlamini,Zinhle Nkululeko+Hlongwane,S'Bongumusa+Khwinana,Nozuko+Maahlo,Ofentse+Mabasa,Ntsako+Mabuya,Nthabiseng Hope+Majova,Olefa+Maleka,Matsatsi+Mathebula,Sindisiwe+Mbatha,Gugu+Mbena,Annah+Mdhluli,Sibusiso+Mkhulise,Thina Nosipho+Mnyandu,Sihawukele Sizwe+Mothibi,Karabo+Mphahlele,Mokaolo+Njibana,Alizwa+Nkosi,Njabulo+Nkosi,Sinenhlanhla Nomfundo+Pabu,Christopher+Persad,Renuka+Qwabe,Ntokozo+Radebe,Thando+Radebe,Thato+Rohan,Nikita+Shabalala,Bhekamuzi+Smith,Ethan Lyle+Sukdeo,Tashmika+Xubane,Ntombizamaxuban+Yende,Ntokozo";
                        $learner_timetable_load[] = "Engelbrecht J-Afrikaans-K6_12#Bhengu,Nondumiso+Bila,Ayanda+Buda,Lesego+Dlamini,Khethokuhle+Erasmus,Kyla Ashley+Ferreira,Shelley+Gumede,Gugulethu+Jamekwana,Sandile+Kubeka,Siyabonga+Kumersamy,Joshua+Magadlela,Sithembiso Floyd+Magagula,Gugulethu+Manana,Duduzile+Masinga,Sibusiso+Mavuso,Nkosazana+Mhlauli,Sabelo+Mkhwanazi,Lebone+Moloyi,Keitumetse+Moodley,Priyan+Mpai,Khutso+Ndimande,Katlego+Ngobese,Lebone+Nhlapo,Hlengiwe+Nkwanyana,Maremane+Pillai,Tegan+Pootona,Koketso+Rammike,Michell+Sebetha,Maletsetsa+Sibanda,Lathi+Sibasa,Gomolemo+Sikhupela,Lubabalo+Sithole,Sakhile+Vengatsammy,Thalia";
                        $learner_timetable_load[] = "Grobler B-Afrikaans-K1_12#Brown,Tyreeq+Chimsalazo,Kamohelo+Chivaviro,Percy+Cindi,Ntokozo+Dunga,Knowledge+Goliath,Caitlin+Goliath,Laydin+Hartman,Ruben Shaun+Kopiso,Oteng Hope+Lekeno,Neo+Maboke,Mpho+Mabuya,Boitumelo+Makara,Katleho+Matladi,Kelebo+May,Onke+Mhaleni,Brian+Mkhonza,Kwanele+Mochochoko,Tumelo+Molefe,Tshepiso+Mtanyelwa,Ntsako+Mthembu,Mpumelelo+Namane,Refiloe+Ndlovu,Wakhile+Nkosi,Lungile+Pahlanen,Beda+Phakathi,Thando+Pradeep,Preethi+Sekelenyane,Reabetswe+Sheffield,Alexander Daniel+Speelman,Stokeley+Tutuka,Ayanda";
                        $learner_timetable_load[] = "Grobler B-Afrikaans-K2_12#Bote,Tatenda+Brown,Landon+Caluza,Phumelele+Finck,Alridge+Fortuin,Anzlo+Hliso,Moleboheng+Hlope,Melusi+Kaluba,Nhlanhla+Magasela,Simphiwe+Makgethe,Amogelang Patrick+Makhalanyane,Keletso+Maluleke,Nhlori+Maponyane,Lisa+Mashigoana,Nkini+Matekane,Amohelang+Mazibuko,Mthandeni+Mbayabu,Nathan+Mbuyeleni,Sisipho+Mdluli,Blessing Nkosinathi+Moagi,Tswelopele+Mokgatle,Nandi+Mtshali,Thulani+Ndhlalane,TshepoNhlapo,Nonkululeko+Nkosi,Thapelo+Philibane,Thina+Radebe,Maria+Rikhotso,Vukosi+Robson-Garth,Caitlin+Sikhosana,Kamohelo+Van Der Merwe,Mikhail+Wallace,Sarah-Jane+Xala,Anele";
                        $learner_timetable_load[] = "Hubbard F-EGD-K3_10#Baduza,Siphosethu+Baloyi,Jabulani+Boards,Jamie+Fokazi,Bulelani Ndodikho+Khumalo,Ntokozo+Kolanisi,Banele+Legodi,Letlhogonol+Lekoko,Maadimo+Lobeni,Michael+Mathe,Reynard+Mazimela,Mncedisi+Mbatha,Njabulo Prince+Mniki,Njabulo+Mohammed,Dondre+Mokoena,Karabo Vuyolwethu+Mostert,Ciara+Mtotoba,Mbali+Muranda,Brentley+Ngema,Sphamandla+Nkosi,Smangaliso+Nkosi,Sibusiso Hebron+Nkosi,Temalangeni+Skosana,Nomfundo+Swartz,Leandre+Vanga,Zamananga+Zikali,Sharmaine";
                        $learner_timetable_load[] = "Hubbard F-EGD-K4_10#Beharie,Nina+Chipurura,Shania+Hlatshwayo,Zithulele+Hlungwani,Rivoningo+Lebotsa,Gaake+Lelaka,Lerato+Mabila,Murangi+Mabizela,Lwazi+Macherechedze,Gerald+Mbatha,Mandisa+Memela,Lindani+Mncube,Sinethemba Thato Sibusisiwe+Mngoma,Kholeka+Mnguni,Neo+Mokoena,Solomon+Muchena,Evans+Ngobese,Linda Ntokozo+Ntuli,Orapeleng+Nyepela,Gift+Paile(Moshobane),Shatadi+Vilakazi,Thuto+Zwane,Zanele";
                        $learner_timetable_load[] = "Hubbard F-EGD-K2_11#Azevedo,Melissa+Chakane,Tsholofelo+Chikomo,Lencon Tafadzwa+Cicero,Wesley+Jansen,Bernito+Khoza,Rifumo+Longwe,Wongani+Mabasa,Ntiyiso Barney+Makala,Luyando+Malebe,Ntokozo+Malepa,Blessing+Masongane,Bafana+Mbaleki,Yolanda+Mokone,Tshepiso+Mosue,Peter Junior+Muchena,Tadiwanashe Erecson+Ngomane,Lesedi+Padi,Tshepi+Papu,Ndumiso+Robinet,Richard Akapelwa+Seloane,Rorisang+Seritili,Gift+Slabbert,Kaitlyn+Trotters,Harozane+Wayama,Musumari Archange+Williams,Malik";
                        $learner_timetable_load[] = "Hubbard F-EGD-K6_11#Bembe,Sandile+Ditshoane,Bennedict Taelo+Greco,Byron+Gumede,Ndumiso+Langa,Ernest Sibusiso+Mahlalela,Deborah Onnicah+Mahlangu,Bongani+Malinga,Sibusiso Immanuel+Mankazana,Khanyiso+Martins,Sone+Mashabela,Justice+Masina,Kahisano+Mdinisa,Mary-Anne Nonhlanhla+Mndaweni,Siyabonga+Mokebe,Vuyo+Molete,Lereko+Moodley,Vishalan Talano+Mpebe,Thapelo+Mthembu,Thembelihle+Norman,Alessandro Delron+O'Kelly,Kaylin+Paile(Moshabane),Karabo Phuthi+Raman,Demiel+Ratlou,Kamohelo+Siwela,Karabo Felicia+Somay,Samant+Toka,Tsheamo+Twayi,Katleho";
                        $learner_timetable_load[] = "Hubbard F-EGD-K5_12#Colbie,Shaylan+Dlamini,Khethokuhle+Du Plessis,Jacques+Dube,Bryan+Forster,Dylan+Hlabana,Tsireletso+Hliso,Moleboheng+Kaluba,Nhlanhla+Kgomo,Moroshadi+Kumersamy,Joshua+Maahlo,Ofentse+Magasela,Simphiwe+Mahlangu,Nkosinathi+Makhubo,Muzikayise+Maponyane,Lisa+Mazibuko,Mthandeni+Mbayabu,Nathan+Mkhulise,Thina Nosipho+Mnyandu,Sihawukele Sizwe+Moagi,Tswelopele+Moodley,Priyan+Motsieloa,Thato+Ndimande,Katlego+Nkosi,Thapelo+Padi,Boikanyo+Pillai,Tegan+Sekelenyane,Reabetswe+Sikhosana,Simphiwe+Sithole,Nhlanganiso";
                        $learner_timetable_load[] = "Jerkin N-Eng HML-K1_11#Chikomo,Lencon Tafadzwa+Damoyi,Fatima Zoleka+Gcuze,Thembinkosi+Jameson,Nkosazana+Kekana,Thato Raisibe+Kgaabi,Maremane Richard+Langa,Tshwetso Boipelo+Maboho,Mpho+Mahlalela,Deborah Onnicah+Makhubu,Nomaduduzile Masesi+Maluleke,Basetsana+Mashabela,Justice+Matlhavana,Lesedi+Mdinisa,Mary-Anne Nonhlanhla+Mjiyakho,Sindiswa+Mokgapa,Moroko+Molefe,Mahlohonolo Mamiki+Monareng,Kgothalo+Moses,Shanice+Mphuthi,Nombuso Vanessa+Mthombeni,Nhlamulo+Ncube,Nonceba+Ngomane,Lesedi+Nkosi,Felicity+Nxumalo,Mbali+Pilane,Lesego+Roelofse,Rochelle+Seloane,Rorisang+Shelembe,Cindy+Siwedi,Andile+Soko,Mandisa+Vilakazi,Mongameli+Zitha,Ntokozo";
                        $learner_timetable_load[] = "Jerkin N-Eng HML-K3_11#Basson,Chelsea+Buthelezi,Ndumiso+Dhlamini,Luanda+Fillis,Nathan+Hlungwane,Tholakele Tinyiko+Jiyane,Umfanelo Khothatso+Khumalo,Sibusiso Collen+Liesering,Ashton Lemuel+Magidela,Ayabonga+Makuwa,Takudzwa+Malepa,Blessing+Mankazana,Khanyiso+Matimmalane,Thabo Rick+Mavuso,Njabulo+Mbele,Mzwakhe+Mmbi,Muthaduli+Mokoena,Gontse Ofentse+Molefe,Kgosi Gauretelelwe+Molobela,Anchor+Moloto,Frigale+Mthembu,Njabulo+Ncube,Nonceba+Ndlovu,Amahle+Ngobeni,Gabaza+Nkombyane,Kabelo+O'Kelly,Kaylin+Phori,Boitumelo+Rasebotje,Lehlogonolo+Sehume,Altehang+Shongwe,Thandiswa Pretty+Silangwe,Siphesihle+Sithole,Nqobile+Slabbert,Kaitlyn+Tlhatlha,Mohau+Williams,Malik";
                        $learner_timetable_load[] = "Jerkin N-Eng HML-K4_11#Dalasile,Nonhlanhla+Dhlangamandla,Khethiwe+Golotile,Yolanda+Hlabisa,Gcina Ntandoyenkosi+Kgapola,Boitumelo+Klahla,Bandile+Kodisang,Oefentse+Maboea,Mohaladitwe+Magubane,Sandile+Mahopo,Kamogelo+Makala,Luyando+Maleke,Katlego+Martins,Sone+Mavuso,Ronald+Mdinisa,Blessing Zinhle+Nondumiso Sibusiso Thoedorah+Mokebe,Vuyo+Mokoena,Neo+Molete,Lereko+Motjopi,Mbali Ratile+Mpiyake,Sinovuyo Khanyisa+Mtshali,Mawande+Ndebele,Mbongweni+Ngxotholazi,Nkosinathi+Nsibanyoni,Will Yamkela+Ntwendala,Inga+Penn,Keabetswe Boitumelo+Qithi,Thobeka+Radebe,Mduduzi+Sibande,Tsepo+Stander,Megan+Twayi,Katleho+Wayama,Musumari Archange+Xulu,Mthunzi+Zwane,Nobuhle";
                        $learner_timetable_load[] = "Jerkin N-Eng HML-K5_11#Azevedo,Melissa+Chikwariro,Natasha+Els,Nathaniel+Hlongwane,Jessica+Joe,Kundai+Khulu,Ntokozo Langalakhe+Longwe,Wongani+Mabasa,Ntiyiso Barney+Mabuya,Dumisane+Makhafula,Keitumetse+Malebe,Ntokozo+Manganyi,Hlulani+Marumo,Thato+Mathosi,Cebo+Matita,Hope+Mayekiso,Noluthando+Medupe,Morena Khothatso+Mlambo,Hope Nomathemba+Moima,Linda Blessing+Molopo,Lehlohonolo+Motong,Mamoshabe Lebogang+Mphahlele,Pheladi+Muchena,Tadiwanashe Erecson+Ncube,Nonceba+Ndebele,Rorisang+Ngobese,Nikita Ntombizile+Nkosi,Siphoesihle+Nyambuya,Tariro+Radebe,Amahle Zesiwe+Ratlou,Kamohelo+Shangase,Thando+Sibiya,Owami+Siwela,Karabo Felicia+Trotters,Harozane+White,Robin Theodore";
                        $learner_timetable_load[] = "Jerkin N-Eng HML-K2_12#Bhengu,Nondumiso+Chabaku,Thuto+Chatikobo,Tinashe+Colbie,Shaylan+Du Plessis,Jacques+Khumalo,Lungiswa+Kumersamy,Joshua+Liesering,Caitlin+Magagula,Gugulethu+Makhanya,Khanyisile+Makhubo,Muzikayise+Manana,Duduzile+Mathebula,Karabo+Mavuso,Nkosazana+Mbatha,Gugu+Mevana,Karabo+Modiselle,Amogetswe+Molefe,Tshepiso+Mosenye,Molemo+Mphahlele,Mokaolo+Ndimande,Katlego+Ndlela,Simphiwe+Nhlapo,Hlengiwe+Njolo,Kwandile+Nkwanyana,Maremane+Pabu,Christopher+Pillai,Tegan+Radebe,Thando+Seanego(Matshiane),Promise+Sikhupela,Lubabalo+Smith,Ethan Lyle+Tsie,Hope+Yende,Ntokozo";
                        $learner_timetable_load[] = "Keulder L-Life Sci.-K2_10#Baloyi,Jabulani+Beya,David+Bopape,Thando+Bumka,Mbalentle+De Vries,Drue+Diemesor,Anaestasia Law+Gudu,Salizwa+Kanyile,Tesa+Lekoko,Maadimo+Mabye,Kgetho+Makhura,Lethabo Anidah+Makuwa,Lerato+Malinga,Thando+Maseko,Nokwanda+Mazimela,Mncedisi+Mchunu,Karabo Zakithi+Moahloli,Rorisang+Mofokeng,Matshidiso+Mpatie,Keran+Mtshepu,Kgomotso+Musingadi,Ndivhuwo+Naidoo,Kreolin+Ndaba,Sabeloshile+Ngema,Sphamandla+Nkosi,Smangaliso+Nkosi,Temalangeni+Nyaka,Modiegi+Radebe,Willcox+Sekhalo,Sabelo+Sibiya,Senzokuhle+Sithole,Carol+Swartz,Leandre+Xaba,Siphosethu";
                        $learner_timetable_load[] = "Keulder L-Life Sci.-K1_11#Adamo,Nick Espada+Bosch,Buhle+Golotile,Yolanda+Hlongwane,Jessica+Joe,Kundai+Khumalo,Sibusiso Collen+Mabaso,Ntabeleng+Makoe,Kutloano+Malinga,Khumo+Mankazana,Khanyiso+Mbonani,Nomsa+Mhlamvu,Mongameli Sivuyile+Mokebe,Vuyo+Mokuene,Mosieledi+Moloto,Frigale+Motong,Mamoshabe Lebogang+Mqungwana,Cinga Gerald+Ndebele,Mbongweni+Ngobese,Nikita Ntombizile+Ntwanambi,Aluta+O'Kelly,Kaylin+Ramnarain,Diya+Shubane,Neo+Sikhosana,Sokhana+Taulelo,Wesley+Thusi,Ntokozo+Twayi,Katleho+Xoma,Lutho";
                        $learner_timetable_load[] = "Keulder L-Life Sci.-K4_12#Buthelezi,Khethiwe+Cindi,Ntokozo+Dludlu,Nonhlanhla+Dube,Thato+Gounder,Shayleen+Lekeno,Neo+Maetisa,Essie Mpho+Makhalanyane,Keletso+Mathebula,Karabo+Matiza,Zenzo+Matsimbi,Keokeditse+Mazibuko,Ntokozo+Mbuyeleni,Sisipho+Modiga,Precious+Moloyi,Keitumetse+Mosupye,Lesego+Namane,Refiloe+Nhlapo,Masejara+Nketsi,Nthabiseng+Nkokoana,Paballo+Nkomo,Mbali+Nkomo,Trixie+Nkwanyana,Maremane+Philibane,Thina+Radinne,Lerato Rejoyce+Rikhotso,Vukosi+Sandamela,Palesa+Singh,Jashoda+Somera,Aanchal";
                        $learner_timetable_load[] = "Kruger J-Life Sci.-K3_10#Abrahams,Shannon+Banda,Luyanda+Beharie,Nina+Chatikobo,Tadiwanashe+Fanana,Again+Gombani,Precious+Hadebe,Sihle+Lehong,Thato Thabiso+Lelaka,Lerato+Mabizela,Lwazi+Madkgetla,Millenium Maria+Magome,Katlego+Maloka,Ntokozo+Mandyu,Tshegofatso+Matsobane,Tiisetso Jeanet+Mayble,Basetsane+Meko,Nthabeleng+Mjiyakho,Noluthando Nosipho+Mngoma,Kholeka+Moodley,Ronan Cole+Moseki,Kamogelo+Mphofela,Mathshidiso Ngwanankwana+Muzofa,Tapiwa+Ncongwane,Lisia+Ndlovu,Patience Nonhlanhla+Nkondlwane,Emihle+Ntoyi,Kamohelo+Peake,Ashlyn+Ramokolo,Kgaphuru+Sangweni,Bridget+Senosi,Kgotso+Sibisi,Thandolweth+Xayiya,Qhama+Zondo,Nonhlanhla+Zwane,Hlengiwe Thulisile";
                        $learner_timetable_load[] = "Kruger J-Life Sci.-K1_11#Bembe,Sandile+Davids,Lushuandre+Gazide,Kutlwano Tshepang+Gwaza,Nkosana Emmanuel+Hlophe,Wanda+Klahla,Bandile+Mabizela,Vangile+Mabuza,Buhle Pamella+Makhafula,Keitumetse+Malepa,Blessing+Manganyi,Rivoningo+Marumo,Thato+Mbaleki,Yolanda+Mdinisa,Blessing Zinhle+Mndaweni,Siyabonga+Mokhele,Boitumelo+Moloi,Lesedi+Motaung,Karabo+Motsoeneng,Obakeng+Mpebe,Thapelo+Mvelase,Lethuxolo+Ngobeni,Gabaza+Nsibanyoni,Will Yamkela+Phiri,Prudence+Ralinala,Thabelo+Sibiya,Owami+Silangwe,Siphesihle+Slabbert,Kaitlyn+Williams,Malik";
                        $learner_timetable_load[] = "Kruger J-Life Sci.-K5_11#Chiloane,Bokang+Dhlangamandla,Khethiwe+Dube,Victor+Gwaza,Nkosana+Hlabisa,Gcina Ntandoyenkosi+Hlatshwayo,Khanyisile+Jacobs,Dylan+Kekana,Thato Raisibe+Khoza,Menzeli Mpumelelo+Lodimba,lucia+Maboea,Mohaladitwe+Makuwa,Takudzwa+Maleke,Katlego+Manana,Lungisani+Mashabela,Justice+Matla,Tshepo+Mavuso,Ronald+Mehlwana,Mandisa+Molobela,Anchor+Morare,Kagiso Timothy+Mothupi,Karabo+Mthembu,Nombuso+Mzima,Khanyisa Ntandokasi+Nair,Talisa+Phiri,Hannock+Phori,Boitumelo+Qamakwane,Katleho+Retshepisitswe,Paballo Mothibe+Shongwe,Thandiswa Pretty+Tlhatlha,Mohau+Tshabalala,Bongiwe+Vilakazi,Mongameli+Zitha,Ntokozo";
                        $learner_timetable_load[] = "Kruger J-Life Sci.-K6_11#Chakane,Tsholofelo+Chikomo,Lencon Tafadzwa+Dalasile,Nonhlanhla+Hlungwane,Tholakele Tinyiko+Kgaabi,Maremane Richard+Khwerana,Talifhani+Langa,Tshwetso Boipelo+Liesering,Ashton Lemuel+Madi,Mabuti+Makala,Luyando+Makuwa,Nobuhle+Malebana,Lesego+Maluleke,Basetsana+Matlhavana,Lesedi+Mbele,Mzwakhe+Mjiyakho,Sindiswa+Moetse,Kutlwano+Mofokeng,Matshidiso+Moreosele,Letlhogonolo+Mosehle,Sihle+Mphuthi,Nombuso Vanessa+Muranda,Ashley+Ndlovu,Amahle+Ndlovu,Mosa+Ngomane,Lesedi+Nkele,Kagiso+Nkosi,Ayanda+Nyandeni,Ntando+Qayiyana,Sinethemba+Seleka,Tshepiso Hope+Seloane,Rorisang+Shongwe,Nokuthula+Sibanda,Otshepeng+Sithole,Nqobile+White,Robin Theodore+Zimucha,Nicole Tanaka";
                        $learner_timetable_load[] = "Kruger J-Life Sci.-K6_12#Boonzaaier,Shade+Buda,Lesego+Dhlomo,Nomonde+Dube,Bryan+Goliath,Laydin+Gumede,Gugulethu+Kondo,Yolanda+Magadlela,Sithembiso Floyd+Maleka,Matsatsi+Manzini,Angel Sinethemba+Masango,Reneilwe+Matladi,Kelebo+Mbata,Ntombikayise+Mbena,Annah+Mochochoko,Tumelo+Moodley,Savania+Mothibi,Palesa+Mthembu,Mpumelelo+Ndlovu,Emelda+Ngwenya,Londiwe+Njibana,Alizwa+Nkosi,Lungile+Nkuna,Tinyiko+Pradeep,Preethi+Shabalala,Bhekamuzi+Sithole,Sakhile+Sithole,Shawn Lebo+Skosana,Boitumelo+Sukdeo,Tashmika+Xubane,Ntombizamaxuban";
                        $learner_timetable_load[] = "Langa S-B. Stud.-K3_10#Adolph,Quinlan+Buso,Skholiwe+Chirwa,Nonkululeko+Dladla,Tshegofatso+Du Plessis,Casey+Langa,Lesedi+Mabetoa,Tebogo+Mabula,Naledi+Madonsela,Sibongumusa+Mahlangu,Khaya+Makhalimele,Lungelo+Manqele,Jacob+Masha,Lesego+Mdingwaze,Sinqobile+Mkhonza,Melusi+Moferefere,Kutloano+Mokoena,Lucky Goloka+Mokolokolo,Lesedi+Mokwana,Katiso+Mosaathebe,Legae+Mothabeng,Mamorena+Ndebele,Kutlwano+Ndiaye,Nonhlanhla+Nhlapo,Noluthando+Ntuli,Ntuthuko+Paile(Moshobane),Shatadi+Sekhalo,Sabelo+Sibiya,Andiswa+Trivangalo,Cindy+Twala,Nkateko+Ximba,Lungile+Zitha,Simphiwe";
                        $learner_timetable_load[] = "Langa S-B. Stud.-K4_10#Bhengu-Mankge,Mbali+Damari,Lufuno+Diemesor,Anaestasia Law+Gamede,Kamohelo Shantel+Hadebe,Sihle+Kutumela,Thato Bradley+Majola,Bongani+Mangoali,Tumelo+Mantshiyane,Owami Jonathan+Mashau,Dakalo+Masilela,Lindelwa Mayibongwe+Matlejoane,Bontle+Mbuyane,Pride Sthembiso+Mkhwanazi,Jabu+Mndebele,Nhlanhla+Moahloli,Rorisang+Mofokeng,Matshidiso+Mokoena,Reatlehile+Motau,Thato+Mtshali,Mpho+Ndlovu,Judy+Ngwenya,Simphiwe+Nkosi(Sithole),Sihle+Ntshingila,Ayanda+Nyandeni,Nothando Senenhlahla+Rakgalakane,Karabo+Sangweni,Bridget+Tshabalala,Thembelihle+Yeni,Sipho+Zulu,Nwabisa Joy";
                        $learner_timetable_load[] = "Langa S-B. Stud.-K5_10#Abrahams,Shannon+Batongo,Bagwangi+Dhladhla,Eutricia+Gumbi,Lethukuthul+Khanye,Naledi+Kubheka,Sandile+Lebotsa,Gaake+Maasdorp,Whanita+Madkgetla,Millenium+Mahlanya,Riccah+Malatji,Boitumelo+Maseko,Andile+Masheko,Andile+Matekane,Thabiso+Matsobane,Tiisetso Jeanet+Mbatha,Ayanda+Mdlalose,Noluthando+Mncube,Sinethemba Thato Sibusisiwe+Mndebele,Sihle+Mngomezulu,Londeka+Mofokeng,Boitumelo+Mohlala,Lebone+Motingoe,Rorisang+Mshumpela,Njabulo+Ndlovu,Patience Nonhlanhla+Ngwenya,Itumeleng+Ngwenya,Noluthando+Nqolobe,Luxolo+Nyaka,Modiegi+Ramaele,Lindokuhle+Sibeko,Nonkululeko Lipolyte+Sitoto,Musa+Tshikane,Omphile+Xakaza,Thobeka+Zimba,Elton";
                        $learner_timetable_load[] = "Langa S-B. Stud.-K6_10#Beharie,Nina+Dlamini,Linda+Fanana,Again+Goba,Sanele+Kubheka,Lesego+Maila,Keitumetse+Malinga,Thando+Manabalala,Rosie Thato+Manala,Mwalimo+Mdluli,Neo Thokozani+Mmutle,Thabiso+Moagi,Busisiwe+Mokoena,Thuto+Motaung,Nonhlanhla+Mphaphuli,Hulisani++Mvelase,Xolile Natacia+Naidoo,Ruvesen+Ncongwane,Lisia+Ndhlovu,Tegoga Pauline Christina+Ndlovu,Thando+Nkosi,Baphiwe+Radebe,Phephile+Seema,Itumeleng+Senzani,Junior+Tjale,Mahlatse+Tshabalala,Tebello+Xayiya,Qhama";
                        $learner_timetable_load[] = "Lebaka T-Phys. Sci.-K3_10#Bopape,Thando+Bronkhorst,Luke Oliver+Chipurura,Shania+De Vries,Drue+Dube,Mbali+Govender,Simone+Govender,Trystan+Gudu,Salizwa+Hadebe,Siphesihle+Hlatshwayo,Zithulele+Hlungwani,Rivoningo+Kivido,Jordan+Langa,Londeka+Leolo,Nonhlanhla+Mabila,Murangi+Mabye,Kgetho+Macherechedze,Gerald+Mahlangu,Lindiwe+Makama,Abigail+Makuwa,Lerato+Malapane,Kamogelo+Manikivane,Wandile+Maseko,Nokwanda+Mbatha,Mandisa+Mbena,Shiela+Memela,Lindani+Mkoko,Mthokozisi+Moletsane,Mphethe+Moloi,Reabetsoe+Moloi,Thabang+Montle,Bontle+Mpiti,Bohlokoa+Mtshepu,Kgomotso+Muchena,Evans+Naidoo,Jamaine+Ngceba,Wandisa+Ngwane,Samukelo+Nkosi,Malibongwe+Noruwana,Phumla+Ntuli,Orapeleng+Nyepela,Gift+Radebe,Kamogelo+Segale,Kamogelo+Senzani,Junior+Sibiya,Senzokuhle+Silinda,Simphiwe+Tlhatlhetji,Reamogetse+Tsatsi,Kgotso+Vilakazi,Thuto+Zwane,Zanele";
                        $learner_timetable_load[] = "Lebaka T-Phys. Sci.-K5_10#Antunes,Marco+Aphane,Temoso+Baduza,Siphosethu+Banda,Luyanda+Beya,David+Bowler,Muhammed+Brown,Lameez+Buthelezi,Ayanda+Dlangamandla,Lisakhanya+Esbend,Rivaldo+Fanana,Again+Gxekwa,Khanyisile+Hlalele,Reitumetse Reneiloe+Kanyile,Tesa+Kekana,Hlologelo+Khumalo,Ntokozo+Kumalo,Mandisa+Lelaka,Lerato+Mabe,Sicelo+Mabizela,Lwazi+Madikgetla,Ofentse+Makhanya,Amanda+Makhubu,Lusanda+Makutso,Nomonde+Malinga,Thando+Maloka,Leloko Khanyisa+Manabalala,Rosie Thato+Mandyu,Tshegofatso+Mayble,Basetsane+Mchunu,Karabo Zakithi+Mjiyakho,Noluthando Nosipho+Mntambo,Mbali+Mokou,Violet+Moseki,Kamogelo+Mphofela,Mathshidiso Ngwanankwana+Mudavanhu,Kathrine+Musingadi,Ndivhuwo+Muzofa,Tapiwa+Naidoo,Kreolin+Ndaba,Sabeloshile+Nhlapho,Masego+Ntoyi,Kamohelo+Padayachee,Carissa+Pelzer,Megan+Phangane,Bothlale+Ramafola,Simphiwe+Sibisi,Thandolweth+Sikuni,Mihlali+Tshabalala,Tebello+Xaba,Siphosethu+Zitha,Simphiwe";
                        $learner_timetable_load[] = "Lebaka T-Phys. Sci.-K2_11#Brown,Lendle+Dhlangamandla,Khethiwe+Dube,Victor+Greco,Byron+Jacobs,Chadwin Jadin+Kekana,Thato Raisibe+Khwerana,Talifhani+Langa,Tshwetso Boipelo+Lawrence,Lorenzo Lawson+Maboea,Mohaladitwe+Malaza,Angela+Manganyi,Hlulani+Manxeba,Unathi+Martins,Sone+Matita,Hope+Mhlamvu,Mongameli Sivuyile+Moetse,Kutlwano+Moloi,Lesedi+Monareng,Boitumelo+Mothupi,Karabo+Motjopi,Mbali Ratile+Motsoeneng,Obakeng+Mthembu,Nombuso+Ngobeni,Gabaza+Ngwenya,Ludina Janas+Ntwanambi,Aluta+Shubane,Neo+Siwela,Karabo Felicia+Tlaka,Boitumelo+Toka,Tsheamo";
                        $learner_timetable_load[] = "Lebaka T-Phys. Sci.-K4_11#Adamo,Nick Espada+Govender,Mikayla+Gumede,Ndumiso+Hlongwane,Jessica+Joe,Kundai+Khoza,Menzeli Mpumelelo+Longwe,Wongani+Madi,Mabuti+Mahlalela,Deborah Onnicah+Makuwa,Nobuhle+Maluleka,Mandisa+Maroga,Tsebo+Masina,Kahisano+Mbele,Mzwakhe+Mjiyakho,Sindiswa+Mokoena,Naledi+Motaung,Karabo+Motong,Mamoshabe Lebogang+Mthembu,Thembelihle+Muranda,Ashley+Ndaba,Keabetswe Katlego+Ndlovu,Thato+Norman,Alessandro Delron+Phiri,Hannock+Qayiyana,Sinethemba+Ratlou,Kamohelo+Sekati,Segametsi+Shongwe,Nokuthula+Thusi,Ntokozo+Vilakazi,Thokozane+Xoma,Lutho+Zimucha,Nicole Tanaka";
                        $learner_timetable_load[] = "Lebaka T-Phys. Sci.-K6_11#Gazide,Kutlwano Tshepang+Hlabisa,Gcina Ntandoyenkosi+Hlatshwayo,Khanyisile+Jameson,Nkosazana+Khumalo,Sibusiso Collen+Mabizela,Vangile+Makuwa,Takudzwa+Maleke,Katlego+Manana,Lungisani+Manganyi,Rivoningo+Masokela,Keiso+Mavuso,Ronald+Mdinisa,Blessing Zinhle+Mehlwana,Mandisa+Mokhele,Boitumelo+Molobela,Anchor+Morare,Kagiso Timothy+Msipa,Nkululeko+Mzima,Khanyisa Ntandokasi+Nair,Talisa+Ndebele,Rorisang+Nkosi,Felicity+Nyambuya,Tariro+Papu,Ndumiso+Qamakwane,Katleho+Retshepisitswe,Paballo Mothibe+Shongwe,Thandiswa Pretty+Sibiya,Owami+Sikhosana,Sokhana+Silangwe,Siphesihle+Tlhatlha,Mohau+Vilakazi,Jabulani+Vilakazi,Mongameli+Zitha,Ntokozo";
                        $learner_timetable_load[] = "Magadlela-Eng HML-K2_10#Adolph,Quinlan+Botha,Lashandre+Bowler,Muhammed+Chatikobo,Tadiwanashe+Davids,Sherezaad+Du Plessis,Casey+Kivido,Jordan+Lepele,Mabotse+Mabula,Naledi+Mahlangu,Lindiwe+Majola,Bongani+Maloka,Ntokozo+Maluleke,Romeo+Manqele,Jacob+Masha,Lesego+Masilela,Lindelwa Mayibongwe+Mbena,Shiela+Mdlalose,Noluthando+Mdluli,Neo Thokozani+Mngomezulu,Londeka+Moagi,Nthabeleng+Mokolokolo,Lesedi+Moseki,Kamogelo+Mothabeng,Mamorena+Mtshali,Mpho+Ndhlovu,Tegoga Pauline Christina+Ngwenya,Simphiwe+Noruwana,Phumla+Ntshingila,Ayanda+Ogle,Onesha+Reddy,Megan+Sibeko,Nonkululeko Lipolyte+Smith,Lungelwa+Tsatsi,Kgotso+Tshikane,Omphile+Ximba,Lungile";
                        $learner_timetable_load[] = "Magadlela-Eng HML-K3_10#Beya,David+Bumka,Mbalentle+Daniels,Taryn+Dlamini,Linda+Goba,Sanele+Hlalele,Reitumetse+Kumalo,Mandisa+Leduma,Nikkie Retshedisitswe+Mabena,Mpumelelo+Mahlanya,Riccah+Makutso,Nomonde+Malinga,Thando+Maseko,Andile+Masheko,Andile+Mazubuko,Sinethemba+Mchunu,Karabo Zakithi+Mkwanazi,Nqobani+Mochitela,Neo+Mofokeng,Matshidiso+Mokoena,Thuto+Motaung,Nonhlanhla+Mphaphuli,Hulisani+Mulaudzi,Khakhu+Naidoo,Ruvesen+Ndlovu,Thando+Nhlapho,Masego+Padayachee,Carissa+Radebe,Willcox+Radebe,Phephile+Sekhuthe,Tshiamo+Singh,Kevin+Tshabalala,Khanyisile+Tsotetsi,Katleho+Zimba,Elton";
                        $learner_timetable_load[] = "Magadlela-Eng HML-K4_10#Buthelezi,Lehlohonolo+Dhlame,Nobuhle+Fanana,Again+Gwala,Sibongakanke Simphiwe+Hadebe,Siphesihle+Kubheka,Lesego+Leolo,Nonhlanhla Sinah+Maake,Tidimalo+Mabye,Kgetho+Magome,Katlego+Makhalimele,Lungelo+Malele,Lesedi+Manyathi,Zanele+Matsobane,Tiisetso+Mbatha,Ayanda+Mkhonza,Melusi+Moagi,Busisiwe+Mofokeng,Boitumelo+Mokoena,Lucky Goloka+Moloi,Reabetsoe+Mosaathebe,Legae+Mphaphuli,Nyimani+Mtshepu,Kgomotso+Ncongwane,Lisia+Ngceba,Wandisa+Nhlapo,Noluthando+Nkosi,Malibongwe+Ramokolo,Kgaphuru+Senzani,Junior+Sibiya,Andiswa+Tshifure,Tsebo+Weimers,Zaakirah+Xakaza,Thobeka";
                        $learner_timetable_load[] = "Magadlela-Eng HML-K6_11#Brown,Lendle+Colbie,Tyrique+Dube,Victor+Gwaza,Nkosana+Jacobs,Dylan+Khoza,Rifumo+Leew,Lebohang+Leew,Lebohang+Mabuza,Buhle Pamella+Magwaza,Skhumbuzo+Malaza,Hlengiwe+Manana,Sanelisiwe+Masemola,Tshegofatso Fortunate+Masiane,Thuto+Mcunu,Akhona Sabelo+Mdlala,Katleho+Mhlamvu,Mongameli Sivuyile+Mofokeng,Thabo+Mokone,Tshepiso+Mollo,Kamohelo Margret+Mothupi,Karabo+Mphuthi,Andile+Mthethwa,Sandile Ntuthuko+Ndaba,Keabetswe+Ndlovu,Khanyisile Nqobile+Nkala,Sukoluhle+Ntwanambi,Aluta+Pheeha,Neo+Phiri,Hannock+Ramnarain,Diya+Semenya,Thoriso+Seritili,Gift+Shabangu,Nhlanhla Blessing+Thomas,Talitha+Thusi,Ntokozo+Tshabalala,Thokozani+Zungu,Khensani";
                        $learner_timetable_load[] = "Magida L-LO Sport-K2_10#Boards,Jamie+Chipurura,Shania+Dhlame,Nobuhle+Gwala,Sibongakanke Simphiwe+Kanyile,Tesa+Langa,Londeka+Legodi,Letlhogonol+Lobeni,Michael+Macherechedze,Gerald+Madi,Mphamanyeso+Makama,Abigail+Manyathi,Zanele+Maseko,Andile+Mazimela,Mncedisi+Mbatha,Njabulo Prince+Memela,Lindani+Mngoma,Kholeka+Mohammed,Dondre+Moloi,Thabang+Mostert,Ciara+Mpiti,Bohlokoa+Mtotoba,Mbali+Muranda,Brentley+Ngema,Sphamandla+Nhlapo,Noluthando+Nkosi,Smangaliso+Nkosi,Temalangeni+Nyepela,Gift+Radebe,Willcox+Semake,Siphumelele+Singh,Kevin+Sithole,Carol+Swartz,Leandre+Tshabalala,Tebello+Vanga,Zamananga+Zwane,Zanele";
                        $learner_timetable_load[] = "Magida L-LO Sport-K4_10#April,Ofentse+Choane,Lesego+Dlamini,Linda+Goba,Sanele+Gumbi,Lethukuthul+Hadebe,Sihle+Kolanisi,Banele+Mabe,Sicelo+Mabetoa,Tebogo+Mahlangu,Khaya+Makutso,Nomonde+Mantshiyane,Owami Jonathan+Matlejoane,Bontle+Mbena,Shiela+Mkwanazi,Nqobani+Mmutle,Thabiso+Moagi,Nthabeleng+Mofokeng,Lesego+Mofokeng,Matshidiso+Mokoena,Karabo Vuyolwethu+Mokwana,Katiso+Moses,Mandisi We-Nqab+Motingoe,Rorisang+Moyo,Nombuso+Mulaudzi,Khakhu+Ndlovu,Judy+Ngwenya,Thembelihle+Nkosi(Sithole),Sihle+Nkosi,Makhosetive+Nyandeni,Nothando Senenhlahla+Radebe,Phephile+Senosi,Kgotso+Yeni,Sipho+Zulu,Nwabisa Joy+Zwane,Hlengiwe Thulisile";
                        $learner_timetable_load[] = "Magida L-LO Sport-K2_11#Chikomo,Lencon Tafadzwa+Dube,Victor+Els,Nathaniel+Gwaza,Nkosana Emmanuel+Jiyane,Umfanelo Khothatso+Langa,Ernest Sibusiso+Langa,Tshwetso Boipelo+Lawrence,Lorenzo Lawson+Maboea,Mohaladitwe+Makala,Luyando+Malaza,Angela+Manana,Lungisani+Matita,Hope+Mbele,Mzwakhe+Mhlamvu,Mongameli Sivuyile+Moetse,Kutlwano+Mokoena,Neo+Molefe,Kgosi Gauretelelwe+Moloi,Lesedi+Motaung,Karabo+Mthembu,Nombuso+Ncube,Nonceba+Ndebele,Mbongweni+Ngobeni,Gabaza+Nkele,Kagiso+Nkuna,Omphile+Qayiyana,Sinethemba+Ramnarain,Diya+Robinet,Richard Akapelwa+Seloane,Rorisang+Shongwe,Thandiswa Pretty+Siwedi,Andile+Subramoney,Dylon Reese+Thusi,Ntokozo+Vilakazi,Mongameli+Williams,Malik";
                        $learner_timetable_load[] = "Magida L-LO Sport-K3_11#Buthelezi,Nduduzo+Buthelezi,Mpumelelo+Durwin-Smith,Genevieve+Eland,Malefa+Gwaza,Nkosana Emmanuel+Kent-Brown,Riaan Conrad+Kodisang,Oefentse+Lawrence,Lorenzo Lawson+Mabasa,Ntiyiso Barney+Magubane,Nqobile+Malaza,Angela+Maluleka,Mandisa+Marumo,Thato+Mathosi,Cebo+Matita,Hope+Mhlamvu,Mongameli Sivuyile+Mogorosi,Tsholofelo+Mokoena,Neo+Mokuene,Mosieledi+Moodley,Vishalan Talano+Mpiyake,Sinovuyo Khanyisa+Mthethwa,Sandile Ntuthuko+Mvelase,Phelelani Siphosethu+Ngema,Ntokozo+Njokweni,Thobeka+Nyambuya,Tariro+Qithi,Thobeka+Raman,Demiel+Robinet,Richard Akapelwa+Sibande,Tsepo+Sindane,Zinhle+Tlaka,Boitumelo+Zulu,Sinethemba";
                        $learner_timetable_load[] = "Magida L-LO Sport-K4_11#Boyise,Boitshoko+Chikwariro,Natasha+Dick,Tyrique Tyrone+Ditshoane,Bennedict Taelo+Eland,Malefa+Hlongwane,Jessica+Khoza,Menzeli Mpumelelo+Longwe,Wongani+Mabaso,Ntabeleng+Magubane,Nqobile+Malatsi,Rethabile+Manganyi,Hlulani+Mashabela,Justice+Mathosi,Cebo+Mayekiso,Noluthando+Mejelo,Rowena+Mogorosi,Tsholofelo+Mokoena,Gontse Ofentse+Mollo,Kamohelo Margret+Monareng,Boitumelo+Moses,Shanice+Motong,Mamoshabe Lebogang+Msipa,Nkululeko+Mzima,Khanyisa+Ndlovu,Khanyisile Nqobile+Njokweni,Thobeka+Pheeha,Neo+Phiri,John Clement Dimpho+Pilane,Lesego+Rasebotje,Lehlogonolo+Seleka,Tshepiso Hope+Shelembe,Cindy+Sibamba,Njabulo+Sithole,Nqobile+Tshele,Kakanyo+Zitha,Ntokozo";
                        $learner_timetable_load[] = "Magida L-LO Sport-K4_12#Bazi,Onesimo+Bote,Tatenda+Chimsalazo,Kamohelo+Chivaviro,Percy+Cindi,Ntokozo+Goliath,Laydin+Gounder,Shayleen+Kekana,Mmatlala Shernel+Kubeka,Siyabonga+Lekeno,Neo+Lubambo,Nobuhle+Mabuya,Boitumelo+Madlanga,Joshua Siphesihle+Makhalanyane,Keletso+Mbobosi,Anovuyo+Mbuyeleni,Sisipho+Mhaleni,Brian+Mhlauli,Sabelo+Mkhwanazi,Lebone+Mochochoko,Tumelo+Mofokeng,Katlego+Molefe,Tshepiso+Mosia,Neo+Ndhlalane,Tshepo+Nhlapo,Nonkululeko+Nkomo,Trixie+Padi,Boikanyo+Pilane (Nkadimeng),Tshepang+Ramonnye,Tshenolo+Seanego(Matshiane),Promise+Sithole,Sakhile+Somera,Aanchal+Tsolo,Kamogelo+Tutuka,Ayanda";
                        $learner_timetable_load[] = "Magida L-LO Sport-K5_12#Botha,Lesedi+Chauke,Getrude Ramkoni+Chinsato,Lovejoy Kudakwashe+Ditlopo,Keamoleboga+Du Plessis,Jacques+Forster,Dylan+Gxabuza,Sphokazi+Hlongwane,S'Bongumusa+Kgomo,Moroshadi+Khumalo,Zamantungwa+Mabasa,Ntsako+Magasela,Simphiwe+Mahlangu,Reitumetse+Maluleke,Nhlori+Manzini,Lebo+Maponyane,Lisa+Matladi,Kelebo+Mazibuko,Ntokozo+Mbata,Ntombikayise+Mdlalose,Banele+Mkhwanazi,Simphiwe+Moagi,Tswelopele+Modiselle,Amogetswe+Mosenye,Molemo+Motsieloa,Thato+Ndlovu,Emelda+Nkosi,Njabulo+Pabu,Christopher+Perumal,Daynerah+Radinne,Lerato Rejoyce+Rohan,Nikita+Sebetha,Malesetsa+Shabalala,Bhekamuzi+Simelane,Jane Rebecca+Sithole,Shawn Lebo+Tembo,Daliso";
                        $learner_timetable_load[] = "Mbuli P-Tour.-K5_10#Botha,Lashandre+Bumka,Mbalentle+Buso,Skholiwe+Buthelezi,Lehlohonolo+Chatikobo,Tadiwanashe+Daniels,Tamia+Dhlame,Nobuhle+Dlamini,Linda+Du Plessis,Abigale Kim+Dubazana,Hlobisile+Gamede,Kamohelo Shantel+Khoza,Betty+Leduma,Nikkie Retshedisitswe+Mabena,Mpumelelo+Madonsela,Sibongumusa+Mahlanya,Tebello+Mahlasela,Ayanda+Maila,Keitumetse+Makhura,Lethabo Anidah+Mankanda,Palesa+Manyathi,Zanele+Maphathe,Thato Mothae+Mapote,Itumeleng+Masilela,Lindelwa Mayibongwe+Mdluli,Neo Thokozani+Mnguni,Neo+Mokoena,Solomon+Motaung,Nonhlanhla+Mothabeng,Mamorena+Mthembu,Mbalehle+Mukondeleli,Ambani+Ndebele,Kutlwano+Nkondlwane,Emihle+Nkosi,Baphiwe+Peake,Ashlyn+Radebe,Phephile+Ramokolo,Kgaphuru+Reddy,Megan+Semake,Siphumelele+Singh,Kevin+Sithole,Carol+Trivangalo,Cindy+Tshwala,Nompumelelo+Twala,Nkateko+Zikhali,Sifiso+Zwane,Nomfundo";
                        $learner_timetable_load[] = "Mbuli P-Tour.-K6_10#Batongo,Bagwangi+Bhengu-Mankge,Mbali+Botha,Tyrique Darnel+Chirwa,Nonkululeko+Daniels,Taryn+Dladla,Tshegofatso+Dos Santos,Candice+Du Plessis,Casey+Goba,Mapula+Gwala,Sibongakanke Simphiwe+Kubheka,Sandile+Maasdorp,Whanita+Madi,Mphamanyeso+Mahlangu,Andile+Mahlanya,Riccah+Malatji,Boitumelo+Malele,Lesedi+Maloka,Ntokozo+Maluleke,Romeo+Manqele,Jacob+Masha,Lesego+Matlejoane,Bontle+Mayble,Basetsane+Mdleleni,Awonke Lelethu+Mokoena,Lucky Goloka+Moodley,Ronan Cole+Mpatie,Keran+Mphaphuli,Nyimani+Mtshali,Nompumelelo+Ndiwa,Thando+Ngwenya,Simphiwe+Nkosi(Sithole),SihleNyandeni,Nothando Senenhlahla+Rakgalakane,Karabo+Ruiters,Curtley+Tshikane,Omphile+Zikhali,Ayanda Bongakonke+Zimba,Elton+Zondo,Nonhlanhla+Zulu,Nwabisa Joy";
                        $learner_timetable_load[] = "Mbuli P-Tour.-K1_11#Basson,Chelsea+Buthelezi,Mpumelelo+Colbie,Tyrique+Eland,Malefa+Fillis,Nathan+Julius,Eslyn+Liesering,Ashton Lemuel+Mabuya,Dumisane+Magubane,Nqobile+Mamaroba,Kagiso+Masemola,Tshegofatso Fortunate+Mcunu,Akhona Sabelo+Medupe,Morena Khothatso+Mkhwanazi,Nondumiso Sibusiso Thoedorah+Moima,Linda Blessing+Moletsane,Kelebogile+Mpiyake,Sinovuyo Khanyisa+Msimango,Songo Josias+Mthethwa,Sandile Ntuthuko+Mvelase,Phelelani Siphosethu+Ndlovu,Lesego+Ngema,Ntokozo+Nkombyane,Kabelo+Nkosi,Lwazi+Peter,Chukwuemeka+Phiri,Ngoako+Phori,Boitumelo+Qithi,Thobeka+Radebe,Mduduzi+Raeto,Nthabiseng+Semenya,Thoriso+Somay,Samant+Subramoney,Dylon Reese+Tshabalala,Thabiso";
                        $learner_timetable_load[] = "Mbuli P-Tour.-K4_11#Bosch,Buhle+Buthelezi,Ndumiso+Dhlamini,Luanda+Els,Nathaniel+Hoosain,Bianca+Kekana,Lefa Elton+Malaza,Hlengiwe+Maluleke,Basetsana+Masiane,Thuto+Matlhavana,Lesedi+Mazibuko,Mpho+Mekonnen,Gelila+Mofokeng,Matshidiso+Mollo,Kamohelo Margret+Moses,Shanice+Mqungwana,Cinga Gerald+Mvelase,Lethuxolo+Ndala,Lindokuhle+Ndlebe,Mzwandile+Nel,Samantha+Ngobese,Nikita Ntombizile+Nkosi,Siphoesihle+Nkosi,Zamahlubi Nokuthula+Pheeha,Neo+Pilane,Lesego+Roelofse,Rochelle+Shelembe,Cindy+Thomas,Talitha+White,Robin Theodore";
                        $learner_timetable_load[] = "Mbuli P-Tour.-K2_12#Bazi,Onesimo+Bham,Saffiya+Buthelezi,Khethiwe+Chivaviro,Percy+Coomans,Jessica Lucille+Dube,Thato+Erasmus,Kyla Ashley+Ferreira,Shelley+Goliath,Caitlin+Gumede,Siyabulela+Khumalo,Mfundo+Khumalo,Palesa+Khumalo,Zamantungwa+Louw,Ryan Timothy+Mabaso,Thapelo+Mabuya,Boitumelo+Mahlobo,Sinqobile+Makara,Katleho+Mashabela,Madeline Mathabathe+Mathetsa,Sethutse+May,Onke+Mazibuko,Simphiwe+Mbelle,Humang+Mdlalose,Banele+Mdlalose,Busisiwe+Mgcina,Nozipho+Mhlauli,Sabelo+Mkhwanazi,Simphiwe+Moloto,Tumelo+Moshane,Thlonolofatso+Mothibi,Karabo+Mthimunye,Elzinah+Nketsi,Nthabiseng+Nkomo,Mbali+Petersen,Nathaniel Saydean+Phiri,Samkelo Atlegang+Pilane (Nkadimeng),Tshepang+Sambo,Gugulethu+Sandamela,Palesa+Sheffield,Alexander Daniel+Simelane,Jane Rebecca+Tsolo,Kamogelo+Wehmeyer,Chantel";
                        $learner_timetable_load[] = "McKechnie M-Art-K4_10#Baduza,Siphosethu+Baloyi,Jabulani+Batongo,Bagwangi+Boards,Jamie+Dlamini,Linda+Dos Santos,Candice+Fokazi,Bulelani Ndodikho+Hlalele,Reitumetse Reneiloe+Khumalo,Ntokozo+Kolanisi,Banele+Legodi,Letlhogonol+Lekoko,Maadimo+Lobeni,Michael+Lubisi,Ayanda+Maluleke,Romeo+Mathe,Reynard+Mazimela,Mncedisi+Mbatha,Njabulo Prince+Meko,Nthabeleng+Mniki,Njabulo+Mochitela,Neo+Mohammed,Dondre+Mokoena,Karabo Vuyolwethu+Mostert,Ciara+Mtotoba,Mbali+Muranda,Brentley+Ngema,Sphamandla+Nkosi,Smangaliso+Nkosi,Sibusiso Hebron+Nkosi,Temalangeni+Radebe,Willcox+Skosana,Nomfundo+Swartz,Leandre+Vanga,Zamananga";
                        $learner_timetable_load[] = "McKechnie M-Art-K5_11#Bembe,Sandile+Chikomo,Lencon Tafadzwa+Ditshoane,Bennedict Taelo+Jansen,Bernito+Julius,Eslyn+Langa,Ernest Sibusiso+Magubane,Sandile+Makala,Luyando+Malepa,Blessing+Mamaroba,Kagiso+Mbaleki,Yolanda+Mndaweni,Siyabonga+Mokebe,Vuyo+Mokone,Tshepiso+Molete,Lereko+Mosue,Peter Junior+Mpebe,Thapelo+Mthethwa,Sandile Ntuthuko+Ndlovu,Amahle+Nel,Samantha+Ngomane,Lesedi+Nkosi,Lwazi+Nyandeni,Ntando+O'Kelly,Kaylin+Padi,Tshepi+Seloane,Rorisang+Slabbert,Kaitlyn+Somay,Samant+Subramoney,Dylon Reese+Tshabalala,Thabiso+Williams,Malik";
                        $learner_timetable_load[] = "McKechnie M-CAT-K1_12#Brown,Landon+Cebekhulu,Wamukelwe+Dladla,Thabo Happy+Fortuin,Anzlo+Jamekwana,Sandile+Khasake,Karabo+Khumalo,Lungiswa+Maluleke,Nhlori+Matekane,Amohelang+Mdluli,Blessing Nkosinathi+Modiselle,Amogetswe+Mokoena,Lerato Victoria+Moloi,Hlangwene+Mpai,Khutso+Ndaba,Makhaya+Ngomane,Kurhula+Nhlapo,Hlengiwe+Njolo,Kwandile+Nkomo,Mbali+Petersen,Nathaniel Saydean+Phiri,Samkelo Atlegang+Pillay,Michael+Pootona,Koketso+Robson-Garth,Caitlin+Thobejane,Morena+Tsie,Hope+Wilhase,Jamean+Xala,Anele";
                        $learner_timetable_load[] = "McKechnie M-CAT-K3_12#Bote,Tatenda+Buda,Lesego+Chatikobo,Tinashe+Finck,Alridge+Goliath,Laydin+Hartman,Ruben Shaun+Hliso,Moleboheng+Klassens,Britany+Makhubo,Muzikayise+Mashigoana,Nkini+Mbayabu,Nathan+Mbobosi,Anovuyo+Mgcina,Nozipho+Mkhonza,Kwanele+Moloto,Tumelo+Mphahlele,Mokaolo+Mtanyelwa,Ntsako+Ndimande,Katlego+Ngobese,Lebone+Nhlapo,Nonkululeko+Nkosi,Lungile+Nkosi,Thapelo+Nkwanyana,Maremane+Sheffield,Alexander Daniel+Sikhosana,Kamohelo+Sithole,Sakhile+Smith,Ethan Lyle";
                        $learner_timetable_load[] = "McKechnie M-ArT-K6_12#Albertyn,Storm+Coomans,Jessica Lucille+Dunga,Knowledge+Hlongwane,S'Bongumusa+Kaluba,Nhlanhla+Khasake,Karabo+Khumalo,Mfundo+Khumalo,Zamantungwa+Kopiso,Oteng Hope+Lobeni,Rejoice+Magasela,Simphiwe+Makhanya,Khanyisile+Mathebula,Karabo+Mathebula,Sindisiwe+Mbayabu,Nathan+Mekonnen,Yeabsera+Mkhulise,Thina Nosipho+Mnyandu,Sihawukele Sizwe+Mthimunye,Elzinah+Ndaba,Makhaya+Nhlapo,Masejara+Nkosi,Njabulo+Nkuna,Tinyiko+Pahlanen,Beda+Persad,Renuka+Radebe,Thando+Rani,Viwe+Rohan,Nikita+Smith,Ethan Lyle+Van Der Merwe,Mikhail";
                        $learner_timetable_load[] = "Makko D-Afrikaans-K1_10#Baduza,Siphosethu+Banda,Luyanda+Batongo,Bagwangi+Beharie,Nina+Beya,David+Brown,Lameez+Choane,Lesego+Dlangamandla,Lisakhanya+Dube,Mbali+Govender,Trystan+Hlalele,Reitumetse Reneiloe+Hlungwani,Rivoningo+Kivido,Jordan+Lelaka,Lerato+Mabila,Murangi+Macherechedze,Gerald+Madikgetla,Ofentse+Makhubu,Lusanda+Malinga,Thando+Maseko,Maria+Mjiyakho,Noluthando Nosipho+Mnguni,Neo+Moferefere,Kutloano+Mokoena,Solomon+Moloi,Thabang+Motingoe,Rorisang+Mtotoba,Mbali+Mudavanhu,Kathrine+Muzofa,Tapiwa+Ncongwane,Lisia+Ntoyi,Kamohelo+Phangane,Bothlale+Ramaele,Lindokuhle+Sibeko,Nonkululeko Lipolyte+Sikuni,Mihlali+Skosana,Nomfundo+Swartz,Leandre+Tshabalala,Khanyisile+Tshabalala,Tebello+Xaba,Siphosethu";
                        $learner_timetable_load[] = "Makko D-Afrikaans-K3_10#Antunes,Marco+Bowler,Muhammed+Buthelezi,Lehlohonolo+Dhlame,Nobuhle+Dos Santos,Candice+Gwala,Sibongakanke Simphiwe+Kachoko,Salama Said+Khoza,Betty+Mafongana,Noluthando+Mahlanya,Tebello+Majola,Bongani+Makhura,Lethabo Anidah+Malele,Lesedi+Maloka,Leloko Khanyisa+Mangoali,Tumelo+Matlejoane,Bontle+Mbuyane,Pride Sthembiso+Mndebele,Sihle+Moahloli,Rorisang+Mohlala,Lebone+Moloi,Moeketsi+Motau,Thato+Mpatie,Keran+Mthembu,Mbalehle+Ndhlovu,Tegoga Pauline Christina+Ndiwa,Thando+Ngwenya,Simphiwe+Nkosi,Baphiwe+Nyandeni,Nothando Senenhlahla+Pelzer,Megan+Reddy,Megan+Semake,Siphumelele+Somathika,Vuyelwa+Tjale,Mahlatse+Tshifure,Tsebo+Tshikane,Omphile+Zikhali,Sifiso";
                        $learner_timetable_load[] = "Makko D-Afrikaans-K2_11#Buthelezi,Nduduzo+Do Amaral,Kazlee Randy Amalia+Hlabisa,Gcina Ntandoyenkosi+Hlungwane,Tholakele Tinyiko+Khumalo,Sibusiso Collen+Lodimba,lucia+Magubane,Nqobile+Magwaza,Skhumbuzo+Maleke,Katlego+Manganyi,Rivoningo+Mashabela,Justice+Mavuso,Ronald+Medupe,Morena Khothatso+Mnene,Mikateko Faith+Mokhele,Boitumelo+Moreko,Naledi Lerato+Motsisi,Kagiso Amogelang+Mpiyake,Sinovuyo Khanyisa+Mthembu,Thembelihle+Mvelase,Phelelani Siphosethu+Ndaba,Keabetswe Katlego+Ndlovu,Thato+Njokweni,Thobeka+Nkosi,Lwazi+Nonkwelo,Ze-ande+O'Kelly,Kaylin+Phiri,Hannock+Semenya,Thoriso+Shongwe,Nokuthula+Thomas,Talitha+Twayi,Katleho+Zitha,Ntokozo";
                        $learner_timetable_load[] = "Makko D-Afrikaans-K4_11#Buthelezi,Mpumelelo+Dube,Victor+Fillis,Nathan+Gwaza,Nkosana Emmanuel+Jacobs,Chadwin Jadin+Julius,Eslynn+Khumalo,Nomathamsanqa+Lawrence,Lorenzo Lawson+Maboho,Mpho+Magidela,Ayabonga+Makhubu,Nomaduduzile Masesi+Malebe,Ntokozo+Manabalala,Neo Mary+Manana,Lungisani+Masongane,Bafana+Mbaleki,Yolanda+Mmbi,Muthaduli+Moetse,Kutlwano+Molefe,Mahlohonolo Mamiki+Moletsane,Kelebogile+Monareng,Kgothalo+Mthembu,Nombuso+Ncube,Nonceba+Ndebele,Rorisang+Ngomane,Lesedi+Nkombyane,Kabelo+Nyambuya,Tariro+Padi,Tshepi+Ralinala,Thabelo+Retshepisitswe,Paballo Mothibe+Seloane,Rorisang+Sibanda,Otshepeng+Slabbert,Kaitlyn+Subramoney,Dylon Reese+Vilakazi,Jabulani";
                        $learner_timetable_load[] = "Makko D-Afrikaans-K6_11#Azevedo,Melissa+Cicero,Wesley+Dhlangamandla,Khethiwe+Durwin-Smith,Genevieve+Els,Nathaniel+Jansen,Bernito+Khoza,Menzeli Mpumelelo+Kodisang,Oefentse+Maboea,Mohaladitwe+Magubane,Sandile+Malatsi,Rethabile+Maluleka,Mandisa+Marumo,Thato+Matimmalane,Thabo Rick+Matita,Hope+Mazibuko,Mpho+Mekonnen,Gelila+Mlambo,Hope Nomathemba+Mndaweni,Nthabiseng Lindiwe+Mokgapa,Moroko+Molele,Kgabo+Mosue,Peter Junior+Mphahlele,Pheladi+Mthembu,Njabulo+Mtshali,Mawande+Ngema,Ntokozo+Nkosi,Siphoesihle+Nxumalo,Mbali+Radebe,Mduduzi+Raeto,Nthabiseng+Sehume,Altehang+Shubane,Neo+Skhosana,Malibongwe+Tshabalala,Thabiso+Williams,Malik";
                        $learner_timetable_load[] = "Moodley R-Eng HML-K4_10#Banda,Luyanda+Botha,Tyrique Darnel+Chirwa,Nonkululeko+Dhladhla,Eutricia+Dladla,Tshegofatso+Dube,Mbali+Gudu,Salizwa+Khoza,Betty+Kubheka,Sandile+Langa,Londeka+Mafongana,Noluthando+Mahlanya,Tebello+Makhura,Lethabo Anidah+Makuwa,Lerato+Mandyu,Tshegofatso+Manikivane,Wandile+Mayble,Basetsane+Mjiyakho,Noluthando+Mndebele,Sihle+Moferefere,Kutloano+Moodley,Ronan Cole+Mpatie,Keran+Mthembu,Mbalehle+Muzofa,Tapiwa+Ndiwa,Thando+Nkomo,Nonhlanhla+Ntuli,Ntuthuko+Peake,Ashlyn+Ramaele,Lindokuhle+Semake,Siphumelele+Sibisi,Thandolweth+Somathika,Vuyelwa+Twala,Nkateko+Zitha,Simphiwe";
                        $learner_timetable_load[] = "Moodley R-Eng HML-K6_10#Antunes,Marco+Baloyi,Jabulani+Boards,Jamie+Bronkhorst,Luke Oliver+Hadebe,Sihle+Hlungwani,Rivoningo+Lekoko,Maadimo+Lobeni,Michael+Mabetoa,Tebogo+Mabila,Murangi+Madkgetla,Millenium Maria+Makama,Abigail+Malapane,Kamogelo+Maloka,Leloko Khanyisa+Mantshiyane,Owami Jonathan+Matekane,Thabiso+Mazimela,Mncedisi+Mbatha,Njabulo Prince+Memela,Lindani+Mncube,Sinethemba Thato Sibusisiwe+Mngoma,Kholeka+Mohlala,Lebone+Moletsane,Mphethe+Mostert,Ciara+Motloung,Matshidiso+Mpiti,Bohlokoa+Muchena,Evans+Naidoo,Jamaine+Ndlovu,Patience Nonhlanhla+Nkosi,Temalangeni+Ntuli,Orapeleng+Sangweni,Bridget+Sibiya,Senzokuhle+Swartz,Leandre+Zikhali,Sifiso+Zwane,Zanele";
                        $learner_timetable_load[] = "Moodley R-Eng HML-K5_12#Bazi,Onesimo+Cebekhulu,Wamukelwe+Dhlomo,Nomonde+Gumede,Gugulethu+Gumede,Siyabulela+Hartman,Ruben Shaun+Khwinana,Nozuko+Mabuya,Boitumelo+Madiba,Mfundi+Mahlobo,Sinqobile+Manzini,Angel Sinethemba+May,Onke+Mbena,Annah+Mdluli,Blessing Nkosinathi+Mhlauli,Sabelo+Mochochoko,Tumelo+Mokoakoa,Nokukhanya+Moloi,Hlangwene+Mpai,Khutso+Mtanyelwa,Ntsako+Mtimkulu,Bondy+Namane,Refiloe+Ngomane,Kurhula+Nketsi,Nthabiseng+Ntuli,Nokwanda+Phiri,Samkelo Atlegang+Pilane (Nkadimeng),Tshepang+Ramonnye,Tshenolo+Shongwe,Zamantimande+Sibanda,Lathi+Sibasa,Gomolemo+Tsolo,Kamogelo+Vengatsammy,Thalia+Wallace,Sarah-Jane";
                        $learner_timetable_load[] = "Mpedzamombe P-Geog.-K1_10#Antunes,Marco+Bopape,Thando+Bowler,Muhammed+Buthelezi,Lehlohonolo+Davids,Sherezaad+De Vries,Drue+Gombani,Precious+Govender,Simone+Gudu,Salizwa+Gxekwa,Khanyisile+Langa,Londeka+Leolo,Nonhlanhla Sinah+Lepele,Mabotse+Mahlanya,Tebello+Makuwa,Lerato+Maseko,Nokwanda+Moagi,Nthabeleng+Mofokeng,Lesego+Moyo,Nombuso+Mshumpela,Njabulo+Naidoo,Jamaine+Ngobese,Linda Ntokozo+Ngwane,Samukelo+Nhlapo,Masego+Nyakale,Neo+Pelzer,Megan+Ramokolo,Kgaphuru+Sekhalo,Sabelo+Sikotane,Andile+Sitoto,Musa";
                        $learner_timetable_load[] = "Mpedzamombe P-Geog.-K2_10#Goba,Sanele+Hadebe,Siphesihle+Khoza,Betty+Kubheka,Lesego+Madi,Mphamanyeso+Magome,Katlego+Marutha,Bonolo+Maseko,Andile+Mashau,Dakalo+Mbatha,Ayanda+Mmutle,Thabiso+Mndebele,Sihle+Mngoma,Kholeka+Moagi,Busisiwe+Mohlala,Lebone+Molefe,Tshepiso Promise+Moodley,Ronan Cole+Ncongwane,Lisia+Ndlovu,Judy+Ngwenya,Itumeleng+Ramaele,Lindokuhle+Sibiya,Andiswa+Singh,Kevin+Xakaza,Thobeka+Zondo,Nonhlanhla";
                        $learner_timetable_load[] = "Mpedzamombe P-Geog.-K6_10#Brown,Lameez+Dhladhla,Eutricia+Diemesor,Anaestasia Law+Govender,Trystan+Gumbi,Lethukuthul+Hlalele,Reitumetse Reneiloe+Kanyile,Tesa+Kekana,Hlologelo+Kivido,Jordan+Mabe,Sicelo+Mabye,Kgetho+Makutso,Nomonde+Mjiyakho,Noluthando Nosipho+Mkoko,Mthokozisi+Mngomezulu,Londeka+Mokoena,Reatlehile+Moseki,Kamogelo+Mthembu,Mbalehle+Muzofa,Tapiwa+Nkomo,Nonhlanhla+Noruwana,Phumla+Nyaka,Modiegi+Ogle,Onesha+Phangane,Bothlale+Sibisi,Thandolweth+Silinda,Simphiwe+Xaba,Siphosethu";
                        $learner_timetable_load[] = "Mpedzamombe P-Geog.-K4_11#Boroko,Thabiso+Brown,Lendle+Davids,Lushuandre+Gazide,Kutlwano Tshepang+Hlapisi,Onkarabile+Hlophe,Wanda+Khwerana,Talifhani+Koko,Mosa Pheeha+Liesering,Ashton Lemuel+Mabizela,Vangile+Magubane,Nqobile+Makuwa,Takudzwa+Malinga,Khumo+Manganyi,Hlulani+Manganyi,Rivoningo+Mejelo,Rowena+Moima,Linda Blessing+Mokhele,Boitumelo+Moloi,Lesedi+Molopo,Lehlohonolo+Monareng,Boitumelo+Motsoeneng,Obakeng+Mphahlele,Pheladi+Mzima,Khanyisa Ntandokasi+Ndlovu,Amahle+Ngobeni,Gabaza+Nkosi,Lwazi+Ntwanambi,Aluta+Phori,Boitumelo+Qamakwane,Katleho+Raeto,Nthabiseng+Seleka,Tshepiso Hope+Shangase,Zamashuku+Shubane,Neo+Sibiya,Owami+Sikhosana,Sokhana+Silangwe,Siphesihle+Taulelo,Wesley+Zitha,Ntokozo";
                        $learner_timetable_load[] = "Muranda P-Eng HML-K1_11#Chakane,Tsholofelo+Ditshoane,Bennedict Taelo+Gumede,Ndumiso+Hlatshwayo,Khanyisile+Jansen,Bernito+Khumalo,Nomathamsanqa+Khwerana,Talifhani+Mabuza,Faith Xiluva+Mahlangu,Bongani+Malebana,Lesego+Manana,Lungisani+Masina,Kahisano+Mekonnen,Gelila+Mndaweni,Nthabiseng Lindiwe+Moetse,Kutlwano+Mokgotla,Palesa Mohata+Moleke,Tshegofatso+Moreosele,Letlhogonolo+Mosue,Peter Junior+Msipa,Nkululeko+Mthembu,Thembelihle+Mzima,Khanyisa Ntandokasi+Ndala,Lindokuhle+Nel,Samantha+Nkosi,Ayanda+Nonkwelo,Ze-ande+Paile(Moshabane),Karabo Phuthi+Qayiyana,Sinethemba+Selepe,Simphiwe+Sibanda,Otshepeng+Skhosana,Malibongwe+Toka,Tsheamo+Vilakazi,Thokozane";
                        $learner_timetable_load[] = "Muranda P-Eng HML-K3_11#Boroko,Thabiso+Chiloane,Bokang+Dick,Tyrique Tyrone+Do Amaral,Kazlee Randy Amalia+Gazide,Kutlwano Tshepang+Hoosain,Bianca+Julius,Eslynn+Langa,Ernest Sibusiso+Mabizela,Vangile+Malatsi,Rethabile+Malinga,Khumo+Maroga,Tsebo+Matla,Tshepo+Mbaleki,Yolanda+Mhangwana,Shongile+Mndaweni,Siyabonga+Mokoena,Rethabile Happiness+Moloi,Lesedi+Moreko,Naledi Lerato+Motsoeneng,Obakeng+Mpebe,Thapelo+Mthembu,Nombuso+Nair,Talisa+Ndlovu,Mosa+Nkele,Kagiso+Nkuna,Omphile+Padi,Tshepi+Qamakwane,Katleho+Retshepisitswe,Paballo Mothibe+Seleka,Tshepiso Hope+Shubane,Neo+Sithole,Irvin Kichinin+Somay,Samant+Tshabalala,Thabiso+Zimucha,Nicole Tanaka";
                        $learner_timetable_load[] = "Muranda P-Eng HML-K5_11#Cicero,Wesley+Durwin-Smith,Genevieve+Greco,Byron+Hlophe,Wanda+Kent-Brown,Riaan Conrad+Mabaso,Ntabeleng+Mabuza,Ntokozo+Makoe,Kutloano+Malinga,Sibusiso Immanuel+Manganyi,Rivoningo+Masongane,Bafana+Matseke,Ofentse+Mejelo,Rowena+Mofokeng,Matshidiso+Mokhele,Boitumelo+Molele,Kgabo+Moodley,Vishalan Talano+Motsisi,Kagiso Amogelang+Mqungwana,Cinga Gerald+Mvelase,Lethuxolo+Ndlebe,Mzwandile+Ngwenya,Ludina Janas+Norman,Alessandro Delron+Papu,Ndumiso+Phiri,John Clement Dimpho+Raeto,Nthabiseng+Robinet,Richard Akapelwa+Sekati,Segametsi+Shongwe,Nokuthula+Sikhosana,Sokhana+Tlaka,Boitumelo+Tshele,Kakanyo+Xoma,Lutho+Zulu,Sinethemba";
                        $learner_timetable_load[] = "Muranda P-Eng HML-K4_12#Bila,Ayanda+Buda,Lesego+Chinsato,Lovejoy Kudakwashe+Dimba,Nkosinathi+Dunga,Knowledge+Erasmus,Kyla Ashley+Finck,Alridge+Hlabana,Tsireletso+Hlope,Melusi+Khumalo,Zamantungwa+Klassens,Britany+Magasela,Nombuso+Magasela,Simphiwe+Makgethe,Amogelang Patrick+Manzini,Lebo+Mathetsa,Sethutse+Matladi,Kelebo+Mbata,Ntombikayise+Mhlongo,Nompumelelo+Mngoma,Nomfundo+Moagi,Tswelopele+Mokoena,Lerato Victoria+Moodley,Priyan+Mthembu,Mpumelelo+Mthimunye,Elzinah+Ndlovu,Wakhile+Ngwenya,Londiwe+Nkosi,Thapelo+Nkuna,Tinyiko+Petersen,Nathaniel Saydean+Pillay,Michael+Rani,Viwe+Sekelenyane,Reabetswe+Sithole,Shawn Lebo+Thobejane,Morena+Wilhase,Jamean";
                        $learner_timetable_load[] = "Muranda P-Eng HML-K6_12#Brown,Landon+Brown,Tyreeq+Caluza,Phumelele+Chivaviro,Percy+Cindi,Ntokozo+Dlamini,Zinhle Nkululeko+Forster,Dylan+Goliath,Laydin+Hliso,Moleboheng+Kgomo,Moroshadi+Lekeno,Neo+Makhalanyane,Keletso+Maponyane,Lisa+Mashigoana,Nkini+Mazibuko,Ntokozo+Mbelle,Humang+Mbuyeleni,Sisipho+Mhaleni,Brian+Mokgatle,Nandi+Njibana,Alizwa+Nkokoana,Paballo+Nkomo,Mbali+Nkosi,Lungile+Philibane,Thina+Pradeep,Preethi+Rikhotso,Vukosi+Sandamela,Palesa+Sheffield,Alexander Daniel+Sookran,Mishka+Speelman,Stokeley+Tutuka,Ayanda+Zwane,Unathi";
                        $learner_timetable_load[] = "Naicker D-Econ.-K4_10#Adolph,Quinlan+April,Ofentse+Kekana,Mogoshadi+Langa,Lesedi+Mabetoa,Tebogo+Mabula,Naledi+Madkgetla,Millenium Maria+Mahlangu,Khaya+Malatji,Boitumelo+Marutha,Bonolo+Masheko,Andile+Mdingwaze,Sinqobile+Mdlalose,Noluthando+Mokwana,Katiso+Motaung,Nonhlanhla+Motingoe,Rorisang+Mphaphuli,Hulisani+Mulaudzi,Khakhu+Ndlovu,Patience Nonhlanhla+Ndlovu,Thando+Nqolobe,Luxolo+Radebe,Phephile+Sekhuthe,Tshiamo+Sibeko,Nonkululeko+Thomas,Jade+Tshikane,Omphile+Xayiya,Qhama+Zimba,Elton";
                        $learner_timetable_load[] = "Naicker D-Econ.-K5_10#Choane,Lesego+Gwala,Sibongakanke Simphiwe+Kutumela,Thato Bradley+Lubisi,Ayanda+Maake,Tidimalo+Makhalimele,Lungelo+Manala,Mwalimo+Maseko,Maria+Matlejoane,Bontle+Mazibuko,Gontle+Mazubuko,Sinethemba+Mbuyane,Pride Sthembiso+Mkhwanazi,Jabu+Moferefere,Kutloano+Mokoena,Thuto+Moloi,Moeketsi+Mphaphuli,Nyimani+Mtshali,Mpho+Ndhlovu,Tegoga Pauline Christina+Ndiaye,Nonhlanhla+Ngwenya,Simphiwe+Nkosi(Sithole),Sihle+Nkosi,Makhosetive+Nyandeni,Nothando Senenhlahla+Rakgalakane,Karabo+Seema,Itumeleng+Smith,Lungelwa+Tjale,Mahlatse+Tshabalala,Khanyisile+Ximba,Lungile+Zikhali,Ayanda Bongakonke+Zulu,Nwabisa Joy";
                        $learner_timetable_load[] = "Naicker D-Account.-K6_10#Aphane,Temoso+April,Ofentse+Banda,Luyanda+Bowler,Muhammed+Buthelezi,Ayanda+Choane,Lesego+Dube,Mbali+Hadebe,Siphesihle+Kekana,Mogoshadi+Langa,Lesedi+Maake,Tidimalo+Madikgetla,Ofentse+Mafongana,Noluthando+Majola,Bongani+Makhanya,Amanda+Mandyu,Tshegofatso+Maseko,Maria+Mazubuko,Sinethemba+Mkhonza,Melusi+Mkhwanazi,Jabu+Moferefere,Kutloano+Mokolokolo,Lesedi+Mokou,Violet+Moloi,Reabetsoe+Mosaathebe,Legae+Motau,Thato+Motingoe,Rorisang+Mtshepu,Kgomotso+Mudavanhu,Kathrine+Musingadi,Ndivhuwo+Naidoo,Kreolin+Ndaba,Sabeloshile+Ngceba,Wandisa+Nkosi,Makhosetive+Ntuli,Ntuthuko+Ramafola,Simphiwe+Sekhuthe,Tshiamo+Sikuni,Mihlali+Somathika,Vuyelwa+Tsatsi,Kgotso+Tshabalala,Khanyisile+Tshabalala,Thembelihle+Tshifure,Tsebo+Zikali,Sharmaine+Zitha,Simphiwe";
                        $learner_timetable_load[] = "Naicker D-Account.-K1_11#Boroko,Thabiso+Hlabisa,Gcina Ntandoyenkosi+Lawrence,Lorenzo Lawson+Madi,Mabuti+Malaza,Angela+Maleke,Katlego+Manabalala,Neo Mary+Manganyi,Hlulani+Maroga,Tsebo+Mathosi,Cebo+Mavuso,Ronald+Mhangwana,Shongile+Mnene,Mikateko Faith+Mogorosi,Tsholofelo+Molobela,Anchor+Muranda,Ashley+Ncube,Nonceba+Ngwenya,Ludina+Njokweni,Thobeka+Retshepisitswe,Paballo Mothibe+Shabalala,Reneilwe+Shongwe,Nokuthula+Tlaka,Boitumelo+Vilakazi,Jabulani+Xulu,Mthunzi";
                        $learner_timetable_load[] = "Naicker D-Account.-K2_11#Dlamini,Thabang+Durwin-Smith,Genevieve+Jacobs,Dylan+Kent-Brown,Riaan Conrad+Mabuza,Buhle Pamella+Magidela,Ayabonga+Mahopo,Kamogelo+Makhafula,Keitumetse+Manana,Sanelisiwe+Masuku,Thembelihle+Meyer,Beauty+Mjiyakho,Sindiswa+Mndaweni,Nthabiseng Lindiwe+Mofokeng,Thabo+Molele,Kgabo+Motaung,Karabo+Motong,Mamoshabe Lebogang+Ncube,Nonceba+Ndebele,Rorisang+Ngxotholazi+Nxumalo,Mbali+Retshidisitwe Nyakallo,Mothibe+Shangase,Thando+Shongwe,Thandiswa Pretty+Soko,Mandisa+Tshele,Kakanyo+Vilakazi,Mongameli+Zungu,Khensani";
                        $learner_timetable_load[] = "Naicker D-Account.-K3_12#Bhengu,Nondumiso+Dladla,Thabo Happy+Gumede,Gugulethu+Jamekwana,Sandile+Kopiso,Oteng Hope+Lekeno,Neo+Mabasa,Ntsako+Mabuya,Nthabiseng Hope+Magagula,Gugulethu+Magasela,Nombuso+Makgethe,Amogelang Patrick+Makhalanyane,Keletso+Mofokeng,Katlego+Mokgatle,Nandi+Moloyi,Keitumetse+Mosia,Neo+Nkomo,Trixie+Persad,Renuka+Pootona,Koketso+Pradeep,Preethi+Radebe,Thato+Rammike,Michell+Seanego(Matshiane),Promise+Sibanda,Lathi+Somera,Aanchal+Speelman,Stokeley+Xala,Anele+Zwane,Unathi";
                        $learner_timetable_load[] = "Naicker J-B. Stud.-K2_11#Basson,Chelsea+Boroko,Thabiso+Dalasile,Nonhlanhla+Gcuze,Thembinkosi+Jiyane,Umfanelo Khothatso+Khulu,Ntokozo Langalakhe+Mabuya,Dumisane+Mabuza,Ntokozo+Mahlangu,Bongani+Malaza,Hlengiwe+Masiane,Thuto+Mayekiso,Noluthando+Mekonnen,Gelila+Mmbi,Muthaduli+Mokgapa,Moroko+Molefe,Mahlohonolo Mamiki+Moleke,Tshegofatso+Mollo,Kamohelo Margret+Mphuthi,Andile+Msimango,Songo Josias+Ndlebe,Mzwandile+Ndlovu,Khanyisile Nqobile+Nkala,Sukoluhle+Nkombyane,Kabelo+Paile(Moshabane),Karabo Phuthi+Pheeha,Neo+Qithi,Thobeka+Radebe,Amahle Zesiwe+Sehume,Altehang+Sibamba,Njabulo+Skhosana,Malibongwe";
                        $learner_timetable_load[] = "Naicker J-B. Stud.-K5_11#Buthelezi,Mpumelelo+Damoyi,Fatima Zoleka+Dhlamini,Luanda+Fillis,Nathan+Hoosain,Bianca+Leew,Lebohang+Maboho,Mpho+Mabuza,Faith Xiluva+Mahopo,Kamogelo+Malebana,Lesego+Masokela,Keiso+Mbonani,Nomsa+Mdinisa,Blessing Zinhle+Mdinisa,Mary-Anne Nonhlanhla+Meyer,Beauty+Mkhwanazi,Nondumiso Sibusiso Thoedorah+Mokgotla,Palesa Mohata+Moletsane,Kelebogile+Moreosele,Letlhogonolo+Moses,Shanice+Msipa,Nkululeko+Ncube,Nonceba+Ndebele,Mbongweni+Ndlovu,Mosa+Ngema,Ntokozo+Nkele,Kagiso+Nkuna,Omphile+Phiri,Prudence+Radebe,Mduduzi+Ralinala,Thabelo+Rasebotje,Lehlogonolo+Roelofse,Rochelle+Selepe,Simphiwe+Siwedi,Andile+Zungu,Khensani";
                        $learner_timetable_load[] = "Naicker J-B. Stud.-K3_12#Bham,Saffiya+Bila,Ayanda+Caluza,Phumelele+Coomans,Jessica Lucille+Fortuin,Anzlo+Kaluba,Nhlanhla+Khwinana,Nozuko+Louw,Ryan Timothy+Majova,Olefa+Makara,Katleho+Malamule,Sikhulile+Mashabela,Madeline Mathabathe+Masinga,Sibusiso+May,Onke+Mazibuko,Simphiwe+Mbuyeleni,Sisipho+Mdhluli,Sibusiso+Mhlauli,Sabelo+Mhlongo,Nompumelelo+Mnisi,Smangele+Molefe,Tshepiso+Mothibi,Palesa+Ndhlalane,Tshepo+Ndimande,Amukelani+Ntuli,Rixaka+Padi,Boikanyo+Radebe,Thando+Sebetha,Malesetsa+Sekelenyane,Reabetswe+Sithole,Nhlanganiso+Tsie,Hope+Wilhase,Jamean+Yende,Ntokozo";
                        $learner_timetable_load[] = "Naicker J-B. Stud.-K4_12#Bote,Tatenda+Botha,Lesedi+Chimsalazo,Kamohelo+Ditlopo,Keamoleboga+Hobyani,Tintswalo+Kubeka,Siyabonga+Maboe,Naledi+Madlanga,Joshua Siphesihle+Mahlangu,Nkosinathi+Mahlobo,Sinqobile+Makhonjwa,Ivan+Mbelle,Humang+Mdlalose,Busisiwe+Mdluli,Blessing Nkosinathi+Mkhwanazi,Lebone+Mochochoko,Tumelo+Modiselle,Amogetswe+Mosia,Neo+Mtanyelwa,Ntsako+Mtimkulu,Bondy+Ndaba,Makhaya+Ngobese,Lebone+Ngomane,Kurhula+Nhlapo,Nonkululeko+Rammike,Michell+Ramonnye,Tshenolo+Sibanda,Lathi+Sookran,Mishka+Speelman,Stokeley+Wehmeyer,Chantel+Zulu,Owethu";
                        $learner_timetable_load[] = "Naidoo M-Hist.-K1_10#Abrahams,Shannon+Bumka,Mbalentle+Daniels,Taryn+Du Plessis,Casey+Dubazana,Hlobisile+Goba,Mapula+Hadebe,Sihle+Khanye,Naledi+Khoza,Betty+Lehong,Thato Thabiso+Mahlasela,Ayanda+Malele,Lesedi+Maloka,Leloko Khanyisa+Maloka,Ntokozo+Mapote,Itumeleng+Mashau,Dakalo+Masheko,Andile+Masilela,Lindelwa Mayibongwe+Mbatha,Ayanda+Mchunu,Karabo Zakithi+Mkwanazi,Nqobani+Mntambo,Mbali+Mohlala,Lebone+Mokoena,Karabo Vuyolwethu+Mokoena,Lucky Goloka+Montle,Bontle+Mpatie,Keran+Naidoo,Ruvesen+Ndiwa,Thando+Ndlovu,Judy+Nhlapo,Noluthando+Nkondlwane,Emihle+Nxumalo,Mamosa+Reddy,Megan+Sangweni,Bridget+Sibiya,Andiswa+Trivangalo,Cindy+Xakaza,Thobeka+Zwane,Hlengiwe Thulisile";
                        $learner_timetable_load[] = "Naidoo M-Hist.-K3_10#Botha,Tyrique Darnel+Buthelezi,Ayanda+Daniels,Tamia+Davids,Sherezaad+Dlangamandla,Lisakhanya+Kubheka,Sandile+Kubheka,Lesego+Lepele,Mabotse+Maasdorp,Whanita+Mahlangu,Andile+Makhubu,Lusanda+Malevu,Siphiwe+Mantshiyane,Owami Jonathan+Matekane,Thabiso+Mdleleni,Awonke Lelethu+Mncube,Sinethemba Thato Sibusisiwe+Mndebele,Nhlanhla+Mngomezulu,Londeka+Moagi,Busisiwe+Moagi,Nthabeleng+Mofokeng,Boitumelo+Mokoena,Reatlehile+Mokoena,Solomon+Moses,Mandisi We-Nqab+Motloung,Matshidiso+Mshumpela,Njabulo+Mtlaping,Nomfundo+Mtshali,Nompumelelo+Mvelase,Xolile Natacia+Ngwenya,Thembelible+Nkomo,Nonhlanhla+Ntshingila,Ayanda+Ogle,Onesha+Sitoto,Musa+Yeni,Sipho+Zwane,Nomfundo";
                        $learner_timetable_load[] = "Naidoo M-Hist.-K6_10#Beya,David+Botha,Lashandre+Bozsik,Janos+Chatikobo,Tadiwanashe+Damari,Lufuno+Dhlame,Nobuhle+Du Plessis,Abigale Kim+Kachoko,Salama Said+Lebotsa,Gaake+Leduma,Nikkie Retshedisitswe+Madonsela,Sibongumusa+Magome,Katlego+Makhura,Lethabo Anidah+Mangoali,Tumelo+Manyathi,Zanele+Marutha,Bonolo+Maseko,Andile+Mathobela,Kamogelo+Matsobane,Tiisetso Jeanet+Mdlalose,Noluthando+Mndebele,Sihle+Mnguni,Neo+Moahloli,Rorisang+Molefe,Tshepiso Promise+Motaung,Teboho+Ngwenya,Itumeleng+Ngwenya,Noluthando+Ntoyi,Kamohelo+Nyakale,Neo+Radebe,Willcox+Radebe,Hlompho+Ramaele,Lindokuhle+Semake,Siphumelele+Sibeko,Nonkululeko+Sikotane,Andile+Sithole,Carol+Tsotetsi,Katleho+Weimers,Zaakirah+Ximba,Lungile";
                        $learner_timetable_load[] = "Naidoo M-Hist.-K2_11#Chikwariro,Natasha+Els,Nathaniel+Julius,Eslynn+Khumalo,Nomathamsanqa+Langa,Ernest Sibusiso+Leew,Lebohang+Magubane,Sandile+Malinga,Khumo+Matseke,Ofentse+Mbonani,Nomsa+Mcunu,Akhona Sabelo+Mejelo,Rowena+Moima,Linda Blessing+Mokoena,Neo+Molefe,Kgosi Gauretelelwe+Molopo,Lehlohonolo+Motlhaping,Nthabiseng+Mthombeni,Nhlamulo+Nkele,Kagiso+Nkuna,Omphile+Ntwendala,Inga+Peter,Chukwuemeka+Phiri,John Clement Dimpho+Selepe,Simphiwe+Shelembe,Cindy+Siwedi,Andile+Subramoney,Dylon Reese+Tshabalala,Bongiwe";
                        $learner_timetable_load[] = "Naidoo M-Hist.-K5_11#Gcuze,Thembinkosi+Golotile,Yolanda+Hlapisi,Onkarabile+Hlungwane,Tholakele Tinyiko+Jiyane,Umfanelo Khothatso+Kgapola,Boitumelo+Klahla,Bandile+Koko,Mosa Pheeha+Makhubu,Nomaduduzile Masesi+Matimmalane,Thabo Rick+Matlhavana,Lesedi+Mdlala,Katleho+Mmbi,Muthaduli+Moetse,Kutlwano+Mokgapa,Moroko+Mokoena,Rethabile Happiness+Molefe,Mahlohonolo Mamiki+Monareng,Kgothalo+Mphuthi,Nombuso Vanessa+Nkala,Sukoluhle+Nkosi,Zamahlubi Nokuthula+Nsibanyoni,Will Yamkela+Seleka,Tshepiso Hope+Semenya,Thoriso+Shangase,Zamashuku+Sibanda,Otshepeng+Stander,Megan+Twayi,Katleho+Vilakazi,Jabulani";
                        $learner_timetable_load[] = "Naidu C-English HML-K2_10#Abrahams,Shannon+Buso,Skholiwe+Buthelezi,Ayanda+Daniels,Tamia+Du Plessis,Abigale Kim+Gombani,Precious+Govender,Simone+Govender,Trystan+Langa,Lesedi+Lubisi,Ayanda+Maasdorp,Whanita+Madonsela,Sibongumusa+Maila,Keitumetse+Manala,Mwalimo+Mathobela,Kamogelo+Matlejoane,Bontle+Mbuyane,Pride Sthembiso+Mkoko,Mthokozisi+Mokoena,Reatlehile+Montle,Bontle+Motau,Thato+Mphofela,Mathshidiso Ngwanankwana+Mtshali,Nompumelelo+Ndebele,Kutlwano+Ngwenya,Thembelible+Nkosi,Baphiwe+Ntoyi,Kamohelo+Nyandeni,Nothando Senenhlahla+Rakgalakane,Karabo+Ruiters,Curtley+Senosi,Kgotso+Tjale,Mahlatse+Trivangalo,Cindy+Xayiya,Qhama+Zulu,Nwabisa Joy";
                        $learner_timetable_load[] = "Naidu C-English HML-K3_10#April,Ofentse+Batongo,Bagwangi+Bhengu-Mankge,Mbali+Damari,Lufuno+Esbend,Rivaldo+Goba,Mapula+Gxekwa,Khanyisile+Kekana,Hlologelo+Kutumela,Thato Bradley+Lebotsa,Gaake+Mabe,Sicelo+Madikgetla,Ofentse+Makhanya,Amanda+Malinga,Thando+Mashau,Dakalo+Mchunu,Karabo Zakithi+Mkhwanazi,Jabu+Mnguni,Neo+Mntambo,Mbali+Motaung,Teboho+Moyo,Nombuso+Mukondeleli,Ambani+Naidoo,Kreolin+Ndlovu,Judy+Ngwenya,Noluthando+Nkosi(Sithole),Sihle+Nqolobe,Luxolo+Nyakale,Neo+Radebe,Hlompho+Seema,Itumeleng+Sikuni,Mihlali+Thomas,Jade+Tshwala,Nompumelelo+Zikhali,Ayanda Bongakonke";
                        $learner_timetable_load[] = "Naidu C-English HML-K1_12#Bote,Tatenda+Botha,Lesedi+Coomans,Jessica Lucille+Dube,Thato+Hobyani,Tintswalo+Kondo,Yolanda+Lobeni,Rejoice+Mabuya,Nthabiseng Hope+Madlanga,Joshua Siphesihle+Majova,Olefa+Mashabela,Madeline Mathabathe+Masinga,Sibusiso+Matiza,Zenzo+Mazibuko,Simphiwe+Mdhluli,Sibusiso+Mgcina,Nozipho+Mnisi,Smangele+Mofokeng,Katlego+Moodley,Savania+Mosia,Neo+Mothibi,Karabo+Ndhlalane,Tshepo+Nhlapo,Nonkululeko+Nkomo,Trixie+Nkosi,Sinenhlanhla Nomfundo+Ntuli,Rixaka+Rammike,Michell+Rohan,Nikita+Sikhosana,Kamohelo+Somera,Aanchal+Sukdeo,Tashmika+Zulu,Owethu";
                        $learner_timetable_load[] = "Naidu C-English HML-K4_12#Boonzaaier,Shade+Chauke,Getrude Ramkoni+Dladla,Thabo Happy+Dube,Bryan+Ferreira,Shelley+Fortuin,Anzlo+Goliath,Caitlin+Gxabuza,Sphokazi+Jamekwana,Sandile+Khumalo,Palesa+Kopiso,Oteng Hope+Maboke,Mpho+Magadlela,Sithembiso Floyd+Makara,Katleho+Maluleke,Nhlori+Masango,Reneilwe+Matekane,Amohelang+Mazibuko,Mthandeni+Mdlalose,Banele+Mkhonza,Kwanele+Mkhwanazi,Simphiwe+Moloto,Tumelo+Mothibi,Palesa+Mtshali,Thulani+Ndlovu,Emelda+Pahlanen,Beda+Perumal,Daynerah+Phakathi,Thando+Pootona,Koketso+Robson-Garth,Caitlin+Simelane,Jane Rebecca+Tembo,Daliso+Van Der Merwe,Mikhail+Xala,Anele";
                        $learner_timetable_load[] = "Ndebele M-Math-K5_10#April,Ofentse+Baloyi,Jabulani+Bopape,Thando+Bronkhorst,Luke Oliver+Dube,Mbali+Govender,Trystan+Hadebe,Siphesihle+Kekana,Mogoshadi+Langa,Lesedi+Leolo,Nonhlanhla Sinah+Mabila,Murangi+Macherechedze,Gerald+Mafongana,Noluthando+Mahlangu,Lindiwe+Makuwa,Lerato+Malele,Lesedi+Mbatha,Mandisa+Mdingwaze,Sinqobile+Mkoko,Mthokozisi+Mngoma,Kholeka+Mokolokolo,Lesedi+Moloi,Thabang+Mosaathebe,Legae+Motloung,Matshidiso+Mpiti,Bohlokoa+Muchena,Evans+Naidoo,Ruvesen+Ndiwa,Thando+Ndlovu,Thando+Nkosi,Malibongwe+Noruwana,Phumla+Ntuli,Orapeleng+Radebe,Kamogelo+Senosi,Kgotso+Somathika,Vuyelwa+Swartz,Leandre+Tlhatlhetji,Reamogetse+Tshabalala,Thembelihle+Zwane,Zanele";
                        $learner_timetable_load[] = "Ndebele M-Math Lit.-K2_11#Buthelezi,Ndumiso+Colbie,Tyrique+Ditshoane,Bennedict Taelo+Fillis,Nathan+Hoosain,Bianca+Kgapola,Boitumelo+Kodisang,Oefentse+Liesering,Ashton Lemuel+Maboho,Mpho+Mabuza,Faith Xiluva+Makhubu,Nomaduduzile Masesi+Malatsi,Rethabile+Matlhavana,Lesedi+Mkhwanazi,Nondumiso Sibusiso Thoedorah+Mndaweni,Siyabonga+Mokebe,Vuyo+Mokoena,Rethabile Happiness+Monareng,Kgothalo+Moreosele,Letlhogonolo+Mpebe,Thapelo+Mthembu,Njabulo+Ndala,Lindokuhle+Ndlovu,Amahle+Nel,Samantha+Nkosi,Ayanda+Nkosi,Siphoesihle+Penn,Keabetswe Boitumelo+Radebe,Mduduzi+Raeto,Nthabiseng+Rasebotje,Lehlogonolo+Seleka,Tshepiso Hope+Sibanda,Otshepeng+Sithole,Nqobile+Somay,Samant+Tshabalala,Thabiso+Zulu,Sinethemba";
                        $learner_timetable_load[] = "Ndebele M-Math Lit.-K6_11#Basson,Chelsea+Buthelezi,Mpumelelo+Chiloane,Bokang+Do Amaral,Kazlee Randy Amalia+Golotile,Yolanda+Hlapisi,Onkarabile+Julius,Eslynn+Khulu,Ntokozo Langalakhe+Khumalo,Nomathamsanqa+Koko,Mosa Pheeha+Mabuza,Ntokozo+Makoe,Kutloano+Malepa,Blessing+Manabalala,Neo Mary+Mavuso,Njabulo+Mayekiso,Noluthando+Medupe,Morena Khothatso+Mmbi,Muthaduli+Moganedi,Tshegofatso+Molefe,Kgosi Gauretelelwe+Moleke,Tshegofatso+Moreko,Naledi Lerato+Motsisi,Kagiso Amogelang+Mpiyake,Sinovuyo Khanyisa+Mvelase,Lethuxolo+Ndlebe,Mzwandile+Ngobese,Nikita Ntombizile+Nkombyane,Kabelo+Nkosi,Zamahlubi Nokuthula+Phiri,Ngoako+Phori,Boitumelo+Pilane,Lesego+Shelembe,Cindy+Sindane,Zinhle+Trotters,Harozane+Wayama,Musumari";
                        $learner_timetable_load[] = "Ndebele M-Math Lit.-K1_12#Bazi,Onesimo+Bila,Ayanda+Chatikobo,Tinashe+Chauke,Getrude Ramkoni+Chinsato,Lovejoy Kudakwashe+Erasmus,Kyla Ashley+Ferreira,Shelley+Gxabuza,Sphokazi+Khumalo,Zamantungwa+Magadlela,Sithembiso Floyd+Makhalanyane,Keletso+Manzini,Angel Sinethemba+Manzini,Lebo+Mathetsa,Sethutse+Mazibuko,Ntokozo+Mbata,Ntombikayise+Mdlalose,Banele+Mhlauli,Sabelo+Mhlongo,Nompumelelo+Mkhwanazi,Simphiwe+Moloto,Tumelo+Mothibi,Palesa+Mthimunye,Elzinah+Ndlovu,Emelda+Nketsi,Nthabiseng+Nkokoana,Paballo+Pilane (Nkadimeng),Tshepang+Radebe,Thando+Ramonnye,Tshenolo+Sandamela,Palesa+Simelane,Jane Rebecca+Smith,Ethan Lyle+Tsolo,Kamogelo+Yende,Ntokozo";
                        $learner_timetable_load[] = "Ndebele M-Math Lit-K3_12#Botha,Lesedi+Brown,Tyreeq+Cebekhulu,Wamukelwe+Colbie,Shaylan+Goliath,Caitlin+Hlongwane,S'Bongumusa+Hlope,Melusi+Maahlo,Ofentse+Magasela,Simphiwe+Mahlangu,Nkosinathi+Makhonjwa,Ivan+Maluleke,Nhlori+Manana,Duduzile+Matladi,Kelebo+Mazibuko,Mthandeni+Mbalati,Macho+Mbatha,Gugu+Mdlalose,Busisiwe+Mnyandu,Sihawukele+Moagi,Tswelopele+Moloi,Hlangwene+Moshane,Thlonolofatso+Mothibi,Karabo+Mtshali,Thulani+Namane,Refiloe+Ngomane,Kurhula+Nhlapo,Masejara+Nkomo,Mbali+Nkosi,Sinenhlanhla Nomfundo+Rani,Viwe+Rikhotso,Vukosi+Rohan,Nikita+Shabalala,Bhekamuzi+Sibasa,Gomolemo+Thobejane,Morena+Van Der Merwe,Mikhail+Vengatsammy,Thalia";
                        $learner_timetable_load[] = "Ndlela L-LO Sport-K5_10#Abrahams,Shannon+Abrahams,Shannon+Buso,Skholiwe+Dhladhla,Eutricia+Dubazana,Hlobisile+Gxekwa,Khanyisile+Khoza,Betty+Mahlanya,Tebello+Makhanya,Amanda+Malinga,Thando+Maloka,Leloko Khanyisa+Maphathe,Thato Mothae+Mapote,Itumeleng+Matekane,Thabiso+Mazibuko,Gontle+Mchunu,Karabo Zakithi+Mnguni,Neo+Mofokeng,Boitumelo+Moloi,Moeketsi+Mothabeng,Mamorena+Mphofela,Mathshidiso Ngwanankwana+Mukondeleli,Ambani+Ndebele,Kutlwano+Nhlapo,Masego+Nyaka,Modiegi+Pelzer,Megan+Ramaele,Lindokuhle+Sikuni,Mihlali+Tshabalala,Khanyisile+Twala,Nkateko+Xakaza,Thobeka";
                        $learner_timetable_load[] = "Ndlela L-B. Stud.-K1_11#Buthelezi,Nduduzo+Do Amaral,Kazlee Randy Amalia+Hlapisi,Onkarabile+Kekana,Lefa Elton+Kodisang,Oefentse+Koko,Mosa Pheeha+Magidela,Ayabonga+Magubane,Sandile+Magwaza,Skhumbuzo+Malatsi,Rethabile+Mavuso,Njabulo+Mejelo,Rowena+Moganedi,Tshegofatso+Mokoena,Gontse Ofentse+Molefe,Kgosi Gauretelelwe+Molele,Kgabo+Moreko,Naledi Lerato+Motsisi,Kagiso Amogelang+Mthembu,Njabulo+Ngxotholazi,Nkosinathi+Nkosi,Siphoesihle+Nkosi,Zamahlubi Nokuthula+Ntwendala,Inga+Nyandeni,Ntando+Padi,Tshepi+Schafer,Derek+Shabangu,Nhlanhla Blessing+Shangase,Thando+Sithole,Irvin Kichinin+Stander,Megan+Thomas,Talitha+Zulu,Sinethemba";
                        $learner_timetable_load[] = "Ndlela L-B. Stud.-K3_11#Davids,Lushuandre+Dlamini,Thabang+Hlophe,Wanda+Joe,Kundai+Kgapola,Boitumelo+Khumalo,Nomathamsanqa+Makhubu,Nomaduduzile Masesi+Manabalala,Neo Mary+Manana,Sanelisiwe+Marumo,Thato+Masemola,Tshegofatso Fortunate+Masuku,Thembelihle+Matseke,Ofentse+Mdlala,Katleho+Mhlamvu,Mongameli Sivuyile+Mndaweni,Nthabiseng Lindiwe+Mofokeng,Thabo+Mokuene,Mosieledi+Monareng,Kgothalo+Mosehle,Sihle+Mpiyake,Sinovuyo Khanyisa+Mthethwa,Sandile Ntuthuko+Mvelase,Phelelani Siphosethu+Ndala,Lindokuhle+Njokweni,Thobeka+Nkosi,Ayanda+Nxumalo,Mbali+Raeto,Nthabiseng+Shabalala,Reneilwe+Sibanda,Otshepeng+Taulelo,Wesley+Tshabalala,Bongiwe+Xulu,Mthunzi";
                        $learner_timetable_load[] = "Ndlela L-B. Stud.-K4_11#Chikwariro,Natasha+Colbie,Tyrique+Dick,Tyrique Tyrone+Eland,Malefa+Hlatshwayo,Khanyisile+Khumalo,Sibusiso Collen+Mabaso,Ntabeleng+Makoe,Kutloano+Mankazana,Khanyiso+Mathosi,Cebo+Matimmalane,Thabo Rick+Mhangwana,Shongile+Mnene,Mikateko Faith+Mogorosi,Tsholofelo+Mokoena,Rethabile Happiness+Moloto,Frigale+Motlhaping,Nthabiseng+Mphuthi,Nombuso Vanessa+Mthombeni,Nhlamulo+Ncube,Nonceba+Ndlovu,Lesego+Nonkwelo,Ze-ande+Peter,Chukwuemeka+Phiri,Ngoako+Phiri,John Clement Dimpho+Selepe,Simphiwe+Sindane,Zinhle+Soko,Mandisa+Tshabalala,Thabiso+Tshabalala,Thokozani+Tshele,Kakanyo";
                        $learner_timetable_load[] = "Ndlela L-B. Stud.-K2_12#Brown,Tyreeq+Cebekhulu,Wamukelwe+Chinsato,Lovejoy Kudakwashe+Dimba,Nkosinathi+Dunga,Knowledge+Klassens,Britany+Lobeni,Rejoice+Mabasa,Ntsako+Madiba,Mfundi+Maetisa,Essie Mpho+Manzini,Lebo+Mathebula,Sindisiwe+Mbobosi,Anovuyo+Mlambo,Precious+Mngoma,Nomfundo+Modiga,Precious+Moloi,Hlangwene+Mpai,Khutso+Ndlovu,Wakhile+Nkokoana,Paballo+Pillay,Michael+Rani,Viwe+Rohan,Nikita+Shongwe,Zamantimande+Sibasa,Gomolemo+Tembo,Daliso+Thobejane,Morena+Vengatsammy,Thalia";
                        $learner_timetable_load[] = "Ndlela L-B. Stud.-K6_12#Bazi,Onesimo+Buhali,Mbalenhle+Chatikobo,Tinashe+Chauke,Getrude Ramkoni+Dladla,Thabo Happy+Hartman,Ruben Shaun+Khumalo,Lungiswa+Lubambo,Nobuhle+Maahlo,Ofentse+Mabuya,Nthabiseng Hope+Magasela,Nombuso+Makgethe,Amogelang Patrick+Mathetsa,Sethutse+Matiza,Zenzo+Mevana,Karabo+Mgcina,Nozipho+Mokoakoa,Nokukhanya+Mokoena,Lerato Victoria+Mosenye,Molemo+Moshane,Thlonolofatso+Mosupye,Lesego+Mothibi,Karabo+Namane,Refiloe+Ndlela,Simphiwe+Nketsi,Nthabiseng+Perumal,Daynerah+Petersen,Nathaniel Saydean+Phiri,Samkelo Atlegang+Pilane (Nkadimeng),Tshepang+Radebe,Thato+Sambo,Gugulethu+Sithole,Shawn Lebo+Tsolo,Kamogelo+Xala,Anele";
                        $learner_timetable_load[] = "Ngubo P-LO Sport-K3_10#Banda,Luyanda+Botha,Tyrique Darnel+Chatikobo,Tadiwanashe+Dlangamandla,Lisakhanya+Fanana,Again+Gudu,Salizwa+Khumalo,Ntokozo+Langa,Lesedi+Lelaka,Lerato+Maasdorp,Whanita+Mabizela,Lwazi+Mabye,Kgetho+Magome,Katlego+Makhubu,Lusanda+Malevu,Siphiwe+Maseko,Nokwanda+Mayble,Basetsane+Mjiyakho,Noluthando Nosipho+Mncube,Sinethemba Thato Sibusisiwe+Mngomezulu,Londeka+Moferefere,Kutloano+Mokoena,Solomon+Moloi,Reabetsoe+Moseki,Kamogelo+Mtshali,Nompumelelo+Muzofa,Tapiwa+Ncongwane,Lisia+Ngceba,Wandisa+Nkosi,Malibongwe+Ntoyi,Kamohelo+Radebe,Kamogelo+Sekhalo,Sabelo+Sibisi,Thandolweth+Silinda,Simphiwe+Ximba,Lungile+Zondo,Nonhlanhla";
                        $learner_timetable_load[] = "Ngubo P-LO Sport-K5_10#Antunes,Marco+Aphane,Temoso+Baduza,Siphosethu+Buthelezi,Lehlohonolo+Esbend,Rivaldo+Khanye,Naledi+Kumalo,Mandisa+Maake,Tidimalo+Mabena,Mpumelelo+Mahlasela,Ayanda+Makhalimele,Lungelo+Makhura,Lethabo Anidah+Malinga,Thando+Mankanda,Palesa+Mbatha,Ayanda+Mchunu,Karabo Zakithi+Mntambo,Mbali+Mohlala,Lebone+Mshumpela,Njabulo+Musingadi,Ndivhuwo+Ndiaye,Nonhlanhla+Ngwenya,Simphiwe+Nkondlwane,Emihle+Peake,Ashlyn+Rakgalakane,Karabo+Ramokolo,Kgaphuru+Sitoto,Musa+Trivangalo,Cindy+Xaba,Siphosethu+Zikhali,Sifiso";
                        $learner_timetable_load[] = "Ngubo P-LO Sport-K5_11#Buthelezi,Mpumelelo+Colbie,Tyrique+Dhlamini,Luanda+Do Amaral,Kazlee Randy Amalia+Hlapisi,Onkarabile+Julius,Eslynn+Khumalo,Nomathamsanqa+Klahla,Bandile+Koko,Mosa Pheeha+Magidela,Ayabonga+Makuwa,Takudzwa+Malepa,Blessing+Masuku,Thembelihle+Mavuso,Njabulo+Mdlala,Katleho+Mhangwana,Shongile+Mndaweni,Nthabiseng Lindiwe+Mofokeng,Thabo+Mokoena,Rethabile Happiness+Moleke,Tshegofatso+Moreosele,Letlhogonolo+Mphuthi,Nombuso Vanessa+Mthembu,Njabulo+Mvelase,Phelelani Siphosethu+Ngema,Ntokozo+Nkosi,Zamahlubi Nokuthula+Padi,Tshepi+Phori,Boitumelo+Ralinala,Thabelo+Selepe,Siphiwe+Shangase,Zamashuku+Skhosana,Malibongwe+Tlhatlha,Mohau+Tshabalala,Thabiso";
                        $learner_timetable_load[] = "Ngubo P-LO Sport-K6_11#Chakane,Tsholofelo+Fillis,Nathan+Greco,Byron+Jameson,Nkosazana+Khumalo,Sibusiso Collen+Liesering,Ashton Lemuel+Mabizela,Vangile+Makuwa,Nobuhle+Malinga,Sibusiso Immanuel+Mankazana,Khanyiso+Martins,Sone+Matseke,Ofentse+Mdinisa,Blessing Zinhle+Mokhele,Boitumelo+Moodley,Vishalan Talano+Motjopi,Mbali Ratile+Muranda,Ashley+Ndebele,Rorisang+Nkosi,Felicity+Nyambuya,Tariro+Paile(Moshabane),Karabo Phuthi+Papu,Ndumiso+Radebe,Amahle Zesiwe+Raman,Demiel+Schafer,Derek+Sikhosana,Sokhana+Siwela,Karabo Felicia+Stander,Megan+Toka,Tsheamo+Twayi,Katleho+Zimucha,Nicole Tanaka";
                        $learner_timetable_load[] = "Ngubo P-LO Sport-K1_12#Boonzaaier,Shade+Brown,Landon+Dlamini,Zinhle Nkululeko+Fortuin,Anzlo+Hlabana,Tsireletso+Hliso,Moleboheng+Jamekwana,Sandile+Khumalo,Palesa+Khwinana,Nozuko+Makhubo,Muzikayise+Matekane,Amohelang+Mokoakoa,Nokukhanya+Mokoena,Lerato Victoria+Moodley,Priyan+Mphahlele,Mokaolo+Ndimande,Katlego+Ngwenya,Londiwe+Nhlapo,Hlengiwe+Njibana,Alizwa+Njolo,Kwandile+Nkosi,Thapelo+Pillay,Michael+Pootona,Koketso+Robson-Garth,Caitlin+Sikhosana,Simphiwe+Sithole,Nhlanganiso+Wilhase,Jamean";
                        $learner_timetable_load[] = "Ngubo P-LO Sport-K6_12#Buthelezi,Khethiwe+Chatikobo,Tinashe+Dhlomo,Nomonde+Dube,Thato+Hobyani,Tintswalo+Khumalo,Lungiswa+Lobeni,Rejoice+Maboke,Mpho+Magasela,Nombuso+Makhonjwa,Ivan+Manzini,Angel Sinethemba+Mathebula,Sindisiwe+Mbayabu,Nathan+Mbena,Annah+Mevana,Karabo+Mkhulise,Thina Nosipho+Modiga,Precious+Moodley,Savania+Mosupye,Lesego+Namane,Refiloe+Ndlela,Simphiwe+Nketsi,Nthabiseng+Ntuli,Rixaka+Pahlanen,Beda+Petersen,Tarryn+Qwabe,Ntokozo+Radebe,Thando+Radebe,Thato+Sikhosana,Kamohelo+Smith,Ethan Lyle+Tait,Calcey+Yende,Ntokozo";
                        $learner_timetable_load[] = "Ngwenya S-Civil-K2_10#Antunes,Marco+Bronkhorst,Luke Oliver+Chipurura,Shania+Hlatshwayo,Zithulele+Hlungwani,Rivoningo+Mabila,Murangi+Macherechedze,Gerald+Maloka,Leloko Khanyisa+Mbatha,Mandisa+Meko,Nthabeleng+Memela,Lindani+Moletsane,Mphethe+Moloi,Thabang+Muchena,Evans+Ntuli,Orapeleng+Nyepela,Gift+Vilakazi,Thuto+Zwane,Zanele";
                        $learner_timetable_load[] = "Ngwenya S-Civil-K3_11#Azevedo,Melissa+Chakane,Tsholofelo+Cicero,Wesley+Greco,Byron+Gumede,Ndumiso+Kgaabi,Maremane Richard+Khoza,Rifumo+Longwe,Wongani+Mabasa,Ntiyiso Barney+Mahlalela,Deborah Onnicah+Malebe,Ntokozo+Martins,Sone+Masina,Kahisano+Masongane,Bafana+Mokone,Tshepiso+Molete,Lereko+Moodley,Vishalan Talano+Mthembu,Thembelihle+Muchena,Tadiwanashe Erecson+Norman,Alessandro Delron+Papu,Ndumiso+Raman,Demiel+Ratlou,Kamohelo+Robinet,Richard Akapelwa+Seritili,Gift+Siwela,Karabo Felicia+Toka,Tsheamo+Trotters,Harozane+Wayama,Musumari Archange";
                        $learner_timetable_load[] = "Ngwenya S-Civil-K1_12#Colbie,Shaylan+Dlamini,Khethokuhle+Du Plessis,Jacques+Finck,Alridge+Forster,Dylan+Hlabana,Tsireletso+Hliso,Moleboheng+Kumersamy,Joshua+Maahlo,Ofentse+Mahlangu,Nkosinathi+Makhubo,Muzikayise+Maponyane,Lisa+Mashigoana,Nkini+Mazibuko,Mthandeni+Mnyandu,sihawukele Sizwe+Moagi,Tswelopele+Moodley,Priyan+Ndimande,Katlego+Nkosi,Thapelo+Nkwanyana,Maremane+Pillai,Tegan+Sikhosana,Simphiwe+Sithole,Nhlanganiso";
                        $learner_timetable_load[] = "Ntema P-IsiZulu-K1_10#April,Ofentse+Dhladhla,Eutricia+Hlatshwayo,Zithulele+Kanyile,Tesa+Kekana,Mogoshadi+Khumalo,Ntokozo+Langa,Lesedi+Maake,Tidimalo+Mabizela,Lwazi+Manyathi,Zanele+Marutha,Bonolo+Mazubuko,Sinethemba+Mbatha,Mandisa+Meko,Nthabeleng+Memela,Lindani+Mkhwanazi,Jabu+Mncube,Sinethemba Thato Sibusisiwe+Mngoma,Kholeka+Molefe,Tshepiso Promise+Muchena,Evans+Musingadi,Ndivhuwo+Ndlovu,Patience Nonhlanhla+Ngceba,Wandisa+Nkosi,Makhosetive+Nkosi,Temalangeni+Nyepela,Gift+Sekhuthe,Tshiamo+Sibisi,Thandolweth+Vanga,Zamananga+Zikhali,Ayanda Bongakonke+Zondo,Nonhlanhla+Zulu,Nwabisa Joy";
                        $learner_timetable_load[] = "Ntema P-IsiZulu-K2_10#Dladla,Tshegofatso+Gamede,Kamohelo Shantel+Gumbi,Lethukuthul+Kolanisi,Banele+Kubheka,Sandile+Lebotsa,Gaake+Madkgetla,Millenium Maria+Mahlangu,Andile+Malatji,Boitumelo+Matekane,Thabiso+Matsobane,Tiisetso Jeanet+Mdingwaze,Sinqobile+Mosaathebe,Legae+Motaung,Nonhlanhla+Motloung,Matshidiso+Mvelase,Xolile Natacia+Ndlovu,Thando+Ngwenya,Noluthando+Nkosi(Sithole),Sihle+Nqolobe,Luxolo+Ntuli,Ntuthuko+Radebe,Phephile+Ramokolo,Kgaphuru+Tshabalala,Thembelihle+Yeni,Sipho+Zimba,Elton+Zwane,Nomfundo";
                        $learner_timetable_load[] = "Ntema P-IsiZulu-K6_10#Bumka,Mbalentle+Dubazana,Hlobisile+Fokazi,Bulelani Ndodikho+Kumalo,Mandisa+Kutumela,Thato Bradley+Legodi,Letlhogonol+Lubisi,Ayanda+Mabena,Mpumelelo+Mahlangu,Khaya+Mahlasela,Ayanda+Makhalimele,Lungelo+Mapote,Itumeleng+Masemola,Olerato+Mazibuko,Gontle+Mbatha,Ayanda+Mchunu,Karabo Zakithi+Mkwanazi,Nqobani+Moses,Mandisi We-Nqab+Mtshali,Mpho+Ndlovu,Judy+Ngobese,Linda Ntokozo+Nkosi,Malibongwe+Nkosi,Sibusiso Hebron+Nxumalo,Mamosa+Sekhalo,Sabelo+Smith,Lungelwa+Twala,Nkateko+Xakaza,Thobeka+Zwane,Hlengiwe Thulisile";
                        $learner_timetable_load[] = "Pape A-LO Sport-K1_10#Bhengu-Mankge,Mbali+Bowler,Muhammed+Bozsik,Janos+Dos Santos,Candice+Gamede,Kamohelo Shantel+Kachoko,Salama Said+Kutumela,Thato Bradley+Lubisi,Ayanda+Mahlanya,Riccah+Maila,Keitumetse+Majola,Bongani+Maluleke,Romeo+Manala,Mwalimo+Mangoali,Tumelo+Masheko,Andile+Masilela,Lindelwa Mayibongwe+Mathobela,Kamogelo+Mbuyane,Pride Sthembiso+Mdluli,Neo Thokozani+Mokoena,Thuto+Motau,Thato+Mphaphuli,Hulisani+Mtshali,Mpho+Ndlovu,Thando+Nkosi,Baphiwe+Nqolobe,Luxolo+Padayachee,Carissa+Reddy,Megan+Ruiters,Curtley+Seema,Itumeleng+Smith,Lungelwa+Tjale,Mahlatse+Tshabalala,Thembelihle+Tshwala,Nompumelelo";
                        $learner_timetable_load[] = "Pape A-LO Sport-K3_10#Beharie,Nina+Bopape,Thando+Buthelezi,Ayanda+Daniels,Tamia+Dube,Mbali+Govender,Trystan+Hadebe,Siphesihle+Kivido,Jordan+Kubheka,Sandile+Kubheka,Lesego+Leolo,Nonhlanhla Sinah+Madkgetla,Millenium Maria+Madonsela,Sibongumusa+Mahlangu,Andile+Malapane,Kamogelo+Mandyu,Tshegofatso+Matsobane,Tiisetso Jeanet+Mdleleni,Awonke Lelethu+Mkoko,Mthokozisi+Moagi,Busisiwe+Mokoena,Reatlehile+Moodley,Ronan Cole+Mtlaping,Nomfundo+Mtshepu,Kgomotso+Naidoo,Jamaine+Ndlovu,Patience Nonhlanhla+Nkomo,Nonhlanhla+Noruwana,Phumla+Ogle,Onesha+Segale,Kamogelo+Senzani,Junior+Sibiya,Senzokuhle+Tsatsi,Kgotso+Xayiya,Qhama+Zikali,Sharmaine+Zitha,Simphiwe+Zwane,Nomfundo";
                        $learner_timetable_load[] = "Pape A-LO Sport-K2_11#Basson,Chelsea+Boroko,Thabiso+Dalasile,Nonhlanhla+Durwin-Smith,Genevieve+Gcuze,Thembinkosi+Jacobs,Dylan+Kent-Brown,Riaan Conrad+Khwerana,Talifhani+Mabasa,Ntiyiso Barney+Mahlangu,Bongani+Makoe,Kutloano+Malinga,Khumo+Maroga,Tsebo+Marumo,Thato+Matla,Tshepo+Mbonani,Nomsa+Mcunu,Akhona Sabelo+Mjiyakho,Sindiswa+Mofokeng,Matshidiso+Molefe,Mahlohonolo Mamiki+Molopo,Lehlohonolo+Mothupi,Karabo+Motsoeneng,Obakeng+Mqungwana,Cinga Gerald+Mvelase,Lethuxolo+Ndlebe,Mzwandile+Ngomane,Lesedi+Nkombyane,Kabelo+Ntwanambi,Aluta+Peter,Chukwuemeka+Qithi,Thobeka+Sibande,Tsepo+Soko,Mandisa+Tlaka,Boitumelo+White,Robin Theodore";
                        $learner_timetable_load[] = "Pape A-LO Sport-K3_11#Damoyi,Fatima Zoleka+Gumede,Ndumiso+Hlophe,Wanda+Kekana,Lefa Elton+Kgaabi,Maremane Richard+Lodimba,lucia+Maboho,Mpho+Magwaza,Skhumbuzo+Mahlalela,Deborah Onnicah+Makhubu,Nomaduduzile Masesi+Masina,Kahisano+Mazibuko,Mpho+Mkhwanazi,Nondumiso Sibusiso Thoedorah+Mnene,Mikateko Faith+Mokgotla,Palesa Mohata+Molele,Kgabo+Monareng,Kgothalo+Motsisi,Kagiso Amogelang+Msimango,Songo Josias+Mthembu,Thembelihle+Muchena,Tadiwanashe Erecson+Ndlovu,Thato+Nkosi,Ayanda+Norman,Alessandro Delron+Penn,Keabetswe Boitumelo+Phiri,Prudence+Raeto,Nthabiseng+Sekati,Segametsi+Semenya,Thoriso+Shangase,Thando+Taulelo,Wesley+Trotters,Harozane+Wayama,Musumari Archange";
                        $learner_timetable_load[] = "Pape A-LO Sport-K3_12#Albertyn,Storm+Bhengu,Nondumiso+Caluza,Phumelele+Coomans,Jessica Lucille+Dladla,Thabo Happy+Finck,Alridge+Gumede,Gugulethu+Khasake,Karabo+Kondo,Yolanda+Maetisa,Essie Mpho+Magagula,Gugulethu+Makara,Katleho+Malamule,Sikhulile+Mashabela,Madeline Mathabathe+Mashigoana,Nkini+Mathetsa,Sethutse+May,Onke+Mdluli,Blessing Nkosinathi+Mokgatle,Nandi+Moloyi,Keitumetse+Mtanyelwa,Ntsako+Mthimunye,Elzinah+Ngobese,Lebone+Nkosi,Lungile+Nkwanyana,Maremane+Ntuli,Nokwanda+Philibane,Thina+Pradeep,Preethi+Rammike,Michell+Sibanda,Lathi+Speelman,Stokeley+Tsie,Hope+Wehmeyer,Chantel+Xala,Anele+Zwane,Unathi";
                        $learner_timetable_load[] = "Pape A-LO Sport-K5_12#Bham,Saffiya+Brown,Tyreeq+Colbie,Shaylan+Dlamini,Khethokuhle+Dube,Bryan+Goliath,Caitlin+Hlope,Melusi+Khumalo,Mfundo+Kumersamy,Joshua+Maahlo,Ofentse+Mabaso,Thapelo+Maboe,Naledi+Mahlangu,Nkosinathi+Makhanya,Khanyisile+Manana,Duduzile+Masinga,Sibusiso+Matsimbi,Keokeditse+Mavuso,Nkosazana+Mazibuko,Mthandeni+Mbatha,Gugu+Mekonnen,Yeabsera+Mnyandu,sihawukele Sizwe+Mothibi,Karabo+Mtshali,Thulani+Ndlovu,Wakhile+Nkokoana,Paballo+Nkosi,Sinenhlanhla Nomfundo+Pillai,Tegan+Rikhotso,Vukosi+Sandamela,Palesa+Sekelenyane,Reabetswe+Sikhupela,Lubabalo+Singh,Jashoda+Sookran,Mishka+Van Der Merwe,Mikhail";
                        $learner_timetable_load[] = "Pape R-C. Stud.-K1_10#Bhengu-Mankge,Mbali+Chirwa,Nonkululeko+Dladla,Tshegofatso+Esbend,Rivaldo+Kachoko,Salama Said+Kumalo,Mandisa+Mahlangu,Lindiwe+Maila,Keitumetse+Makama,Abigail+Malapane,Kamogelo+Mangoali,Tumelo+Manikivane,Wandile+Mankanda,Palesa+Manqele,Jacob+Matekane,Thabiso+Mathobela,Kamogelo+Mbena,Shiela+Mdluli,Neo Thokozani+Mndebele,Nhlanhla+Mofokeng,Boitumelo+Motloung,Matshidiso+Mphofela,Mathshidiso Ngwanankwana+Mtlaping,Nomfundo+Mvelase,Xolile Natacia+Ndebele,Kutlwano+Nkosi,Malibongwe+Ntshingila,Ayanda+Padayachee,Carissa+Peake,Ashlyn+Radebe,Kamogelo+Segale,Kamogelo+Sibiya,Senzokuhle+Yeni,Sipho";
                        $learner_timetable_load[] = "Pape R-C. Stud.-K6_11#Bosch,Buhle+Damoyi,Fatima Zoleka+Dhlamini,Luanda+Dick,Tyrique Tyrone+Fillis,Nathan+Gcuze,Thembinkosi+Hoosain,Bianca+Jiyane,Umfanelo Khothatso+Kgapola,Boitumelo+Maboho,Mpho+Mabuza,Faith Xiluva+Makhubu,Nomaduduzile Masesi+Matseke,Ofentse+Mokgotla,Palesa Mohata+Mokoena,Rethabile Happiness+Molefe,Mahlohonolo Mamiki+Molopo,Lehlohonolo+Monareng,Kgothalo+Moses,Shanice+Motjopi,Mbali Ratile+Ncube,Nonceba+Ndala,Lindokuhle+Nel,Samantha+Nkuna,Omphile+Nonkwelo,Ze-ande+Penn,Keabetswe Boitumelo+Radebe,Amahle Zesiwe+Roelofse,Rochelle+Schafer,Derek+Siwedi,Andile+Soko,Mandisa+Stander,Megan";
                        $learner_timetable_load[] = "Pape R-C. Stud.-K3_12#Albertyn,Storm+Buhali,Mbalenhle+Chimsalazo,Kamohelo+Chinsato,Lovejoy Kudakwashe+Dunga,Knowledge+Erasmus,Kyla Ashley+Ferreira,Shelley+Gounder,Shayleen+Khasake,Karabo+Khumalo,Palesa+Maetisa,Essie Mpho+Magadlela,Sithembiso Floyd+Matekane,Amohelang+Mathebula,Sindisiwe+Mathetsa,Sethutse+Mdluli,Blessing Nkosinathi+Mochochoko,Tumelo+Mthimunye,Elzinah+Ndlovu,Wakhile+Nhlapo,Hlengiwe+Njibana,Alizwa+Njolo,Kwandile+Ntuli,Nokwanda+Pillay,Michael+Robson-Garth,Caitlin+Sikhosana,Simphiwe+Tutuka,Ayanda+Wehmeyer,Chantel";
                        $learner_timetable_load[] = "Pillay K-Math Lit.-K2_10#Beharie,Nina+Bhengu-Mankge,Mbali+Chirwa,Nonkululeko+Dlamini,Linda+Dos Santos,Candice+Hadebe,Sihle+Kachoko,Salama Said+Kutumela,Thato Bradley+Lehong,Thato Thabiso+Mabetoa,Tebogo+Mahlangu,Khaya+Makhalimele,Lungelo+Mangoali,Tumelo+Mantshiyane,Owami Jonathan+Masheko,Andile+Mndebele,Nhlanhla+Mnguni,Neo+Mofokeng,Boitumelo+Mokoena,Karabo Vuyolwethu+Mokoena,Lucky Goloka+Mokoena,Solomon+Mokoena,Thuto+Mokwana,Katiso+Moses,Mandisi We-Nqab+Mphaphuli,Hulisani+Ndiaye,Nonhlanhla+Nkondlwane,Emihle+Paile(Moshabane),Shatadi+Sangweni,Bridget+Seema,Itumeleng+Sitoto,Musa+Tshwala,Nompumelelo+Zwane,Hlengiwe Thulisile";
                        $learner_timetable_load[] = "Pillay K-Math Lit.-K4_10#Abrahams,Shannon+Bumka,Mbalentle+Daniels,Taryn+Du Plessis,Casey+Goba,Mapula+Khanye,Naledi+Leduma,Nikkie Retshedisitswe+Mabena,Mpumelelo+Mahlasela,Ayanda+Maloka,Ntokozo+Mankanda,Palesa+Manqele,Jacob+Mapote,Itumeleng+Masha,Lesego+Matekane,Thabiso+Mazibuko,Gontle+Mohlala,Lebone+Moloi,Moeketsi+Motaung,Teboho+Mothabeng,Mamorena+Mtlaping,Nomfundo+Mukondeleli,Ambani+Mvelase,Xolile Natacia+Ntoyi,Kamohelo+Radebe,Hlompho+Sekhalo,Sabelo+Sikotane,Andile+Tsotetsi,Katleho+Zikhali,Sifiso+Zondo,Nonhlanhla";
                        $learner_timetable_load[] = "Pillay K-Math Lit.-K3_11#Bosch,Buhle+Chikomo,Lencon Tafadzwa+Dalasile,Nonhlanhla+Els,Nathaniel+Gcuze,Thembinkosi+Jacobs,Dylan+Khwerana,Talifhani+Klahla,Bandile+Mabaso,Ntabeleng+Magubane,Sandile+Mahlangu,Bongani+Makala,Luyando+Mashabela,Justice+Mbonani,Nomsa+Mejelo,Rowena+Mofokeng,Matshidiso+Moima,Linda Blessing+Molefe,Mahlohonolo Mamiki+Molopo,Lehlohonolo+Moses,Shanice+Mphuthi,Nombuso Vanessa+Mqungwana,Cinga Gerald+Ndebele,Mbongweni+Ndlovu,Lesego+Ngomane,Lesedi+Nkosi,Lwazi+Nonkwelo,Ze-ande+Phiri,Hannock+Ralinala,Thabelo+Roelofse,Rochelle+Seloane,Rorisang+Siwedi,Andile+Stander,Megan+Subramoney,Dylon Reese+Twayi,Katleho+White,Robin Theodore";
                        $learner_timetable_load[] = "Schafer/Vermeulen-Life Sci.-K2_10#Boards,Jamie+Bozsik,Janos+Damari,Lufuno+Daniels,Taryn+Dhlame,Nobuhle+Dube,Mbali+Fokazi,Bulelani Ndodikho+Kumalo,Mandisa+Langa,Londeka+Legodi,Letlhogonol+Lobeni,Michael+Mahlanya,Tebello+Makhanya,Amanda+Malinga,Thando+Manyathi,Zanele+Mathe,Reynard+Mchunu,Karabo Zakithi+Mkwanazi,Nqobani+Mniki,Njabulo+Mohammed,Dondre+Moyo,Nombuso+Mpiti,Bohlokoa+Mtotoba,Mbali+Naidoo,Jamaine+Naidoo,Ruvesen+Ngceba,Wandisa+Nhlapo,Noluthando+Nkosi,Sibusiso Hebron+Nxumalo,Mamosa+Phangane,Bothlale+Segale,Kamogelo+Senzani,Junior+Skosana,Nomfundo+Tshabalala,Tebello+Vanga,Zamananga";
                        $learner_timetable_load[] = "Schafer/Vermeulen-Afrikaans-K6_11#Boroko,Thabiso+Buthelezi,Ndumiso+Davids,Lushuandre+Eland,Malefa+Hlongwane,Jessica+Joe,Kundai+Kekana,Lefa Elton+Klahla,Bandile+Mabaso,Ntabeleng+Mabuya,Dumisane+Makhafula,Keitumetse+Malinga,Khumo+Maroga,Tsebo+Mathosi,Cebo+Mejelo,Rowena+Mkhwanazi,Nondumiso Sibusiso Thoedorah+Moima,Linda Blessing+Mokoena,Neo+Mokuene,Mosieledi+Moloto,Frigale+Motong,Mamoshabe Lebogang+Mqungwana,Cinga Gerald+Mthombeni,Nhlamulo+Ndebele,Mbongweni+Ndlovu,Lesego+Ngxotholazi,Nkosinathi+Ntwendala,Inga+Qithi,Thobeka+Rasebotje,Lehlogonolo+Robinet,Richard Akapelwa+Selepe,Siphiwe+Shangase,Thando+Sithole,Irvin Kichinin+Tlaka,Boitumelo+Vilakazi,Thokozane+Xulu,Mthunzi+Zulu,Sinethemba";
                        $learner_timetable_load[] = "Schafer/Vermeulen-Life Sci.-K1_12#Bhengu,Nondumiso+Caluza,Phumelele+Chabaku,Thuto+Hlope,Melusi+Kekana,Mmatlala Shernel+Kgomo,Moroshadi+Liesering,Caitlin+Lubambo,Nobuhle+Madiba,Mfundi+Magagula,Gugulethu+Magasela,Simphiwe+Manana,Duduzile+Mavuso,Nkosazana+Mbalati,Macho+Mbatha,Gugu+Mevana,Karabo+Mngoma,Nomfundo+Mokgatle,Nandi+Mokoakoa,Nokukhanya+Motsieloa,Thato+Mtimkulu,Bondy+Mtshali,Thulani+Ndlela,Simphiwe+Nkosi,Njabulo+Ntuli,Nokwanda+Pabu,Christopher+Petersen,Tarryn+Rani,Viwe+Sikhupela,Lubabalo+Tait,Calcey+Van Der Merwe,Mikhail+Wallace,Sarah-Jane+Zwane,Unathi";
                        $learner_timetable_load[] = "Schafer/Vermeulen-Afrikaans-K3_12#Bazi,Onesimo+Ditlopo,Keamoleboga+Dludlu,Nonhlanhla+Dube,Thato+Gumede,Siyabulela+Khumalo,Lungiswa+Khumalo,Zamantungwa+Lobeni,Rejoice+Mabaso,Thapelo+Madiba,Mfundi+Makhanya,Khanyisile+Manzini,Angel Sinethemba+Mathebula,Karabo+Matiza,Zenzo+Mbata,Ntombikayise+Mdlalose,Banele+Mekonnen,Yeabsera+Mlambo,Precious+Modiselle,Amogetswe+Mokoena,Lerato Victoria+Mosenye,Molemo+Mosupye,Lesego+Ndaba,Makhaya+Ndlela,Simphiwe+Ngwenya,Londiwe+Petersen,Tarryn+Phiri,Samkelo Atlegang+Pilane (Nkadimeng),Tshepang+Radinne,Lerato Rejoyce+Sambo,Gugulethu+Simelane,Jane Rebecca+Simelane,Jane Rebecca+Sithole,Shawn Lebo+Tembo,Daliso+Tsolo,Kamogelo";
                        $learner_timetable_load[] = "Schafer/Vermeulen-Afrikaans-K5_12#Albertyn,Storm+Buthelezi,Khethiwe+Chabaku,Thuto+Coomans,Jessica Lucille+Dladla,Thabo Happy+Kekana,Mmatlala Shernel+Khasake,Karabo+Khumalo,Palesa+Magasela,Nombuso+Makhonjwa,Ivan+Malamule,Sikhulile+Mashabela,Madeline Mathabathe+Mathetsa,Sethutse+Mbalati,Macho+Mdlalose,Busisiwe+Mgcina,Nozipho+Modiga,Precious+Moloto,Tumelo+Moodley,Savania+Moshane,Thlonolofatso+Mothibi,Palesa+Mthimunye,Elzinah+Nhlapo,Masejara+Nkomo,Mbali+Nkuna,Tinyiko+Ntuli,Rixaka+Rani,Viwe+Skosana,Boitumelo+Tait,Calcey+Thobejane,Morena+Tsie,Hope+Wilhase,Jamean+Zwane,Unathi";
                        $learner_timetable_load[] = "Schoemann A-Math-K2_11#Dhlamini,Luanda+Dick,Tyrique Tyrone+Gazide,Kutlwano Tshepang+Gumede,Ndumiso+Hlatshwayo,Khanyisile+Joe,Kundai+Mabizela,Vangile+Makuwa,Takudzwa+Malinga,Sibusiso Immanuel+Masina,Kahisano+Mathosi,Cebo+Matimmalane,Thabo Rick+Mdinisa,Blessing Zinhle+Mlambo,Hope Nomathemba+Mokoena,Naledi+Molete,Lereko+Moletsane,Kelebogile+Molobela,Anchor+Mphahlele,Pheladi+Msipa,Nkululeko+Mzima,Khanyisa Ntandokasi+Ndlovu,Mosa+Norman,Alessandro Delron+Nyambuya,Tariro+Qamakwane,Katleho+Ratlou,Kamohelo+Retshepisitswe,Paballo Mothibe+Shabalala,Reneilwe+Sibiya,Owami+Silangwe,Siphesihle+Sithole,Irvin Kichinin+Tlhatlha,Mohau+Xulu,Mthunzi";
                        $learner_timetable_load[] = "Schoemann A-Math-K3_11#Adamo,Nick Espada+Dhlangamandla,Khethiwe+Dube,Victor+Hlabisa,Gcina Ntandoyenkosi+Hlongwane,Jessica+Maboea,Mohaladitwe+Makuwa,Nobuhle+Maleke,Katlego+Manana,Lungisani+Manganyi,Rivoningo+Mavuso,Ronald+Mdinisa,Mary-Anne Nonhlanhla+Moetse,Kutlwano+Mokhele,Boitumelo+Morare,Kagiso Timothy+Motaung,Karabo+Motong,Mamoshabe Lebogang+Muranda,Ashley+Ncube,Nonceba+Ndebele,Rorisang+Ngxotholazi,Nkosinathi+Nkala,Sukoluhle+Ntwanambi,Aluta+Nyandeni,Ntando+Qayiyana,Sinethemba+Schafer,Derek+Shabangu,Nhlanhla Blessing+Shongwe,Nokuthula+Sikhosana,Sokhana+Vilakazi,Jabulani+Vilakazi,Mongameli+Zitha,Ntokozo";
                        $learner_timetable_load[] = "Schoemann A-Math-K5_12#Bhengu,Nondumiso+Buhali,Mbalenhle+Chivaviro,Percy+Goliath,Laydin+Kondo,Yolanda+Liesering,Caitlin+Mabuya,Nthabiseng Hope+Magagula,Gugulethu+Mashigoana,Nkini+Mathebula,Sindisiwe+Mokgatle,Nandi+Moloyi,Keitumetse+Mthembu,Mpumelelo+Ndlela,Simphiwe+Nkosi,Lungile+Philibane,Thina+Pradeep,Preethi+Rammike,Michell+Sithole,Sakhile+Sukdeo,Tashmika+Xala,Anele+Xubane,Ntombizamaxuban";
                        $learner_timetable_load[] = "Sengu M-Math Lit-K1_10#Boards,Jamie+Daniels,Tamia+Diemesor,Anaestasia Law+Fokazi,Bulelani Ndodikho+Gumbi,Lethukuthul+Gwala,Sibongakanke Simphiwe+Kubheka,Sandile+Lekoko,Maadimo+Madkgetla,Millenium Maria+Madonsela,Sibongumusa+Mahlangu,Andile+Maseko,Andile+Matlejoane,Bontle+Mazimela,Mncedisi+Mdleleni,Awonke Lelethu+Mngomezulu,Londeka+Moahloli,Rorisang+Mokoena,Reatlehile+Moodley,Ronan Cole+Motaung,Nonhlanhla+Mthembu,Mbalehle+Ndhlovu,Tegoga Pauline Christina+Ngwenya,Itumeleng+Ngwenya,Simphiwe+Nkosi,Smangaliso+Nkosi(Sithole),Sihle+Nyandeni,Nothando Senenhlahla+Radebe,Phephile+Senzani,Junior+Sithole,Carol+Xayiya,Qhama+Zimba,Elton";
                        $learner_timetable_load[] = "Sengu M-Math-K2_10#Aphane,Temoso+Baduza,Siphosethu+Banda,Luyanda+Batongo,Bagwangi+Brown,Lameez+Choane,Lesego+Dlangamandla,Lisakhanya+Fanana,Again+Hlalele,Reitumetse Reneiloe+Khumalo,Ntokozo+Lelaka,Lerato+Mabe,Sicelo+Mabizela,Lwazi+Mahlanya,Riccah+Makhubu,Lusanda+Makutso,Nomonde+Manabalala,Rosie Thato+Mandyu,Tshegofatso+Maseko,Maria+Mayble,Basetsane+Mazubuko,Sinethemba+Mjiyakho,Noluthando Nosipho+Mkhonza,Melusi+Mkhwanazi,Jabu+Mncube,Sinethemba Thato Sibusisiwe+Moferefere,Kutloano+Mokou,Violet+Motingoe,Rorisang+Mshumpela,Njabulo+Mudavanhu,Kathrine+Muzofa,Tapiwa+Ndlovu,Patience Nonhlanhla+Ngwane,Samukelo+Nkosi,Makhosetive+Padayachee,Carissa+Peake,Ashlyn+Ramafola,Simphiwe+Sibisi,Thandolweth+Sikuni,Mihlali+Twala,Nkateko+Zikhali,Ayanda Bongakonke+Zitha,Simphiwe";
                        $learner_timetable_load[] = "Sengu M-Math Lit-K5_12#Boonzaaier,Shade+Caluza,Phumelele+Dludlu,Nonhlanhla+Dube,Thato+Dunga,Knowledge+Finck,Alridge+Hobyani,Tintswalo+Khumalo,Lungiswa+Lobeni,Rejoice+Lubambo,Nobuhle+Maetisa,Essie Mpho+Makara,Katleho+Maleka,Matsatsi+Masango,Reneilwe+Mathebula,Karabo+Matiza,Zenzo+Mbelle,Humang+Mbobosi,Anovuyo+Mevana,Karabo+Mlambo,Precious+Mngoma,Nomfundo+Mokoena,Lerato Victoria+Mosupye,Lesego+Ndaba,Makhaya+Ngobese,Lebone+Ngwenya,Londiwe+Njibana,Alizwa+Nkwanyana,Maremane+Petersen,Nathaniel Saydean+Petersen,Tarryn+Pillay,Michael+Sambo,Gugulethu+Speelman,Stokeley+Wehmeyer,Chantel+Zulu,Owethu";
                        $learner_timetable_load[] = "Shaw G-LO Sport-K2_10#Baloyi,Jabulani+Beya,David+Bronkhorst,Luke Oliver+Damari,Lufuno+De Vries,Drue+Diemesor,Anaestasia Law+Fokazi,Bulelani Ndodikho+Hlatshwayo,Zithulele+Hlungwani,Rivoningo+Kekana,Hlologelo+Leduma,Nikkie Retshedisitswe+Lekoko,Maadimo+Mabila,Murangi+Madikgetla,Ofentse+Makuwa,Lerato+Manikivane,Wandile+Marutha,Bonolo+Mathe,Reynard+Mbatha,Mandisa+Meko,Nthabeleng+Mndebele,Sihle+Mniki,Njabulo+Molefe,Tshepiso Promise+Moletsane,Mphethe+Mphaphuli,Nyimani+Mthembu,Mbalehle+Muchena,Evans+Naidoo,Kreolin+Ndaba,Sabeloshile+Ngwenya,Itumeleng+Nkosi,Sibusiso Hebron+Ntuli,Orapeleng+Phangane,Bothlale+Sekhuthe,Tshiamo+Sibiya,Andiswa+Skosana,Nomfundo+Tlhatlhetji,Reamogetse+Vilakazi,Thuto";
                        $learner_timetable_load[] = "Shaw G-LO Sport-K4_10#Adolph,Quinlan+Botha,Lashandre+Davids,Sherezaad+Du Plessis,Abigale Kim+Gombani,Precious+Govender,Simone+Kekana,Mogoshadi+Lehong,Thato Thabiso+Lepele,Mabotse+Mabula,Naledi+Mahlangu,Lindiwe+Malatji,Boitumelo+Masemola,Olerato+Mashau,Dakalo+Mdingwaze,Sinqobile+Mndebele,Nhlanhla+Moahloli,Rorisang+Mochitela,Neo+Mokou,Violet+Montle,Bontle+Motaung,Nonhlanhla+Motloung,Matshidiso+Mudavanhu,Kathrine+Ndhlovu,Tegoga Pauline Christina+Ngobese,Linda Ntokozo+Ngwane,Samukelo+Ngwenya,Noluthando+Ntshingila,Ayanda+Nxumalo,Mamosa+Paile(Moshabane),Shatadi+Sangweni,Bridget+Sibeko,Nonkululeko Lipolyte+Thomas,Jade+Tshikane,Omphile+Zikhali,Ayanda Bongakonke";
                        $learner_timetable_load[] = "Shaw G-LO Sport-K3_11#Azevedo,Melissa+Cicero,Wesley+Davids,Lushuandre+Joe,Kundai+Kgapola,Boitumelo+Mabuza,Faith Xiluva+Makhafula,Keitumetse+Malebana,Lesego+Maluleke,Basetsana+Mamaroba,Kagiso+Manabalala,Neo Mary+Masemola,Tshegofatso Fortunate+Masongane,Bafana+Medupe,Morena Khothatso+Mlambo,Hope Nomathemba+Moganedi,Tshegofatso+Mokoena,Naledi+Molete,Lereko+Moletsane,Kelebogile+Mosehle,Sihle+Mphahlele,Pheladi+Ncube,Nonceba+Ndaba,Keabetswe Katlego+Ndala,Lindokuhle+Ngobese,Nikita Ntombizile+Nkosi,Siphoesihle+Nsibanyoni,Will Yamkela+Radebe,Mduduzi+Ratlou,Kamohelo+Shabalala,Reneilwe+Sibanda,Otshepeng+Thomas,Talitha+Tshabalala,Thokozani+Xulu,Mthunzi";
                        $learner_timetable_load[] = "Shaw G-LO Sport-K5_11#Buthelezi,Nduduzo+Buthelezi,Ndumiso+Dhlangamandla,Khethiwe+Golotile,Yolanda+Gwaza,Nkosana+Hlatshwayo,Khanyisile+Jansen,Bernito+Kekana,Thato Raisibe+Kodisang,Oefentse+Leew,Lebohang+Magubane,Sandile+Mahopo,Kamogelo+Manana,Sanelisiwe+Matimmalane,Thabo Rick+Mbaleki,Yolanda+Meyer,Beauty+Mmbi,Muthaduli+Mokgapa,Moroko+Mokone,Tshepiso+Moreko,Naledi Lerato+Mosue,Peter Junior+Mpiyake,Sinovuyo Khanyisa+Mthethwa,Sandile Ntuthuko+Ncube,Nonceba+Nel,Samantha+Ngxotholazi,Nkosinathi+Nkala,Sukoluhle+Nkosi,Lwazi+Nxumalo,Mbali+Phiri,Hannock+Sehume,Altehang+Shabangu,Nhlanhla+Slabbert,Kaitlyn+Tshabalala,Bongiwe+Zungu,Khensani";
                        $learner_timetable_load[] = "Shaw G-LO Sport-K2_12#Bila,Ayanda+Buda,Lesego+Cebekhulu,Wamukelwe+Dimba,Nkosinathi+Erasmus,Kyla Ashley+Ferreira,Shelley+Gumede,Siyabulela+Klassens,Britany+Louw,Ryan Timothy+Madiba,Mfundi+Magadlela,Sithembiso Floyd+Mahlobo,Sinqobile+Majova,Olefa+Masango,Reneilwe+Mazibuko,Simphiwe+Mbelle,Humang+Mdhluli,Sibusiso+Mhlongo,Nompumelelo+Mkhonza,Kwanele+Mngoma,Nomfundo+Mnisi,Smangele+Moloi,Hlangwene+Mpai,Khutso+Mtimkulu,Bondy+Ndimande,Amukelani+Ngomane,Kurhula+Nkomo,Mbali+Petersen,Nathaniel Saydean+Phiri,Samkelo Atlegang+Rani,Viwe+Sheffield,Alexander Daniel+Shongwe,Zamantimande+Sibasa,Gomolemo+Thobejane,Morena+Vengatsammy,Thalia";
                        $learner_timetable_load[] = "Shaw G-LO Sport-K6_12#Buhali,Mbalenhle+Chabaku,Thuto+Dludlu,Nonhlanhla+Dunga,Knowledge+Hartman,Ruben Shaun+Kaluba,Nhlanhla+Kopiso,Oteng Hope+Liesering,Caitlin+Mabuya,Nthabiseng Hope+Makgethe,Amogelang Patrick+Maleka,Matsatsi+Mathebula,Karabo+Matiza,Zenzo+Mbalati,Macho+Mdlalose,Busisiwe+Mgcina,Nozipho+Mlambo,Precious+Moloto,Tumelo+Moshane,Thlonolofatso+Mothibi,Palesa+Mthembu,Mpumelelo+Ndaba,Makhaya+Nhlapo,Masejara+Nkuna,Tinyiko+Persad,Renuka+Phakathi,Thando+Radebe,Maria+Sambo,Gugulethu+Skosana,Boitumelo+Sukdeo,Tashmika+Wallace,Sarah-Jane+Xubane,Ntombizamaxuban+Zulu,Owethu";
                        $learner_timetable_load[] = "Simelane T-LO Sport-K6_10#Batongo,Bagwangi+Brown,Lameez+Chirwa,Nonkululeko+Daniels,Taryn+Dladla,Tshegofatso+Du Plessis,Casey+Goba,Mapula+Hlalele,Reitumetse Reneiloe+Lebotsa,Gaake+Mafongana,Noluthando+Malele,Lesedi+Maloka,Ntokozo+Manabalala,Rosie Thato+Manqele,Jacob+Maseko,Maria+Masha,Lesego+Mazubuko,Sinethemba+Mdlalose,Noluthando+Mkhonza,Melusi+Mkhwanazi,Jabu+Mokoena,Lucky Goloka+Mokolokolo,Lesedi+Mosaathebe,Legae+Motaung,Teboho+Mpatie,Keran+Mvelase,Xolile Natacia+Naidoo,Ruvesen+Ndiwa,Thando+Ntuli,Ntuthuko+Nyakale,Neo+Radebe,Hlompho+Ramafola,Simphiwe+Sikotane,Andile+Somathika,Vuyelwa+Tshifure,Tsebo+Tsotetsi,Katleho+Weimers,Zaakirah+Zimba,Elton";
                        $learner_timetable_load[] = "Simelane T-Econ.-K3_11#Buthelezi,Mpumelelo+Chikwariro,Natasha+Eland,Malefa+Kekana,Lefa Elton+Kent-Brown,Riaan Conrad+Khulu,Ntokozo Langalakhe+Leew,Lebohang+Mabuza,Buhle Pamella+Mabuza,Faith Xiluva+Magwaza,Skhumbuzo+Mahopo,Kamogelo+Makhafula,Keitumetse+Malaza,Hlengiwe+Malebana,Lesego+Mathosi,Cebo+Mayekiso,Noluthando+Mekonnen,Gelila+Meyer,Beauty+Mnene,Mikateko Faith+Mogorosi,Tsholofelo+Mokgapa,Moroko+Molele,Kgabo+Mollo,Kamohelo Margret+Motlhaping,Nthabiseng+Motsisi,Kagiso Amogelang+Mthombeni,Nhlamulo+Ncube,Nonceba+Ndlovu,Khanyisile Nqobile+Ngema,Ntokozo+Nsibanyoni,Will Yamkela+Ntwendala,Inga+Paile(Moshabane),Karabo Phuthi+Phiri,Prudence+Phiri,John Clement Dimpho+Radebe,Amahle Zesiwe+Selepe,Simphiwe+Shangase,Thando+Shelembe,Cindy+Sibamba,Njabulo+Tshabalala,Thokozani+Tshele,Kakanyo+Zulu,Sinethemba+Zungu,Khensani";
                        $learner_timetable_load[] = "Simelane T-Econ.-K5_11#Basson,Chelsea+Buthelezi,Nduduzo+Buthelezi,Ndumiso+Colbie,Tyrique+Dalasile,Nonhlanhla+Dick,Tyrique Tyrone+Do Amaral,Kazlee Randy Amalia+Khumalo,Nomathamsanqa+Kodisang,Oefentse+Magidela,Ayabonga+Mahlangu,Bongani+Malatsi,Rethabile+Manabalala,Neo Mary+Manana,Sanelisiwe+Masuku,Thembelihle+Mavuso,Njabulo+Mhangwana,Shongile+Mndaweni,Nthabiseng Lindiwe+Mofokeng,Thabo+Moganedi,Tshegofatso+Mokoena,Gontse Ofentse+Moleke,Tshegofatso+Moreko,Naledi Lerato+Mosehle,Sihle+Mpiyake,Sinovuyo Khanyisa+Mthembu,Njabulo+Mvelase,Phelelani Siphosethu+Ncube,Nonceba+Ndlovu,Lesego+Ngxotholazi,Nkosinathi+Nkombyane,Kabelo+Nkosi,Ayanda+Nonkwelo,Ze-ande+Nxumalo,Mbali+Penn,Keabetswe Boitumelo+Phiri,Ngoako+Sehume,Altehang+Shabalala,Reneilwe+Shabangu,Nhlanhla Blessing+Sithole,Nqobile+Sithole,Irvin Kichinin+Skhosana,Malibongwe+Xulu,Mthunzi";
                        $learner_timetable_load[] = "Simelane T-Econ.-K2_12#Bila,Ayanda+Botha,Lesedi+Buhali,Mbalenhle+Chauke,Getrude Ramkoni+Ditlopo,Keamoleboga+Gxabuza,Sphokazi+Hartman,Ruben Shaun+Hlongwane,S'Bongumusa+Hobyani,Tintswalo+Khwinana,Nozuko+Mabuya,Nthabiseng Hope+Magasela,Nombuso+Majova,Olefa+Makhonjwa,Ivan+Masinga,Sibusiso+Matiza,Zenzo+Mazibuko,Ntokozo+Mdhluli,Sibusiso+Mhlongo,Nompumelelo+Mkhonza,Kwanele+Mnisi,Smangele+Mokoakoa,Nokukhanya+Mokoena,Lerato Victoria+Moloyi,Keitumetse+Mtanyelwa,Ntsako+Mtimkulu,Bondy+Namane,Refiloe+Ndimande,Amukelani+Ngomane,Kurhula+Nkosi,Sinenhlanhla Nomfundo+Ntuli,Rixaka+Perumal,Daynerah+Rammike,Michell+Ramonnye,Tshenolo+Sebetha,Malesetsa+Sekelenyane,Reabetswe+Sibanda,Lathi+Speelman,Stokeley+Wilhase,Jamean+Zulu,Owethu";
                        $learner_timetable_load[] = "Simelane T-Econ.-K4_12#Bazi,Onesimo+Brown,Tyreeq+Caluza,Phumelele+Chivaviro,Percy+Gumede,Siyabulela+Khumalo,Lungiswa+Kondo,Yolanda+Lobeni,Rejoice+Lubambo,Nobuhle+Mabuya,Boitumelo+Madiba,Mfundi+Malamule,Sikhulile+Manana,Duduzile+Mashabela,Madeline Mathabathe+May,Onke+Mbalati,Macho+Mbobosi,Anovuyo+Mevana,Karabo+Mhaleni,Brian+Mhlauli,Sabelo+Mlambo,Precious+Mofokeng,Katlego+Molefe,Tshepiso+Moloi,Hlangwene+Moshane,Thlonolofatso+Mpai,Khutso+Ndhlalane,Tshepo+Ndlela,Simphiwe+Padi,Boikanyo+Petersen,Tarryn+Pilane (Nkadimeng),Tshepang+Sambo,Gugulethu+Seanego(Matshiane),Promise+Shongwe,Zamantimande+Sibasa,Gomolemo+Sikhupela,Lubabalo+Tsie,Hope+Tsolo,Kamogelo+Vengatsammy,Thalia";
                        $learner_timetable_load[] = "Singh R-Eng HML-K3_10#Aphane,Temoso+Bozsik,Janos+Brown,Lameez+Choane,Lesego+Diemesor,Anaestasia Law+Dubazana,Hlobisile+Gumbi,Lethukuthul+Kanyile,Tesa+Khanye,Naledi+Madi,Mphamanyeso+Mahlasela,Ayanda+Malatji,Boitumelo+Manabalala,Rosie Thato+Mankanda,Palesa+Maphathe,Thato Mothae+Mapote,Itumeleng+Maseko,Maria+Mazibuko,Gontle+Mmutle,Thabiso+Mofokeng,Lesego+Mokou,Violet+Motingoe,Rorisang+Mudavanhu,Kathrine+Musingadi,Ndivhuwo+Ndaba,Sabeloshile+Ngwenya,Itumeleng+Nkosi,Makhosetive+Nyaka,Modiegi+Phangane,Bothlale+Ramafola,Simphiwe+Sikotane,Andile+Sithole,Carol+Tshabalala,Tebello+Tshabalala,Thembelihle+Xaba,Siphosethu";
                        $learner_timetable_load[] = "Singh R-Eng HML-K5_10#Beharie,Nina+De Vries,Drue+Dos Santos,Candice+Fokazi,Bulelani Ndodikho+Kachoko,Salama Said+Kolanisi,Banele+Legodi,Letlhogonol+Mahlangu,Andile+Mahlangu,Khaya+Malevu,Siphiwe+Mangoali,Tumelo+Marutha,Bonolo+Masemola,Olerato+Mdleleni,Awonke Lelethu+Meko,Nthabeleng+Moahloli,Rorisang+Mohammed,Dondre+Mokwana,Katiso+Molefe,Tshepiso Promise+Moses,Mandisi We-Nqab+Mtlaping,Nomfundo+Mtotoba,Mbali+Mvelase,Xolile Natacia+Ngema,Sphamandla+Ngobese,Linda Ntokozo+Nkosi,Smangaliso+Nkosi,Sibusiso Hebron+Nxumalo,Mamosa+Paile(Moshabane),Shatadi+Sekhalo,Sabelo+Silinda,Simphiwe+Skosana,Nomfundo+Vanga,Zamananga+Yeni,Sipho+Zikali,Sharmaine+Zondo,Nonhlanhla+Zwane,Hlengiwe Thulisile";
                        $learner_timetable_load[] = "Singh R-Eng HML-K6_10#Baduza,Siphosethu+Bopape,Thando+Chipurura,Shania+Dlangamandla,Lisakhanya+Gamede,Kamohelo Shantel+Hlatshwayo,Zithulele+Khumalo,Ntokozo+Lehong,Thato Thabiso+Lelaka,Lerato+Mabizela,Lwazi+Macherechedze,Gerald+Makhubu,Lusanda+Maseko,Nokwanda+Mathe,Reynard+Mbatha,Mandisa+Mdingwaze,Sinqobile+Mndebele,Nhlanhla+Mniki,Njabulo+Mokoena,Karabo Vuyolwethu+Mokoena,Solomon+Moloi,Moeketsi+Moloi,Thabang+Mshumpela,Njabulo+Muranda,Brentley+Ndiaye,Nonhlanhla+Ngwane,Samukelo+Nkondlwane,Emihle+Nyepela,Gift+Pelzer,Megan+Radebe,Kamogelo+Segale,Kamogelo+Sitoto,Musa+Tlhatlhetji,Reamogetse+Vilakazi,Thuto";
                        $learner_timetable_load[] = "Singh R-Eng HML-K1_12#Bham,Saffiya+Buhali,Mbalenhle+Buthelezi,Khethiwe+Ditlopo,Keamoleboga+Hlongwane,S'Bongumusa+Kaluba,Nhlanhla+Khumalo,Mfundo+Kubeka,Siyabonga+Louw,Ryan Timothy+Mabaso,Thapelo+Maetisa,Essie Mpho+Makhonjwa,Ivan+Maleka,Matsatsi+Mathebula,Sindisiwe+Mbayabu,Nathan+Mbobosi,Anovuyo+Mdlalose,Busisiwe+Mkhulise,Thina Nosipho+Mlambo,Precious+Modiga,Precious+Moloyi,Keitumetse+Moshane,Thlonolofatso+Ndimande,Amukelani+Persad,Renuka+Radebe,Maria+Radebe,Thato+Sambo,Gugulethu+Sebetha,Malesetsa+Shabalala,Bhekamuzi+Sithole,Sakhile+Skosana,Boitumelo+Wehmeyer,Chantel+Xubane,Ntombizamaxuban";
                        $learner_timetable_load[] = "Singh R-Eng HML-K2_12#Albertyn,Storm+Chimsalazo,Kamohelo+Dlamini,Khethokuhle+Dludlu,Nonhlanhla+Gounder,Shayleen+Kekana,Mmatlala Shernel+Khasake,Karabo+Lubambo,Nobuhle+Maahlo,Ofentse+Maboe,Naledi+Mahlangu,Nkosinathi+Mahlangu,Reitumetse+Malamule,Sikhulile+Matsimbi,Keokeditse+Mbalati,Macho+Mekonnen,Yeabsera+Mkhwanazi,Lebone+Mnyandu,sihawukele Sizwe+Mosupye,Lesego+Motsieloa,Thato+Ndaba,Makhaya+Ngobese,Lebone+Nhlapo,Masejara+Nkosi,Njabulo+Padi,Boikanyo+Petersen,Tarryn+Qwabe,Ntokozo+Radinne,Lerato Rejoyce+Sikhosana,Simphiwe+Singh,Jashoda+Sithole,Nhlanganiso+Tait,Calcey";
                        $learner_timetable_load[] = "Somera S-Geog.-K1_11#Buthelezi,Ndumiso+Dhlangamandla,Khethiwe+Dube,Victor+Els,Nathaniel+Jacobs,Chadwin Jadin+Khoza,Menzeli Mpumelelo+Maboea,Mohaladitwe+Makuwa,Nobuhle+Maluleka,Mandisa+Masokela,Keiso+Matimmalane,Thabo Rick+Matita,Hope+Mazibuko,Mpho+Mehlwana,Mandisa+Mmbi,Muthaduli+Mokoena,Naledi+Morare,Kagiso Timothy+Mothupi,Karabo+Mthembu,Nombuso+Nair,Talisa+Ndaba,Keabetswe Katlego+Ndebele,Rorisang+Ndlebe,Mzwandile+Ndlovu,Thato+Nkala,Sukoluhle+Nyambuya,Tariro+Phiri,Hannock+Rasebotje,Lehlogonolo+Sehume,Altehang+Sekati,Segametsi+Seritili,Gift+Sindane,Zinhle+Tshabalala,Thokozani+Zimucha,Nicole Tanaka";
                        $learner_timetable_load[] = "Somera S-Geog.-K2_11#Adamo,Nick Espada+Boyise,Boitshoko+Golotile,Yolanda+Govender,Mikayla+Gwaza,Nkosana Emmanuel+Gwaza,Nkosana+Hlongwane,Jessica+Jameson,Nkosazana+Klahla,Bandile+Mabaso,Ntabeleng+Makoe,Kutloano+Manana,Lungisani+Maroga,Tsebo+Marumo,Thato+Matla,Tshepo+Mbele,Mzwakhe+Mdlala,Katleho+Mofokeng,Matshidiso+Moloto,Frigale+Mqungwana,Cinga Gerald+Mtshali,Mawande+Mvelase,Lethuxolo+Ndebele,Mbongweni+Nkosi,Felicity+Pilane,Lesego+Qayiyana,Sinethemba+Ralinala,Thabelo+Ramnarain,Diya+Selepe,Siphiwe+Sibande,Tsepo+Thusi,Ntokozo+Vilakazi,Thokozane+White,Robin Theodore+Xoma,Lutho+Zwane,Nobuhle";
                        $learner_timetable_load[] = "Somera S-Geog.-K5_12#Bham,Saffiya+Brown,Landon+Chatikobo,Tinashe+Cindi,Ntokozo+Dimba,Nkosinathi+Ditlopo,Keamoleboga+Dlamini,Zinhle Nkululeko+Goliath,Caitlin+Khumalo,Zamantungwa+Kubeka,Siyabonga+Louw,Ryan Timothy+Mabaso,Thapelo+Maboe,Naledi+Madlanga,Joshua Siphesihle+Makhanya,Khanyisile+Manana,Duduzile+Matsimbi,Keokeditse+Mavuso,Nkosazana+Mazibuko,Ntokozo+Mbata,Ntombikayise+Mbatha,Gugu+Mdhluli,Sibusiso+Mekonnen,Yeabsera+Mosenye,Molemo+Mtshali,Thulani+Ndlovu,Emelda+Nkokoana,Paballo+Pahlanen,Beda+Radebe,Maria+Radinne,Lerato Rejoyce+Rikhotso,Vukosi+Sebetha,Malesetsa+Sikhosana,Kamohelo+Singh,Jashoda+Sookran,Mishka+Yende,Ntokozo";
                        $learner_timetable_load[] = "Somera S-Geog.-K6_12#Boonzaaier,Shade+Buthelezi,Khethiwe+Cebekhulu,Wamukelwe+Colbie,Shaylan+Dludlu,Nonhlanhla+Dube,Bryan+Finck,Alridge+Gxabuza,Sphokazi+Hlope,Melusi+Liesering,Caitlin+Mabuya,Boitumelo+Mahlangu,Reitumetse+Makhonjwa,Ivan+Maleka,Matsatsi+Manzini,Angel Sinethemba+Manzini,Lebo+Masango,Reneilwe+Matladi,Kelebo+Mbalati,Macho+Mbena,Annah+Mdlalose,Banele+Mkhwanazi,Simphiwe+Modiga,Precious+Moodley,Savania+Mothibi,Palesa+Motsieloa,Thato+Ngwenya,Londiwe+Petersen,Tarryn+Phakathi,Thando+Ramonnye,Tshenolo+Shabalala,Bhekamuzi+Skosana,Boitumelo+Sukdeo,Tashmika+Tait,Calcey+Tembo,Daliso+Wallace,Sarah-Jane";
                        $learner_timetable_load[] = "Van Eeden D-Math-K5_10#Bozsik,Janos+Chipurura,Shania+Dladla,Tshegofatso+Govender,Simone+Gudu,Salizwa+Hlatshwayo,Zithulele+Hlungwani,Rivoningo+Kivido,Jordan+Langa,Londeka+Lobeni,Michael+Mabye,Kgetho+Majola,Bongani+Malapane,Kamogelo+Manikivane,Wandile+Mashau,Dakalo+Mbena,Shiela+Memela,Lindani+Mkwanazi,Nqobani+Mniki,Njabulo+Moletsane,Mphethe+Moloi,Reabetsoe+Montle,Bontle+Motau,Thato+Mpatie,Keran+Mtshepu,Kgomotso+Muranda,Brentley+Ncongwane,Lisia+Ndlovu,Judy+Ngceba,Wandisa+Nkosi,Temalangeni+Ntuli,Ntuthuko+Nyepela,Gift+Sekhuthe,Tshiamo+Sibiya,Senzokuhle+Thomas,Jade+Tsatsi,Kgotso+Tshifure,Tsebo+Vilakazi,Thuto";
                        $learner_timetable_load[] = "Van Eeden D-Math-K6_11#Chikwariro,Natasha+Hlophe,Wanda+Kekana,Thato Raisibe+Kent-Brown,Riaan Conrad+Longwe,Wongani+Mabasa,Ntiyiso Barney+Magidela,Ayabonga+Mahopo,Kamogelo+Malebe,Ntokozo+Manganyi,Hlulani+Masongane,Bafana+Matla,Tshepo+Mbaleki,Yolanda+Mhangwana,Shongile+Mogorosi,Tsholofelo+Mokoena,Gontse Ofentse+Moloi,Lesedi+Motsoeneng,Obakeng+Mthembu,Nombuso+Muchena,Tadiwanashe Erecson+Ncube,Nonceba+Ngobeni,Gabaza+Ngwenya,Ludina Janas+Nsibanyoni,Will Yamkela+Padi,Tshepi+Phiri,John Clement Dimpho+Sekati,Segametsi+Shangase,Zamashuku+Sibande,Tsepo+Slabbert,Kaitlyn+Tshele,Kakanyo+Xoma,Lutho+Zwane,Nobuhle";
                        $learner_timetable_load[] = "Van Eeden D-Math-K1_12#Buda,Lesego+Dhlomo,Nomonde+Dimba,Nkosinathi+Dube,Bryan+Gounder,Shayleen+Gumede,Gugulethu+Klassens,Britany+Mabasa,Ntsako+Magasela,Nombuso+Makgethe,Amogelang Patrick+Mbena,Annah+Mbuyeleni,Sisipho+Mkhwanazi,Lebone+Nkuna,Tinyiko+Padi,Boikanyo+Perumal,Daynerah+Qwabe,Ntokozo+Seanego(Matshiane),Promise+Sibanda,Lathi+Sithole,Shawn Lebo+Tembo,Daliso";
                        $learner_timetable_load[] = "Walljee N-Phys. Sc-K1_11#Azevedo,Melissa+Chiloane,Bokang+Cicero,Wesley+Durwin-Smith,Genevieve+Hlungwane,Tholakele Tinyiko+Jacobs,Dylan+Kent-Brown,Riaan Conrad+Khoza,Rifumo+Lodimba,lucia+Mabasa,Ntiyiso Barney+Malebe,Ntokozo+Malinga,Sibusiso Immanuel+Masongane,Bafana+Matla,Tshepo+Mlambo,Hope Nomathemba+Mokoena,Neo+Moodley,Vishalan Talano+Mphahlele,Pheladi+Mtshali,Mawande+Muchena,Tadiwanashe Erecson+Ndlovu,Mosa+Raman,Demiel+Retshidisitwe Nyakallo,Mothibe+Robinet,Richard Akapelwa+Shangase,Zamashuku+Sibande,Tsepo+Trotters,Harozane+Wayama,Musumari Archange+Zwane,Nobuhle";
                        $learner_timetable_load[] = "Walljee N-LO Sport-K1_11#Bembe,Sandile+Bosch,Buhle+Gazide,Kutlwano Tshepang+Hlabisa,Gcina Ntandoyenkosi+Hlungwane,Tholakele Tinyiko+Jacobs,Chadwin Jadin+Khoza,Rifumo+Mabuya,Dumisane+Mabuza,Buhle Pamella+Madi,Mabuti+Malebe,Ntokozo+Maleke,Katlego+Manganyi,Rivoningo+Masokela,Keiso+Mavuso,Ronald+Mehlwana,Mandisa+Mndaweni,Siyabonga+Mokebe,Vuyo+Molobela,Anchor+Morare,Kagiso Timothy+Mpebe,Thapelo+Mtshali,Mawande+Nair,Talisa+Ndlovu,Mosa+Ngwenya,Ludina Janas+Ntwendala,Inga+Nyandeni,Ntando+O'Kelly,Kaylin+Retshepisitswe,Paballo Mothibe+Retshidisitwe Nyakallo,Mothibe+Seritili,Gift+Shongwe,Nokuthula+Sibiya,Owami+Silangwe,Siphesihle+Somay,Samant+Vilakazi,Jabulani+Zwane,Nobuhle";
                        $learner_timetable_load[] = "Walljee N-Phys. Sc-K3_12#Brown,Landon+Chivaviro,Percy+Cindi,Ntokozo+Dhlomo,Nomonde+Dimba,Nkosinathi+Dlamini,Zinhle Nkululeko+Hlabana,Tsireletso+Kondo,Yolanda+Kubeka,Siyabonga+Maboke,Mpho+Madlanga,Joshua Siphesihle+Maleka,Matsatsi+Mbena,Annah+Mhaleni,Brian+Mkhulise,Thina Nosipho+Mkhwanazi,Lebone+Moodley,Priyan+Mthembu,Mpumelelo+Nkuna,Tinyiko+Pahlanen,Beda+Phakathi,Thando+Philibane,Thina+Qwabe,Ntokozo+Sukdeo,Tashmika+Xubane,Ntombizamaxuban";
                        $learner_timetable_load[] = "Walljee N-Phys. Sc-K4_12#Bhengu,Nondumiso+Chabaku,Thuto+Dlamini,Khethokuhle+Du Plessis,Jacques+Forster,Dylan+Goliath,Laydin+Gumede,Gugulethu+Kekana,Mmatlala Shernel+Kgomo,Moroshadi+Kumersamy,Joshua+Liesering,Caitlin+Magagula,Gugulethu+Manzini,Angel Sinethemba+Maponyane,Lisa+Mashigoana,Nkini+Mavuso,Nkosazana+Mokgatle,Nandi+Moodley,Savania+Nkosi,Lungile+Ntuli,Nokwanda+Pillai,Tegan+Pradeep,Preethi+Sithole,Sakhile+Skosana,Boitumelo+Tait,Calcey+Tutuka,Ayanda+Wallace,Sarah-Jane+Zwane,Unathi";
                        $learner_timetable_load[] = "Walljee N-Phys. Sc-K5_12#Buda,Lesego+Gounder,Shayleen+Hlope,Melusi+Jamekwana,Sandile+Klassens,Britany+Kopiso,Oteng Hope+Lekeno,Neo+Mabasa,Ntsako+Magadlela,Sithembiso Floyd+Makgethe,Amogelang Patrick+Makhalanyane,Keletso+Mbuyeleni,Sisipho+Mofokeng,Katlego+Nkomo,Trixie+Pabu,Christopher+Persad,Renuka+Perumal,Daynerah+Radebe,Thato+Shabalala,Bhekamuzi+Sikhupela,Lubabalo+Sithole,Shawn Lebo+Somera,Aanchal+Tembo,Daliso";
                        $learner_timetable_load[] = "Wasserman T-Eng HML-K2_11#Bembe,Sandile+Bosch,Buhle+Buthelezi,Mpumelelo+Davids,Lushuandre+Eland,Malefa+Hlapisi,Onkarabile+Kekana,Lefa Elton+Khoza,Menzeli Mpumelelo+Koko,Mosa Pheeha+Madi,Mabuti+Makuwa,Nobuhle+Maluleka,Mandisa+Manabalala,Neo Mary+Masokela,Keiso+Mazibuko,Mpho+Mehlwana,Mandisa+Moganedi,Tshegofatso+Mogorosi,Tsholofelo+Mokuene,Mosieledi+Morare,Kagiso Timothy+Mosehle,Sihle+Muranda,Ashley+Ndlovu,Lesego+Ngema,Ntokozo+Nkosi,Zamahlubi Nokuthula+Nyandeni,Ntando+Phiri,Ngoako+Raman,Demiel+Schafer,Derek+Shangase,Zamashuku+Sindane,Zinhle+Vilakazi,Jabulani";
                        $learner_timetable_load[] = "Wasserman T-Eng HML-K6_11#Adamo,Nick Espada+Boyise,Boitshoko+Buthelezi,Nduduzo+Dlamini,Thabang+Govender,Mikayla+Gwaza,Nkosana Emmanuel+Jacobs,Chadwin Jadin+Lawrence,Lorenzo Lawson+Lodimba,lucia+Magubane,Nqobile+Malaza,Angela+Mamaroba,Kagiso+Manxeba,Unathi+Masuku,Thembelihle+Mbonani,Nomsa+Meyer,Beauty+Mnene,Mikateko Faith+Mokoena,Naledi+Moletsane,Kelebogile+Monareng,Boitumelo+Motaung,Karabo+Motlhaping,Nthabiseng+Msimango,Songo Josias+Mvelase,Phelelani Siphosethu+Ndlovu,Thato+Njokweni,Thobeka+Nkosi,Lwazi+Peter,Chukwuemeka+Phiri,Prudence+Ralinala,Thabelo+Retshidisitwe Nyakallo,Mothibe+Selepe,Simphiwe+Shabalala,Reneilwe+Sibamba,Njabulo+Subramoney,Dylon Reese+Taulelo,Wesley+Tshabalala,Bongiwe";
                        $learner_timetable_load[] = "Xhakaza-LO Sport-K4_11#Adamo,Nick Espada+Brown,Lendle+Chiloane,Bokang+Dlamini,Thabang+Govender,Mikayla+Hoosain,Bianca+Khulu,Ntokozo Langalakhe+Mabuza,Ntokozo+Malaza,Hlengiwe+Maluleka,Mandisa+Manxeba,Unathi+Masiane,Thuto+Matlhavana,Lesedi+Mdinisa,Mary-Anne Nonhlanhla+Mekonnen,Gelila+Moima,Linda Blessing+Mokuene,Mosieledi+Moloto,Frigale+Motlhaping,Nthabiseng+Mphuthi,Andile+Mthombeni,Nhlamulo+Ndlovu,Amahle+Ndlovu,Lesego+Nonkwelo,Ze-ande+Phiri,Ngoako+Qamakwane,Katleho+Roelofse,Rochelle+Selepe,Simphiwe+Shubane,Neo+Sindane,Zinhle+Sithole,Irvin Kichinin+Vilakazi,Thokozane+Xoma,Lutho+Zulu,Sinethemba";
                        $learner_timetable_load[] = "Zini L-B. Stud.-K2_10#April,Ofentse+Goba,Mapula+Gwala,Sibongakanke Simphiwe+Kekana,Mogoshadi+Maake,Tidimalo+Mabena,Mpumelelo+Mafongana,Noluthando+Mahlasela,Ayanda+Malele,Lesedi+Malevu,Siphiwe+Mankanda,Palesa+Maphathe,Thato Mothae+Mapote,Itumeleng+Masemola,Olerato+Mazibuko,Gontle+Mochitela,Neo+Moloi,Moeketsi+Motaung,Teboho+Mphaphuli,Nyimani+Mtlaping,Nomfundo+Mukondeleli,Ambani+Mulaudzi,Khakhu+Ngobese,Linda Ntokozo+Nkomo,Nonhlanhla+Radebe,Hlompho+Sekhuthe,Tshiamo+Sikotane,Andile+Somathika,Vuyelwa+Thomas,Jade+Tshabalala,Khanyisile+Tshifure,Tsebo+Tsotetsi,Katleho+Weimers,Zaakirah+Zikhali,Sifiso";
                        $learner_timetable_load[] = "Zini L-B. Stud.-K4_10#Choane,Lesego+Davids,Sherezaad+Du Plessis,Abigale Kim+Gombani,Precious+Kachoko,Salama Said+Lehong,Thato Thabiso+Lepele,Mabotse+Mahlangu,Andile+Maseko,Maria+Mathobela,Kamogelo+Mazubuko,Sinethemba+Mkwanazi,Nqobani+Moagi,Nthabeleng+Mofokeng,Lesego+Molefe,Tshepiso Promise+Moses,Mandisi We-Nqab+Moyo,Nombuso+Mtshali,Nompumelelo+Ngwenya,Thembelible+Nkosi,Makhosetive+Nxumalo,Mamosa+Ogle,Onesha+Reddy,Megan+Ruiters,Curtley+Senosi,Kgotso+Smith,Lungelwa+Tshwala,Nompumelelo+Zikhali,Ayanda Bongakonke+Zwane,Nomfundo";

                        $school_classes = array ();
                        
                        $year = date('Y');
                         $q = "SELECT year_id FROM schoollms_schema_userdata_school_year WHERE year_label = ?";
                         $q_data = array ($year);
                         $schooldb->prepareDataDatabaseQuery($q);
                         $schooldb->db_query->execute($q_data);
                         $num_rows = count($schooldb->db_query->fetchAll());
                         if ($num_rows == 1){
                             $schooldb->db_query->execute($q_data);
                             $row = $schooldb->db_query->fetch();
                             $year_id = $row['year_id'];
                         } else {
                             //ADD NEW YEAR

                         }
                         
                        foreach($learner_timetable_load as $lkey => $learner_classlist){
                            $classlist_tokens = explode("#", $learner_classlist);
                            if (strpos($classlist_tokens[0], "-")){
//                                echo "SUBJECT CLASS PROCESSING BEGINS<br>";
                                $subject_class_tokens = explode("-", $classlist_tokens[0]);
                                $teacher = $subject_class_tokens[0];
                                //GET TEACHER ID
                                $list_teachers_in_class = array ();
                                 if (strpos($teacher, "/") !== FALSE){ //LOOKING AT 2 OR MORE TEACHERS
//                                     echo "FOUND MORE TEACHERS <br>";
                                     $teacher_tokens = explode("/", $teacher);
                                     foreach ($teacher_tokens as $tkey=>$teacher){
//                                         echo "ADDING TEACHER $teacher <br>";
                                         $list_teachers_in_class[] = $teacher;
                                     }
                                 } else {
                                     $list_teachers_in_class[] = $teacher;
                                 }
                                 
                                 $list_class_teacher_ids = array ();
                                 foreach($list_teachers_in_class as $lkey=>$teacher){
//                                     echo "LIST TEACHER $teacher <br>";
                                    $teacher_tokens = explode(" ", $teacher);
                                    if (count($teacher_tokens) >= 2){
                                        $surname = "";
                                        if (count($teacher_tokens) > 2){
                                            $count_surname = 0;
                                            $tokens_count =  count($teacher_tokens)-1;
                                            while($count_surname < $tokens_count){
                                                $surname .= $teacher_tokens[$count_surname]." ";
                                                $count_surname++;
                                            }
                                            $surname = trim($surname);
                                            $initials = $teacher_tokens[$tokens_count];
                                        } else {
                                            $surname = $teacher_tokens[0];
                                            $initials = $teacher_tokens[1];
                                        }
//                                        echo "SURNAME $surname INITIALS $initials USER TYPE $user_type <br>";
                                        $q = "SELECT * FROM schoollms_schema_userdata_access_profile WHERE school_id = ? AND type_id = ? AND name LIKE ? AND surname LIKE ?";
                                        $q_data = array ($school_id, 4, "%$initials%", "%$surname%");
                                    } else {
//                                        echo "TEACHER $teacher<br>";
                                        $q = "SELECT * FROM schoollms_schema_userdata_access_profile WHERE school_id = ? AND type_id = ? AND surname LIKE ?";
                                        $q_data = array ($school_id, 4, "%$teacher%");
                                    }
                                    
                                    $data->prepareDataDatabaseQuery($q);
                                    $data->db_query->execute($q_data);
                                    $num_rows = count($data->db_query->fetchAll());
//                                    echo "TEACHER NUM ROWS $num_rows <br>";
                                    if ($num_rows == 1){//FOUND THE TEACHER
                                        //GET USER DETAILS 
                                        $data->db_query->execute($q_data);
                                        $row = $data->db_query->fetch();
                                        //var_dump($row);
                                        //exit;
                                        $user_id = $row['user_id'];
                                        $list_class_teacher_ids[] = $user_id;
                                        $name = $row['name'];
                                        $surname = $row['surname'];
                                    }
                                }
                                
                                $count_teachers = count($list_class_teacher_ids);
//                                echo "COUNT TEACHERS $count_teachers <br>";
                                if (empty($list_class_teacher_ids)){
                                    continue;
                                }
                                
                                $subject = $subject_class_tokens[1];
                                $class = $subject_class_tokens[2];
                                
                                //GET GRADE ID FROM $class
                                $grade_tokens = explode("_", $class);
                                $grade_id = $grade_tokens[1];
                                //GET KEY/CLASS NUMBER
                                $class_number = substr($grade_tokens[0], -1);
                                //GET SUBJECT ID
                                $subject_id_found = FALSE;
                                foreach($school_subjects as $subjectkey=>$subjectdetails){
                                     if ((strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE || strtoupper($subject) == strtoupper($subjectdetails['abrev']) || strtoupper($subject) == strtoupper($subjectdetails['name'])) && array_key_exists('id', $subjectdetails)){
                                         $subject_id = $subjectdetails['id'];
                                         $subject = $subjectdetails['name'];
                                         $subject_abrev = $subjectdetails['name'];
                                         $subject_id_found = TRUE;
                                         break;
                                     } elseif(strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE || strtoupper($subject) == strtoupper($subjectdetails['abrev']) || strtoupper($subject) == strtoupper($subjectdetails['name'])){
                                         $subject_abrev = $subjectdetails['name'];
                                     }
                                 }
                                 
                                 //GET SUBJECT DETAILS FROM LMS
                                 if (!$subject_id_found){
                                     $subject_found = FALSE;
                                     $subject_key = -1;
                                     foreach($school_subjects as $subjectkey=>$subjectdetails){
                                         //echo "CHECK SUBJECT ABREV ".strtoupper($subjectdetails['abrev'])." SUBJECT ".strtoupper($subject)."<br>";
                                         if (strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE || strtoupper($subject) == strtoupper($subjectdetails['abrev']) || strtoupper($subject) == strtoupper($subjectdetails['name'])){
                                             $subject = $subjectdetails['name'];
                                             $subject_found = TRUE;
                                             $subject_key = $subjectkey;
                                             break;
                                         }
                                     }

                                     if ($subject_found){
                                         $subject_found = FALSE;
                                         $q = "SELECT * FROM schoollms_schema_userdata_school_subjects WHERE subject_title = ?";
                                         $q_data = array ("$subject");
                                         $schooldb->prepareDataDatabaseQuery($q);
                                         $schooldb->db_query->execute($q_data);
                                         $num_rows = count($schooldb->db_query->fetchAll());
                                         //echo "SUBJECT NUM ROWS $num_rows <br>";
                                         if ($num_rows == 1){
                                             $schooldb->db_query->execute($q_data);
                                             $row = $schooldb->db_query->fetch();
                                             $subject_id = $row['subject_id'];
                                             $subject_found = TRUE;
                                             //echo "SUBJECT ID $subject_id <br>";
                                         } else {
//                                            $q = "INSERT INTO schoollms_schema_userdata_school_subjects VALUES (NULL, ?, ?, ?)";
//                                            $q_data = array ($subject,"SchoolLMS",'');
//                                            $schooldb->prepareDataDatabaseQuery($q);
//                                            $schooldb->db_query->execute($q_data);
//                                            $q = "SELECT subject_id FROM schoollms_schema_userdata_school_subjects WHERE subject_title = ?";
//                                            $q_data = array($subject);
//                                            $schooldb->prepareDataDatabaseQuery($q);
//                                            $schooldb->db_query->execute($q_data);
//                                            $row = $schooldb->db_query->fetch();
//                                            $subject_id = $row['subject_id'];
                                         }
                                     } else {
                                         echo "SUBJECT $subject NEEDS TO BE ADDED TO SUBJECTS ARRAY IN CODE <br>";
                                         exit;
                                     }

                                     if ($subject_found){
                                        $school_subjects[$subject_key]['id'] = $subject_id;
                                     } else {
                                         continue;
                                     }
                                 }
                                 
                                 $teacher_user_id = $list_class_teacher_ids[0];
                                 $q = "SELECT * FROM schoollms_schema_userdata_teacher_schooldetails WHERE user_id = ? AND school_id = ? AND grade_id = ? AND subject_id = ? AND year_id = ? ORDER BY class_id";
                                 $q_data = array ($teacher_user_id, $school_id,$grade_id,$subject_id,$year_id);

                                 $schooldb->prepareDataDatabaseQuery($q);
                                 $schooldb->db_query->execute($q_data);
                                 if (count($schooldb->db_query->fetchAll()) > 1){
                                     $schooldb->db_query->execute($q_data);
                                     $row = $schooldb->db_query->fetchAll();
                                     $class_id_found = FALSE;
                                     foreach($row as $row_index=>$row_details){
                                         $temp_class_id = $row_details["class_id"];
                                         $q = "SELECT * FROM schoollms_schema_userdata_school_classes WHERE class_id = ?";
                                         $q_data = array ($temp_class_id);
                                         $schooldb->prepareDataDatabaseQuery($q);
                                         $schooldb->db_query->execute($q_data);
                                         $row2 = $schooldb->db_query->fetch();
                                         $temp_class_label_tokens = explode(" ", $row2["class_label"]);
                                         $count_class_label_tokens = count($temp_class_label_tokens);
                                         if ($class_number <= $temp_class_label_tokens[$count_class_label_tokens-1]){
                                             $class_number = $temp_class_label_tokens[$count_class_label_tokens-1];
                                             $class_id = $temp_class_id;
                                             $class_id_found = TRUE;
                                             break;
                                         }                                                          
                                     }
                                     if (!$class_id_found){
                                         continue;
                                     }
                                 } else {
                                     $schooldb->db_query->execute($q_data);
                                     $row = $schooldb->db_query->fetch();
                                     $class_id = $row["class_id"];
                                 }
                            } else {
                                $class = $classlist_tokens[0];
                                $grade_number = preg_replace('/[^\-\d]*(\-?\d*).*/','$1',$class);
                                 $class_abrev = "$class";
                                 $class_search = $class;
                                 
                                 //echo "CLASS SEARCH $class_search GRADE NUMBER $grade_number<br>";

                                 //Dealing with grade class
                                 $q = "SELECT * FROM schoollms_schema_userdata_school_classes WHERE school_id = ? AND year_id = ? AND grade_id = ? AND class_label LIKE ?";
                                 $q_data = array (1,$year_id,$grade_number,"%$class_search%");

                                 $schooldb->prepareDataDatabaseQuery($q);
                                 $schooldb->db_query->execute($q_data);
                                 $num_rows = count($schooldb->db_query->fetchAll());
    //                                             echo "CLASS NUM ROWS $num_rows YEAR_ID $year_id<br>";
                                 if ($num_rows == 1){
                                     $schooldb->db_query->execute($q_data);
                                     $row = $schooldb->db_query->fetch();
                                     $class_id = $row['class_id'];
                                     $class_label = $row['class_label'];
                                     $grade_id = $row['grade_id'];
                                     $class = $class_label;
                                     //echo "$class WITH ID $class_id FOUND<br>";
                                 } else {
                                     echo "CLASS $class NOT FOUND<br>";
                                     continue;

                                 }
                            }
                            

                             
                             //$school_classes[] = array ('abrev' => $class_abrev, 'class_label' => $class, 'class_id' => $class_id, 'grade_id'=>$grade_id);
                             
                             //FOREACH LEARNER
                             //GET USER ID - IF EXISTS
                             //CHECK IF LEARNER IS LOADED IN CLASS FOR THIS YEAR - IF NOT LOAD LEARNER
                             $learners = explode("+", $classlist_tokens[1]);
                             foreach($learners as $ckey=>$learner){
                                 $learner_tokens = explode(",", $learner);
                                 if (count($learner_tokens) >= 2){
                                     $surname = $learner_tokens[0];
                                     $name_tokens = explode(" ",$learner_tokens[1]);

                                     $q = "SELECT * FROM schoollms_schema_userdata_access_profile WHERE school_id = ? AND type_id = ? AND name LIKE ? AND surname LIKE ?";
                                     $schooldb->prepareDataDatabaseQuery($q);
                                     foreach($name_tokens as $nkey=>$name){
                                         $q_data = array ($school_id,$user_type,"%$name%","%$surname%");
                                         $schooldb->db_query->execute($q_data);
                                         $num_rows = count($schooldb->db_query->fetchAll());
                                         if ($num_rows == 1){
                                             $schooldb->db_query->execute($q_data);
                                             $row = $schooldb->db_query->fetch();
                                             $user_id = $row["user_id"];
                                             //Check if learner schooldetails for this year exist
                                             //If not - load the learner
                                             echo "Learner $learner has a user_id $user_id <br>";
                                             $q = "SELECT * FROM schoollms_schema_userdata_learner_schooldetails WHERE school_id = ? AND user_id = ? AND class_id = ? AND year_id = ?";
                                             $q_data = array ($school_id,$user_id,$class_id,$year_id);
                                             $schooldb->prepareDataDatabaseQuery($q);
                                             $schooldb->db_query->execute($q_data);
                                             $num_rows = count($schooldb->db_query->fetchAll());
                                             if ($num_rows == 0){
                                                 $q = "INSERT INTO schoollms_schema_userdata_learner_schooldetails VALUES (?,?,?,?,?)";
                                                 $q_data = array ($user_id,$school_id,$grade_id,$class_id,$year_id);
                                                 $schooldb->prepareDataDatabaseQuery($q);
                                                 $schooldb->db_query->execute($q_data);
                                                 echo "Learner $learner has been added to $class for year $year <br>";
                                             } else {
                                                 echo "Learner $learner is already registered for $class year $year <br>";
                                             }
                                             break;
                                         } elseif($num_rows > 1) {
                                             $schooldb->db_query->execute($q_data);
                                             $user_ids = "";
                                             while($row = $schooldb->db_query->fetch()){
                                                 $user_ids .= $row["user_id"]." ";
                                             }
                                             $user_ids = trim($user_ids);
                                             echo "Learner $learner has more than 1 user id ($user_ids) <br>";
                                         } else {
                                             echo "Learner $learner has no access details <br>";
                                         }
                                     }
                                 } else {
                                     echo "<b>Learner $learner at key $ckey in $class is missing Name or Surname </b><br>";
                                 }
                             }
                        }
                        exit;
                        break;
                    
                }
            }
            break;
        
        case 'develop/timetable/load/mhs/teachers/allocations':
            $message_queue = array ();
            //<div class="tabs-selected" title="View/Modify Time Table" style="padding:10px">
            //<div id="timetabletab" title="Reports" style="padding:10px">
            $message_queue["load"] = "class!:!'tabs-selected'!,!title!:!'Load Timetable Data'!,!style!:!'padding:10px'";
            $message_queue["filter"] = "class!:!'tabs-selected'!,!title!:!'Filter'!,!style!:!'padding:10px'";
            $message_queue["view"] = "class!:!'timetabletab'!,!title!:!'View'!,!style!:!'padding:10px'";
            
            foreach ($message_queue as $message_key => $message) {
                $div = new DIV();
                //echo "user_view_body_content_tabs MSG: $message <br>";
                $div->setDIVSettings($message);
               
                switch ($message_key) {
                
                    case 'load':
                        $school_id = 2;
                        $user_type = 4;
                        $dsn = "mysql:host=localhost;dbname=mhslms_qa_vas_timetable;charset=utf8";
                        $opt = [ PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
                                    //PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
                                    PDO::ATTR_EMULATE_PREPARES   => false,
                                ];

                        $link = new PDO ($dsn, 'root', '$0W3t0');
                        $data_message = array();
//                        $data_message["db"] = "mhslms_qa_vas_timetable";
//                        $data_message["engine"] = "mysql";
//                        $data_message["type"] = "db";
//                        $data_message["username"] = "root";
//                        $data_message["password"] = "$0W3t0";
//                        $data_message["host"] = "localhost";
//                        $data_message["charset"] = "utf8";
                        
                       // $schooldb = new Data($data_message);
                        $school_settings = array ();
                        $school_settings["periods"] = 9;
                        $school_settings["days"] = 10;
                        
                        $grades = array ();
                        $grades[] = "8";
                        $grades[] = "9";
                        $grades[] = "10";
                        $grades[] = "11";
                        $grades[] = "12";
                        
                        /*
                          * +--------------------------------+
                            | subject_title                  |
                            +--------------------------------+
                            | CREATIVE ARTS                  |
                            | AFRIKAANS                      |
                            | EMS                            |
                            | ENGLISH                        |
                            | LIFE ORIENTATION               |
                            | MATHEMATICS                    |
                            | NATURAL SCIENCES               |
                            | GEOGRAPHY (J-GEO)              |
                            | TECHNOLOGY                     |
                            | ACCOUNTING                     |
                            | AFRIKAANS FIRST ADDITIONAL LAN |
                            | VISUAL ARTS                    |
                            | BUSINESS STUDIES               |
                            | CIVIL TECHNOLOGY               |
                            | COMPUTER APPLICATIONS TECHNOLO |
                            | CONSUMER STUDIES               |
                            | ECONOMICS                      |
                            | ENGINEERING GRAPHICS AND DESIG |
                            | ENGLISH HOME LANGUAGE          |
                            | GEOGRAPHY                      | 
                            | HISTORY                        |
                            | LIFE SCIENCES                  |
                            | MATHEMATICAL LITERACY          |
                            | PHYSICAL SCIENCES              |
                            | RELIGION STUDIES               |
                            | TOURISM                        |
                            | HISTORY [J-HIS]                |
                            | SOCIAL SCIENCES                |
                            | AFRIKAANS FIRST ADD LANG       |
                            | Afrikaans/Zulu                 |
                            | REGISTRATION                   |
                            | LO Sport                       |
                            +--------------------------------+

                         */
                        $school_subjects = array ();
                        $school_subjects[] = array('abrev' => "AFRA", 'name'=> "Afrikaans Eerste Addisionele Taal");
                        $school_subjects[] = array('abrev' => "AFRH", 'name'=> "Afrikaans Huistaal");
                        $school_subjects[] = array('abrev' => "BSTD", 'name'=> "Besigheidstudies / Business Studies");
                        $school_subjects[] = array('abrev' => "EBWR", 'name'=> "EBW Rek / EMS Acc");
                        $school_subjects[] = array('abrev' => "ECON", 'name'=> "Ekonomie / Economics");
                        $school_subjects[] = array('abrev' => "EBW", 'name'=> "Ekonomiese Bestuurswetenskappe / Economic Business Management");
                        $school_subjects[] = array('abrev' => "ENGA", 'name'=> "English First Additional Language");
                        $school_subjects[] = array('abrev' => "ENGH", 'name'=> "English Home Language");                        
                        $school_subjects[] = array('abrev' => "ENVI", 'name'=> "Enviro");
                        $school_subjects[] = array('abrev' => "PHSC", 'name'=> "Fisiese Wetenskappe / Physical Sciences");
                        $school_subjects[] = array('abrev' => "HOSP", 'name'=> "Gasvryheidstudies / Hospitality Studies");
                        $school_subjects[] = array('abrev' => "GEOG", 'name'=> "Geografie / Geography");
                        $school_subjects[] = array('abrev' => "IGO", 'name'=> "Ingenieursgrafika en Ontwerp / Engineering graphics and Design");
                        $school_subjects[] = array('abrev' => "IT", 'name'=> "Inligtingstegnologie / Information Technology");
                        $school_subjects[] = array('abrev' => "LAP", 'name'=> "Landbou Plantkunde /Agri Botany");
                        $school_subjects[] = array('abrev' => "LAV", 'name'=> "Landbou Veekunde / Animal Science");
                        $school_subjects[] = array('abrev' => "AGRM", 'name'=> "Landboubestuurspraktyk / Argricultural Management Practice");
                        $school_subjects[] = array('abrev' => "AGRT", 'name'=> "Landboutegnologie / Agricultural Technology");
                        $school_subjects[] = array('abrev' => "AGRS", 'name'=> "Landbouwetenskap / Agricultural Sciences");
                        $school_subjects[] = array('abrev' => "LEE", 'name'=> "Lees / Reading");
                        $school_subjects[] = array('abrev' => "LIFE", 'name'=> "LewensoriÃ«ntering / Life Orientation");
                        $school_subjects[] = array('abrev' => "LFSC", 'name'=> "Lewenswetenskappe / Life Sciences");
                        $school_subjects[] = array('abrev' => "PT", 'name'=> "Liggaamlike Opvoeding / Physical Training");
                        $school_subjects[] = array('abrev' => "NW_F", 'name'=> "Natuurwetenskappe (Fisiese Wetenskappe) / Natural Sciences (Physical Sciences)");
                        $school_subjects[] = array('abrev' => "NW_L", 'name'=> "Natuurwetenskappe (Lewenswetenskappe) / Natural Sciences (Life");
                        $school_subjects[] = array('abrev' => "CATN", 'name'=> "Rekenaartoepassingstegnologie / Computer Application Technology");
                        $school_subjects[] = array('abrev' => "RV", 'name'=> "Rekenaarvaardigheid / Computer Literacy");
                        $school_subjects[] = array('abrev' => "ACCN", 'name'=> "Rekeningkunde / Accounting");
                        $school_subjects[] = array('abrev' => "SEPH", 'name'=> "Sepedi Home Language");
                        $school_subjects[] = array('abrev' => "CVLT", 'name'=> "Siviele Tegnologie / Civil Technology");
                        $school_subjects[] = array('abrev' => "SK", 'name'=> "Skeppende Kuns / Creative Arts");                                      
                        $school_subjects[] = array('abrev' => "SW_A", 'name'=> "Sosiale Wetenskappe (Geografie) / Social Sciences (Geography)");                       
                        $school_subjects[] = array('abrev' => "SW_G", 'name'=> "Sosiale Wetenskappe (Geskiedenis) / Social Sciences (History)");
                        $school_subjects[] = array('abrev' => "TEKN", 'name'=> "Tegniese Tekene / Technical Drawing");
                        $school_subjects[] = array('abrev' => "TEGN", 'name'=> "Tegnologie / Technology");                        
                        $school_subjects[] = array('abrev' => "TRSM", 'name'=> "Toerisme / Tourism");
                        $school_subjects[] = array('abrev' => "TO", 'name'=> "Toesig / Supervision");                        
                        $school_subjects[] = array('abrev' => "TOA", 'name'=> "Toesig A / Supervision A");                        
                        $school_subjects[] = array('abrev' => "TOB", 'name'=> "Toesig B / Supervision B");                                                
                        $school_subjects[] = array('abrev' => "MATH", 'name'=> "Wiskunde / Mathematics");                      
                        $school_subjects[] = array('abrev' => "MLIT", 'name'=> "Wiskunde Geletterdheid / Maths Literacy");
                        $school_subjects[] = array('abrev' => "WIVR", 'name'=> "Wiskunde verryking / Mathematic Enrichment");
                        $school_subjects[] = array('abrev' => "XITH", 'name'=> "Xitsonga Home Language");
                        $school_subjects[] = array('abrev' => "DRW", 'name'=>"DRW");
                        $school_subjects[] = array('abrev' => "BYBEL", 'name'=> "Bible / Bybel");
                        $school_subjects[] = array('abrev' => "ALGS", 'name'=> "Algemene Gesyferdheid / General Numeracy");
                        $school_subjects[] = array('abrev' => "SAAL", 'name'=> "Assembly");
                        $school_subjects[] = array('abrev' => "TEST", 'name'=> "Test");
                        $school_subjects[] = array('abrev' => "LO", 'name'=> "Life Orientation");
                        $school_subjects[] = array('abrev' => "XITH/WVER", 'name'=>"XITH/WVER");
                        $school_subjects[] = array('abrev' => "XITH/LO", 'name'=>"XITH/LO");
                        $school_subjects[] = array('abrev' => "XITH/PT", 'name'=>"XITH/PT");
                        $school_subjects[] = array('abrev' => "XITH/ALG", 'name'=>"XITH/ALG");
                        $school_subjects[] = array('abrev' => "XITH/LAV", 'name'=>"XITH/LAV");
                        $school_subjects[] = array('abrev' => "XITH/LAP", 'name'=>"XITH/LAP");
                        $school_subjects[] = array('abrev' => "XITH/GST", 'name'=>"XITH/GST");
                        $school_subjects[] = array('abrev' => "XITH/ALGS", 'name'=>"XITH/ALGS");
                        $school_subjects[] = array('abrev' => "XITH/LEES", 'name'=>"XITH/LEES");
                        $school_subjects[] = array('abrev' => "XITH/TEKN", 'name'=>"XITH/TEKN");
                        $school_subjects[] = array('abrev' => "XITH/READ", 'name'=>"XITH/READ");
                        $school_subjects[] = array('abrev' => "XITH/RV", 'name'=>"XITH/RV");
                        $school_subjects[] = array('abrev' => "MATH/WWG", 'name'=>"MATH/WWG");
                        $school_subjects[] = array('abrev' => "MATH/MML", 'name'=>"MATH/MML");
                        $school_subjects[] = array('abrev' => "WIVR/WVER", 'name'=>"WIVR/WVER");
                        $school_subjects[] = array('abrev' => "SEPH/WVER", 'name'=>"SEPH/WVER");
                        $school_subjects[] = array('abrev' => "SEPH/READ", 'name'=>"SEPH/READ");
                        $school_subjects[] = array('abrev' => "SEPH/LO", 'name'=>"SEPH/LO");
                        $school_subjects[] = array('abrev' => "SEPH/PT", 'name'=>"SEPH/PT");
                        $school_subjects[] = array('abrev' => "SEPH/ALG", 'name'=>"SEPH/ALG");
                        $school_subjects[] = array('abrev' => "SEPH/ALGS", 'name'=>"SEPH/ALGS");
                        $school_subjects[] = array('abrev' => "SEPH/LAV", 'name'=>"SEPH/LAV");
                        $school_subjects[] = array('abrev' => "SEPH/RV", 'name'=>"SEPH/RV");
                        $school_subjects[] = array('abrev' => "SEPH/TEKN", 'name'=>"SEPH/TEKN");
                        $school_subjects[] = array('abrev' => "SEPH/LEES", 'name'=>"SEPH/LEES");
                        //FORMULA - 
                        // 1 - Teacher Details(Surname Initial/Dual Teachers Surnames with "/" between them)
                        // 2 - "-" to separate Teacher Details with from the room that the class will be in
                        // 2.1 - Where the room is TR1 or any other number, it will mean the room number is unknown
                        // 3 - "#" (HASHTAG) to separate the teacher details with slot details 
                        // 4 - Subject Acronym 
                        // 5 - "-" (DASH) to separate subject from class label
                        // 6 - Class Label
                        // 7 - "@" (AT SIGN) to begin the list of day/period slots where subject in class will be loaded and separate classes doing the same subject taught by teacher
                        // 8 - "," (COMMA) is used to separate day and period numbers (eg. DAY 1, PERIOD 3)
                        // 9 - "+" (PLUS) is used to concatenate the list of day/period slots where the subject is loaded to the class
                        // 10 - "&" (AMPERSAND) is used to add other classes doing the same current subject
                        // 11 - ";" (SEMI-COLON) is used to separate subjects data taught by teacher
                        // 12 - "%" will translate #
                        // 13 - If the grade has no letter association it mean that all the students in that grade attend the class
                        // 14 - if a subject is associated with a grade number without a letter load all the learner in the slot
                        
                        $school_classes = array ();
                        
                        $teacher_timetable_load = array ();
                       // $teacher_timetable_load[] = "ATHERSTONE C-TR1-8F#ALGS-9@9,3&9E@6,7&8@3,6&8B@8,5;TEST-9@5,4+5,5+10,4+10,5;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "ATHERSTONE C-TR1-8F#ALGS-9A@9,3&9E@6,7&8A@3,6&8B@8,5;TEST-9A@5,4+5,5+10,4+10,5";
                        $teacher_timetable_load[] = "BARBEIRO N-G3-11A#ACCN-K1_11@1,1+2,2+8,3+7,4+7,5+5,7+3,8+4,8+6,8+9,8+10,8+1,9&K4_11@4,1+9,1+10,1+10,2+2,4+2,5+1,6+7,6+3,7+8,7+5,8+6,9&K3_12@7,1+1,2+5,2+3,4+4,4+3,5+6,7+7,7+9,7+2,8+8,8+10,9&K1_12@3,2+4,2+6,2+8,2+2,3+5,3+6,3+10,3+3,6+9,6+1,7+7,9;EBWR-8D@2,1+3,1+6,1+8,1+9,3+1,8&8F@7,2+5,4+8,4+9,4+4,9+2,6&8B@9,2+1,4+4,6+10,7+7,8+5,9;TO-K3_10@4,3&K2_11@8,5;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "BARBEIRO N-G3-11A#ACCN-K1_11@1,1+2,2+8,3+7,4+7,5+5,7+3,8+4,8+6,8+9,8+10,8+1,9&K4_11@4,1+9,1+10,1+10,2+2,4+2,5+1,6+7,6+3,7+8,7+5,8+6,9&K3_12@7,1+1,2+5,2+3,4+4,4+3,5+6,7+7,7+9,7+2,8+8,8+10,9&K1_12@3,2+4,2+6,2+8,2+2,3+5,3+6,3+10,3+3,6+9,6+1,7+7,9;EBWR-8D@2,1+3,1+6,1+8,1+9,3+1,8&8F@7,2+5,4+8,4+9,4+4,9+2,6&8B@9,2+1,4+4,6+10,7+7,8+5,9;TO-K3_10@4,3&K2_11@8,5";
//                        $teacher_timetable_load[] = "BOUWER S-D18-9C#TRSM-K3_10@1,1+2,2+3,3+4,3+6,4+7,5+5,6+8,6+2,7+5,7+9,8+1,9&K4_12@2,1+5,1+6,1+8,1+9,3+9,4+10,7+1,8+3,9+8,9&K4_11@4,1+9,1+10,1+10,2+2,4+2,5+1,6+7,6+3,7+8,7+5,8+6,9;SW_G-8F@7,1+6,3+10,9&8G@1,2+5,4+3,8&8C@5,2+2,6+8,8&8D@6,2+9,2+3,4&8A@1,3+5,5+8,5&8E@5,3+8,3+2,8&8B@10,8+2,9+9,9;SW_A-9A@2,3+10,6&9B@1,4+4,4+7,8&9C@10,4+3,6+4,8;TO-K2_11@3,2;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "BOUWER S-D18-9C#TRSM-K3_10@1,1+2,2+3,3+4,3+6,4+7,5+5,6+8,6+2,7+5,7+9,8+1,9&K4_12@2,1+4,7+5,1+5,9+6,1+8,1+9,3+9,4+10,7+1,8+3,9+8,9&K4_11@4,1+9,1+10,1+10,2+2,4+2,5+1,6+7,6+3,7+8,7+5,8+6,9;SW_G-8F@7,1+6,3+10,9&8G@1,2+5,4+3,8&8C@5,2+2,6+8,8&8D@6,2+9,2+3,4&8A@1,3+5,5+8,5&8E@5,3+8,3+2,8&8B@10,8+2,9+9,9;SW_A-9A@2,3+10,6&9B@1,4+4,4+7,8&9C@10,4+3,6+4,8;TO-K2_11@3,2";
//                        $teacher_timetable_load[] = "CLAASEN B-F5-12D#LO-12B@1,1+4,8&11D@2,1+10,9&12C@3,1+7,2&9A@6,1+6,6+10,8&9B@8,1+6,2+2,7&12A@10,1+4,9&9G@1,2+2,2&9F@3,2+7,7&9E@4,2+8,7&11B@9,2+2,9&9C@5,2+8,3+2,5&9@3,6&11B@1,&11C@1,4+9,4&11F@6,3+1,8&12F@7,8&9D@4,4+9,6+7,5&12E@8,5+2,6&11E@4,6+10,6&11A@10,7+3,9&12D@7,4+9,9&K4_11@5,8+6,9&K1_12@1,7&K3_12@3,5;DRW-10B@2,3+10,3&8F@8,2;ALGS-9@8,6&9C@3,7&9E@6,7&9A@8,8&9B@8,9&9D@7,1;TEST-9@5,4+5,5&8@10,4+10,5;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "CLAASEN B-F5-12D#LO-12B@1,1+4,8&11D@2,1+10,9&12C@3,1+7,2&9A@6,1+6,6+10,8&9B@8,1+6,2+2,7&12A@10,1+4,9&9G@1,2+2,2&9F@3,2+7,7&9E@4,2+8,7&11B@9,2+2,9&9C@5,2+8,3+2,5&9Z@3,6&11B@1,&11C@1,4+9,4&11F@6,3+1,8&12F@7,8&9D@4,4+9,6+7,5&12E@8,5+2,6&11E@4,6+10,6&11A@10,7+3,9&12D@7,4+9,9&K4_11@5,8+6,9&K1_12@1,7&K3_12@3,5;DRW-10B@2,3+10,3&8F@8,2;ALGS-9Z@8,6&9C@3,7&9E@6,7&9A@8,8&9B@8,9&9D@7,1;TEST-9Z@5,4+5,5&8Z@10,4+10,5";
//                        $teacher_timetable_load[] = "CLAASEN N-T3-8E#EBWR-8C@1,1+2,1+6,1+8,5+3,6+5,7&8G@3,1+5,3+4,6+9,7+1,9+8,9&8E@7,1+7,3+9,6+9,8+2,9+3,9&8A@6,3+8,3+1,7+10,8+10,9+6,7&9B@10,3;EBW-9D@5,1+8,4+10,6+2,8+3,2&9C@1,2+6,2+7,2+10,5&9B@3,1+6,8+8,8+6,8&9B@5,1+6,8+8,8+6,8&9E@8,2+3,5+6,6+10,7;BSTD-K4_11@4,1+9,1+10,1+10,2+1,3+2,4+5,8+6,9+2,5+1,6+7,6+3,7+8,7&K3_11@3,3+4,3+6,4+10,4+2,6+5,6+8,6+2,7+4,9+9,9+7,8;TO-K2_11@4,2&K1_12@2,3;LEES-9@5,4+5,5;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "CLAASEN N-T3-8E#EBWR-8C@1,1+2,1+6,1+8,5+3,6+5,7&8G@3,1+5,3+4,6+9,7+1,9+8,9&8E@7,1+7,3+9,6+9,8+2,9+3,9&8A@6,3+8,3+1,7+10,8+10,9+6,7&9B@10,3;EBW-9D@5,1+8,4+10,6+2,8+3,2&9C@1,2+6,2+7,2+10,5&9B@3,1+6,8+8,8+5,1&9E@8,2+3,5+6,6+10,7;BSTD-K4_11@4,1+9,1+10,1+10,2+1,3+2,4+5,8+6,9+2,5+1,6+7,6+3,7+8,7&K3_11@3,3+4,3+6,4+10,4+2,6+5,6+8,6+2,7+4,9+9,9+7,8;TO-K2_11@4,2&K1_12@2,3;LEES-9Z@5,4+5,5";
//                        $teacher_timetable_load[] = "COETZEE N-C9-N#HOSP-K1_11@1,1+2,2+8,3+7,4+7,5+5,7+4,8+6,8+1,9+9,8+10,8&K4_10@2,1+5,1+6,1+8,1+9,3+9,4+4,7+10,7+1,8+3,9+5,9+8,9&K2_12@4,1+9,1+10,2+2,4+2,5+10,5+1,6+7,6+3,7+8,7+5,8+6,9&K3_12@7,1+1,2+5,2+3,4+4,4+3,5+6,7+7,7+9,7+2,8+8,8+10,9&K2_11@3,2+4,2+6,2+2,3+5,3+10,3+5,4+8,4+8,5+9,6+1,7+7,9;TO-K3_11@1,3+5,6&K1_10@6,6;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "COETZEE N-C9-TR1#HOSP-K1_11@1,1+2,2+8,3+7,4+7,5+5,7+4,8+6,8+1,9+9,8+10,8&K4_10@2,1+5,1+6,1+8,1+9,3+9,4+4,7+10,7+1,8+3,9+5,9+8,9&K2_12@4,1+9,1+10,2+2,4+2,5+10,5+1,6+7,6+3,7+8,7+5,8+6,9&K3_12@7,1+1,2+5,2+3,4+4,4+3,5+6,7+7,7+9,7+2,8+8,8+10,9&K2_11@3,2+4,2+6,2+2,3+5,3+10,3+5,4+8,4+8,5+9,6+1,7+7,9;TO-K3_11@1,3+5,6&K1_10@6,6";
                        //$teacher_timetable_load[] = "DE LANGE I-DW1-N#ENGA-12A@1,1+4,3+5,4+6,4+7,5+8,5+5,6+10,6+2,7+9,8+10,9&12F@3,1+10,1+2,2+7,2+1,3+8,3+7,4+2,6+5,+6,8+4,9+9,9+5,7&11A@8,1+8,2+9,2+1,4+5,5+3,6+4,6+6,6+2,9&10A@5,3+8,4+10,4+2,5+3,5+9,6+1,7+4,8+10,8+7,9;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//no                    $teacher_timetable_load[] = "DE LANGE I-DW1-TR1#ENGA-12A@1,1+4,3+5,4+6,4+7,5+8,5+5,6+10,6+2,7+9,8+10,9&12F@3,1+10,1+2,2+7,2+1,3+8,3+7,4+2,6+5,+6,8+4,9+9,9+5,7&11A@8,1+8,2+9,2+1,4+5,5+3,6+4,6+6,6+2,9&10A@5,3+8,4+10,4+2,5+3,5+9,6+1,7+4,8+10,8+7,9";
//                      //$teacher_timetable_load[] = "DOHSE F-L4-9G#AGRT-K3_10@1,1+1,9+2,2+2,7+3,3+4,3+5,6+5,7+6,4+7,5+8,6+9,8&K2_10@1,2+2,8+2,9+3,4+4,4+5,2+6,7+7,1+7,7+8,8+9,7+10,9;TEKN-9C@1,3+3,1+4,6+6,6+8,4+9,9&9B@1,6+2,1+4,8+7,2+9,6+10,2&9E@1,8+2,3+4,1+7,4+7,6+8,9&9A@2,4+2,6+3,6+5,2+6,2+9,1+10,5&9D@1,4+3,7+4,7+6,1+8,3+10,4&9G@2,5+5,1+5,9+8,7+9,4&9F@3,8+3,9+5,8+10,3+10,7&9@4,9;-TO-K2_11@5,3;TEST-9G@5,4+5,5;BYBEL-SAAL@4,5+9,5;SAAL-SAAL@1,5+6,5";
 //Not Loading            $teacher_timetable_load[] = "DOHSE F-L4-9G#AGRT-K3_10@1,1+1,9+2,2+2,7+3,3+4,3+5,6+5,7+6,4+7,5+8,6+9,8&K2_10@1,2+2,8+2,9+3,4+4,4+5,2+6,7+7,1+7,7+8,8+9,7+10,9;TEKN-9C@1,3+3,1+4,6+6,6+8,4+9,9&9B@1,6+2,1+4,8+7,2+9,6+10,2&9E@1,8+2,3+4,1+7,4+7,6+8,9&9A@2,4+2,6+3,6+5,2+6,2+9,1+10,5&9D@1,4+3,7+4,7+6,1+8,3+10,4&9G@2,5+5,1+5,9+8,7+9,4&9F@3,8+3,9+5,8+10,3+10,7&9Z@4,9;TO-K2_11@5,3;TEST-9G@5,4+5,5";
 //Not Loading          //$teacher_timetable_load[] = "DU PREEZ L-F3-TR1#EBWR-9A@2,7+3,9+4,6+8,5+9,3+10,2&9C@2,8+4,3+7,9+8,1+9,7+10,6&9D@3,4+3,5+4,1+7,8+8,7+9,4&9B@3,7+5,1+5,9+7,7+8,6+10,9;BYBEL-SAAL@4,5+9,5;TEST-9F@5,4+5,5&8G@10,4+10,5;SAAL-SAAL@1,5+6,5";  //not loading              // $teacher_timetable_load[] = "DU PREEZ L-F3-TR1#EBWR-9A@2,7+3,9+4,6+8,5+9,3+10,2&9C@2,8+4,3+7,9+8,1+9,7+10,6&9D@3,4+3,5+4,1+7,8+8,7+9,4&9B@3,7+5,1+5,9+7,7+8,6+10,9";
                       // $teacher_timetable_load[] = "DREYER W-D3-TR1#MLIT-12D@1,1+2,2+2,6+3,1+4,3+4,8+5,4+5,6+6,4+7,+8,3+9,8+10,1+7,5&12C@1,3+2,9+3,3+4,6+5,5+6,6+6,8+7,3+7,8+8,4+8,6+9,2+10,6&10B@1,6+2,5+2,3+2,4+4,1+4,9+5,8+6,9+7,4+7,6+8,7+9,1+10,2+10,3;ALGS-8E@1,4+1,8&8G@2,5+8,2&8F@2,5+8,2&8A@3,4&8B@3,5&8D@5,&8C@1,8;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5;TEST-8@10,4+10,5";
//                        $teacher_timetable_load[] = "DREYER W-D3-TR1#MLIT-12D@1,1+2,2+2,6+3,1+4,3+4,8+5,4+5,6+6,4+7,+8,3+9,8+10,1+7,5&12C@1,3+2,9+3,3+4,6+5,5+6,6+6,8+7,3+7,8+8,4+8,6+9,2+10,6&10B@1,6+2,5+2,3+2,4+4,1+4,9+5,8+6,9+7,4+7,6+8,7+9,1+10,2+10,3;ALGS-8E@1,4+1,8&8G@2,5+8,2&8F@2,5+8,2&8A@3,4&8B@3,5&8D@5,&8C@1,8";
                       // $teacher_timetable_load[] = "FOURIE D-C10-8H#CAT-K2_10@1,2+2,8+2,9+3,4+4,4+5,2+6,7+7,1+7,7+9,7+10,9+8,8&K3_11@1,3+2,6+2,7+3,3+4,3+4,9+5,6+6,4+7,8+9,9+10,4+8,6&K4_11@1,6+2,4+2,5+3,7+4,1+5,8+5,9+6,9+7,6+9,1+10,1+10,2+8,7&K1_12@1,7+2,3+3,2+3,6+4,2+5,3+6,2+6,3+7,9+9,6+10,3+8,2&K4_12@1,8+2,1+3,9+4,7+5,1+6,1+9,3+9,4+10,7+8,1+8,9;SAAL-SAA@1,5+6,5;BYBEL-SAAL@4,5+9,5;RV-8A@9,8+4,8&8E@7,4+8,4;TEST-9D@5,4+5,5";
//                        $teacher_timetable_load[] = "FOURIE D-C10-8H#CAT-K2_10@1,2+2,8+2,9+3,4+4,4+5,2+6,7+7,1+7,7+9,7+10,9+8,8&K3_11@1,3+2,6+2,7+3,3+4,3+4,9+5,6+6,4+7,8+9,9+10,4+8,6&K4_11@1,6+2,4+2,5+3,7+4,1+5,8+5,9+6,9+7,6+9,1+10,1+10,2+8,7&K1_12@1,7+2,3+3,2+3,6+4,2+5,3+6,2+6,3+7,9+9,6+10,3+8,2&K4_12@1,8+2,1+3,9+4,7+5,1+6,1+9,3+9,4+10,7+8,1+8,9;RV-8A@9,8+4,8&8E@7,4+8,4;TEST-9D@5,4+5,5";
//                        $teacher_timetable_load[] = "FOURIE L-L3-TR1#CVLT-K1_11@1,1+1,9+2,2+3,8+4,8+5,7+6,8+7,4+7,5+8,3+9,8+10,8&K1_12@1,7+2,3+3,2+3,6+4,2+5,3+6,2+6,3+7,9+8,2+9,6+10,3;AGRT-K3_12@1,2+2,8+3,4+3,5+4,4+5,2+6,7+7,1+7,7+8,8+9,7+10,9&K4_11@1,4+2,4+2,5+3,7+4,1+5,8+6,9+7,6+8,7+9,1+10,1+10,2&K3_11@1,3+2,6+2,7+3,3+4,3+4,9+5,6+6,4+7,8+8,6+9,9+10,4&K4_12@1,8+2,1+3,9+4,7+5,1+5,9+6,1+8,1+8,9+9,3+9,4+10,7;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//Not Loading             $teacher_timetable_load[] = "FOURIE L-L3-TR1#CVLT-K1_11@1,1+1,9+2,2+3,8+4,8+5,7+6,8+7,4+7,5+8,3+9,8+10,8&K1_12@1,7+2,3+3,2+3,6+4,2+5,3+6,2+6,3+7,9+8,2+9,6+10,3;AGRT-K3_12@1,2+2,8+3,4+3,5+4,4+5,2+6,7+7,1+7,7+8,8+9,7+10,9&K4_11@1,4+2,4+2,5+3,7+4,1+5,8+6,9+7,6+8,7+9,1+10,1+10,2&K3_11@1,3+2,6+2,7+3,3+4,3+4,9+5,6+6,4+7,8+8,6+9,9+10,4&K4_12@1,8+2,1+3,9+4,7+5,1+5,9+6,1+8,1+8,9+9,3+9,4+10,7;";
                      //  $teacher_timetable_load[] = "GERBER C-T10-12C#AFRA-12E@1,1+2,9+3,3+4,3+5,6+7,2+7,3+9,2+9,8+10,1&8B@1,2+1,9+2,8+3,4+4,4+5,2+5,7+6,1+7,1+7,7+8,1+9,3&10E@1,3+2,3+2,6+3,2+4,2+6,9+7,6+8,7+9,9+10,3&12F@1,4+2,7+3,5+4,6+4,8+5,5+6,6+7,5+8,5+10,6+10,8&10D@7,8+1,6+2,4+3,7+4,1+5,3+6,2+6,8+7,4+8,4+9,1+10,5&10F@1,7+3,8+4,9+5,4+5,8+7,9+8,3+10,2+10,4;TO-K2_12@2,5&K2_11@9,6;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "GERBER C-T10-12C#AFRA-12E@1,1+2,9+3,3+4,3+5,6+7,2+7,3+9,2+9,8+10,1&8B@1,2+1,9+2,8+3,4+4,4+5,2+5,7+6,1+7,1+7,7+8,1+9,3&10E@1,3+2,3+2,6+3,2+4,2+6,9+7,6+8,7+9,9+10,3&12F@1,4+2,7+3,5+4,6+4,8+5,5+6,6+7,5+8,5+10,6+10,8&10D@7,8+1,6+2,4+3,7+4,1+5,3+6,2+6,8+7,4+8,4+9,1+10,5&10F@1,7+3,8+4,9+5,4+5,8+7,9+8,3+10,2+10,4;TO-K2_12@2,5&K2_11@9,6";
//                        $teacher_timetable_load[] = "HAAR H-D8-8C#MATH-12F@1,1+1,9+2,9+3,3+3,7+4,3+5,4+5,6+6,4+8,4+9,2+9,8+10,4&11A@1,2+2,1+2,8+3,5+4,7+5,1+5,9+6,1+7,2+7,3+8,9+9,7+10,6&10D@1,3+2,3+2,6+3,2+4,2+4,9+6,9+7,9+8,5+9,6+9,9+10,1+10,2&12E@1,4+2,2+3,1+4,6+4,8+5,5+5,7+6,7+7,4+7,8+8,3+10,8&11B@1,8+3,4+3,6+4,4+5,2+6,3+6,8+7,1+7,7+8,2+8,8+9,3+10,5;SAAL-SAAL@1,5@1,5+6,5;BYBEL-SAAL@4,5+9,5;TO-K2_12@1,6";
// Not Loading            $teacher_timetable_load[] = "HAAR H-D8-8C#MATH-12F@1,1+1,9+2,9+3,3+3,7+4,3+5,4+5,6+6,4+8,4+9,2+9,8+10,4&11A@1,2+2,1+2,8+3,5+4,7+5,1+5,9+6,1+7,2+7,3+8,9+9,7+10,6&10D@1,3+2,3+2,6+3,2+4,2+4,9+6,9+7,9+8,5+9,6+9,9+10,1+10,2&12E@1,4+2,2+3,1+4,6+4,8+5,5+5,7+6,7+7,4+7,8+8,3+10,8&11B@1,8+3,4+3,6+4,4+5,2+6,3+6,8+7,1+7,7+8,2+8,8+9,3+10,5";
//                        $teacher_timetable_load[] = "KATZEKE M-F6-11E#NW_L-9D@1,1+8,6+6,8+8,9&9G@9,1+7,2+1,6+9,9&9F@8,2+2,3+10,3+6,4&9B@4,3+3,6+1,7+6,7&9A@3,5+10,5+8,7+9,8&9E@7,5+4,6+10,7+2,9&9C@9,6+2,7+4,7;LFSC-K3_11@3,1+5,2+5,3+6,3+9,3+4,4+10,4+1,8+2,8+8,8+6,9+10,9&K4_11@4,1+6,1+4,2+6,2+9,2+10,2+8,3+2,5+5,6+7,6+1,9+3,9&K2_11@2,2+3,2+1,3+7,3+1,4+8,4+9,4+8,5+6,6+7,7+10,8+4,9;TEST-9@5,4+5,5;SAAL-SAAL@1,5+6,5;BYBEL-8@4,5+9,5";
//                        $teacher_timetable_load[] = "KATZEKE M-F6-11E#NW_L-9D@1,1+8,6+6,8+8,9&9G@9,1+7,2+1,6+9,9&9F@8,2+2,3+10,3+6,4&9B@4,3+3,6+1,7+6,7&9A@3,5+10,5+8,7+9,8&9E@7,5+4,6+10,7+2,9&9C@9,6+2,7+4,7;LFSC-K3_11@3,1+5,2+5,3+6,3+9,3+4,4+10,4+1,8+2,8+8,8+6,9+10,9&K4_11@4,1+6,1+4,2+6,2+9,2+10,2+8,3+2,5+5,6+7,6+1,9+3,9&K2_11@2,2+3,2+1,3+7,3+1,4+8,4+9,4+8,5+6,6+7,7+10,8+4,9;TEST-9Z@5,4+5,5";
//                        $teacher_timetable_load[] = "KOCH C-D17-9D#AFRH-8C@1,1+6,1+10,3+2,4+8,5+7,6+5,7+9,7+3,8+6,8+7,9+8,9&8E@2,1+7,1+4,2+6,2+10,3+2,4+8,5+7,6+5,7+9,7+3,8+6,8+7,9+8,9&10C@3,1+3,3+5,2+9,2+10,2+6,3+8,3+4,4+7,7+1,8+8,8+10,8&8G@4,1+4,3+5,5+2,6+5,6+4,7+8,7+9,8+1,9+3,9+9,9+10,9&8H@5,1+6,2+1,4+3,4+7,5+3,6+4,6+8,6+6,7+5,8+2,9+4,9&8A@8,1+9,1+1,2+2,3+3,3+5,3+6,4+9,4+3,5+10,6+7,8+5,9;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "KOCH C-D17-9D#AFRH-8C@1,1+6,1+10,3+2,4+8,5+7,6+5,7+9,7+3,8+6,8+7,9+8,9&8E@2,1+7,1+4,2+6,2+10,3+2,4+8,5+7,6+5,7+9,7+3,8+6,8+7,9+8,9&10C@3,1+3,3+5,2+9,2+10,2+6,3+8,3+4,4+7,7+1,8+8,8+10,8&8G@4,1+4,3+5,5+2,6+5,6+4,7+8,7+9,8+1,9+3,9+9,9+10,9&8H@5,1+6,2+1,4+3,4+7,5+3,6+4,6+8,6+6,7+5,8+2,9+4,9&8A@8,1+9,1+1,2+2,3+3,3+5,3+6,4+9,4+3,5+10,6+7,8+5,9";                        
//                        $teacher_timetable_load[] = "LAST A-TR1-TR1#LAP-9B@1,1+3,4+9,4+6,6&9C@6,1+1,4+8,4+10,9&9E@8,2+9,8+10,8+3,9&9A@4,3+7,4+10,6+5,8&9D@6,3+10,4+8,5+2,7&9@7,5+10,7+3,8+2,9;LAV-8G@3,1+8,3+1,7+5,7&8H@2,2+5,6+7,7+9,7&8E@3,2+2,4+4,7+9,9&8C@9,2+7,3+1,6+4,6&8B@10,2+1,3+8,8&8A@10,3+5,4+8,6+6,9&8@3,5+6,7+8,7+1,8;AGRM-K1_10@8,1+1,2+7,2+2,3+5,5+10,5+9,6+4,8+6,8+5,9+7,9+8,9;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "LAST A-TR1-N#LAP-9B@1,1+3,4+9,4+6,6&9C@6,1+1,4+8,4+10,9&9E@8,2+9,8+10,8+3,9&9A@4,3+7,4+10,6+5,8&9D@6,3+10,4+8,5+2,7&9@7,5+10,7+3,8+2,9;LAV-8G@3,1+8,3+1,7+5,7&8H@2,2+5,6+7,7+9,7&8E@3,2+2,4+4,7+9,9&8C@9,2+7,3+1,6+4,6&8B@10,2+1,3+8,8&8A@10,3+5,4+8,6+6,9&8@3,5+6,7+8,7+1,8;AGRM-K1_10@8,1+1,2+7,2+2,3+5,5+10,5+9,6+4,8+6,8+5,9+7,9+8,9";                     
//                        $teacher_timetable_load[] = "LABUSCHAGNE E-F3-TR1#IT-12@1,1+5,1+7,1+4,3+10,3+4,7+8,7+9,7+3,8+5,8+2,9&8U@1,3;ENGH-12D@3,1+7,2+6,3+9,3+4,4+10,4+7,5+4,6+1,8+2,8+8,8+6,8&11@8,1+9,1+1,2+2,4+3,4+6,4+5,5+10,6+4,8+5,9+7,9+9,9&12F@5,2+6,2+2,3+5,3+1,4+8,4+4,6+9,6+3,7+6,7+7,7+10,9;SAAL-SAAL@1,5+6,5;BYBEL@4,5+9,5";
//                        $teacher_timetable_load[] = "LABUSCHAGNE E-F3-TR1#IT-12Z@1,1+5,1+7,1+4,3+10,3+4,7+8,7+9,7+3,8+5,8+2,9&8U@1,3;ENGH-12D@3,1+7,2+6,3+9,3+4,4+10,4+7,5+4,6+1,8+2,8+8,8+6,8&11Z@8,1+9,1+1,2+2,4+3,4+6,4+5,5+10,6+4,8+5,9+7,9+9,9&12F@5,2+6,2+2,3+5,3+1,4+8,4+4,6+9,6+3,7+6,7+7,7+10,9"; 
//                        $teacher_timetable_load[] = "LAST N-G1-TR1#MATH-9B@2,1+8,1+3,2+9,3+10,5+2,7+5,7+7,7+1,8+6,8+10,8+5,9&9D@3,1+5,1+1,2+5,3+8,3+2,4+6,4+9,4+10,6+8,8+6,9+7,9;NW_L-8G@7,1+10,1+7,6+2,9&8E@9,1+7,5+9,7+1,9&8H@9,2+4,4+2,5&8A@2,6+6,7+8,9+9,9;TEST-9@5,4+5,5;SAAL-SAAL@1,5+6,5;BYBEL@4,5+9,5";
//                        $teacher_timetable_load[] = "LAST N-G1-TR1#MATH-9B@2,1+8,1+3,2+9,3+10,5+2,7+5,7+7,7+1,8+6,8+10,8+5,9&9D@3,1+5,1+1,2+5,3+8,3+2,4+6,4+9,4+10,6+8,8+6,9+7,9;NW_L-8G@7,1+10,1+7,6+2,9&8E@9,1+7,5+9,7+1,9&8H@9,2+4,4+2,5&8A@2,6+6,7+8,9+9,9;TEST-9Z@5,4+5,5";
//                        $teacher_timetable_load[] = "LEEUWNER M-D4-TR1#CAT-K3_12@3,1+9,1+3,4+6,4+3,5+8,6+10,6+1,7+2,7+5,7+7,8+9,9&K2_12@4,1+6,1+4,2+9,2+10,2+8,3+2,4+2,5+5,6+7,6+1,9+3,9&K1_10@8,1+1,2+7,2+2,3+5,5+10,5+9,6+4,8+6,8+5,9+8,9+9,9&K1_11@10,1+8,2+5,4+7,4+7,5+1,6+2,6+3,6+4,6+3,7+6,7+10,7&K2_11@2,2+3,2+1,3+7,3+1,4+8,4+9,4+8,5+6,6+7,7+10,8+4,9;RV-8C@6,2+1,8&8G@8,8+6,9;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "LEEUWNER M-D4-TR1#CAT-K3_12@3,1+9,1+3,4+6,4+3,5+8,6+10,6+1,7+2,7+5,7+7,8+9,9&K2_12@4,1+6,1+4,2+9,2+10,2+8,3+2,4+2,5+5,6+7,6+1,9+3,9&K1_10@8,1+1,2+7,2+2,3+5,5+10,5+9,6+4,8+6,8+5,9+8,9+9,9&K1_11@10,1+8,2+5,4+7,4+7,5+1,6+2,6+3,6+4,6+3,7+6,7+10,7&K2_11@2,2+3,2+1,3+7,3+1,4+8,4+9,4+8,5+6,6+7,7+10,8+4,9;RV-8C@6,2+1,8&8G@8,8+6,9";
//                        $teacher_timetable_load[] = "LE ROUX A-D15-10A#ENGA-11C@1,1+8,1+2,3+10,3+8,6+9,6+4,7+6,8+7,8+8,9&11B@2,1+7,2+3,5+10,5+1,7+5,7+8,7+9,7+3,8+9,8&12B@3,1+6,3+4,4+5,4+8,4+10,4+7,5+3,6+2,8+6,9&9C@5,1+3,2+9,2+10,2+4,3+7,4+2,5+8,5+6,6+5,8+1,9+3,9&12C@6,2+3,3+1,6+2,6+4,6+3,7+6,7+10,7+8,8+10,9&11Z@8,1+9,1+1,2+2,4+3,4+6,4+5,5+10,6+4,8+5,9+7,9+9,9;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "LE ROUX A-D15-10A#ENGA-11C@1,1+8,1+2,3+10,3+8,6+9,6+4,7+6,8+7,8+8,9&11B@2,1+7,2+3,5+10,5+1,7+5,7+8,7+9,7+3,8+9,8&12B@3,1+6,3+4,4+5,4+8,4+10,4+7,5+3,6+2,8+6,9&9C@5,1+3,2+9,2+10,2+4,3+7,4+2,5+8,5+6,6+5,8+1,9+3,9&12C@6,2+3,3+1,6+2,6+4,6+3,7+6,7+10,7+8,8+10,9&11Z@8,1+9,1+1,2+2,4+3,4+6,4+5,5+10,6+4,8+5,9+7,9+9,9";
//                        $teacher_timetable_load[] = "LE ROUX F-A2-N#AFRA-12D@8,1+2,3+5,3+1,4+5,5+9,6+6,7+6,8+8,9+10,9;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
                        //$teacher_timetable_load[] = "LE ROUX F-A2/L2-TR1#AFRA-12D@8,1+2,3+5,3+1,4+5,5+9,6+6,7+6,8+8,9+10,9";                      
//                        $teacher_timetable_load[] = "MAPHATA V-T4-10E#LO-8B@1,1+4,6+5,9&8D@1,2+6,2+&8F@5,3+10,3;XITH-K2_10@2,1+9,1+3,3+3,4+6,4+8,6+10,6+1,7+2,7+5,7+7,8+9,9&K2_12@4,1+6,1+4,2+9,2+10,2+8,3+2,4+2,5+5,6+7,6+1,9+3,9&K2_11@2,2+3,2+1,3+7,3+1,4+8,4+9,4+8,5+6,6+7,7+10.8+4,9&8%WVER@8,19%LO@4,3&8%PT@6,3&9%PT@7,4&9%ALG@9,3&8%LAV@3,579%LAP@7,5+10,7+3,8+2,9&8%GST@3,6&8%LO@9,6&8%ALGS@3,7&8%RV@2,8+4,8&9%RV@8,8+8,9&8%READ@10,1&9%READ@6,8&9%TEKN@5,8&9%LEES@6,9;TEST-9@5,4+5,5&TEST-8@10,4+10,5;SAAL@1,5+9,5;BYBEL@4,5+9,5";
//                        $teacher_timetable_load[] = "MAPHATA V-T4-10E#LO-8B@1,1+4,6+5,9&8D@1,2+6,2&8F@5,3+10,3;XITH-K2_10@2,1+9,1+3,3+3,4+6,4+8,6+10,6+1,7+2,7+5,7+7,8+9,9&K2_12@4,1+6,1+4,2+9,2+10,2+8,3+2,4+2,5+5,6+7,6+1,9+3,9&K2_11@2,2+3,2+1,3+7,3+1,4+8,4+9,4+8,5+6,6+7,7+10,8+4,9;XITH/WVER-8@8,1;XITH/READ-8@10,1&9@6,8;XITH/LO-9@4,3&8@9,6;XITH/PT-8@6,3&9@7,4;XITH/ALG-9@9,3;XITH/LAV-8@3,5+6,7+8,7+1,8;XITH/LAP-9@7,5+10,7+3,8+2,9;XITH/ALGS-8@3,7;XITH/GST-8@3,6;XITH/RV-8@2,8+4,8&9@8,8+8,9;XITH/TEKN-9@5,8;XITH/LEES-9@6,9;TEST-9@5,4+5,5&8@10,4+10,5";
//                        $teacher_timetable_load[] = "MARAIS W-TR1-N#MATH-11D@1,1+9,1+1,2+2,3+3,3+10,3+8,6+4,7+9,7+5,8+6,8+7,8+2,9&10A@4,1+6,1+4,2+5,2+7,3+8,3+1,4+2,4+3,5+8,5+7,6+10,9&9C@8,2+1,3+7,3+3,4+6,4+1,6+2,6+3,6+10,6+5,7+4,8+7,9&1OE@3,1+8,2+10,2+5,3+6,3+4,4+8,4+9,4+7,7+1,9+3,9+6,9;MATH/MML-11F@2,1+5,1+7,1+7,2+4,3+10,5+1,7+2,7+8,7+4,8+9,8+8,9;WIVR-8B@5,4;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
                        //$teacher_timetable_load[] = "MARAIS W-TR1-TR1#MATH-11D@1,1+9,1+1,2+2,3+3,3+10,3+8,6+4,7+9,7+5,8+6,8+7,8+2,9&10A@4,1+6,1+4,2+5,2+7,3+8,3+1,4+2,4+3,5+8,5+7,6+10,9&9C@8,2+1,3+7,3+3,4+6,4+1,6+2,6+3,6+10,6+5,7+4,8+7,9&1OE@3,1+8,2+10,2+5,3+6,3+4,4+8,4+9,4+7,7+1,9+3,9+6,9;MATH/MML-11F@2,1+5,1+7,1+7,2+4,3+10,5+1,7+2,7+8,7+4,8+9,8+8,9;WIVR-8B@5,4";
//                        $teacher_timetable_load[] = "MASETE G-D10-10F#SEPH-K2_10@2,1+9,1+3,3+3,4+6,4+8,6+10,6+1,7+2,7+5,7+7,8+9,9&K2_12@4,1+6,1+4,2+9,2+10,2+8,3+2,4+2,5+5,6+7,6+1,9+3,9&K2_11@2,2+3,2+1,3+7,3+1,4+8,4+9,4+8,5+6,6+7,7+10,8+4,9;SEPH/WVER-8@8,1;SEPH/READ-8@10,1&9@6,8;SEPH/LO-9@4,3;SEPH/PT-8@6,3&9@7,4;SEPH/ALG-9@9,3;SEPH/LAV-8@3,5+6,7+8,7+1,8;SEPH/LAP-9@7,5+10,7+3,8+2,9;SEPH/GST-8@3,6;SEPH/LO-8@9,6;SEPH/ALGS-8@3,7;SEPH/RV-8@2,8+4,8&9@8,8+9,9;SEPH/TEKN-9@5,8;SEPH/LEES-9@6,9;TEST-9@5,4+5,5;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "MASETE G-D10-10F#SEPH-K2_10@2,1+9,1+3,3+3,4+6,4+8,6+10,6+1,7+2,7+5,7+7,8+9,9&K2_12@4,1+6,1+4,2+9,2+10,2+8,3+2,4+2,5+5,6+7,6+1,9+3,9&K2_11@2,2+3,2+1,3+7,3+1,4+8,4+9,4+8,5+6,6+7,7+10,8+4,9;SEPH/WVER-8@8,1;SEPH/READ-8@10,1&9@6,8;SEPH/LO-9@4,3;SEPH/PT-8@6,3&9@7,4;SEPH/ALG-9@9,3;SEPH/LAV-8@3,5+6,7+8,7+1,8;SEPH/LAP-9@7,5+10,7+3,8+2,9;SEPH/GST-8@3,6;SEPH/LO-8@9,6;SEPH/ALGS-8@3,7;SEPH/RV-8@2,8+4,8&9@8,8+9,9;SEPH/TEKN-9@5,8;SEPH/LEES-9@6,9;TEST-9@5,4+5,5;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
                         //$teacher_timetable_load[] = "OLIVIER C-T9-11C#AFRH-9C@1,1+4,1+8,1+10,1+4,2+5,2+5,3+2,4+9,4+7,6+6,7+10,7&8D@3,1+10,2+8,3+9,3+7,4+5,5+1,6+3,8+4,8+9,8+2,9+7,9+8,9&8F@5,1+7,1+9,2+8,5+2,6+4,6+6,6+7,7+5,8+10,8+1,4&9D@6,1+6,2+1,3+1,4+4,4+8,4+2,5+3,5+9,6+4,7+10,9;HOSP-K2_10@2,1+9,1+3,3+3,4+6,4+8,6+10,6+1,7+2,7+5,7+7,8+9,9;LEES-9D@2,3&9A@6,3&9E@10,5&9B@9,7&9C@2,8&9%LEES@6,9";
//                        $teacher_timetable_load[] = "OLIVIER D-F1-11F#IGO-K4_12@1,1+5,1+7,1+4,3+10,3+4,7+8,7+9,7+3,8+5,8+9,8+2,9&K2_10@2,1+9,1+3,3+3,4+6,4+8,6+1,7+2,7+5,7+7,8+9,9&K3_11@3,1+5,2+5,3+6,3+9,3+4,4+10,4+1,8+2,8+8,8+6,9+10,9&K2_12@4,1+6,1+4,2+9,2+10,2+8,3+2,4+2,5+5,5+7,5+10,5+1,9+3,9&K1_10@8,1+1,2+7,2+2,3+5,5+10,5+9,6+4,8+6,8+5,9+7,9+8,9&K1_11@10,1+8,2+5,4+7,4+7,5+1,6+2,6+3,6+4,6+6,7+10,7;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "OLIVIER D-F1-11F#IGO-K4_12@1,1+5,1+7,1+4,3+10,3+4,7+8,7+9,7+3,8+5,8+9,8+2,9&K2_10@2,1+9,1+3,3+3,4+6,4+8,6+1,7+2,7+5,7+7,8+9,9&K3_11@3,1+5,2+5,3+6,3+9,3+4,4+10,4+1,8+2,8+8,8+6,9+10,9&K2_12@4,1+6,1+4,2+9,2+10,2+8,3+2,4+2,5+5,5+7,5+10,5+1,9+3,9&K1_10@8,1+1,2+7,2+2,3+5,5+10,5+9,6+4,8+6,8+5,9+7,9+8,9&K1_11@10,1+8,2+5,4+7,4+7,5+1,6+2,6+3,6+4,6+6,7+10,7";  
//                        $teacher_timetable_load[] = "OOSTHUIZEN S-D19-TR1#LFSC-K4_12@1,1+5,1+7,1+4,3+1,3+4,7+8,7+9,7+3,8+5,8+9,8+2,9&K3_12@2,1+9,1+3,6+3,5+8,6+10,6+1,7+2,7+7,8+9,9&K1_11@10,1+8,2+5,4+7,4+7,5+1,6+2,6+3,6+4,6+6,7+10,7&K1_12@1,2+2,2+3,2+1,3+7,3+9,4+8,5+6,6+4,8+10,8+4,9+7,9;SAAL-SAAL@2,5+6,5;BYBEL-SAAL@4,5+9,5";
//                          $teacher_timetable_load[] = "OOSTHUIZEN S-D19-TR1#LFSC-K4_12@1,1+5,1+7,1+4,3+1,3+4,7+8,7+9,7+3,8+5,8+9,8+2,9&K3_12@2,1+9,1+3,6+3,5+8,6+10,6+1,7+2,7+7,8+9,9&K1_11@10,1+8,2+5,4+7,4+7,5+1,6+2,6+3,6+4,6+6,7+10,7&K1_12@1,2+2,2+3,2+1,3+7,3+9,4+8,5+6,6+4,8+10,8+4,9+7,9";                       
                    //    $teacher_timetable_load[] = "PEROLD S-L5-TR1#AGRS-K4_10@1,1+5,1+7,1+4,3+10,3+4,7+8,7+9,7+3,8+5,8+9,8+9,8+2,9&K4_11@4,1+6,1+4,2+6,2+9,2+10,2+8,3+2,5+5,6+7,6+1,9+3,9&K1_12@1,1+2,1+3,1+1,2+7,2+9,3+6,6+4,8+10,8+4,9+8,9;AGRM-K3_12@2,1+9,1+3,4+6,4+3,5+8,6+10,6+1,7+2,7+5,7+7,8+9,9&K1_11@10,1+8,2+5,4+7,4+7,5+1,6+2,6+3,6+4,6+4,7+7,7+10,7;TEST-8@10,4+10,5;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "PEROLD S-L5-TR1#AGRS-K4_10@1,1+5,1+7,1+4,3+10,3+4,7+8,7+9,7+3,8+5,8+9,8+9,8+2,9&K4_11@4,1+6,1+4,2+6,2+9,2+10,2+8,3+2,5+5,6+7,6+1,9+3,9&K1_12@1,1+2,1+3,1+1,2+7,2+9,3+6,6+4,8+10,8+4,9+8,9;AGRM-K3_12@2,1+9,1+3,4+6,4+3,5+8,6+10,6+1,7+2,7+5,7+7,8+9,9&K1_11@10,1+8,2+5,4+7,4+7,5+1,6+2,6+3,6+4,6+4,7+7,7+10,7;TEST-8Z@10,4+10,5";
//                        $teacher_timetable_load[] = "PIRIE C-T20-9E#ENGH-9G@1,1+5,1+8,1+4,2+3,3+5,3+6,3+7,3+10,3+9,4+2,5+7,9&9F@2,1+4,1+10,1+6,2+9,2+1,6+5,6+2,7+3,7+4,7+7,8+5,9;NW_F-8B@6,1+7,1+2,3+7,6+9,6+10,7&8D@9,1+5,2+8,5+1,7&8F@1,2+3,2+6,4+8,6&8B@2,2+4,4+6,7+9,7&8C@8,2+5,4+3,5+7,7+10,8+3,9&8D@1,3+7,5+2,6+4,6+6,8+9,9&8C@4,3+5,5+8,8+1,9&8F@3,4+8,4+10,6+5,7+9,8+2,9;READ-9C@9,3&9A@1,8&9D@2,8;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "PIRIE C-T20-9E#ENGH-9G@1,1+5,1+8,1+4,2+3,3+5,3+6,3+7,3+10,3+9,4+2,5+7,9&9F@2,1+4,1+10,1+6,2+9,2+1,6+5,6+2,7+3,7+4,7+7,8+5,9;NW_F-8B@6,1+7,1+2,3+7,6+9,6+10,7&8D@9,1+5,2+8,5+1,7&8F@1,2+3,2+6,4+8,6&8B@2,2+4,4+6,7+9,7&8C@8,2+5,4+3,5+7,7+10,8+3,9&8D@1,3+7,5+2,6+4,6+6,8+9,9&8C@4,3+5,5+8,8+1,9&8F@3,4+8,4+10,6+5,7+9,8+2,9;READ-9C@9,3&9A@1,8&9D@2,8";
//                        $teacher_timetable_load[] = "POTGIETER Y-T14-TR1#SW_A-8A@1,1+4,6+8,7&8B@3,1+10,1+7,4&8D@4,1+7,3+1,4&8H@7,1+7,6+1,7&8G@8,1+2,7+4,8&8C@2,2+9,4+6,6&8F@1,3+9,7+8,9;ENGH-8D@2,1+7,2+8,2+9,2+4,3+5,3+4,5+6,5+10,7+1,9+3,9+5,9&8B@5,5+9,5+1,2+8,4+7,5+3,6+3,7+5,8+6,8+2,9+10,9&8F@6,1+10,2+8,3+2,4+1,6+5,6+4,7+3,8+7,8+6,9+7,9+9,9;LO-10E@4,2+2,8&10F@6,2+3,5&10D@6,3+9,3;TEST-9@5,4+5,5&8@10,4+10,5;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "POTGIETER Y-T14-TR1#SW_A-8A@1,1+4,6+8,7&8B@3,1+10,1+7,4&8D@4,1+7,3+1,4&8H@7,1+7,6+1,7&8G@8,1+2,7+4,8&8C@2,2+9,4+6,6&8F@1,3+9,7+8,9;ENGH-8D@2,1+7,2+8,2+9,2+4,3+5,3+4,5+6,5+10,7+1,9+3,9+5,9&8B@5,5+9,5+1,2+8,4+7,5+3,6+3,7+5,8+6,8+2,9+10,9&8F@6,1+10,2+8,3+2,4+1,6+5,6+4,7+3,8+7,8+6,9+7,9+9,9;LO-10E@4,2+2,8&10F@6,2+3,5&10D@6,3+9,3;TEST-9Z@5,4+5,5&8Z@10,4+10,5";
//                        $teacher_timetable_load[] = "PRINSLOO A-T8-TR1#LFSC-K4_10@1,1+5,1+7,1+4,3+10,3+4,7+8,7+9,7+3,8+5,8+9,8+2,9&K2_10@2,1+9,1+3,3+3,4+6,4+8,6+10,6+1,7+2,7+5,7+7,8+9,9&K1_10@8,1+1,2+7,2+2,3+5,5+10,5+9,6+4,8+6,8+5,9+8,9+9,9&K3_10@10,1+8,2+5,4+7,4+7,5+1,6+2,6+3,6+4,6+6,7+10,7;MATH-8A@4,1+6,1+6,2+10,2+6,3+9,3+2,5+7,6+8,8+10,8+1,9+3,9&8B@3,2+4,2+5,2+9,2+5,3+7,3+8,3+1,4+2,4+6,6+4,9+6,9;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "PRINSLOO A-T8-TR1#LFSC-K4_10@1,1+5,1+7,1+4,3+10,3+4,7+8,7+9,7+3,8+5,8+9,8+2,9&K2_10@2,1+9,1+3,3+3,4+6,4+8,6+10,6+1,7+2,7+5,7+7,8+9,9&K1_10@8,1+1,2+7,2+2,3+5,5+10,5+9,6+4,8+6,8+5,9+8,9+9,9&K3_10@10,1+8,2+5,4+7,4+7,5+1,6+2,6+3,6+4,6+6,7+10,7;MATH-8A@4,1+6,1+6,2+10,2+6,3+9,3+2,5+7,6+8,8+10,8+1,9+3,9&8B@3,2+4,2+5,2+9,2+5,3+7,3+8,3+1,4+2,4+6,6+4,9+6,9";
                       // $teacher_timetable_load[] = "JOUBERT T-TR1-TR1#PT/PTAC-8@3,1+8,3;PT/PTBH-8Z@5,1+9,3;PT-9E@3,2;PT/PTEF-11Z@3,3&12Z@10,4&10@8,8;PT/PTCD-10@5,3+9,7;PT/PT-8Z@6,3&9Z@7,4;PT/PTAB-9Z@7,3+2,4&12Z@7,7&10@2,8;PT/PTDF-8@2,5;PT/PTCD-11@5,5&12@10,5&9@4,6+9,7;PT/PTEG-8@9,6+7,9;PT/PTFG-9@4,8;PT/ABPT-11@5,9";
                        //$teacher_timetable_load[] = "RAUTENBACH Y-D12-11B#BSTD-K4_10@1,1+5,1+7,1+4,3+10,3+4,7+8,7+9,7+3,8+5,8+9,8+2,9&K3_12@2,1+9,1+3,4+5,4+3,5+8,6+10,6+1,7+2,7+5,7+7,8+9,9&K2_12@4,1+6,1+4,2+9,2+10,2+8,3+2,4+3,5+5,6+7,6+1,9+3,9&K1_10@8,1+1,2+7,2+2,3+5,5+10,5+9,6+4,8+6,8+5,9+7,9+8,9&K3_10@10,1+8,2+5,4+7,4+7,5+1,6+2,6+3,6+4,6+3,7+6,7+10,7;EBW-9D@3,1+8,4+6,6+10,9&9F@2,2+5,2+9,4+7,7;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "RAUTENBACH Y-D12-11B#BSTD-K4_10@1,1+5,1+7,1+4,3+10,3+4,7+8,7+9,7+3,8+5,8+9,8+2,9&K3_12@2,1+9,1+3,4+5,4+3,5+8,6+10,6+1,7+2,7+5,7+7,8+9,9&K2_12@4,1+6,1+4,2+9,2+10,2+8,3+2,4+3,5+5,6+7,6+1,9+3,9&K1_10@8,1+1,2+7,2+2,3+5,5+10,5+9,6+4,8+6,8+5,9+7,9+8,9&K3_10@10,1+8,2+5,4+7,4+7,5+1,6+2,6+3,6+4,6+3,7+6,7+10,7;EBW-9D@3,1+8,4+6,6+10,9&9F@2,2+5,2+9,4+7,7";
//                        $teacher_timetable_load[] = "SCHOEMAN A-T13-8F#ENGH-11D@2,1+5,1+7,1+7,2+4,3+10,5+9,6+1,7+2,7+8,7+9,8+8,9&12E@3,1+6,2+8,2+3,3+5,4+7,4+1,6+4,6+6,7+10,7+2,8+8,8&10E@2,2+3,2+5,2+7,3+9,3+3,5+8,5+5,6+6,6+1,8+4,9+10,9&10F@4,2+1,3+6,3+1,4+4,4+8,4+9,4+10,4+7,7+10,8+6,9;ENGH/EFENG-11@1,2+2,4+3,4+6,4+5,5+10,6+4,8+5,9+7,9+9,9;READ-9E@10,3&9@6,8;SAAL@1,5+6,5;BYBEL@4,5+9,5;LEES-8B@2,6&8%READ@10,1";
//    $teacher_timetable_load[] = "SCHOEMAN A-T13-8F#ENGH-11D@2,1+5,1+7,1+7,2+4,3+10,5+9,6+1,7+2,7+8,7+9,8+8,9&12E@3,1+6,2+8,2+3,3+5,4+7,4+1,6+4,6+6,7+10,7+2,8+8,8&10E@2,2+3,2+5,2+7,3+9,3+3,5+8,5+5,6+6,6+1,8+4,9+10,9&10F@4,2+1,3+6,3+1,4+4,4+8,4+9,4+10,4+7,7+10,8+6,9";
//                        $teacher_timetable_load[] = "SEERANE J-T21-TR1#TEGN-8E@1,1+8,3+5,5&8A@2,1+9,6+3,8&8D@6,1+3,4+9,7&8F@9,1+7,5+1,7&8H@10,1+4,3+7,3&8B@6,2+3,3+9,9&8G@9,3+6,4+3,5&8A@9,6+3,8&8C@9,8+2,9+9,9;MLIT/MML-10E@3,1+9,2+10,2+5,3+6,3+4,4+8,4+9,4+2,5+7,7+1,9+3,9+6,9;TEKN-8C@4,1+7,2+10,6&8E@8,1+1,2+5,2&8H@3,2+2,4+8,5&8F@4,2+7,6&8B@8,2+1,6+5,6&8G@2,3+5,4+3,6&8A@7,4+7,9&8D@2,7;TEKN/ALGS-8@3,7;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "SEERANE J-T21-TR1#TEGN-8E@1,1+8,3+5,5&8A@2,1+9,6+3,8&8D@6,1+3,4+9,7&8F@9,1+7,5+1,7&8H@10,1+4,3+7,3&8B@6,2+3,3+9,9&8G@9,3+6,4+3,5&8A@9,6+3,8&8C@9,8+2,9+9,9;MLIT-10E@3,1+9,2+10,2+5,3+6,3+4,4+8,4+9,4+2,5+7,7+1,9+3,9+6,9;TEKN-8C@4,1+7,2+10,6&8E@8,1+1,2+5,2&8H@3,2+2,4+8,5&8F@4,2+7,6&8B@8,2+1,6+5,6&8G@2,3+5,4+3,6&8A@7,4+7,9&8D@2,7;ALGS-8@3,7";
// Correct Script         $teacher_timetable_load[] = "STANDER S-D16-10B#MATH/MML-11E@1,1+2,1+7,1+10,3+3,5+8,6+2,7+4,7+5,7+9,7+3,8+7,8+9,8&12D@10,1+6,2+8,2+3,3+5,4+7,4+1,6+2,6+4,6+3,7+7,7+10,7+5,9;WWG-10B@3,1+2,2+3,2+9,2+10,2+1,3+7,3+9,4+2,5+8,8+3,9&10F@4,1+6,1+5,2+8,3+9,3+2,4+8,5+1,8+2,8+1,9+10,9&12A@8,1+7,2+2,3+5,3+6,3+1,4+4,4+8,4+10,4+5,5+10,5+9,6+6,8;WIVR-8A@4,2;SAAL@1,5+6,5;BYBEL@4,5+9,5";
// Correct Script         $teacher_timetable_load[] = "STEYN M-A1-N#CAT-K4_10@1,1+5,1+7,1+4,3+10,3+4,7+8,7+9,7+3,8+5,8+9,8+2,9&K4-10@10,1+8,2+5,4+7,4+7,5+1,6+2,6+3,6+4,6+3,7+10,7;IT-K2_10LAB1@2,1+9,1+3,3+3,4+6,4+8,6+10,6+1,7+2,7+5,7+7,8+9,9&K2-11LAB1@2,2+3,2+1,3+7,3+1,4+8,4+9,4+8,5+6,6+7,7+10,8+4,9;RV-8B@8,1+10,4+2,5+6,9&9D@4,2+5,9&9A@10,2+5,3&9C@6,3+10,5&9E@2,4+7,6&8H@6,8+1,9&9%RV@8,8+8,9;SAAL@1,5+6,5;BYBEL@4,5+9,5";
//                        $teacher_timetable_load[] = "STREICHER Y-T18-8D#ENGA-9A@1,1+7,1+2,2+3,3+10,4+4,7+5,7+9,7+4,8+6,8+5,9+8,9&9E@2,1+8,1+9,1+7,2+9,2+4,3+3,6+10,6+1,7+2,7+5,8+8,8&10D@3,1+4,1+10,2+1,3+8,3+1,4+2,4+6,6+7,6+6,9&9B@5,1+10,1+1,2+2,3+5,4+3,7+8,7+10,7+3,8+7,8+7,9+9,9&10C@6,1+7,3+9,4+2,5+3,5+8,5+2,8+3,9+4,9+10,9&10B@5,2+6,2+5,3+9,3+4,4+8,4+10,4+7,7+1,8+1,9;TEST-9@5,4+5,5;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "STREICHER Y-T18-8D#ENGA-9A@1,1+7,1+2,2+3,3+10,4+4,7+5,7+9,7+4,8+6,8+5,9+8,9&9E@2,1+8,1+9,1+7,2+9,2+4,3+3,6+10,6+1,7+2,7+5,8+8,8&10D@3,1+4,1+10,2+1,3+8,3+1,4+2,4+6,6+7,6+6,9&9B@5,1+10,1+1,2+2,3+5,4+3,7+8,7+10,7+3,8+7,8+7,9+9,9&10C@6,1+7,3+9,4+2,5+3,5+8,5+2,8+3,9+4,9+10,9&10B@5,2+6,2+5,3+9,3+4,4+8,4+10,4+7,7+1,8+1,9;TEST-9Z@5,4+5,5";                       
//                        $teacher_timetable_load[] = "TERBLANCHE G-D14-TR1#AFRA-11F@1,1+2,3+10,3+3,5+8,6+4,7+5,7+9,7+6,8+7,8&9G@2,1+10,1+3,2+5,2+6,2+9,2+8,5+2,7+3,7+7,7+1,9+4,9&9F@3,1+10,2+1,3+7,3+8,4+2,5+2,6+3,6+4,6+1,8+9,8+10,8&11E@5,1+7,2+4,310,5+9,6+1,7+8,7+5,8+2,9+8,9&9E@7,1+2,2+4,2+3,3+8,3+1,4+7,4+9,4+10,4+5,6+6,6+6,9&11D@8,1+2,4+3,4+6,4+10,6+3,8+4,8+5,9+7,9+9,9;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                        $teacher_timetable_load[] = "TERBLANCHE G-D14-TR1#AFRA-11F@1,1+2,3+10,3+3,5+8,6+4,7+5,7+9,7+6,8+7,8&9G@2,1+10,1+3,2+5,2+6,2+9,2+8,5+2,7+3,7+7,7+1,9+4,9&9F@3,1+10,2+1,3+7,3+8,4+2,5+2,6+3,6+4,6+1,8+9,8+10,8&11E@5,1+7,2+4,3+10,5+9,6+1,7+8,7+5,8+2,9+8,9&9E@7,1+2,2+4,2+3,3+8,3+1,4+7,4+9,4+10,4+5,6+6,6+6,9&11D@8,1+2,4+3,4+6,4+10,6+3,8+4,8+5,9+7,9+9,9";
//                        $teacher_timetable_load[] = "VAN DER MERWE M-L2-N#BSTD-K1_12@1,2+2,2+3,2+1,3+7,3+9,4+8,5+7,6+4,8+10,8+4,9+7,9;TEST-9@5,4+5,5&8@10,4+10,5;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                         $teacher_timetable_load[] = "VAN DER MERWE M-L2-TR1#BSTD-K1_12@1,2+2,2+3,2+1,3+7,3+9,4+8,5+7,6+4,8+10,8+4,9+7,9;TEST-9Z@5,4+5,5&8Z@10,4+10,5";
//                        $teacher_timetable_load[] = "VAN DER WESTHUIZEN A-TR1-N#ENGA-8G@1,1+6,1+6,2+3,3+10,3+2,4+9,4+8,5+4,6+7,7+5,8+10,8&8C@2,1+1,2+4,2+10,2+9,3+4,4+7,4+8,4+5,6+2,7+6,7+6,9&8E@3,1+4,1+5,1+5,3+6,4+2,5+3,6+7,6+8,6+1,7+4,9+8,9&8A@7,1+3,2+8,2+9,2+1,3+1,4+3,4+4,7+4,8+6,8+2,9+10,9&8H@8,1+7,2+5,4+3,5+6.6+9,6+10,6+1,8+3,8+8,8+5,9+7,9&9D@9,1+10,1+4,3+8,3+7,5+2,6+5,7+10,7+7,8+9,8+1,9+3,9;SAAL@1,5+6,5;BYBEL@4,5+9,5";
//                         $teacher_timetable_load[] = "VAN DER WESTHUIZEN A-N-TR1#ENGA-8G@1,1+6,1+6,2+3,3+10,3+2,4+9,4+8,5+4,6+7,7+5,8+10,8&8C@2,1+1,2+4,2+10,2+9,3+4,4+7,4+8,4+5,6+2,7+6,7+6,9&8E@3,1+4,1+5,1+5,3+6,4+2,5+3,6+7,6+8,6+1,7+4,9+8,9&8A@7,1+3,2+8,2+9,2+1,3+1,4+3,4+4,7+4,8+6,8+2,9+10,9&8H@8,1+7,2+5,4+3,5+6,6+9,6+10,6+1,8+3,8+8,8+5,9+7,9&9D@9,1+10,1+4,3+8,3+7,5+2,6+5,7+10,7+7,8+9,8+1,9+3,9";                        
//                        $teacher_timetable_load[] = "VERSTER E-F4-8G#ACCN-K4_10@1,1+5,1+7,1+4,3+10,3+4,7+8,7+9,7+3,8+5,8+9,8+2,9&K1@8,1+1,2+7,2+2,3+5,5+10,5+9,6+4,8+6,8+5,9+7,9+8,9;NW_F-9D@2,1+3,2+5,2+7,4+3,6+1,7&9B@4,1+6,3+8,4+3,5+10,6+1,9&9A@6,1+4,2+9,3+7,7+10,7+2,8&9C@10,1+2,2+7,5+5,6+1,8+8,8+&9G@10,2+8,3+2,6+6,7+10,8+3,9&9E@1,3+1,6+3,7+7,8+4,9+9,9&9F@3,3+1,4+3,4+6,6+8,6+10,9;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                         $teacher_timetable_load[] = "VERSTER E-F4-8G#ACCN-K4_10@1,1+5,1+7,1+4,3+10,3+4,7+8,7+9,7+3,8+5,8+9,8+2,9&K1@8,1+1,2+7,2+2,3+5,5+10,5+9,6+4,8+6,8+5,9+7,9+8,9;NW_F-9D@2,1+3,2+5,2+7,4+3,6+1,7&9B@4,1+6,3+8,4+3,5+10,6+1,9&9A@6,1+4,2+9,3+7,7+10,7+2,8&9C@10,1+2,2+7,5+5,6+1,8+8,8&9G@10,2+8,3+2,6+6,7+10,8+3,9&9E@1,3+1,6+3,7+7,8+4,9+9,9&9F@3,3+1,4+3,4+6,6+8,6+10,9";
//                        $teacher_timetable_load[] = "VENTER A-D6-TR1#PHSC-K3_12@2,1+9,1+3,4+6,4+3,5+8,6+10,6+1,7+2,7+5,7+7,8+9,9&K2-12@4,1+6,1+4,2+9,2+10,2+8,3+2,4+2,5+5,6+7,6+1,9+3,9&K1-11@10,1+5,4+7,4+7,5+1,6+2,6+3,6+4,6+7,7+10,7+&K2-11@2,2+3,2+8,2+1,3+7,3+1,4+8,4+9,4+8,5+6,6+7,7+10,8+4,9;TEST-8@10,4+10,5;SAAL@1,5+6,5;BYBEL@4,5+9,5";
//                         $teacher_timetable_load[] = "VENTER A-D6-TR1#PHSC-K3_12@2,1+9,1+3,4+6,4+3,5+8,6+10,6+1,7+2,7+5,7+7,8+9,9&K2-12@4,1+6,1+4,2+9,2+10,2+8,3+2,4+2,5+5,6+7,6+1,9+3,9&K1-11@10,1+5,4+7,4+7,5+1,6+2,6+3,6+4,6+7,7+10,7&K2-11@2,2+3,2+8,2+1,3+7,3+1,4+8,4+9,4+8,5+6,6+7,7+10,8+4,9;TEST-8Z@10,4+10,5";
//                        $teacher_timetable_load[] = "VERMAAK R-D11-12A#MATH-8D@1,12,2+3,2+4,2+3,3+10,3+9,4+6,6+7,7+5,8+8,8+6,9&9A@2,1+9,1+10,1+6,2+9,2+8,4+7,5+1,6+5,6+2,7+3,7+4,9&9E@3,1+5,2+10,2+7,3+6,4+2,5+8,5+5,7+1,8+3,8+7,9+8,9&9G@4,1+6,1+1,3+2,4+3,4+8,6+9,6+10,6+9,7&9F@5,1+7,1+1,2+5,3+6,3+10,4+3,5+7,6+8,7+2,8+6,8+2,9+9,9&8F@8,2+2,3+4,3+9,3+1,4+4,4+5,4+7,4+10,7+3,9+10,9;SAAL@1,5+6,5;BYBEL24,5+9,5";
//                         $teacher_timetable_load[] = "VERMAAK R-D11-12A#MATH-8D@1,1+2,2+3,2+4,2+3,3+10,3+9,4+6,6+7,7+5,8+8,8+6,9&9A@2,1+9,1+10,1+6,2+9,2+8,4+7,5+1,6+5,6+2,7+3,7+4,9&9E@3,1+5,2+10,2+7,3+6,4+2,5+8,5+5,7+1,8+3,8+7,9+8,9&9G@4,1+6,1+1,3+2,4+3,4+8,6+9,6+10,6+9,7&9F@5,1+7,1+1,2+5,3+6,3+10,4+3,5+7,6+8,7+2,8+6,8+2,9+9,9&8F@8,2+2,3+4,3+9,3+1,4+4,4+5,4+7,4+10,7+3,9+10,9";
//                        $teacher_timetable_load[] = "VAN HEERDEN V-T19-12C#MLIT-11E@1,1+2,1+7,1+10,3+3,5+8,6+2,7+4,7+5,7+9,7+3,8+7,8+9,8&11C@5,1+9,1+3,3+4,3+2,4+3,2,4+3,4+6,4+10,6+1,7+8,7+5,8+2,9+9,9;EBW-8F@4,1+2,2+6,2+9,4&8F@6,3+8,4+3,9+6,9&8A@4,4+8,5+6,6+1,8&8D@5,6+7,5+10,8+4,9;ECON-K1_10@8,1+1,2+7,2+2,3+5,5+10,5+9,6+6,7+4,8+6,8+5,9+7,9+8,9&K3-10@10,1+8,2+5,4+7,4+7,5+1,6+2,6+3,6+4,6+3,7+10,7;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                         $teacher_timetable_load[] = "VAN HEERDEN V-T19-12C#MLIT-11E@1,1+2,1+7,1+10,3+3,5+8,6+2,7+4,7+5,7+9,7+3,8+7,8+9,8&11C@5,1+9,1+3,3+4,3+2,4+3,2+3,4+6,4+10,6+1,7+8,7+5,8+2,9+9,9;EBW-8F@4,1+2,2+6,2+9,4&8F@6,3+8,4+3,9+6,9&8A@4,4+8,5+6,6+1,8&8D@5,6+7,5+10,8+4,9;ECON-K1_10@8,1+1,2+7,2+2,3+5,5+10,5+9,6+6,7+4,8+6,8+5,9+7,9+8,9&K3-10@10,1+8,2+5,4+7,4+7,5+1,6+2,6+3,6+4,6+3,7+10,7";
//                        $teacher_timetable_load[] = "VAN GASS S-D13-TR1#MLIT-11F@2,1+5,5+7,1+7,2+4,3+10,5+9,6+1,7+2,7+8,7+3,8+9,8+8,9&12f@3,1+8,1+10,1+4,4+5,5+6,5+1,7+3,7+10,7+2,8+6,8+5,9+6,9&10D@6,1+2,2+3,2+6,2+9,2+7,3+9,4+10,4+8,5+10,8+1,9+3,9+4,9&11B@1,2+2,3+3,3+3,4+6,4+8,6+10,6+4,7+4,8+5,8+2,9+7,9+9,9&12B@5,2+8,2+5,3+9,3+1,4+7,4+2,6+4,6+3,7+6,7+1,8+8,8+10,9;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                         $teacher_timetable_load[] = "VAN GASS S-D13-TR1#MLIT-11F@2,1+5,5+7,1+7,2+4,3+10,5+9,6+1,7+2,7+8,7+3,8+9,8+8,9&12F@3,1+8,1+10,1+4,4+5,5+6,5+1,7+3,7+10,7+2,8+6,8+5,9+6,9&10D@6,1+2,2+3,2+6,2+9,2+7,3+9,4+10,4+8,5+10,8+1,9+3,9+4,9&11B@1,2+2,3+3,3+3,4+6,4+8,6+10,6+4,7+4,8+5,8+2,9+7,9+9,9&12B@5,2+8,2+5,3+9,3+1,4+7,4+2,6+4,6+3,7+6,7+1,8+8,8+10,9";
//                        $teacher_timetable_load[] = "VAN NIEKERK W-F2-11D#ECON-K4_12@1,1+5,1+7,1+4,3+10,3+4,7+8,7+9,7+3,8+5,8+9,8+2,9&K4_11@4,1+6,1+4,2+6,2+9,2+10,2+2,5+5,6+7,6+1,9+3,9&K1_11@10,1+8,2+5,4+7,4+1,6+2,6+3,6+4,6+3,7+6,7+10,7;EBWR-9F@8,1+6,2+5,5+10,6+1,7+5,7&9E@2,3+5,3+3,4+8,6+6,8+10,9&9G@4,4+6,4+10,4+1,8+2,8+5,9;SAAL@1,5+6,5;BYBEL@4,5+9,5";
//                         $teacher_timetable_load[] = "VAN NIEKERK W-F2-11D#ECON-K4_12@1,1+5,1+7,1+4,3+10,3+4,7+8,7+9,7+3,8+5,8+9,8+2,9&K4_11@4,1+6,1+4,2+6,2+9,2+10,2+2,5+5,6+7,6+1,9+3,9&K1_11@10,1+8,2+5,4+7,4+1,6+2,6+3,6+4,6+3,7+6,7+10,7;EBWR-9F@8,1+6,2+5,5+10,6+1,7+5,7&9E@2,3+5,3+3,4+8,6+6,8+10,9&9G@4,4+6,4+10,4+1,8+2,8+5,9";
                        //$teacher_timetable_load[] = "VOSLOO J-D2-N#GEOG-K4_10@2,1+1,8+3,9+4,7+5,9+6,1+8,1+8,9+9,3+9,4+10,7+5,1&K3_11@1,3+2,6+2,7+3,3+4,3+4,9+5,6+6,4+8,6+9,9+10,4+7,8&K1_12@1,7+2,3+3,3+3,6+4,2+5,3+6,2+6,3+8,2+9,6+10,3+3,2;SW_A-9E@1,4+5,2+8,8&9F@2,4+9,1+10,2&9D@2,5+5,8+6,9&9G@3,7+3,8+10,9;BYBEL-SAAL@4,5+9,5;SAAL-SAAL@1,5+6,5;TEST-9@5,4+5,5";
//                         $teacher_timetable_load[] = "VOSLOO J-D2-TR1#GEOG-K4_10@2,1+1,8+3,9+4,7+5,9+6,1+8,1+8,9+9,3+9,4+10,7+5,1&K3_11@1,3+2,6+2,7+3,3+4,3+4,9+5,6+6,4+8,6+9,9+10,4+7,8&K1_12@1,7+2,3+3,3+3,6+4,2+5,3+6,2+6,3+8,2+9,6+10,3+3,2+7,9;SW_A-9E@1,4+5,2+8,8&9F@2,4+9,1+10,2&9D@2,5+5,8+6,9&9G@3,7+3,8+10,9";
                       // $teacher_timetable_load[] = "VAN SCHALKWYK J-T11-12F#SK-8B@2,1+7,2&9C@3,1+8,7&8H@6,1+1,6&9D@7,1+9,3&8C@8,1+3,4&9F@9,1+9,7&8E@10,1+2,9&8A@4,3+2,4+7,5+10,7&9A@8,3+6,9&9B@1,4+9,8&8D@5,4+10,6&9E@2,6+4,7&9G@3,6+4,6&8G@1,8+6,8;SW_G-9E@4,1+1,2+5,9&9B@2,2+8,2+5,8&9D@10,3+10,8&9A@4,4+8,8,6+1,7&9C@10,4+8,9+9,9&9G@3,5+10,5+7,6&9F@8,5+4,9&9D@6,7+10,8;LO-8E@6,2+9,4+2,8&8G@10,2+7,4&8H@1,3+2,3+5,7&8C@3,3+5,3+2,5&8A@4,3+7,5+10,7&8@9,6;SAAL@1,5+6,5;BYBEL@4,5+9,5";
//                         $teacher_timetable_load[] = "VAN SCHALKWYK J-T11-12F#SK-8B@2,1+7,2&9C@3,1+8,7&8H@6,1+1,6&9D@7,1+9,3&8C@8,1+3,4&9F@9,1+9,7&8E@10,1+2,9&8A@4,3+2,4+7,5+10,7&9A@8,3+6,9&9B@1,4+9,8&8D@5,4+10,6&9E@2,6+4,7&9G@3,6+4,6&8G@1,8+6,8;SW_G-9E@4,1+1,2+5,9&9B@2,2+8,2+5,8&9D@10,3+10,8&9A@4,4+8,6+1,7&9C@10,4+8,9+9,9&9G@3,5+10,5+7,6&9F@8,5+4,9&9D@6,7+10,8;LO-8E@6,2+9,4+2,8&8G@10,2+7,4&8H@1,3+2,3+5,7&8C@3,3+5,3+2,5&8A@4,3+7,5+10,7&8@9,6";
                        //$teacher_timetable_load[] = "VAN STANDEN G-D5-9A#PHSC-10_K3@1,1+5,1+7,1+4,3+10,3+4,7+8,7+9,7+3,8+5,8+9,8+2,9&10K3@3,1+5,2+5,3+6,3+9,3+4,4+10,4+1,8+2,8+8,8+6,9+10,9+10,1+8,2+5,4+7,4+7,5+1,6+2,6+3,6+4,6+3,7+6,7+10,7&11K4@4,1+6,1+4,2+6,2+9,2+10,2+8,3+2,5+5,6+7,6+1,9+3,9&10K1@8,1+1,2+7,2+2,3+5,5+10,5+9,6+4,8+6,8+5,9+7,9+8,9;SAAL@1,5+6,5;BYBEL@4,5+9,5";
//                         $teacher_timetable_load[] = "VAN STANDEN G-D5-9A#PHSC-K3_10@1,1+5,1+7,1+4,3+10,3+4,7+8,7+9,7+3,8+5,8+9,8+2,9&K3_10@3,1+5,2+5,3+6,3+9,3+4,4+10,4+1,8+2,8+8,8+6,9+10,9+10,1+8,2+5,4+7,4+7,5+1,6+2,6+3,6+4,6+3,7+6,7+10,7&K4_11@4,1+6,1+4,2+6,2+9,2+10,2+8,3+2,5+5,6+7,6+1,9+3,9&K1_10@8,1+1,2+7,2+2,3+5,5+10,5+9,6+4,8+6,8+5,9+7,9+8,9";
                       // $teacher_timetable_load[] = "VAN WYK E-D9-8A#AFRH-12A@3,1+5,2+6,2+9,3+7,5+2,6+4,6+3,7+6,7+1,8+8,8+10,9&10B@4,1+6,1+4,2+8,3+1,4+2,4+3,5+8,5+5,6+7,6+10,8+4,9&12B@8,1+7,2+2,3+3,3+5,5+10,5+1,6+9,6+10,7+6,8+5,9+8,9&12C@10,1+8,2+5,3+6,3+4,4+5,4+7,4+10,4+3,6+7,7+2,8+6,9&10A@2,2+3,2+9,2+10,2+1,3+7,3+8,4+9,4+2,5+6,6+1,9+3,9;LEES-8A@5,1&8C@9,1&8H@10,3&8E@3,4;SAAL@1.5+6,5;BYBEL@4,5+9,5";
//                         $teacher_timetable_load[] = "VAN WYK E-D9-8A#AFRH-12A@3,1+5,2+6,2+9,3+7,5+2,6+4,6+3,7+6,7+1,8+8,8+10,9&10B@4,1+6,1+4,2+8,3+1,4+2,4+3,5+8,5+5,6+7,6+10,8+4,9&12B@8,1+7,2+2,3+3,3+5,5+10,5+1,6+9,6+10,7+6,8+5,9+8,9&12C@10,1+8,2+5,3+6,3+4,4+5,4+7,4+10,4+3,6+7,7+2,8+6,9&10A@2,2+3,2+9,2+10,2+1,3+7,3+8,4+9,4+2,5+6,6+1,9+3,9";
                      //  $teacher_timetable_load[] = "DREYER A-T17-TR1#EBW-8B@1,1+3,7+5,3+8,3&K3_12@1,2+6,7+10,9&8A@4,1+6,3+6,9+9,9&K1_11@4,5+4,8&K2_11@5,4+7,9+9,6&K2_12@5,8+8,7+10,2+10,5&K3_10@1,2+6,7+10,9&9A@1,3+4,7+8,9+9,7&8D@1,7+3,6+5,6+8,5&8C@1,9+4,4+6,2+8,1&8F@2,1+6,4&9F@9,4+4,6;TO-K4_11@1,6&K2_10@2,8+2,9;PT-9@2,4+3,4+5,7+7,7+8,4+10,6&8F@2,5&12P@2,6+8,6+10,4&11A@3,1&K1_12@3,2&8@3,3+4,2+7,3+9,1+10,3+10,8&11P@3,5+5,5&10P@3,8+7,3+7,6&8D@4,3+6,6&8F@4,3&9E@7,5;BYBEL-SAAL@4,5+9,5";
                       //$teacher_timetable_load[] = "DREYER A-T17-TR1#EBW-8B@1,1+3,7+5,3+8,3&K3_12@1,2+6,7+10,9&8A@4,1+6,3+6,9+9,9&K1_11@4,5+4,8&K2_11@5,4+7,9+9,6&K2_12@5,8+8,7+10,2+10,5&K3_10@1,2+6,7+10,9&9A@1,3+4,7+8,9+9,7&8D@1,7+3,6+5,6+8,5&8C@1,9+4,4+6,2+8,1&8F@2,1+6,4&9F@9,4+4,6;TO-K4_11@1,6&K2_10@2,8+2,9;PT-9@2,4+3,4+5,7+7,7+8,4+10,6&8F@2,5&12P@2,6+8,6+10,4&11A@3,1&K1_12@3,2&8@3,3+4,2+7,3+9,1+10,3+10,8&11P@3,5+5,5&10P@3,8+7,3+7,6&8D@4,3+6,6&8F@4,3&9E@7,5";
//                        $teacher_timetable_load[] = "HAY E-T5-9B#AFRH-11B@1,1+7,1+8,1+9,1+10,1+4,3+10,3+2,4+5,5+6,8+7,8+8,9&11C@2,1+1,2+7,2+3,5+10,5+2,7+5,7+9,7+3,8+4,8+9,8+5,9&9B@3,1+6,1+6,2+9,2+1,3+4,4+7,5+8,5+1,6+2,6+5,6+4,9&9A@4,1+5,2+8,2+10,4+2,5+3,6+7,6+6,7+8,8+10,8+1,9+3,9&11A@5,1+2,3+3,3+3,4+6,4+8,6+10,6+1,7+4,7+5,8+7,9+9,9;SAAL-SAAL@1,5+6,5;BYBEL-SAAL@4,5+9,5";
//                      $teacher_timetable_load[] = "HAY E-T5-9B#AFRH-11B@1,1+7,1+8,1+9,1+10,1+4,3+10,3+2,4+5,5+6,8+7,8+8,9&11C@2,1+1,2+7,2+3,5+10,5+2,7+5,7+9,7+3,8+4,8+9,8+5,9&9B@3,1+6,1+6,2+9,2+1,3+4,4+7,5+8,5+1,6+2,6+5,6+4,9&9A@4,1+5,2+8,2+10,4+2,5+3,6+7,6+6,7+8,8+10,8+1,9+3,9&11A@5,1+2,3+3,3+3,4+6,4+8,6+10,6+1,7+4,7+5,8+7,9+9,9";
                        
                         
                         
                         
                        //$teacher_subjects = array ();
                        //$teacher_rooms = array ();
                        $teachers = array ();
                        
                        foreach ($teacher_timetable_load as $lkey => $data_load) {
                                if (strpos($data_load, "#") !== FALSE){
                                $data_load_tokens = explode("#", $data_load);
                                //$count = count($data_load_tokens);
                                //echo $count;
                                if (strpos($data_load_tokens[0], "-") !== FALSE){
                                    //echo "TD ".$data_load_tokens[0]."<br>";
                                    $teacher_details = explode("-", $data_load_tokens[0]);
                                    //load teacher details into an array
                                    $teachers[] = array ('name_surname' => $teacher_details[0], 'room' => $teacher_details[1], 'register_class'=> $teacher_details[2]);
                                    //$teachers[] = array ('name_surname' => $teacher_details[0], 'room' => $teacher_details[1]);

                                    $tid = array_search(array ('name_surname' => $teacher_details[0], 'room' => $teacher_details[1], 'register_class'=> $teacher_details[2]), $teachers);
                                    //$tid = array_search(array ('name_surname' => $teacher_details[0], 'room' => $teacher_details[1]), $teachers);
                                    $sid = 0;
                                    $cid = 0;
                                    
                                    $teacher = $teachers[$tid]['name_surname'];
//                                    echo "<br> TID $tid TEACHER $teacher SID $sid CID $cid<br>";
                                    //exit;
                                     $missing_char = array ();
                                     $missing_char['found'] = FALSE;
                                     if (strpos($data_load_tokens[1], ";") !== FALSE){//SUBJECTS FILTER SVM:this strips the array 1 which holds only
                                         $subject_data_tokens = explode(";", $data_load_tokens[1]);
                                         //echo "number of subjects ".count($subject_data_tokens)."<br>";
                                         //print_r($subject_data_tokens);
                                         //echo "<br>";
                                         foreach($subject_data_tokens as $skey=>$subject_data_items){
                                             //echo "SUBJECT ITEMS $subject_data_items<br>";   //TSE DI SHARP DI SUBJECT
                                             //echo "number of subjects ".count($subject_data_tokens);
                                             //print_r($subject_data_tokens);
                                             
                                             if (strpos($subject_data_items, "&") !== FALSE){//CLASSES FILTER
                                                 //print_r($subject_data_tokens);
                                                 //$sid = -1;
                                                 $class_data_tokens = explode("&", $subject_data_items);
                                                  //echo "SUBJECT ITEMS $subject_data_items<br>";
                                                 //print_r($class_data_tokens); 
                                                 foreach($class_data_tokens as $ckey=>$class_data_items){
                                                     //echo "CLASS ITEMS $class_data_items <br>";
                                                     if (strpos($class_data_items, "@") !== FALSE){//CLASS SLOTS FILTER
                                                         
                                                         $slot_data_tokens = explode("@", $class_data_items);
                                                         //print_r($slot_data_tokens);
                                                         foreach($slot_data_tokens as $slkey=>$slot_data_items){
                                                             //echo "CKEY $ckey SLOTID $slkey ITEMS $slot_data_items TEACHER $teacher <br>";
                                                             if ($slkey == 0 && $ckey == 0){
                                                                 if (strpos($slot_data_items, "-") !== FALSE) {//SLOT ITEM FILTER
                                                                     $slot_item_tokens = explode("-", $slot_data_items);
                                                                     //FIRST ITEM IS SUBJECT ACRONYM
                                                                     if (!array_key_exists('subjects', $teachers[$tid])){
                                                                         $teachers[$tid]['subjects'] = array ();
                                                                         //$teacher[$tid]['subjects'] = array ();
                                                                     }
                                                                     //echo 'subjects: ';
                                                                     //print_r($slot_item_tokens);
                                                                     $teachers[$tid]['subjects'][] = array ('acronym'=>$slot_item_tokens[0]);
                                                                     $sid = array_search(array ('acronym'=>$slot_item_tokens[0]), $teachers[$tid]['subjects']);
                                                                     
                                                                     //$teacher[$tid]['classes'][$sid] = array ();
                                                                     $teachers[$tid]['subjects'][$sid]['classes'] = array ();
                                                                     //$teacher[$tid]['classes'][$sid]['classes']
                                                                     $teachers[$tid]['subjects'][$sid]['classes'][] = array ('class_label'=>$slot_item_tokens[1]);
                                                                     $cid = array_search(array ('class_label'=>$slot_item_tokens[1]),$teachers[$tid]['subjects'][$sid]['classes']);
                                                                     $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'] = array ();
                                                                     //echo "1 NEW FIRST SUBJECT ID $sid CLASS ID $cid FOR ".$slot_item_tokens[0]."<br>";
                                                                     
                                               	                  } else {
                                                                     $missing_char['found'] = TRUE;
                                                                     $missing_char['level'] = 'SLOT SUBJECT FILTER';
                                                                     $missing_char['key'] = $ckey;
                                                                     $missing_char['char'] = "'-'";
                                                                     $missing_char['teacher'] = $teacher;
                                                                     break;
                                                                 }
                                                             } elseif ($ckey > 0 && $slkey == 0){
                                                                 
                                                                 //echo 'subjects: ';
                                                                     //print_r($slot_item_tokens);
                                                                     //echo '<BR>';
                                                                 
                                                                 $teachers[$tid]['subjects'][$sid]['classes'][] = array ('class_label'=>$slot_data_items);
                                                                 $cid = array_search(array ('class_label'=>$slot_data_items),$teachers[$tid]['subjects'][$sid]['classes']);
                                                                 $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'] = array ();
//                                                                 echo "3 NEW CLASS ID $cid FOR $slot_data_items <br>";
                                                                 
                                                             } elseif (strpos($slot_data_items, "+") !== FALSE){
                                                                 $period_tokens = explode("+", $slot_data_items);
                                                                 foreach ($period_tokens as $pkey => $period_items) {
                                                                     //echo "PERIOD ITEMS $period_items <br>";
                                                                     if (strpos($period_items, ",") !== FALSE){
                                                                         $period_item_tokens = explode(",", $period_items);
                                                                         //echo "PERIOD ITEM $period_items <br>";
                                                                         if (count($period_item_tokens) == 2){
                                                                             $subject = $teachers[$tid]['subjects'][$sid]['acronym'];
                                                                             
                                                                     //        echo "PERIOD ITEM $period_items. $subject <br>";
                                                                             $class = $teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_label'];
                                                                             //echo "LOADING TIMETABLE SLOT $period_items SUBJECT $sid $subject CLASS $cid $class FOR $teacher <br>";
                                                                             $day = $period_item_tokens[0];
                                                                             $period = $period_item_tokens[1];
                                                                             
                                                                             if (!array_key_exists('timetable', $teachers[$tid])){
                                                                                 $teachers[$tid]['timetable'] = array ();
                                                                             }

                                                                             if (!array_key_exists($day, $teachers[$tid]['timetable'])){
                                                                                 $teachers[$tid]['timetable'][$day] = array ();
                                                                             }

                                                                             if (!array_key_exists($period, $teachers[$tid]['timetable'][$day])){
                                                                                 $teachers[$tid]['timetable'][$day][$period] = array();
                                                                             }

                                                                             $teachers[$tid]['timetable'][$day][$period] = "<b>$subject</b><br> $class";

                                                                             $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'][] = "$period_items";
                                                                             //print_r($teachers[$tid]);
//                                                                             if ($teacher == "Barnard K"){
//                                                                                print_r($teachers[$tid]);
//                                                                             }
                                                                             //exit;
//////
                                                                         } else {
                                                                             $missing_char['found'] = TRUE;
                                                                             $missing_char['level'] = 'PERIOD ITEM TOKENS FILTER';
                                                                             $missing_char['key'] = $pkey;
                                                                             $missing_char['char'] = "More than 2 ','";
                                                                             $missing_char['teacher'] = $teacher;
                                                                             break;
                                                                         }
                                                                     } else {
                                                                         $missing_char['found'] = TRUE;
                                                                         $missing_char['level'] = 'PERIOD ITEM FILTER';
                                                                         $missing_char['key'] = $pkey;
                                                                         $missing_char['char'] = "','";
                                                                         $missing_char['teacher'] = $teacher;
                                                                         break;
                                                                     }
                                                                 }
                                                                 if ($missing_char['found']){
                                                                     break;
                                                                 }
                                                             } elseif (strpos($slot_data_items, ",") !== FALSE){
                                                                 $period_item_tokens = explode(",", $slot_data_items);
//                                                                  echo "PERIOD ITEM $slot_data_items <br>";
                                                                 if (count($period_item_tokens) == 2){
                                                                     
                                                                     $subject = $teachers[$tid]['subjects'][$sid]['acronym'];
                                                                     //print_r($subject);
                                                                     //echo'<br>';
                                                                     $class = $teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_label'];
//                                                                     echo "LOADING TIMETABLE SLOT $period_items SUBJECT $sid $subject CLASS $cid $class FOR $teacher <br>";
                                                                     $day = $period_item_tokens[0];
                                                                     $period = $period_item_tokens[1];
                                                                     if (!array_key_exists('timetable', $teachers[$tid])){
                                                                         $teachers[$tid]['timetable'] = array ();
                                                                     }

                                                                     if (!array_key_exists($day, $teachers[$tid]['timetable'])){
                                                                         $teachers[$tid]['timetable'][$day] = array ();
                                                                     }

                                                                     if (!array_key_exists($period, $teachers[$tid]['timetable'][$day])){
                                                                         $teachers[$tid]['timetable'][$day][$period] = array();
                                                                     }

                                                                     //$teachers[$tid]['timetable'][$day][$period] = "<b>$subject</b><br>$class";
                                                                     $teachers[$tid]['timetable'][$day][$period] = "<b>$subject</b><br> $class";

                                                                     $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'][] = "$slot_data_items";
   
                                                                 } else {
                                                                     $missing_char['found'] = TRUE;
                                                                     $missing_char['level'] = 'PERIOD ITEM TOKENS FILTER';
                                                                     $missing_char['key'] = $pkey;
                                                                     $missing_char['char'] = "More than 2 ','";
                                                                     $missing_char['teacher'] = $teacher;
                                                                     break;
                                                                 }
                                                             } else {
                                                                 $missing_char['found'] = TRUE;
                                                                 $missing_char['level'] = 'SLOT PERIOD FILTER';
                                                                 $missing_char['key'] = $pkey;
                                                                 $missing_char['char'] = "','";
                                                                 $missing_char['teacher'] = $teacher;
                                                                 break;
                                                             }
                                                         }
                                                         if ($missing_char['found']){
                                                             break;
                                                         }                                              
                                                     } else {
                                                         $missing_char['found'] = TRUE;
                                                         $missing_char['level'] = 'CLASS SLOTS FILTER';
                                                         $missing_char['key'] = $ckey;
                                                         $missing_char['char'] = "'@'";
                                                         $missing_char['teacher'] = $teacher;
                                                         break;
                                                         //echo "INCOMPLETE TEACHER LOAD AT KEY $lkey FOR TEACHER $teacher - MISSING '@' FOR SUBJECT CLASS DATA $ckey<br>";
                                                     }
                                                 }
                                                 if ($missing_char['found']){
                                                     break;
                                                 }
                                             } elseif (strpos($subject_data_items, "@") !== FALSE){
                                                 //echo "sub items ";
                                                 //echo $subject_data_items."<br>";
                                                 $slot_data_tokens = explode("@", $subject_data_items);
                                                 //print_r ($slot_data_tokens);
                                                 foreach($slot_data_tokens as $slkey=>$slot_data_items){
                                                     //print_r ($slot_data_items);
                                                     //echo "CKEY $skey SLOTID $slkey ITEMS $slot_data_items TEACHER $teacher <br>";
                                                     if ($slkey == 0 && $skey == 0){
                                                         if (strpos($slot_data_items, "-") !== FALSE) {//SLOT ITEM FILTER
                                                             //print_r ($slot_data_items);
                                                             $slot_item_tokens = explode("-", $slot_data_items);
                                                             
                                                             //FIRST ITEM IS SUBJECT ACRONYM
                                                             if (!array_key_exists('subjects', $teachers[$tid])){
                                                                 $teachers[$tid]['subjects'] = array ();
                                                                 //$teacher[$tid]['subjects'] = array ();
                                                             }
                                                             //print_r($slot_item_tokens);
                                                             $teachers[$tid]['subjects'][] = array ('acronym'=>$slot_item_tokens[0]);
                                                             $sid = array_search(array ('acronym'=>$slot_item_tokens[0]), $teachers[$tid]['subjects']);
                                                             //$teacher[$tid]['classes'][$sid] = array ();
                                                             $teachers[$tid]['subjects'][$sid]['classes'] = array ();
                                                             //$teacher[$tid]['classes'][$sid]['classes']
                                                             $teachers[$tid]['subjects'][$sid]['classes'][] = array ('class_label'=>$slot_item_tokens[1]);
                                                             $cid = array_search(array ('class_label'=>$slot_item_tokens[1]),$teachers[$tid]['subjects'][$sid]['classes']);
                                                             $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'] = array ();
//                                                                     echo "1 NEW FIRST SUBJECT ID $sid CLASS ID $cid FOR ".$slot_item_tokens[0]."<br>";

                                                         } else {
                                                             $missing_char['found'] = TRUE;
                                                             $missing_char['level'] = 'SLOT SUBJECT FILTER';
                                                             $missing_char['key'] = $ckey;
                                                             $missing_char['char'] = "'-'";
                                                             $missing_char['teacher'] = $teacher;
                                                             break;
                                                         }
                                                     } elseif ($ckey > 0 && $slkey == 0){
                                                         if (strpos($slot_data_items, "-") !== FALSE) {//SLOT ITEM FILTER
                                                             //print_r ($slot_data_items);
                                                             $slot_item_tokens = explode("-", $slot_data_items);
                                                             
                                                             //FIRST ITEM IS SUBJECT ACRONYM
                                                             if (!array_key_exists('subjects', $teachers[$tid])){
                                                                 $teachers[$tid]['subjects'] = array ();
                                                                 //$teacher[$tid]['subjects'] = array ();
                                                             }
                                                             //print_r($slot_item_tokens);
                                                             $teachers[$tid]['subjects'][] = array ('acronym'=>$slot_item_tokens[0]);
                                                             $sid = array_search(array ('acronym'=>$slot_item_tokens[0]), $teachers[$tid]['subjects']);
                                                             //$teacher[$tid]['classes'][$sid] = array ();
                                                             $teachers[$tid]['subjects'][$sid]['classes'] = array ();
                                                             //$teacher[$tid]['classes'][$sid]['classes']
                                                             $teachers[$tid]['subjects'][$sid]['classes'][] = array ('class_label'=>$slot_item_tokens[1]);
                                                             $cid = array_search(array ('class_label'=>$slot_item_tokens[1]),$teachers[$tid]['subjects'][$sid]['classes']);
                                                             $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'] = array ();
//                                                                     echo "1 NEW FIRST SUBJECT ID $sid CLASS ID $cid FOR ".$slot_item_tokens[0]."<br>";
                                                         } else {
                                                             $missing_char['found'] = TRUE;
                                                             $missing_char['level'] = 'SLOT SUBJECT FILTER';
                                                             $missing_char['key'] = $ckey;
                                                             $missing_char['char'] = "'-'";
                                                             $missing_char['teacher'] = $teacher;
                                                             break;
                                                         }
//                                                         }
//                                                         $teachers[$tid]['subjects'][$sid]['classes'][] = array ('class_label'=>$slot_data_items);
//                                                         $cid = array_search(array ('class_label'=>$slot_data_items),$teachers[$tid]['subjects'][$sid]['classes']);
//                                                         $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'] = array ();
//                                                                 echo "HERE 3 NEW CLASS ID $cid FOR $slot_data_items <br>";
                                                     } elseif (strpos($slot_data_items, "+") !== FALSE){
                                                         $period_tokens = explode("+", $slot_data_items);
                                                         foreach ($period_tokens as $pkey => $period_items) {
//                                                                     echo "PERIOD ITEMS $period_items <br>";
                                                             if (strpos($period_items, ",") !== FALSE){
                                                                 $period_item_tokens = explode(",", $period_items);
                                                                 //echo "PERIOD ITEM $period_items <br>";
                                                                 if (count($period_item_tokens) == 2){
                                                                     $subject = $teachers[$tid]['subjects'][$sid]['acronym'];
                                                                     //echo "PERIOD ITEM $period_items. $subject <br>";
                                                                     $class = $teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_label'];
//                                                                     echo "LOADING TIMETABLE SLOT $period_items SUBJECT $sid $subject CLASS $cid $class FOR $teacher <br>";
                                                                     $day = $period_item_tokens[0];
                                                                     $period = $period_item_tokens[1];

                                                                     if (!array_key_exists('timetable', $teachers[$tid])){
                                                                         $teachers[$tid]['timetable'] = array ();
                                                                     }

                                                                     if (!array_key_exists($day, $teachers[$tid]['timetable'])){
                                                                         $teachers[$tid]['timetable'][$day] = array ();
                                                                     }

                                                                     if (!array_key_exists($period, $teachers[$tid]['timetable'][$day])){
                                                                         $teachers[$tid]['timetable'][$day][$period] = array();
                                                                     }

                                                                     $teachers[$tid]['timetable'][$day][$period] = "<b>$subject</b><br> $class";

                                                                     $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'][] = "$period_items";

//                                                                             if ($teacher == "Barnard K"){
//                                                                                print_r($teachers[$tid]);
//                                                                             }
                                                                     //exit;
//////
                                                                 } else {
                                                                     $missing_char['found'] = TRUE;
                                                                     $missing_char['level'] = 'PERIOD ITEM TOKENS FILTER';
                                                                     $missing_char['key'] = $pkey;
                                                                     $missing_char['char'] = "More than 2 ','";
                                                                     $missing_char['teacher'] = $teacher;
                                                                     break;
                                                                 }
                                                             } else {
                                                                 $missing_char['found'] = TRUE;
                                                                 $missing_char['level'] = 'PERIOD ITEM FILTER';
                                                                 $missing_char['key'] = $pkey;
                                                                 $missing_char['char'] = "','";
                                                                 $missing_char['teacher'] = $teacher;
                                                                 break;
                                                             }
                                                         }
                                                         if ($missing_char['found']){
                                                             break;
                                                         }
                                                     } elseif (strpos($slot_data_items, ",") !== FALSE){
                                                         $period_item_tokens = explode(",", $slot_data_items);
//                                                                  echo "PERIOD ITEM $slot_data_items <br>";
                                                         if (count($period_item_tokens) == 2){
                                                             $subject = $teachers[$tid]['subjects'][$sid]['acronym'];
                                                             $class = $teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_label'];
//                                                                     echo "LOADING TIMETABLE SLOT $period_items SUBJECT $sid $subject CLASS $cid $class FOR $teacher <br>";
                                                             $day = $period_item_tokens[0];
                                                             $period = $period_item_tokens[1];
                                                             if (!array_key_exists('timetable', $teachers[$tid])){
                                                                 $teachers[$tid]['timetable'] = array ();
                                                             }

                                                             if (!array_key_exists($day, $teachers[$tid]['timetable'])){
                                                                 $teachers[$tid]['timetable'][$day] = array ();
                                                             }

                                                             if (!array_key_exists($period, $teachers[$tid]['timetable'][$day])){
                                                                 $teachers[$tid]['timetable'][$day][$period] = array();
                                                             }

                                                             //$teachers[$tid]['timetable'][$day][$period] = "<b>$subject</b><br>$class";
                                                             $teachers[$tid]['timetable'][$day][$period] = "<b>$subject</b><br> $class";

                                                             $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'][] = "$slot_data_items";

                                                         } else {
                                                             $missing_char['found'] = TRUE;
                                                             $missing_char['level'] = 'PERIOD ITEM TOKENS FILTER';
                                                             $missing_char['key'] = $pkey;
                                                             $missing_char['char'] = "More than 2 ','";
                                                             $missing_char['teacher'] = $teacher;
                                                             break;
                                                         }
                                                     } else {
                                                         $missing_char['found'] = TRUE;
                                                         $missing_char['level'] = 'SLOT PERIOD FILTER';
                                                         $missing_char['key'] = $pkey;
                                                         $missing_char['char'] = "','";
                                                         $missing_char['teacher'] = $teacher;
                                                         break;
                                                     }
                                                 }
                                             } else {
                                                 $missing_char['found'] = TRUE;
                                                 $missing_char['level'] = 'SUBJECT FILTER';
                                                 $missing_char['key'] = $skey;
                                                 $missing_char['char'] = "'+'";
                                                 $missing_char['teacher'] = $teacher;
                                                 break;
                                                 //echo "INCOMPLETE TEACHER LOAD AT KEY $lkey FOR TEACHER $teacher <br>";
                                             }
                                             //echo "SKEY $skey<br>";
                                             //echo "CKEY $ckey SLOTID $slkey ITEMS $slot_data_items TEACHER $teacher <br>";
                                         }
                                         //exit;
                                         
                                     } elseif(strpos($data_load_tokens[1], "@") !== FALSE) {
                                         //the else
                                         $class_data_items = $data_load_tokens[1];
                                         $slot_data_tokens = explode("@", $class_data_items);
                                         foreach($slot_data_tokens as $slkey=>$slot_data_items){
                                             //echo "SLOT ITEMS CKEY $ckey SLOTID $slkey ITEMS $slot_data_items TEACHER $teacher <br>";
                                             if ($slkey == 0 && $skey == 0){
                                                 if (strpos($slot_data_items, "-") !== FALSE) {//SLOT ITEM FILTER
//                                                                     echo " ITEMS $class_data_items <br>";
                                                     $slot_item_tokens = explode("-", $slot_data_items);
                                                     //FIRST ITEM IS SUBJECT ACRONYM
                                                     if (!array_key_exists('subjects', $teachers[$tid])){
                                                         $teachers[$tid]['subjects'] = array ();
                                                         //$teacher[$tid]['subjects'] = array ();
                                                     }

                                                     $teachers[$tid]['subjects'][] = array ('acronym'=>$slot_item_tokens[0]);
                                                     $sid = array_search(array ('acronym'=>$slot_item_tokens[0]), $teachers[$tid]['subjects']);
                                                     //$teacher[$tid]['classes'][$sid] = array ();
                                                     $teachers[$tid]['subjects'][$sid]['classes'] = array ();
                                                     //$teacher[$tid]['classes'][$sid]['classes']
                                                     $teachers[$tid]['subjects'][$sid]['classes'][] = array ('class_label'=>$slot_item_tokens[1]);
                                                     $cid = array_search(array ('class_label'=>$slot_item_tokens[1]),$teachers[$tid]['subjects'][$sid]['classes']);
                                                     $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'] = array ();

//                                                                     echo "2 NEW FIRST SUBJECT ID $sid CLASS ID $cid FOR ".$slot_data_items[0]."<br>";

                                                 } else {
                                                     $missing_char['found'] = TRUE;
                                                     $missing_char['level'] = 'SLOT SUBJECT FILTER';
                                                     $missing_char['key'] = $ckey;
                                                     $missing_char['char'] = "'-'";
                                                     $missing_char['teacher'] = $teacher;
                                                     break;
                                                 }
                                             } elseif ($ckey > 0 && $slkey == 0){
                                                 $teachers[$tid]['subjects'][$sid]['classes'][] = array ('class_label'=>$slot_data_items);
                                                 $cid = array_search(array ('class_label'=>$slot_data_items),$teachers[$tid]['subjects'][$sid]['classes']);
                                                 $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'] = array ();
//                                                                 echo "NEW CLASS ID $cid FOR $slot_data_items <br>";
                                             } elseif (strpos($slot_data_items, "+") !== FALSE){
                                                 $period_tokens = explode("+", $slot_data_items);
                                                 foreach ($period_tokens as $pkey => $period_items) {
//                                                                     echo "PERIOD ITEMS $period_items <br>";
                                                     if (strpos($period_items, ",") !== FALSE){
                                                         $period_item_tokens = explode(",", $period_items);
                                                         if (count($period_item_tokens) == 2){

                                                            $subject = $teachers[$tid]['subjects'][$sid]['acronym'];
                                                            $class = $teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_label'];


//                                                                             echo "LOADING TIMETABLE SLOT $period_items SUBJECT $sid $subject CLASS $cid $class FOR $teacher <br>";

                                                             $day = $period_item_tokens[0];
                                                             $period = $period_item_tokens[1];
                                                             if (!array_key_exists('timetable', $teachers[$tid])){
                                                                 $teachers[$tid]['timetable'] = array ();
                                                             }

                                                             if (!array_key_exists($day, $teachers[$tid]['timetable'])){
                                                                 $teachers[$tid]['timetable'][$day] = array ();
                                                             }

                                                             if (!array_key_exists($period, $teachers[$tid]['timetable'][$day])){
                                                                 $teachers[$tid]['timetable'][$day][$period] = array();
                                                             }

                                                             $teachers[$tid]['timetable'][$day][$period] = "<b>$subject</b><br> $class";

                                                             $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'][] = "$period_items";

//                                                                             if ($teacher == "Barnard K"){
//                                                                                print_r($teachers[$tid]);
//                                                                             }
                                                             //exit;
//////
                                                         } else {
                                                             $missing_char['found'] = TRUE;
                                                             $missing_char['level'] = 'PERIOD ITEM TOKENS FILTER';
                                                             $missing_char['key'] = $pkey;
                                                             $missing_char['char'] = "More than 2 ','";
                                                             $missing_char['teacher'] = $teacher;
                                                             break;
                                                         }
                                                     } else {
                                                         $missing_char['found'] = TRUE;
                                                         $missing_char['level'] = 'PERIOD ITEM FILTER';
                                                         $missing_char['key'] = $pkey;
                                                         $missing_char['char'] = "','";
                                                         $missing_char['teacher'] = $teacher;
                                                         break;
                                                     }
                                                 }
                                                 if ($missing_char['found']){
                                                     break;
                                                 }
                                             } elseif (strpos($slot_data_items, ",") !== FALSE){
                                                 $period_item_tokens = explode(",", $slot_data_items);
                                                 //echo "PERIOD ITEM $slot_data_items <br>";
                                                 if (count($period_item_tokens) == 2){
                                                     $subject = $teachers[$tid]['subjects'][$sid]['acronym'];
                                                     $class = $teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_label'];
//                                                                     echo "LOADING TIMETABLE SLOT $period_items SUBJECT $sid $subject CLASS $cid $class FOR $teacher <br>";
                                                     $day = $period_item_tokens[0];
                                                     $period = $period_item_tokens[1];
                                                     if (!array_key_exists('timetable', $teachers[$tid])){
                                                         $teachers[$tid]['timetable'] = array ();
                                                     }

                                                     if (!array_key_exists($day, $teachers[$tid]['timetable'])){
                                                         $teachers[$tid]['timetable'][$day] = array ();
                                                     }

                                                     if (!array_key_exists($period, $teachers[$tid]['timetable'][$day])){
                                                         $teachers[$tid]['timetable'][$day][$period] = array();
                                                     }

                                                     $teachers[$tid]['timetable'][$day][$period] = "<b>$subject</b><br> $class";

                                                     $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'][] = "$period_items";

//
                                                 } else {
                                                     $missing_char['found'] = TRUE;
                                                     $missing_char['level'] = 'PERIOD ITEM TOKENS FILTER';
                                                     $missing_char['key'] = $pkey;
                                                     $missing_char['char'] = "More than 2 ','";
                                                     $missing_char['teacher'] = $teacher;
                                                     break;
                                                 }
                                             } else {
                                                 $missing_char['found'] = TRUE;
                                                 $missing_char['level'] = 'SLOT PERIOD FILTER';
                                                 $missing_char['key'] = $pkey;
                                                 $missing_char['char'] = "','";
                                                 $missing_char['teacher'] = $teacher;
                                                 break;
                                             }
                                         }

                                     } else {
                                         $missing_char['found'] = TRUE;
                                         $missing_char['level'] = 'CLASS SLOTS FILTER';
                                         $missing_char['key'] = $ckey;
                                         $missing_char['char'] = "'@'";
                                         $missing_char['teacher'] = $teacher;
                                         break;
                                     }
                                } else {
                                    $missing_char['found'] = TRUE;
                                     $missing_char['level'] = 'TEACHER DETAILS';
                                     $missing_char['key'] = $lkey;
                                     $missing_char['char'] = "'-'";
                                     $missing_char['teacher'] = $teacher;
                                     break;
                                    //echo "INCOMPLETE TEACHER LOAD AT KEY $lkey MISSING '-' IN THE <br>";
                                }
                            } else {
                                $missing_char['found'] = TRUE;
                                 $missing_char['level'] = 'TEACHER LOAD';
                                 $missing_char['key'] = $lkey;
                                 $missing_char['char'] = "'#'";
                                 $missing_char['teacher'] = $teacher;
                                 break;
                                //echo "INCOMPLETE TEACHER LOAD AT KEY $lkey MISSING '#'<br>";
                            }
                        } 

                        if ($missing_char['found']){
                             echo "INCOMPLETE TEACHER LOAD AT KEY ".$missing_char['key']." LEVEL ".$missing_char['level']." MISSING CHAR ".$missing_char['char']." FOR TEACHER ".$missing_char['teacher']."<b>";
                         } else {
                             /*FOR EACH TEACHER
                              * -- GET TEACHER ID FROM ACCESS PROFILE IF IT EXISTS - OTHERWISE CREATE IT
                              * -- USING THE TEACHER ID
                              * ------ CHECK IF TEACHER DETAILS ARE UPDATE TO DATE FOR YEAR
                              * ----------- IF THE SUBJECT/CLASS IN THE TIMETABLE IS NOT LOADED IN THE DETAILS TABLE - LOAD IT
                              * ---------------- FOREACH SUBJECT/CLASS
                              * -----------------------GET ITS ID - IF EXITS ELSE CREATE IT 
                              * ---------------- UPDATE SUBJECT / CLASS TIMETABLE
                              * ----------- FOR ALL SUBJECTS IN THE DETAILS TABLE NOT IN THE TIMETABLE REMOVE
                              * ------ GET THIS YEAR'S TIMETABLE ID IF NOT FOUND CREATE IT 
                              * 
                              */
                             
                             //print_r($teachers);
                             //exit;
                             $tnoid_count = 1;
                             $user_type = 4;
                             $temp_teachers = $teachers;
                             //GET YEAR ID IF EXISTS - OTHERWISE CREATE ONE
                             $year = date('Y');
                             $q = "SELECT year_id FROM schoollms_schema_userdata_school_year WHERE year_label = ?";
                             $q_data = array ($year);
                             $query = $link->prepare($q);
                             $query->execute($q_data);
                             $num_rows = count($query->fetchAll());
                             if ($num_rows == 1){
                                 $query->execute($q_data);
                                 $row = $query->fetch();
                                 $year_id = $row['year_id'];
                             } else {
                                 //ADD NEW YEAR
                                 
                             }
                             
                             //GET REGISTER CLASS
                             $subject_class_assigned = array ();
                             $subject_class_count = array();
                             foreach ($temp_teachers as $tid => $teacher_details) {
                                 $teacher = $teachers[$tid]['name_surname'];
                                 
                                 
                                 $subject_id = -1;
                                 //FIX SUBJECTS AND CLASSES
                                 //echo "CHECKING $teacher SUBJECTS <br>";
                                 if (!array_key_exists("subjects", $teacher_details)){
                                     continue;
                                 }
                                 
                                 //print_r($teacher_details["subjects"]);
                                 foreach($teacher_details["subjects"] as $sid=>$subject_details){
                                     $subject = $subject_details['acronym'];
                                     //echo "SUBJECT $subject <br>";
                                     foreach($subject_details['classes'] as $cid=>$class_details){
                                        $class = $class_details['class_label'];
                                        
                                        if (is_numeric($class)){
                                            continue;
                                        }
                                        //echo "S $subject CLASS $class <br>";
                                        $grade_number = -1;
                                        $subject_id_found = FALSE;
                                        foreach($school_subjects as $subjectkey=>$subjectdetails){
                                            //print_r($subjectdetails);
                                            //echo "<br>if ((strpos(strtoupper(".$subjectdetails['abrev']."), strtoupper($subject)) !== FALSE && strpos(strtoupper(".$subjectdetails['abrev']."), '/') !== FALSE && strpos(strtoupper($subject), '/') !== FALSE) || strtoupper($subject) == strtoupper(".$subjectdetails['abrev'].") || FULLNAME strtoupper($subject) == strtoupper(".$subjectdetails['name'].")";// && array_key_exists('id', $subjectdetails)){ </b><br>";
                                             if ((strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE && strpos(strtoupper($subjectdetails['abrev']), "/") !== FALSE && strpos(strtoupper($subject), "/") !== FALSE) || strtoupper($subject) == strtoupper($subjectdetails['abrev']) || strtoupper($subject) == strtoupper($subjectdetails['name']) && array_key_exists('id', $subjectdetails)){
                                                 if (strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE && strpos(strtoupper($subjectdetails['abrev']), "/") !== FALSE && strpos(strtoupper($subject), "/") !== FALSE && array_key_exists('id', $subjectdetails)){
                                                     $subject_id = $subjectdetails['id'];
                                                     $subject = $subjectdetails['name'];
                                                     $subject_abrev = $subjectdetails['name'];
                                                     $subject_id_found = TRUE;
                                                     break;
                                                 } elseif(strtoupper($subject) == strtoupper($subjectdetails['name']) && array_key_exists('id', $subjectdetails)){
                                                     $subject_id = $subjectdetails['id'];
                                                     $subject = $subjectdetails['name'];
                                                     $subject_abrev = $subjectdetails['name'];
                                                     $subject_id_found = TRUE;
                                                     break;
                                                 }                                                     
                                             } elseif(strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE || strtoupper($subject) == strtoupper($subjectdetails['abrev']) || strtoupper($subject) == strtoupper($subjectdetails['name']) && array_key_exists('id', $subjectdetails)){
                                                 $subject_abrev = $subjectdetails['name'];
                                             }
                                         }

                                         $class_id_found = FALSE;
                                         $class_number_found = 0;
                                         $class_abrev = "";
                                         if (count($school_classes) > 0){
                                             //$class = $teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_label'];
                                             if (strpos($class, "_") !== FALSE){
                                                //$subject = $teachers[$tid]['subjects'][$sid]['acronym'];
                                                $class_abrev = "$subject_abrev-$class";
                                             } else {
                                                $class_abrev = $class;
                                             }

//                                             echo "<b>FINDING NEW CLASS - IF CLASS NUMBER TAKEN FOR $class_abrev</b><br>";
                                             foreach($school_classes as $classkey=>$classdetails){
//                                                 echo "COMPARE SCHOOL CLASSES ABREV ".$classdetails['abrev']." CURRENT ABREV ".$class_abrev."<br>";
                                                 if (strcmp(strtoupper($classdetails['abrev']), strtoupper($class_abrev)) == 0){
                                                     
                                                     if (array_key_exists("$tid-$class_abrev", $subject_class_assigned)){
                                                         $class_number = $subject_class_assigned["$tid-$class_abrev"];
                                                         $class_assigned_tokens = explode(" ", $classdetails['class_label']);
                                                         $count_class_assigned = count($class_assigned_tokens);
                                                         $class_number_assigned = $class_assigned_tokens[$count_class_assigned-1];
//                                                         echo "CLASS NUMBER ASSIGNED $class_number_assigned == $class_number CLASS ABREV $class_abrev<br>";
                                                         if ((int) $class_number_assigned !== (int) $class_number || strpos($class_abrev, $class_number_assigned) !== FALSE){
                                                             if ((int) $class_number_assigned == (int) $class_number){
                                                                 $class_number_found = $class_number_assigned + 1;
                                                             } else {
                                                                $class_number_found = $class_number;
                                                             }
//                                                             $class_id_found = TRUE;
                                                             break;
                                                         }
                                                         
                                                         $class_id_found = TRUE;
                                                         $class_id = $classdetails['class_id'];
                                                         $class_label = $classdetails['class_label'];
                                                         $grade_number = $classdetails['grade_id'];
                                                         $class = $class_label;
//                                                         echo "CLASS $class ASSIGNED TO $tid ABREV $class_abrev CLASS NUMBER $class_number<br>";
                                                         break;
                                                     } else {
                                                         break;
                                                     }
                                                 }
                                             }
                                         }

                                         //GET SUBJECT DETAILS FROM LMS
                                         if (!$subject_id_found){
                                             $subject_found = FALSE;
                                             $subject_key = -1;
                                             foreach($school_subjects as $subjectkey=>$subjectdetails){
//                                                 echo "CHECK SUBJECT ABREV ".strtoupper($subjectdetails['abrev'])." SUBJECT ".strtoupper($subject)."<br>";
                                                 if ((strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE && strpos(strtoupper($subjectdetails['abrev']), "/") !== FALSE && strpos(strtoupper($subject), "/") !== FALSE) || strtoupper($subject) == strtoupper($subjectdetails['abrev']) || strtoupper($subject) == strtoupper($subjectdetails['name'])){
                                                     if (strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE && strpos(strtoupper($subjectdetails['abrev']), "/") !== FALSE && strpos(strtoupper($subject), "/") !== FALSE){
                                                         $subject = $subjectdetails['name'];
                                   	                      $subject_found = TRUE;
                                                         $subject_key = $subjectkey;
                                                         break;
                                                     } elseif(strtoupper($subject) == strtoupper($subjectdetails['name']) || strtoupper($subject) == strtoupper($subjectdetails['abrev'])){
                                                         $subject = $subjectdetails['name'];
                                                         $subject_found = TRUE;
                                                         $subject_key = $subjectkey;
                                          	               break;
                                                     } elseif(strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE){
//                                                         echo "CHECKING ABRVS <br>";
//                                                         $subjectdetails_tokens = explode(";", $subjectdetails['abrev']);
//                                                         $sdt_found = FALSE;
//                                                         foreach($subjectdetails_tokens as $sdtkey=>$sdt_item){
////                                                             echo "if (strtoupper($subject) == strtoupper($sdt_item)){<br>";
//                                                             if (strtoupper($subject) == strtoupper($sdt_item)){
                                                                 $subject = $subjectdetails['name'];
                                                                 $subject_found = TRUE;
                                                                 $subject_key = $subjectkey;
                                                                 $sdt_found = FALSE;
                                                                 break;
//                                                             }
//                                                         }
//                                                         if ($sdt_found){
//                                                             break;
//                                                         }
                                                     }
                                                             
                                                 } elseif(strtoupper($subject) == strtoupper($subjectdetails['name']) || strtoupper($subject) == strtoupper($subjectdetails['abrev'])){
                                                     $subject = $subjectdetails['name'];
                                                     $subject_found = TRUE;
                                                     $subject_key = $subjectkey;
                                                     break;
                                                 } elseif(strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE){//(strpos($subjectdetails['abrev'], ";") !== FALSE){
//                                                     echo "CHECKING ABRVS <br>";
//                                                     $subjectdetails_tokens = explode(";", $subjectdetails['abrev']);
//                                                     $sdt_found = FALSE;
//                                                     foreach($subjectdetails_tokens as $sdtkey=>$sdt_item){
////                                                         echo "if (strtoupper($subject) == strtoupper($sdt_item)){<br>";
//                                                         if (strtoupper($subject) == strtoupper($sdt_item)){
                                                             $subject = $subjectdetails['name'];
                                                             $subject_found = TRUE;
                                                             $subject_key = $subjectkey;
                                                             $sdt_found = FALSE;
                                                             break;
//                                                         }
//                                                     }
//                                                     if ($sdt_found){
//                                                         break;
//                                                     }
                                                 }
                                             }

                                             if ($subject_found){
                                                 $q = "SELECT * FROM schoollms_schema_userdata_school_subjects WHERE subject_title = ?";
                                                 $q_data = array ("$subject");
                                                 $query = $link->prepare($q);
                                                 $query->execute($q_data);
                                                 $num_rows = count($query->fetchAll());
//                                                 echo "SUBJECT NUM ROWS $num_rows <br>";
                                                 if ($num_rows == 1){
                                                     $query->execute($q_data);
                                                     $row = $query->fetch();
                                                     $subject_id = $row['subject_id'];
                                                     //echo "SUBJECT ID $subject_id <br>";
                                                 } elseif($num_rows > 1){
                                                    $query->execute($q_data);
                                                    while($row = $query->fetch()){
                                                        
                                                    }
                                                 } else {
//                                                     echo "INSERT SUBJECT $subject <br>";
                                                    $q = "INSERT INTO schoollms_schema_userdata_school_subjects VALUES (NULL, ?, ?, ?)";
                                                    $q_data = array ($subject,"SchoolLMS",'');
                                                    $query = $link->prepare($q);
                                                    $query->execute($q_data);
                                                    $q = "SELECT subject_id FROM schoollms_schema_userdata_school_subjects WHERE subject_title = ?";
                                                    $q_data = array($subject);
                                                    $query = $link->prepare($q);
                                                    $query->execute($q_data);
                                                    $row = $query->fetch();
                                                    $subject_id = $row['subject_id'];
                                                 }
                                             } else {
                                        
                                                 echo "SUBJECT $subject NEEDS TO BE ADDED TO SUBJECTS ARRAY IN CODE <br>";
                                                 exit;
                                             }

                                             if ($subject_key > 0){
                                                $school_subjects[$subject_key]['id'] = $subject_id;
                                             }
                                         }

                                         //GET CLASS DETAILS FROM LMS
//                                         echo "CLASS NUMBER FOUND $class_number_found CLASS FOUND $class_id_found <br>";
                                         if (!$class_id_found){
                                             if (strpos($class, "_") !== FALSE){
                                                 //We are dealing with a subject class
                                                 $class_tokens = explode("_", $class);
                                                 if ($class_number_found == 0){
                                                    $class_number = substr($class_tokens[0], -1);
                                                 } else {
                                                     $class_number = $class_number_found;  
                                                 }
                                                 
                                                 $grade_number = $class_tokens[1];

                                                 $subject_label = str_replace(" ", "%", $subject);
                                                 $class_search = "$subject_label%$grade_number%$class_number";
                                                 
                                                 $class_abrev = "$subject-$class";
//                                                 echo "BEFORE TEST CLASS SEARCH $class_search TID $tid<br>";
                                                 if (!array_key_exists("$tid-$class_abrev", $subject_class_assigned)){
                                                    if (array_key_exists("$class_abrev", $subject_class_count)){
                                                        $subject_class_count["$class_abrev"]++;
                                                        $class_number = $subject_class_count["$class_abrev"];
                                                        $class_search = "$subject_label%$grade_number%$class_number";
                                                    } else {
                                                        $subject_class_count["$class_abrev"] = $class_number;
                                                    }
                                                    $subject_class_assigned["$tid-$class_abrev"] = $class_number;
                                                 } else {
                                                     $subject_class_assigned["$tid-$class_abrev"] = $class_number;
                                                 }
//                                                 echo "AFTER TEST CLASS SEARCH $class_search TID $tid<br>";
                                                 $subject_class_assigned["$class_search"] = TRUE;
                                             } else {
                                                 $grade_number = preg_replace('/[^\-\d]*(\-?\d*).*/','$1',$class);
                                                 $class_abrev = "$class";
                                                 $class_search = $class;
                                             }
                                             
                                             if ($grade_number < 0){
                                                 $grade_number *= -1;
                                             }
                                             
//                                             echo "CLASS SEARCH $class_search GRADE NUMBER $grade_number<br>";
                                             
                                             //Dealing with grade class
                                             $q = "SELECT * FROM schoollms_schema_userdata_school_classes WHERE school_id = ? AND year_id = ? AND grade_id = ? AND class_label LIKE ?";
                                             $q_data = array ($school_id,$year_id,$grade_number,"%$class_search%");
                                             
                                             $query = $link->prepare($q);
                                             $query->execute($q_data);
                                             $num_rows = count($query->fetchAll());
//                                             echo "CLASS NUM ROWS $num_rows YEAR_ID $year_id<br>";
                                             if ($num_rows == 1){
                                                 $query->execute($q_data);
                                                 $row = $query->fetch();
                                                 $class_id = $row['class_id'];
                                                 $class_label = $row['class_label'];
                                                 $grade_id = $row['grade_id'];
                                                 
                                                 $class = $class_label;
                                             } elseif ($num_rows > 1) {
                                                $class_tokens = explode("%", $class_search);
                                                if (strpos($class_tokens[0], "/") !== FALSE){
                                                    $class_token_found = FALSE;
                                                    $query->execute($q_data);
                                                    while ($row = $query->fetch()) {
                                                        $temp_class_label = $row["class_label"];
                                                        if (strpos(strtoupper($temp_class_label), strtoupper($class_tokens[0])) !== FALSE){
                                                            $class_id = $row['class_id'];
                                                            $class_label = $row['class_label'];
                                                            $grade_id = $row['grade_id'];

                                                            $class = $class_label;
                                                            $class_token_found = TRUE;
                                                            break;
                                                        }
                                                    }
                                                    if (!$class_token_found){
                                                        $new_class = "";
                                                         $number_seen = 1;
//                                                         echo "INSERTING 0 $class_search<br>";
                                                         if (count($class_tokens) > 1){
                                                             foreach ($class_tokens as $classkey => $class_label_item) {
                                                                 if (is_numeric($class_label_item) && $number_seen == 1){
                                                                     $new_class .= "$class_label_item ";
                                                                     $number_seen++;
                                                                 } elseif ($number_seen == 2) {
                                                                     $new_class .= "Class $class_label_item";
                                                                     break;
                                                                 } else {
                                                                     $new_class .= "$class_label_item ";
                                                                 }
                                                             }
                                                         } else {
                                                             $new_class = $class_search;
                                                         }           
                                                         echo " NEW CLASS $new_class <br>";
                                                         $q = "INSERT INTO schoollms_schema_userdata_school_classes VALUES (?, ?, ?, NULL, ?)";
                                                         $q_data = array($school_id,$year_id,$grade_number,  strtoupper($new_class));
                                                         $query = $link->prepare($q);
                                                         $query->execute($q_data);
                                                         $q = "SELECT * FROM schoollms_schema_userdata_school_classes WHERE school_id = ? AND year_id = ? AND grade_id = ? AND class_label = ?";
                                                         $q_data = array($school_id,$year_id,$grade_number, strtoupper($new_class));
                                                         $query = $link->prepare($q);
                                                         $query->execute($q_data);
                                                         $row = $query->fetch();
                                                         $class_id = $row['class_id'];
                                                         $grade_id = $row['grade_id'];
                                                         $class = $new_class;
                                                    }
                                                } else { 
                                                
                                                     $new_class = "";
                                                     $number_seen = 1;
                                                     foreach ($class_tokens as $classkey => $class_label_item) {
                                                         if (is_numeric($class_label_item) && $number_seen == 1){
                                                             $new_class .= "$class_label_item ";
                                                             $number_seen++;
                                                         } elseif ($number_seen == 2) {
                                                             $new_class .= "Class $class_label_item";
                                                             break;
                                                         } else {
                                                             $new_class .= "$class_label_item ";
                                                         }
                                                     }
//                                                   echo "INSERTING 1 $class_search<br>";
                                                     $q = "INSERT INTO schoollms_schema_userdata_school_classes VALUES (?, ?, ?, NULL, ?)";
                                                     $q_data = array($school_id,$year_id,$grade_number,  strtoupper($new_class));
                                                     $query = $link->prepare($q);
                                                     $query->execute($q_data);
                                                     $q = "SELECT * FROM schoollms_schema_userdata_school_classes WHERE school_id = ? AND year_id = ? AND grade_id = ? AND class_label = ?";
                                                     $q_data = array($school_id,$year_id,$grade_number, strtoupper($new_class));
                                                     $query = $link->prepare($q);
                                                     $query->execute($q_data);
                                                     $row = $query->fetch();
                                                     $class_id = $row['class_id'];
                                                     $grade_id = $row['grade_id'];
                                                     $class = $new_class;
                                                }
                                            } else {
//                                                echo "INSERTING 2 $class_search<br>";
                                                 $class_tokens = explode("%", $class_search);
                                                 $new_class = "";
                                                 $number_seen = 1;
                                                 if (count($class_tokens) > 1){
                                                     foreach ($class_tokens as $classkey => $class_label_item) {
                                                         if (is_numeric($class_label_item) && $number_seen == 1){
                                                             $new_class .= "$class_label_item ";
                                                             $number_seen++;
                                                         } elseif ($number_seen == 2) {
                                                             $new_class .= "Class $class_label_item";
                                                             break;
                                                         } else {
                                                             $new_class .= "$class_label_item ";
                                                         }
                                                     }
                                                 } else {
                                                     $new_class = "CLASS $class_search";
                                                 }
                                                 echo "NEW CLASS $new_class <br>";
                                                 $q = "INSERT INTO schoollms_schema_userdata_school_classes VALUES (?, ?, ?, NULL, ?)";
                                                 $q_data = array($school_id,$year_id,$grade_number,  strtoupper($new_class));
                                                 $query = $link->prepare($q);
                                                 $query->execute($q_data);
                                                 $q = "SELECT * FROM schoollms_schema_userdata_school_classes WHERE school_id = ? AND year_id = ? AND grade_id = ? AND class_label = ?";
                                                 $q_data = array($school_id,$year_id,$grade_number, strtoupper($new_class));
                                                 $query = $link->prepare($q);
                                                 $query->execute($q_data);
                                                 $row = $query->fetch();
                                                 $class_id = $row['class_id'];
                                                 $grade_id = $row['grade_id'];
                                                 $class = $new_class;
//                                                 echo "CLASS $new_class NEEDS TO BE ADDED TO THE DATABASE <br>";
                                             }
                                             
                                             $school_classes[] = array ('abrev' => $class_abrev, 'class_label' => $class, 'class_id' => $class_id, 'grade_id'=>$grade_id);
                                         }
                                         
                                         echo "TEACHER $teacher SUBJECT $subject ID $subject_id CLASS $class ID $class_id GRADE $grade_number <br>";


                                         $teachers[$tid]['subjects'][$sid]['name'] = strtoupper($subject);
                                         $teachers[$tid]['subjects'][$sid]['id'] = $subject_id;
                                         $teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_label'] = $class;
                                         $teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_id'] = $class_id;
                                         //$teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_label'] = $class;
                                         $teachers[$tid]['subjects'][$sid]['classes'][$cid]['grade_id'] = $grade_number;
                                         
                                         foreach ($class_details['periods'] as $periodkey => $period_items) {
                                             $period_item_tokens = explode(",", $period_items);
                                             $period = $period_item_tokens[1];
                                             $day = $period_item_tokens[0];
                                             $teachers[$tid]['timetable'][$day][$period] = "<b>".strtoupper($subject)."</b><br>$class";
                                             
                                         }
                                         
                                     }
                                 }
                                 
                                 //exit;
                                 
                                 $list_teachers_in_timetable = array ();
                                 if (strpos($teacher, "/")){ //LOOKING AT 2 OR MORE TEACHERS
                                     $teacher_tokens = explode("/", $teacher);
                                     foreach ($teacher_tokens as $tkey=>$teacher){
                                         $list_teachers_in_timetable[] = $teacher;
                                     }
                                 } else {
                                     $list_teachers_in_timetable[] = $teacher;
                                 }
                                 
                                 foreach($list_teachers_in_timetable as $lkey=>$teacher){
                                    $teacher_tokens = explode(" ", $teacher);
                                    
                                    if (count($teacher_tokens) >= 2){
                                        $surname = "";
                                        if (count($teacher_tokens) > 2){
                                            $count_surname = 0;
                                            $tokens_count =  count($teacher_tokens)-1;
                                            while($count_surname < $tokens_count){
                                                $surname .= $teacher_tokens[$count_surname]." ";
                                                $count_surname++;
                                            }
                                            $surname = trim($surname);
                                            $initials = $teacher_tokens[$tokens_count];
                                        } else {
                                            $surname = $teacher_tokens[0];
                                            $initials = $teacher_tokens[1];
                                        }
                                        //echo "SCHOOLID $school_id SURNAME $surname INITIALS $initials USER TYPE $user_type <br>";
                                        $q = "SELECT * FROM schoollms_schema_userdata_access_profile WHERE school_id = ? AND type_id = ? AND name LIKE ? AND surname LIKE ?";
                                        $q_data = array ($school_id, $user_type, "%$initials%", "%$surname%");
                                        //echo "Q $q<br>";
                                    } else {
                                        $intials = "I";
                                        $surname = "$teacher";
                                        $q = "SELECT * FROM schoollms_schema_userdata_access_profile WHERE school_id = ? AND type_id = ? AND surname LIKE ?";
                                        $q_data = array ($school_id, $user_type, "%$teacher%");
                                    }
                                    
                                    //echo "Q $q<br>";
                                    $query = $link->prepare($q);
                                    $query->execute($q_data);
                                    $num_rows = count($query->fetchAll());
                                    //echo "NUM ROWS $num_rows <br>";
                                    $timetable_loaded = FALSE;
                                    //exit;
                                    if ($num_rows == 1){//FOUND THE TEACHER
                                        //GET USER DETAILS 
                                        $query->execute($q_data);
                                        $row = $query->fetch();
                                        //var_dump($row);
                                        //exit;
                                        $user_id = $row['user_id'];
                                        $name = $row['name'];
                                        $surname = $row['surname'];
//                                        echo "FOUND USER ID $user_id FOR $surname $name<br>";
                                      
                                        //GET USER SCHOOL DETAILS FOR THIS YEAR
                                        //--- START SUBJECTS/CLASSES GET THEIR IDS
                                        $q = "SELECT * FROM schoollms_schema_userdata_teacher_schooldetails WHERE user_id = ? AND year_id = ?";
                                        $q_data = array($user_id, $year_id);
                                        $query = $link->prepare($q);
                                        $query->execute($q_data);
                                        $num_rows = count($query->fetchAll());
                                        if ($num_rows == 1){
                                            //FOR EACH ITEM IN THIS YEAR DATA
                                            //CHECK IF ITEM IS CAPTURE AND NOT MODIFIED
                                            //OTHERWISE CAPUTRE/MODIFY ACCORDINGLY
                                            
                                        } else {
                                            //ADD THIS YEAR DATA
                                            $temp2_teacher_details = $teachers[$tid];
                                            if (!array_key_exists("subjects", $temp2_teacher_details)){
                                                continue;
                                            }
                                            foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                $subject_id = $temp_teacher_subjects['id'];
                                                foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                    $class_id = $temp_teacher_classes['class_id'];
                                                    $grade_id = $temp_teacher_classes['grade_id'];
                                                    $q = "SELECT * FROM schoollms_schema_userdata_teacher_schooldetails WHERE user_id = ? AND class_id = ? AND year_id = ?";
                                                    $q_data = array($user_id, $class_id, $year_id);
                                                    $query = $link->prepare($q);
                                                    $query->execute($q_data);
                                                    $num_rows = count($query->fetchAll());
                                                    if ($num_rows == 1){
                    
                                                    } else {
                                                        $q = "INSERT INTO schoollms_schema_userdata_teacher_schooldetails VALUES (?,?,?,?,?,?)";
                                                        $q_data = array ($user_id, $school_id, $grade_id, $class_id, $subject_id, $year_id);
                                                        $query = $link->prepare($q);
                                                        $query->execute($q_data);
                                                    }
                                                }
                                            }
                                        }
                                        
                                       // exit;
                                        
                                        //GET THIS YEAR'S TIMETABLE DETAILS OTHERWISE LOAD THEM
                                        $timetable_loaded = FALSE;
                                        $timetable_type = 2;
                                        $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                        $q_data = array($school_id, $timetable_type, $user_id);
                                        
                                        $query = $link->prepare($q);
                                        $query->execute($q_data);
                                        $num_rows = count($query->fetchAll());
                                        if ($num_rows == 1){
                                            $query->execute($q_data);
                                            $row = $query->fetch();
                                            $timetable_id = $row["timetabl_id"];
                                            //echo "TEACHER $teacher HAS TIMETABLE ID $timetable_id <br>";
                                            
                                            //GET THIS YEARS TIMETABLE DETAILS - IF EXISTS OTHERWISE ADD FROM LOADED TIMETABLE
                                            //---- FOREACH OLD TIMETABLE ITEM _ COMPARE TO NEW TIMETABLE _ MAKE CHANGES WHERE APPROPRIATE
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                            $q_data = array ($timetable_id, $year_id);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows > 0){
                                                //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                //ALSO CHECK EACH CLASS TIMETABLE
                                            } else {
                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                //NO ITEMS - NEED NEW
                                                //ADD IN USER TIMETABLE
                                                //GET BREAK PERIOD IDS
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                $q_data = array ($school_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $break_periods = array ();
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Break'){
                                                        $break_periods [] = $period_label_id; 
                                                        
                                                    }
                                                }

                                                //GET PERIOD LABELS 
                                                $q = "select l.period_label_id, l.period_label from schoollms_schema_userdata_school_timetable_period_labels l join schoollms_schema_userdata_school_timetable_period p where l.school_id = p.school_id and l.school_id =  ? and l.period_label_id = p.period_label_id  order by p.period_start asc";
                                                $q_data = array ($school_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $period_labels = array ();
                                                $period_labels_count = 1;
                                                $break_period = 0;
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Registration'){
                                                        continue;
                                                    }
                                                    $temp_labels = $period_labels;
                                                    $found = FALSE;
                                                    foreach($temp_labels as $tkey=>$temp_label){ 
                                                        if ($temp_label['period_label_id'] == $period_label_id){
                                                            $found = TRUE;
                                                            break;
                                                        }
                                                    }
                                                    if(!$found){
                                                        if ($period_label == 'Break'){
                                                            $break_period = $period_labels_count;
                                                        }
                                                        
                                                        $period_labels[$period_labels_count] = array ('period_label_id' => $period_label_id, 'period_label' => $period_label);
                                                        $period_labels_count++;
                                                        
                                                    }
                                                    
                                                    
                                                }
                                                //echo "PERIOD LABELS <br>";
                                                //print_r($period_labels);
                                                //echo "<br>";
                                                
                                                $temp2_teacher_details = $teachers[$tid];
                                                //GET ROOM ID
                                                $room = $teachers[$tid]['room'];
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                $q_data = array ($school_id, "%$room%");
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $row = $query->fetch();
                                                $room_id = $row['room_id'];
                                                if (!array_key_exists("subjects", $temp2_teacher_details)){
                                                    continue;
                                                }
                                                foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                    $subject_id = $temp_teacher_subjects['id'];
                                                    foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                        $class_id = $temp_teacher_classes['class_id'];
                                                        $class_label = $temp_teacher_classes['class_label'];
                                                        $grade_id = $temp_teacher_classes['grade_id'];
                                                        echo "<br>SUBJECT  $subject_id CLASS $class_label Grade $grade_id <br>";
                                                        if (is_array($temp_teacher_classes)){
                                                            //echo "COUNT periods ".count($temp_teacher_classes['periods'])."<br>";
                                                            print_r($temp_teacher_classes['periods']);
                                                        }
                                                        foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                            //echo "PERIOD ITEMS<br>";
                                                            //print_r($period_items);
                                                            $period_tokens = explode(",", $period_items);
                                                            $day = $period_tokens[0];
                                                            $period = $period_tokens[1];
                                                            //echo "<br> DAY $day PERIOD $period <br>";
                                                            //USERTIMETABLE
                                                            
                                                            //CONVERT PERIOD TO PERIOD LABEL ID
//                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
//                                                            $q_data = array ($school_id, $year_id);
//                                                            $query = $link->prepare($q);
//                                                            $query->execute($q_data);
//                                                            $row = $query->fetchAll();
//                                                            echo "PERIOD ROWS <br>";
//                                                            print_r($row);
//                                                            echo "<br>";
//                                                            if (!array_key_exists($period, $row)){
//                                                                continue;
//                                                            }
                                                            $period_label_id = $period_labels[$period]['period_label_id'];
                                                            if ($period > $break_period){
                                                                $break_count = 0;
                                                                echo "PERIOD $period PERIOD LABEL ID $period_label_id BREAK $break_period BEFORE BREAK COUNT <br>";
                                                                foreach($break_periods as $breakkey=>$break_period_id){
                                                                    echo "PERIOD LABEL ID $period_label_id BREAK ID $break_period_id BREAK COUNT $break_count<br>";
                                                                    if ($period == count($period_labels)-2){
                                                                        $break_count = 1;
                                                                        echo "BREAK COUNT = 1 <br>";
                                                                    } elseif ($period_label_id > $break_period_id){
                                                                        $break_count = 1;
                                                                        
                                                                        echo "BREAK COUNT = PERIOD_LABEL_ID $period_label_id - BREAK_PERIOD_ID $break_period_id<br>";
                                                                    } 
                                                                }

                                                                $period += $break_count;
                                                                
                                                            } elseif ($period == $break_period){
                                                                $break_count = 1;
                                                                echo "BREAK COUNT = PERIOD_LABEL_ID - BREAK_PERIOD_ID + 1<br>";
                                                                //break;
                                                                $period += $break_count;
                                                            }
                                                            
                                                            
//                                                            print_r($period_labels);
                                                            echo "<br>PERIOD $period PERIOD LABEL ID $period_label_id BREAK PERIOD $break_period AFTER BREAK COUNT $break_count</b><br>";
//                                                            if ($period > count($row) && !array_key_exists($period, $row)){
//                                                                continue;
//                                                            }
                                                            if ($period <=  count($period_labels)){
                                                                $period_label_id = $period_labels[$period]['period_label_id'];
                                                            }
                                                            //
                                                            
                                                            
                                                            //timetabl_id,year_id,day_id,period_label_id,grade_id,class_id,room_id,subject_id,teacher_id,substitute_id,
                                                            echo "<br>timetabl_id $timetable_id, year_id $year_id, day $day, period_label_id $period_label_id, grade_id $grade_id, class_id $class_id, room_id $room_id, subject_id $subject_id, user_id $user_id,<br>";
                                                            if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                            //CLASS TIME TABLE
                                                            //GET CLASS TIMETABLE ID
                                                            //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                            //ADD IN CLASS TIMETABLE
                                                            //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                            $class_label_tokens = explode(" ", $class_label);
                                                            if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                $class_timetable_type = 3;
                                                            } else {
                                                                $class_timetable_type = 8;
                                                            }
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                            $q_data = array($school_id, $class_timetable_type, $class_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $num_rows = count($query->fetchAll());
                                                            if ($num_rows == 1){
                                                                //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            } elseif($num_rows == 0){
                                                                //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                if (!empty($class_timetable_type) && !empty($class_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                    $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                    $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                            } else {
                                                                //echo "CLASS $class_label MORE TIMETABLEIDs FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            }
                                                            //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                            //exit;
                                                            if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                        }
                                                    }
                                                }
                                                
                                            }
                                            $timetable_loaded = TRUE;      
                                            //exit;
                                            
                                         } elseif ($num_rows > 1){
                                            $query->execute($q_data);
                                            $timetable_id = 0;
                                            while ($row = $query->fetch()){
                                                if ($timetable_id  < $row["timetabl_id"]){
                                                    $timetable_id = $row["timetabl_id"];
                                                }
                                                //echo "FOUND USER ID $user_id FOR $surname $name<br>";
                                            }
                                            
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                            $q_data = array ($timetable_id, $year_id);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows > 0){
                                                //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                //ALSO CHECK EACH CLASS TIMETABLE
                                            } else {
                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                //NO ITEMS - NEED NEW
                                                //ADD IN USER TIMETABLE
                                                //GET BREAK PERIOD IDS
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                $q_data = array ($school_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $break_periods = array ();
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Break'){
                                                        $break_periods [] = $period_label_id; 
                                                    }
                                                }

                                                $temp2_teacher_details = $teachers[$tid];
                                                //GET ROOM ID
                                                $room = $teachers[$tid]['room'];
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                $q_data = array ($school_id, "%$room%");
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $row = $query->fetch();
                                                $room_id = $row['room_id'];
                                                foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                    $subject_id = $temp_teacher_subjects['id'];
                                                    foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                        $class_id = $temp_teacher_classes['class_id'];
                                                        $class_label = $temp_teacher_classes['class_label'];
                                                        $grade_id = $temp_teacher_classes['grade_id'];
                                                        
                                                        foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                            $period_tokens = explode(",", $period_items);
                                                            $day = $period_tokens[0];
                                                            $period = $period_tokens[1];
                                                            //USERTIMETABLE
                                                            
                                                            //CONVERT PERIOD TO PERIOD LABEL ID
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                            $q_data = array ($school_id, $year_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $row = $query->fetchAll();
                                                            
                                                            
                                                            $period_label_id = $row[$period]['period_label_id'];
                                                            $break_count = 0;
                                                            //echo "<b>PERIOD $period PERIOD ID $period_label_id BEFORE BREAK COUNT <br>";
                                                            foreach($break_periods as $breakkey=>$break_period_id){
                                                                //echo "PERIOD ID $period_label_id BREAK ID $break_period_id $break_count<br>";
                                                                if ($period_label_id == $break_period_id){
                                                                    $break_count = $period_label_id - $break_period_id  + 1;
                                                                    //break;
                                                                } elseif ($period == count($row)-2){
                                                                    $break_count = 1;
                                                                } elseif ($period_label_id > $break_period_id){
                                                                    $break_count = $period_label_id - $break_period_id;
                                                                }
                                                            }
                                                            
                                                            $period += $break_count;
                                                            if ($period > count($row)){
                                                                break;
                                                            }
                                                            $period_label_id = $row[$period]['period_label_id'];
                                                            
                                                            //echo "PERIOD $period PERIOD ID $period_label_id AFTER BREAK COUNT $break_count</b><br>";
                                                            
                                                            
                                                            //echo "} elseif ($num_rows > 1){ timetabl_id $timetable_id, year_id $year_id, day $day, period_label_id $period_label_id, grade_id $grade_id, class_id $class_id, room_id $room_id, subject_id $subject_id, user_id $user_id,<br>";
                                                            
                                                            if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                            //CLASS TIME TABLE
                                                            //GET CLASS TIMETABLE ID
                                                            //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                            //ADD IN CLASS TIMETABLE
                                                            //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                            $class_label_tokens = explode(" ", $class_label);
                                                            if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                $class_timetable_type = 3;
                                                            } else {
                                                                $class_timetable_type = 8;
                                                            }
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                            $q_data = array($school_id, $class_timetable_type, $class_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $num_rows = count($query->fetchAll());
                                                            if ($num_rows == 1){
                                                                //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            } elseif($num_rows == 0){
                                                                //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                if (!empty($class_timetable_type) && !empty($class_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                    $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                    $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                            } else {
                                                                //echo "CLASS $class_label MORE TIMETABLEIDs FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            }
                                                            //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                            //exit;
                                                            if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                        }
                                                    }
                                                }
                                                
                                            }
                                            $timetable_loaded = TRUE;
                                        } elseif ($num_rows == 0){
                                            //echo "TEACHER $teacher HAS NO TIMETABLE ID - MUST BE CREATED<br>";
                                            //CREATE TIMETABLE AND ADD IN schoollms_schema_userdata_teacher_timetable
                                            $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL, ?, ?, ?, ?, ?)";
                                            $q_data = array($school_id, $timetable_type, $user_id, "$initials $surname");

                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                            $q_data = array($school_id, $timetable_type, $user_id);

                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $query->execute($q_data);
                                            $row = $query->fetch();
                                            $timetable_id = $row["timetabl_id"];
                                            
                                            //echo "TEACHER $teacher HAS TIMETABLE ID $timetable_id <br>";
                                            
                                            //GET THIS YEARS TIMETABLE DETAILS - IF EXISTS OTHERWISE ADD FROM LOADED TIMETABLE
                                            //---- FOREACH OLD TIMETABLE ITEM _ COMPARE TO NEW TIMETABLE _ MAKE CHANGES WHERE APPROPRIATE
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                            $q_data = array ($timetable_id, $year_id);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows > 0){
                                                //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                //ALSO CHECK EACH CLASS TIMETABLE
                                            } else {
                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                //NO ITEMS - NEED NEW
                                                //ADD IN USER TIMETABLE
                                                //GET BREAK PERIOD IDS
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                $q_data = array ($school_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $break_periods = array ();
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Break'){
                                                        $break_periods [] = $period_label_id; 
                                                        
                                                    }
                                                }

                                                //GET PERIOD LABELS 
                                                $q = "select l.period_label_id, l.period_label from schoollms_schema_userdata_school_timetable_period_labels l join schoollms_schema_userdata_school_timetable_period p where l.school_id = p.school_id and l.school_id =  ? and l.period_label_id = p.period_label_id  order by p.period_start asc";
                                                $q_data = array ($school_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $period_labels = array ();
                                                $period_labels_count = 1;
                                                $break_period = 0;
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Registration'){
                                                        continue;
                                                    }
                                                    $temp_labels = $period_labels;
                                                    $found = FALSE;
                                                    foreach($temp_labels as $tkey=>$temp_label){ 
                                                        if ($temp_label['period_label_id'] == $period_label_id){
                                                            $found = TRUE;
                                                            break;
                                                        }
                                                    }
                                                    if(!$found){
                                                        if ($period_label == 'Break'){
                                                            $break_period = $period_labels_count;
                                                        }
                                                        
                                                        $period_labels[$period_labels_count] = array ('period_label_id' => $period_label_id, 'period_label' => $period_label);
                                                        $period_labels_count++;
                                                        
                                                    }
                                                    
                                                    
                                                }
                                                //echo "PERIOD LABELS <br>";
                                                //print_r($period_labels);
                                                //echo "<br>";
                                                
                                                $temp2_teacher_details = $teachers[$tid];
                                                //GET ROOM ID
                                                $room = $teachers[$tid]['room'];
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                $q_data = array ($school_id, "%$room%");
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $row = $query->fetch();
                                                $room_id = $row['room_id'];
                                                if (!array_key_exists("subjects", $temp2_teacher_details)){
                                                    continue;
                                                }
                                                foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                    $subject_id = $temp_teacher_subjects['id'];
                                                    foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                        $class_id = $temp_teacher_classes['class_id'];
                                                        $class_label = $temp_teacher_classes['class_label'];
                                                        $grade_id = $temp_teacher_classes['grade_id'];
                                                        echo "<br>SUBJECT  $subject_id CLASS $class_label Grade $grade_id <br>";
                                                        if (is_array($temp_teacher_classes)){
                                                            //echo "COUNT periods ".count($temp_teacher_classes['periods'])."<br>";
                                                            print_r($temp_teacher_classes['periods']);
                                                        }
                                                        foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                            //echo "PERIOD ITEMS<br>";
                                                            //print_r($period_items);
                                                            $period_tokens = explode(",", $period_items);
                                                            $day = $period_tokens[0];
                                                            $period = $period_tokens[1];
                                                            //echo "<br> DAY $day PERIOD $period <br>";
                                                            //USERTIMETABLE
                                                            
                                                            //CONVERT PERIOD TO PERIOD LABEL ID
//                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
//                                                            $q_data = array ($school_id, $year_id);
//                                                            $query = $link->prepare($q);
//                                                            $query->execute($q_data);
//                                                            $row = $query->fetchAll();
//                                                            echo "PERIOD ROWS <br>";
//                                                            print_r($row);
//                                                            echo "<br>";
//                                                            if (!array_key_exists($period, $row)){
//                                                                continue;
//                                                            }
                                                            $period_label_id = $period_labels[$period]['period_label_id'];
                                                            if ($period > $break_period){
                                                                $break_count = 0;
                                                                echo "PERIOD $period PERIOD LABEL ID $period_label_id BREAK $break_period BEFORE BREAK COUNT <br>";
                                                                foreach($break_periods as $breakkey=>$break_period_id){
                                                                    echo "PERIOD LABEL ID $period_label_id BREAK ID $break_period_id BREAK COUNT $break_count<br>";
                                                                    if ($period == count($period_labels)-2){
                                                                        $break_count = 1;
                                                                        echo "BREAK COUNT = 1 <br>";
                                                                    } elseif ($period_label_id > $break_period_id){
                                                                        $break_count = 1;
                                                                        
                                                                        echo "BREAK COUNT = PERIOD_LABEL_ID $period_label_id - BREAK_PERIOD_ID $break_period_id<br>";
                                                                    } 
                                                                }

                                                                $period += $break_count;
                                                                
                                                            } elseif ($period == $break_period){
                                                                $break_count = 1;
                                                                echo "BREAK COUNT = PERIOD_LABEL_ID - BREAK_PERIOD_ID + 1<br>";
                                                                //break;
                                                                $period += $break_count;
                                                            }
                                                            
                                                            
//                                                            print_r($period_labels);
                                                            echo "<br>PERIOD $period PERIOD LABEL ID $period_label_id BREAK PERIOD $break_period AFTER BREAK COUNT $break_count</b><br>";
//                                                            if ($period > count($row) && !array_key_exists($period, $row)){
//                                                                continue;
//                                                            }
                                                            if ($period <=  count($period_labels)){
                                                                $period_label_id = $period_labels[$period]['period_label_id'];
                                                            }
                                                            //
                                                            
                                                            
                                                            //timetabl_id,year_id,day_id,period_label_id,grade_id,class_id,room_id,subject_id,teacher_id,substitute_id,
                                                            echo "<br>timetabl_id $timetable_id, year_id $year_id, day $day, period_label_id $period_label_id, grade_id $grade_id, class_id $class_id, room_id $room_id, subject_id $subject_id, user_id $user_id,<br>";
                                                            if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                            //CLASS TIME TABLE
                                                            //GET CLASS TIMETABLE ID
                                                            //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                            //ADD IN CLASS TIMETABLE
                                                            //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                            $class_label_tokens = explode(" ", $class_label);
                                                            if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                $class_timetable_type = 3;
                                                            } else {
                                                                $class_timetable_type = 8;
                                                            }
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                            $q_data = array($school_id, $class_timetable_type, $class_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $num_rows = count($query->fetchAll());
                                                            if ($num_rows == 1){
                                                                //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            } elseif($num_rows == 0){
                                                                //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                if (!empty($class_timetable_type) && !empty($class_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                    $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                    $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                            } else {
                                                                //echo "CLASS $class_label MORE TIMETABLEIDs FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            }
                                                            //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                            //exit;
                                                            if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                        }
                                                    }
                                                }
                                                
                                            }
                                            $timetable_loaded = TRUE;      
                                            //exit;
                                            
                                         } elseif ($num_rows > 1){
                                            $query->execute($q_data);
                                            $timetable_id = 0;
                                            while ($row = $query->fetch()){
                                                if ($timetable_id  < $row["timetabl_id"]){
                                                    $timetable_id = $row["timetabl_id"];
                                                }
                                                //echo "FOUND USER ID $user_id FOR $surname $name<br>";
                                            }
                                            
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                            $q_data = array ($timetable_id, $year_id);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows > 0){
                                                //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                //ALSO CHECK EACH CLASS TIMETABLE
                                            } else {
                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                //NO ITEMS - NEED NEW
                                                //ADD IN USER TIMETABLE
                                                //GET BREAK PERIOD IDS
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                $q_data = array ($school_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $break_periods = array ();
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Break'){
                                                        $break_periods [] = $period_label_id; 
                                                    }
                                                }

                                                $temp2_teacher_details = $teachers[$tid];
                                                //GET ROOM ID
                                                $room = $teachers[$tid]['room'];
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                $q_data = array ($school_id, "%$room%");
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $row = $query->fetch();
                                                $room_id = $row['room_id'];
                                                foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                    $subject_id = $temp_teacher_subjects['id'];
                                                    foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                        $class_id = $temp_teacher_classes['class_id'];
                                                        $class_label = $temp_teacher_classes['class_label'];
                                                        $grade_id = $temp_teacher_classes['grade_id'];
                                                        
                                                        foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                            $period_tokens = explode(",", $period_items);
                                                            $day = $period_tokens[0];
                                                            $period = $period_tokens[1];
                                                            //USERTIMETABLE
                                                            
                                                            //CONVERT PERIOD TO PERIOD LABEL ID
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                            $q_data = array ($school_id, $year_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $row = $query->fetchAll();
                                                            
                                                            
                                                            $period_label_id = $row[$period]['period_label_id'];
                                                            $break_count = 0;
                                                            //echo "<b>PERIOD $period PERIOD ID $period_label_id BEFORE BREAK COUNT <br>";
                                                            foreach($break_periods as $breakkey=>$break_period_id){
                                                                //echo "PERIOD ID $period_label_id BREAK ID $break_period_id $break_count<br>";
                                                                if ($period_label_id == $break_period_id){
                                                                    $break_count = $period_label_id - $break_period_id  + 1;
                                                                    //break;
                                                                } elseif ($period == count($row)-2){
                                                                    $break_count = 1;
                                                                } elseif ($period_label_id > $break_period_id){
                                                                    $break_count = $period_label_id - $break_period_id;
                                                                }
                                                            }
                                                            
                                                            $period += $break_count;
                                                            if ($period > count($row)){
                                                                break;
                                                            }
                                                            $period_label_id = $row[$period]['period_label_id'];
                                                            
                                                            //echo "PERIOD $period PERIOD ID $period_label_id AFTER BREAK COUNT $break_count</b><br>";
                                                            
                                                            
                                                            //echo "} elseif ($num_rows > 1){ timetabl_id $timetable_id, year_id $year_id, day $day, period_label_id $period_label_id, grade_id $grade_id, class_id $class_id, room_id $room_id, subject_id $subject_id, user_id $user_id,<br>";
                                                            
                                                            if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                            //CLASS TIME TABLE
                                                            //GET CLASS TIMETABLE ID
                                                            //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                            //ADD IN CLASS TIMETABLE
                                                            //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                            $class_label_tokens = explode(" ", $class_label);
                                                            if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                $class_timetable_type = 3;
                                                            } else {
                                                                $class_timetable_type = 8;
                                                            }
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                            $q_data = array($school_id, $class_timetable_type, $class_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $num_rows = count($query->fetchAll());
                                                            if ($num_rows == 1){
                                                                //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            } elseif($num_rows == 0){
                                                                //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                if (!empty($class_timetable_type) && !empty($class_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                    $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                    $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                            } else {
                                                                //echo "CLASS $class_label MORE TIMETABLEIDs FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            }
                                                            //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                            //exit;
                                                            if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                        }
                                                    }
                                                }
                                                
                                            }
                                            $timetable_loaded = TRUE;
                                        }
                                        
                                                                               
                                    } elseif ($num_rows > 1) {
                                        $query->execute($q_data);
                                        $temp_user_id = 0;
                                        while ($row = $query->fetch()){
                                            $user_id = $row['user_id'];
                                            $name = $row['name'];
                                            $surname = $row['surname'];
                                            $access_id = $row['access_id'];
                                            if ($temp_user_id < $user_id){
                                                $temp_user_id = $user_id;
                                            }
                                        }
                                        
                                        if ($temp_user_id !== 0){
                                            $user_id = $temp_user_id;
                                            //GET USER SCHOOL DETAILS FOR THIS YEAR
                                            //--- START SUBJECTS/CLASSES GET THEIR IDS

                                            //GET THIS YEAR'S TIMETABLE DETAILS OTHERWISE LOAD THEM
                                           
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                            $q_data = array($school_id, 2, $user_id);

                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows == 1){
                                                $query->execute($q_data);
                                                $row = $query->fetch();
                                                $timetable_id = $row["timetabl_id"];
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                                $q_data = array ($timetable_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $num_rows = count($query->fetchAll());
                                                if ($num_rows > 0){
                                                    //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                    //ALSO CHECK EACH CLASS TIMETABLE
                                                } else {
                                                    //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                    //NO ITEMS - NEED NEW
                                                    //ADD IN USER TIMETABLE
                                                    //GET BREAK PERIOD IDS
                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                    $q_data = array ($school_id, $year_id);
                                                    $query = $link->prepare($q);
                                                    $query->execute($q_data);
                                                    $break_periods = array ();
                                                    while($row = $query->fetch()){
                                                        $period_label_id = $row['period_label_id'];
                                                        $period_label = $row['period_label'];
                                                        if ($period_label == 'Break'){
                                                            $break_periods [] = $period_label_id; 
                                                        }
                                                    }

                                                    $temp2_teacher_details = $teachers[$tid];
                                                    //GET ROOM ID
                                                    $room = $teachers[$tid]['room'];
                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                    $q_data = array ($school_id, "%$room%");
                                                    $query = $link->prepare($q);
                                                    $query->execute($q_data);
                                                    $row = $query->fetch();
                                                    $room_id = $row['room_id'];
                                                    foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                        $subject_id = $temp_teacher_subjects['id'];
                                                        foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                            $class_id = $temp_teacher_classes['class_id'];
                                                            $class_label = $temp_teacher_classes['class_label'];
                                                            $grade_id = $temp_teacher_classes['grade_id'];

                                                            foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                                $period_tokens = explode(",", $period_items);
                                                                $day = $period_tokens[0];
                                                                $period = $period_tokens[1];
                                                                //USERTIMETABLE

                                                                //CONVERT PERIOD TO PERIOD LABEL ID
                                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                                $q_data = array ($school_id, $year_id);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                                $row = $query->fetchAll();


                                                                $period_label_id = $row[$period]['period_label_id'];
                                                                $break_count = 0;
                                                                //echo "<b>PERIOD $period PERIOD ID $period_label_id BEFORE BREAK COUNT <br>";
                                                                foreach($break_periods as $breakkey=>$break_period_id){
                                                                    //echo "PERIOD ID $period_label_id BREAK ID $break_period_id $break_count<br>";
                                                                    if ($period_label_id == $break_period_id){
                                                                        $break_count = $period_label_id - $break_period_id  + 1;
                                                                        //break;
                                                                    } elseif ($period == count($row)-2){
                                                                        $break_count = 1;
                                                                    } elseif ($period_label_id > $break_period_id){
                                                                        $break_count = $period_label_id - $break_period_id;
                                                                    }
                                                                }

                                                                $period += $break_count;
                                                                if ($period > count($row)){
                                                                    break;
                                                                }
                                                                $period_label_id = $row[$period]['period_label_id'];

                                                                //echo "PERIOD $period PERIOD ID $period_label_id AFTER BREAK COUNT $break_count</b><br>";


                                                                //timetabl_id,year_id,day_id,period_label_id,grade_id,class_id,room_id,subject_id,teacher_id,substitute_id,
                                                                if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                    $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                }    
                                                                //CLASS TIME TABLE
                                                                //GET CLASS TIMETABLE ID
                                                                //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                                //ADD IN CLASS TIMETABLE
                                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                                $class_label_tokens = explode(" ", $class_label);
                                                                if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                    $class_timetable_type = 3;
                                                                } else {
                                                                    $class_timetable_type = 8;
                                                                }
                                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                                $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                                $num_rows = count($query->fetchAll());
                                                                if ($num_rows == 1){
                                                                    //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                } elseif($num_rows == 0){
                                                                    //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                    if (!empty($class_timetable_type) && !empty($class_id)){
                                                                        $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                        $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                        $query = $link->prepare($q);
                                                                        $query->execute($q_data);
                                                                        $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                        $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                        $query = $link->prepare($q);
                                                                        $query->execute($q_data);
                                                                        $row = $query->fetch();
                                                                        $class_timetable_id = $row['timetabl_id'];
                                                                    }
                                                                } else {
                                                                    //echo "CLASS *$class_label MORE TIMETABLEIDs FOUND <br>";
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                                //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                                //exit;
                                                                if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                    $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                }
                                                            }
                                                        }
                                                    }

                                                }
                                                $timetable_loaded = TRUE;
                                            } elseif ($num_rows > 1){
                                                $query->execute($q_data);
                                                $timetable_id = 0;
                                                while ($row = $query->fetch()){
                                                    if ($timetable_id < $row["timetabl_id"]){
                                                        $timetable_id = $row["timetabl_id"];
                                                    }
                                                    //echo "FOUND USER ID $user_id FOR $surname $name<br>";
                                                }
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                                $q_data = array ($timetable_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $num_rows = count($query->fetchAll());
                                                if ($num_rows > 0){
                                                    //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                    //ALSO CHECK EACH CLASS TIMETABLE
                                                } else {
                                                    //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                    //NO ITEMS - NEED NEW
                                                    //ADD IN USER TIMETABLE
                                                    //GET BREAK PERIOD IDS
                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                    $q_data = array ($school_id, $year_id);
                                                    $query = $link->prepare($q);
                                                    $query->execute($q_data);
                                                    $break_periods = array ();
                                                    while($row = $query->fetch()){
                                                        $period_label_id = $row['period_label_id'];
                                                        $period_label = $row['period_label'];
                                                        if ($period_label == 'Break'){
                                                            $break_periods [] = $period_label_id; 
                                                        }
                                                    }

                                                    $temp2_teacher_details = $teachers[$tid];
                                                    //GET ROOM ID
                                                    $room = $teachers[$tid]['room'];
                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                    $q_data = array ($school_id, "%$room%");
                                                    $query = $link->prepare($q);
                                                    $query->execute($q_data);
                                                    $row = $query->fetch();
                                                    $room_id = $row['room_id'];
                                                    foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                        $subject_id = $temp_teacher_subjects['id'];
                                                        foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                            $class_id = $temp_teacher_classes['class_id'];
                                                            $class_label = $temp_teacher_classes['class_label'];
                                                            $grade_id = $temp_teacher_classes['grade_id'];

                                                            foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                                $period_tokens = explode(",", $period_items);
                                                                $day = $period_tokens[0];
                                                                $period = $period_tokens[1];
                                                                //USERTIMETABLE

                                                                //CONVERT PERIOD TO PERIOD LABEL ID
                                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                                $q_data = array ($school_id, $year_id);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                                $row = $query->fetchAll();


                                                                $period_label_id = $row[$period]['period_label_id'];
                                                                $break_count = 0;
                                                                //echo "<b>PERIOD $period PERIOD ID $period_label_id BEFORE BREAK COUNT <br>";
                                                                foreach($break_periods as $breakkey=>$break_period_id){
                                                                    //echo "PERIOD ID $period_label_id BREAK ID $break_period_id $break_count<br>";
                                                                    if ($period_label_id == $break_period_id){
                                                                        $break_count = $period_label_id - $break_period_id  + 1;
                                                                        //break;
                                                                    } elseif ($period == count($row)-2){
                                                                        $break_count = 1;
                                                                    } elseif ($period_label_id > $break_period_id){
                                                                        $break_count = $period_label_id - $break_period_id;
                                                                    }
                                                                }

                                                                $period += $break_count;
                                                                if ($period > count($row)){
                                                                    break;
                                                                }
                                                                $period_label_id = $row[$period]['period_label_id'];

                                                                //echo "PERIOD $period PERIOD ID $period_label_id AFTER BREAK COUNT $break_count</b><br>";


                                                                //timetabl_id,year_id,day_id,period_label_id,grade_id,class_id,room_id,subject_id,teacher_id,substitute_id,
                                                                if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                    $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                }
                                                                //CLASS TIME TABLE
                                                                //GET CLASS TIMETABLE ID
                                                                //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                                //ADD IN CLASS TIMETABLE
                                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                                $class_label_tokens = explode(" ", $class_label);
                                                                if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                    $class_timetable_type = 3;
                                                                } else {
                                                                    $class_timetable_type = 8;
                                                                }
                                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                                $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                                $num_rows = count($query->fetchAll());
                                                                if ($num_rows == 1){
                                                                    //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                } elseif($num_rows == 0){
                                                                    //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                    if (!empty($class_timetable_type) && !empty($class_id)){
                                                                        $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                        $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                        $query = $link->prepare($q);
                                                                        $query->execute($q_data);
                                                                        $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                        $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                        $query = $link->prepare($q);
                                                                        $query->execute($q_data);
                                                                        $row = $query->fetch();
                                                                        $class_timetable_id = $row['timetabl_id'];
                                                                    }
                                                                } else {
                                                                    //echo "CLASS $class_label MORE TIMETABLEIDs FOUND <br>";
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                                //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                                //exit;
                                                                if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                    $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                }
                                                            }
                                                        }
                                                    }

                                                }
                                                $timetable_loaded = TRUE;
                                            } elseif ($num_rows == 0){
//                                                echo "TEACHER $teacher HAS NO TIMETABLE ID - MUST BE CREATED<br>";
                                            }
                                        }
                                    } elseif ($num_rows == 0){
                                        echo "TEACHER $teacher NOT FOUND - MUST CREATE ACCOUNT <br>";
                                        $access_id = "TNOID".$tnoid_count;
                                        $tnoid_count++;
                                        $q = "INSERT INTO schoollms_schema_userdata_access_profile VALUES (NULL, ?, ?, ?, ?, ?)";
                                        $q_data  = array ($school_id, $user_type, $access_id, $initials, $surname);
                                        $query = $link->prepare($q);
                                        $query->execute($q_data);
                                        echo "Teacher $teacher access details CREATED $access_id <br>";

                                        $q = "SELECT * FROM schoollms_schema_userdata_access_profile WHERE school_id = ? AND type_id = ? AND name LIKE ? AND surname LIKE ?";
                                        $query = $link->prepare($q);
                                        $q_data = array ($school_id,$user_type,"%$initials%","%$surname%");
                                        $query->execute($q_data);
                                        $row = $query->fetch();
                                        $user_id = $row["user_id"];
                                        //GET USER DETAILS 
                                        $query->execute($q_data);
                                        $row = $query->fetch();
                                        //var_dump($row);
                                        //exit;
                                        $user_id = $row['user_id'];
                                        $name = $row['name'];
                                        $surname = $row['surname'];
//                                        echo "FOUND USER ID $user_id FOR $surname $name<br>";
                                      
                                        //GET USER SCHOOL DETAILS FOR THIS YEAR
                                        //--- START SUBJECTS/CLASSES GET THEIR IDS
                                        $q = "SELECT * FROM schoollms_schema_userdata_teacher_schooldetails WHERE user_id = ? AND year_id = ?";
                                        $q_data = array($user_id, $year_id);
                                        $query = $link->prepare($q);
                                        $query->execute($q_data);
                                        $num_rows = count($query->fetchAll());
                                        if ($num_rows == 1){
                                            //FOR EACH ITEM IN THIS YEAR DATA
                                            //CHECK IF ITEM IS CAPTURE AND NOT MODIFIED
                                            //OTHERWISE CAPUTRE/MODIFY ACCORDINGLY
                                            
                                        } else {
                                            //ADD THIS YEAR DATA
                                            $temp2_teacher_details = $teachers[$tid];
                                            if (!array_key_exists("subjects", $temp2_teacher_details)){
                                                continue;
                                            }
                                            foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                $subject_id = $temp_teacher_subjects['id'];
                                                foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                    $class_id = $temp_teacher_classes['class_id'];
                                                    $grade_id = $temp_teacher_classes['grade_id'];
                                                    $q = "SELECT * FROM schoollms_schema_userdata_teacher_schooldetails WHERE user_id = ? AND class_id = ? AND year_id = ?";
                                                    $q_data = array($user_id, $class_id, $year_id);
                                                    $query = $link->prepare($q);
                                                    $query->execute($q_data);
                                                    $num_rows = count($query->fetchAll());
                                                    if ($num_rows == 1){
                    
                                                    } else {
                                                        $q = "INSERT INTO schoollms_schema_userdata_teacher_schooldetails VALUES (?,?,?,?,?,?)";
                                                        $q_data = array ($user_id, $school_id, $grade_id, $class_id, $subject_id, $year_id);
                                                        $query = $link->prepare($q);
                                                        $query->execute($q_data);
                                                    }
                                                }
                                            }
                                        }
                                        
                                       // exit;
                                        
                                        //GET THIS YEAR'S TIMETABLE DETAILS OTHERWISE LOAD THEM
                                        $timetable_loaded = FALSE;
                                        $timetable_type = 2;
                                        $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                        $q_data = array($school_id, $timetable_type, $user_id);
                                        
                                        $query = $link->prepare($q);
                                        $query->execute($q_data);
                                        $num_rows = count($query->fetchAll());
                                        if ($num_rows == 1){
                                            $query->execute($q_data);
                                            $row = $query->fetch();
                                            $timetable_id = $row["timetabl_id"];
                                            //echo "TEACHER $teacher HAS TIMETABLE ID $timetable_id <br>";
                                            
                                            //GET THIS YEARS TIMETABLE DETAILS - IF EXISTS OTHERWISE ADD FROM LOADED TIMETABLE
                                            //---- FOREACH OLD TIMETABLE ITEM _ COMPARE TO NEW TIMETABLE _ MAKE CHANGES WHERE APPROPRIATE
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                            $q_data = array ($timetable_id, $year_id);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows > 0){
                                                //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                //ALSO CHECK EACH CLASS TIMETABLE
                                            } else {
                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                //NO ITEMS - NEED NEW
                                                //ADD IN USER TIMETABLE
                                                //GET BREAK PERIOD IDS
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                $q_data = array ($school_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $break_periods = array ();
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Break'){
                                                        $break_periods [] = $period_label_id; 
                                                        
                                                    }
                                                }

                                                //GET PERIOD LABELS 
                                                $q = "select l.period_label_id, l.period_label from schoollms_schema_userdata_school_timetable_period_labels l join schoollms_schema_userdata_school_timetable_period p where l.school_id = p.school_id and l.school_id =  ? and l.period_label_id = p.period_label_id  order by p.period_start asc";
                                                $q_data = array ($school_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $period_labels = array ();
                                                $period_labels_count = 1;
                                                $break_period = 0;
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Registration'){
                                                        continue;
                                                    }
                                                    $temp_labels = $period_labels;
                                                    $found = FALSE;
                                                    foreach($temp_labels as $tkey=>$temp_label){ 
                                                        if ($temp_label['period_label_id'] == $period_label_id){
                                                            $found = TRUE;
                                                            break;
                                                        }
                                                    }
                                                    if(!$found){
                                                        if ($period_label == 'Break'){
                                                            $break_period = $period_labels_count;
                                                        }
                                                        
                                                        $period_labels[$period_labels_count] = array ('period_label_id' => $period_label_id, 'period_label' => $period_label);
                                                        $period_labels_count++;
                                                        
                                                    }
                                                    
                                                    
                                                }
                                                //echo "PERIOD LABELS <br>";
                                                //print_r($period_labels);
                                                //echo "<br>";
                                                
                                                $temp2_teacher_details = $teachers[$tid];
                                                //GET ROOM ID
                                                $room = $teachers[$tid]['room'];
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                $q_data = array ($school_id, "%$room%");
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $row = $query->fetch();
                                                $room_id = $row['room_id'];
                                                if (!array_key_exists("subjects", $temp2_teacher_details)){
                                                    continue;
                                                }
                                                foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                    $subject_id = $temp_teacher_subjects['id'];
                                                    foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                        $class_id = $temp_teacher_classes['class_id'];
                                                        $class_label = $temp_teacher_classes['class_label'];
                                                        $grade_id = $temp_teacher_classes['grade_id'];
                                                        echo "<br>SUBJECT  $subject_id CLASS $class_label Grade $grade_id <br>";
                                                        if (is_array($temp_teacher_classes)){
                                                            //echo "COUNT periods ".count($temp_teacher_classes['periods'])."<br>";
                                                            print_r($temp_teacher_classes['periods']);
                                                        }
                                                        foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                            //echo "PERIOD ITEMS<br>";
                                                            //print_r($period_items);
                                                            $period_tokens = explode(",", $period_items);
                                                            $day = $period_tokens[0];
                                                            $period = $period_tokens[1];
                                                            //echo "<br> DAY $day PERIOD $period <br>";
                                                            //USERTIMETABLE
                                                            
                                                            //CONVERT PERIOD TO PERIOD LABEL ID
//                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
//                                                            $q_data = array ($school_id, $year_id);
//                                                            $query = $link->prepare($q);
//                                                            $query->execute($q_data);
//                                                            $row = $query->fetchAll();
//                                                            echo "PERIOD ROWS <br>";
//                                                            print_r($row);
//                                                            echo "<br>";
//                                                            if (!array_key_exists($period, $row)){
//                                                                continue;
//                                                            }
                                                            $period_label_id = $period_labels[$period]['period_label_id'];
                                                            if ($period > $break_period){
                                                                $break_count = 0;
                                                                echo "PERIOD $period PERIOD LABEL ID $period_label_id BREAK $break_period BEFORE BREAK COUNT <br>";
                                                                foreach($break_periods as $breakkey=>$break_period_id){
                                                                    echo "PERIOD LABEL ID $period_label_id BREAK ID $break_period_id BREAK COUNT $break_count<br>";
                                                                    if ($period == count($period_labels)-2){
                                                                        $break_count = 1;
                                                                        echo "BREAK COUNT = 1 <br>";
                                                                    } elseif ($period_label_id > $break_period_id){
                                                                        $break_count = 1;
                                                                        
                                                                        echo "BREAK COUNT = PERIOD_LABEL_ID $period_label_id - BREAK_PERIOD_ID $break_period_id<br>";
                                                                    } 
                                                                }

                                                                $period += $break_count;
                                                                
                                                            } elseif ($period == $break_period){
                                                                $break_count = 1;
                                                                echo "BREAK COUNT = PERIOD_LABEL_ID - BREAK_PERIOD_ID + 1<br>";
                                                                //break;
                                                                $period += $break_count;
                                                            }
                                                            
                                                            
//                                                            print_r($period_labels);
                                                            echo "<br>PERIOD $period PERIOD LABEL ID $period_label_id BREAK PERIOD $break_period AFTER BREAK COUNT $break_count</b><br>";
//                                                            if ($period > count($row) && !array_key_exists($period, $row)){
//                                                                continue;
//                                                            }
                                                            if ($period <=  count($period_labels)){
                                                                $period_label_id = $period_labels[$period]['period_label_id'];
                                                            }
                                                            //
                                                            
                                                            
                                                            //timetabl_id,year_id,day_id,period_label_id,grade_id,class_id,room_id,subject_id,teacher_id,substitute_id,
                                                            echo "<br>timetabl_id $timetable_id, year_id $year_id, day $day, period_label_id $period_label_id, grade_id $grade_id, class_id $class_id, room_id $room_id, subject_id $subject_id, user_id $user_id,<br>";
                                                            if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                            //CLASS TIME TABLE
                                                            //GET CLASS TIMETABLE ID
                                                            //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                            //ADD IN CLASS TIMETABLE
                                                            //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                            $class_label_tokens = explode(" ", $class_label);
                                                            if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                $class_timetable_type = 3;
                                                            } else {
                                                                $class_timetable_type = 8;
                                                            }
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                            $q_data = array($school_id, $class_timetable_type, $class_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $num_rows = count($query->fetchAll());
                                                            if ($num_rows == 1){
                                                                //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            } elseif($num_rows == 0){
                                                                //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                if (!empty($class_timetable_type) && !empty($class_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                    $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                    $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                            } else {
                                                                //echo "CLASS $class_label MORE TIMETABLEIDs FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            }
                                                            //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                            //exit;
                                                            if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                        }
                                                    }
                                                }
                                                
                                            }
                                            $timetable_loaded = TRUE;      
                                            //exit;
                                            
                                         } elseif ($num_rows > 1){
                                            $query->execute($q_data);
                                            $timetable_id = 0;
                                            while ($row = $query->fetch()){
                                                if ($timetable_id  < $row["timetabl_id"]){
                                                    $timetable_id = $row["timetabl_id"];
                                                }
                                                //echo "FOUND USER ID $user_id FOR $surname $name<br>";
                                            }
                                            
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                            $q_data = array ($timetable_id, $year_id);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows > 0){
                                                //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                //ALSO CHECK EACH CLASS TIMETABLE
                                            } else {
                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                //NO ITEMS - NEED NEW
                                                //ADD IN USER TIMETABLE
                                                //GET BREAK PERIOD IDS
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                $q_data = array ($school_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $break_periods = array ();
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Break'){
                                                        $break_periods [] = $period_label_id; 
                                                    }
                                                }

                                                $temp2_teacher_details = $teachers[$tid];
                                                //GET ROOM ID
                                                $room = $teachers[$tid]['room'];
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                $q_data = array ($school_id, "%$room%");
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $row = $query->fetch();
                                                $room_id = $row['room_id'];
                                                foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                    $subject_id = $temp_teacher_subjects['id'];
                                                    foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                        $class_id = $temp_teacher_classes['class_id'];
                                                        $class_label = $temp_teacher_classes['class_label'];
                                                        $grade_id = $temp_teacher_classes['grade_id'];
                                                        
                                                        foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                            $period_tokens = explode(",", $period_items);
                                                            $day = $period_tokens[0];
                                                            $period = $period_tokens[1];
                                                            //USERTIMETABLE
                                                            
                                                            //CONVERT PERIOD TO PERIOD LABEL ID
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                            $q_data = array ($school_id, $year_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $row = $query->fetchAll();
                                                            
                                                            
                                                            $period_label_id = $row[$period]['period_label_id'];
                                                            $break_count = 0;
                                                            //echo "<b>PERIOD $period PERIOD ID $period_label_id BEFORE BREAK COUNT <br>";
                                                            foreach($break_periods as $breakkey=>$break_period_id){
                                                                //echo "PERIOD ID $period_label_id BREAK ID $break_period_id $break_count<br>";
                                                                if ($period_label_id == $break_period_id){
                                                                    $break_count = $period_label_id - $break_period_id  + 1;
                                                                    //break;
                                                                } elseif ($period == count($row)-2){
                                                                    $break_count = 1;
                                                                } elseif ($period_label_id > $break_period_id){
                                                                    $break_count = $period_label_id - $break_period_id;
                                                                }
                                                            }
                                                            
                                                            $period += $break_count;
                                                            if ($period > count($row)){
                                                                break;
                                                            }
                                                            $period_label_id = $row[$period]['period_label_id'];
                                                            
                                                            //echo "PERIOD $period PERIOD ID $period_label_id AFTER BREAK COUNT $break_count</b><br>";
                                                            
                                                            
                                                            //echo "} elseif ($num_rows > 1){ timetabl_id $timetable_id, year_id $year_id, day $day, period_label_id $period_label_id, grade_id $grade_id, class_id $class_id, room_id $room_id, subject_id $subject_id, user_id $user_id,<br>";
                                                            
                                                            if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                            //CLASS TIME TABLE
                                                            //GET CLASS TIMETABLE ID
                                                            //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                            //ADD IN CLASS TIMETABLE
                                                            //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                            $class_label_tokens = explode(" ", $class_label);
                                                            if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                $class_timetable_type = 3;
                                                            } else {
                                                                $class_timetable_type = 8;
                                                            }
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                            $q_data = array($school_id, $class_timetable_type, $class_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $num_rows = count($query->fetchAll());
                                                            if ($num_rows == 1){
                                                                //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            } elseif($num_rows == 0){
                                                                //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                if (!empty($class_timetable_type) && !empty($class_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                    $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                    $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                            } else {
                                                                //echo "CLASS $class_label MORE TIMETABLEIDs FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            }
                                                            //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                            //exit;
                                                            if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                        }
                                                    }
                                                }
                                                
                                            }
                                            $timetable_loaded = TRUE;
                                        } elseif ($num_rows == 0){
                                            //echo "TEACHER $teacher HAS NO TIMETABLE ID - MUST BE CREATED<br>";
                                            //CREATE TIMETABLE AND ADD IN schoollms_schema_userdata_teacher_timetable
                             
                                            $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL, ?, ?, ?, ?, ?)";
                                            $q_data = array($school_id, $timetable_type, $user_id, "$initials $surname");

                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                            $q_data = array($school_id, $timetable_type, $user_id);

                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $query->execute($q_data);
                                            $row = $query->fetch();
                                            $timetable_id = $row["timetabl_id"];
                                            
                                            //echo "TEACHER $teacher HAS TIMETABLE ID $timetable_id <br>";
                                            
                                            //GET THIS YEARS TIMETABLE DETAILS - IF EXISTS OTHERWISE ADD FROM LOADED TIMETABLE
                                            //---- FOREACH OLD TIMETABLE ITEM _ COMPARE TO NEW TIMETABLE _ MAKE CHANGES WHERE APPROPRIATE
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                            $q_data = array ($timetable_id, $year_id);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows > 0){
                                                //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                //ALSO CHECK EACH CLASS TIMETABLE
                                            } else {
                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                //NO ITEMS - NEED NEW
                                                //ADD IN USER TIMETABLE
                                                //GET BREAK PERIOD IDS
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                $q_data = array ($school_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $break_periods = array ();
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Break'){
                                                        $break_periods [] = $period_label_id; 
                                                        
                                                    }
                                                }

                                                //GET PERIOD LABELS 
                                                $q = "select l.period_label_id, l.period_label from schoollms_schema_userdata_school_timetable_period_labels l join schoollms_schema_userdata_school_timetable_period p where l.school_id = p.school_id and l.school_id =  ? and l.period_label_id = p.period_label_id  order by p.period_start asc";
                                                $q_data = array ($school_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $period_labels = array ();
                                                $period_labels_count = 1;
                                                $break_period = 0;
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Registration'){
                                                        continue;
                                                    }
                                                    $temp_labels = $period_labels;
                                                    $found = FALSE;
                                                    foreach($temp_labels as $tkey=>$temp_label){ 
                                                        if ($temp_label['period_label_id'] == $period_label_id){
                                                            $found = TRUE;
                                                            break;
                                                        }
                                                    }
                                                    if(!$found){
                                                        if ($period_label == 'Break'){
                                                            $break_period = $period_labels_count;
                                                        }
                                                        
                                                        $period_labels[$period_labels_count] = array ('period_label_id' => $period_label_id, 'period_label' => $period_label);
                                                        $period_labels_count++;
                                                        
                                                    }
                                                    
                                                    
                                                }
                                                //echo "PERIOD LABELS <br>";
                                                //print_r($period_labels);
                                                //echo "<br>";
                                                
                                                $temp2_teacher_details = $teachers[$tid];
                                                //GET ROOM ID
                                                $room = $teachers[$tid]['room'];
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                $q_data = array ($school_id, "%$room%");
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $row = $query->fetch();
                                                $room_id = $row['room_id'];
                                                if (!array_key_exists("subjects", $temp2_teacher_details)){
                                                    continue;
                                                }
                                                foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                    $subject_id = $temp_teacher_subjects['id'];
                                                    foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                        $class_id = $temp_teacher_classes['class_id'];
                                                        $class_label = $temp_teacher_classes['class_label'];
                                                        $grade_id = $temp_teacher_classes['grade_id'];
                                                        echo "<br>SUBJECT  $subject_id CLASS $class_label Grade $grade_id <br>";
                                                        if (is_array($temp_teacher_classes)){
                                                            //echo "COUNT periods ".count($temp_teacher_classes['periods'])."<br>";
                                                            print_r($temp_teacher_classes['periods']);
                                                        }
                                                        foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                            //echo "PERIOD ITEMS<br>";
                                                            //print_r($period_items);
                                                            $period_tokens = explode(",", $period_items);
                                                            $day = $period_tokens[0];
                                                            $period = $period_tokens[1];
                                                            //echo "<br> DAY $day PERIOD $period <br>";
                                                            //USERTIMETABLE
                                                            
                                                            //CONVERT PERIOD TO PERIOD LABEL ID
//                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
//                                                            $q_data = array ($school_id, $year_id);
//                                                            $query = $link->prepare($q);
//                                                            $query->execute($q_data);
//                                                            $row = $query->fetchAll();
//                                                            echo "PERIOD ROWS <br>";
//                                                            print_r($row);
//                                                            echo "<br>";
//                                                            if (!array_key_exists($period, $row)){
//                                                                continue;
//                                                            }
                                                            $period_label_id = $period_labels[$period]['period_label_id'];
                                                            if ($period > $break_period){
                                                                $break_count = 0;
                                                                echo "PERIOD $period PERIOD LABEL ID $period_label_id BREAK $break_period BEFORE BREAK COUNT <br>";
                                                                foreach($break_periods as $breakkey=>$break_period_id){
                                                                    echo "PERIOD LABEL ID $period_label_id BREAK ID $break_period_id BREAK COUNT $break_count<br>";
                                                                    if ($period == count($period_labels)-2){
                                                                        $break_count = 1;
                                                                        echo "BREAK COUNT = 1 <br>";
                                                                    } elseif ($period_label_id > $break_period_id){
                                                                        $break_count = 1;
                                                                        
                                                                        echo "BREAK COUNT = PERIOD_LABEL_ID $period_label_id - BREAK_PERIOD_ID $break_period_id<br>";
                                                                    } 
                                                                }

                                                                $period += $break_count;
                                                                
                                                            } elseif ($period == $break_period){
                                                                $break_count = 1;
                                                                echo "BREAK COUNT = PERIOD_LABEL_ID - BREAK_PERIOD_ID + 1<br>";
                                                                //break;
                                                                $period += $break_count;
                                                            }
                                                            
                                                            
//                                                            print_r($period_labels);
                                                            echo "<br>PERIOD $period PERIOD LABEL ID $period_label_id BREAK PERIOD $break_period AFTER BREAK COUNT $break_count</b><br>";
//                                                            if ($period > count($row) && !array_key_exists($period, $row)){
//                                                                continue;
//                                                            }
                                                            if ($period <=  count($period_labels)){
                                                                $period_label_id = $period_labels[$period]['period_label_id'];
                                                            }
                                                            //
                                                            
                                                            
                                                            //timetabl_id,year_id,day_id,period_label_id,grade_id,class_id,room_id,subject_id,teacher_id,substitute_id,
                                                            echo "<br>timetabl_id $timetable_id, year_id $year_id, day $day, period_label_id $period_label_id, grade_id $grade_id, class_id $class_id, room_id $room_id, subject_id $subject_id, user_id $user_id,<br>";
                                                            if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                            //CLASS TIME TABLE
                                                            //GET CLASS TIMETABLE ID
                                                            //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                            //ADD IN CLASS TIMETABLE
                                                            //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                            $class_label_tokens = explode(" ", $class_label);
                                                            if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                $class_timetable_type = 3;
                                                            } else {
                                                                $class_timetable_type = 8;
                                                            }
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                            $q_data = array($school_id, $class_timetable_type, $class_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $num_rows = count($query->fetchAll());
                                                            if ($num_rows == 1){
                                                                //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            } elseif($num_rows == 0){
                                                                //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                if (!empty($class_timetable_type) && !empty($class_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                    $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                    $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                            } else {
                                                                //echo "CLASS $class_label MORE TIMETABLEIDs FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            }
                                                            //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                            //exit;
                                                            if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                        }
                                                    }
                                                }
                                                
                                            }
                                            $timetable_loaded = TRUE;      
                                            //exit;
                                            
                                         } elseif ($num_rows > 1){
                                            $query->execute($q_data);
                                            $timetable_id = 0;
                                            while ($row = $query->fetch()){
                                                if ($timetable_id  < $row["timetabl_id"]){
                                                    $timetable_id = $row["timetabl_id"];
                                                }
                                                //echo "FOUND USER ID $user_id FOR $surname $name<br>";
                                            }
                                            
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                            $q_data = array ($timetable_id, $year_id);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows > 0){
                                                //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                //ALSO CHECK EACH CLASS TIMETABLE
                                            } else {
                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                //NO ITEMS - NEED NEW
                                                //ADD IN USER TIMETABLE
                                                //GET BREAK PERIOD IDS
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                $q_data = array ($school_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $break_periods = array ();
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Break'){
                                                        $break_periods [] = $period_label_id; 
                                                    }
                                                }

                                                $temp2_teacher_details = $teachers[$tid];
                                                //GET ROOM ID
                                                $room = $teachers[$tid]['room'];
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                $q_data = array ($school_id, "%$room%");
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $row = $query->fetch();
                                                $room_id = $row['room_id'];
                                                foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                    $subject_id = $temp_teacher_subjects['id'];
                                                    foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                        $class_id = $temp_teacher_classes['class_id'];
                                                        $class_label = $temp_teacher_classes['class_label'];
                                                        $grade_id = $temp_teacher_classes['grade_id'];
                                                        
                                                        foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                            $period_tokens = explode(",", $period_items);
                                                            $day = $period_tokens[0];
                                                            $period = $period_tokens[1];
                                                            //USERTIMETABLE
                                                            
                                                            //CONVERT PERIOD TO PERIOD LABEL ID
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                            $q_data = array ($school_id, $year_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $row = $query->fetchAll();
                                                            
                                                            
                                                            $period_label_id = $row[$period]['period_label_id'];
                                                            $break_count = 0;
                                                            //echo "<b>PERIOD $period PERIOD ID $period_label_id BEFORE BREAK COUNT <br>";
                                                            foreach($break_periods as $breakkey=>$break_period_id){
                                                                //echo "PERIOD ID $period_label_id BREAK ID $break_period_id $break_count<br>";
                                                                if ($period_label_id == $break_period_id){
                                                                    $break_count = $period_label_id - $break_period_id  + 1;
                                                                    //break;
                                                                } elseif ($period == count($row)-2){
                                                                    $break_count = 1;
                                                                } elseif ($period_label_id > $break_period_id){
                                                                    $break_count = $period_label_id - $break_period_id;
                                                                }
                                                            }
                                                            
                                                            $period += $break_count;
                                                            if ($period > count($row)){
                                                                break;
                                                            }
                                                            $period_label_id = $row[$period]['period_label_id'];
                                                            
                                                            //echo "PERIOD $period PERIOD ID $period_label_id AFTER BREAK COUNT $break_count</b><br>";
                                                            
                                                            
                                                            //echo "} elseif ($num_rows > 1){ timetabl_id $timetable_id, year_id $year_id, day $day, period_label_id $period_label_id, grade_id $grade_id, class_id $class_id, room_id $room_id, subject_id $subject_id, user_id $user_id,<br>";
                                                            
                                                            if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                            //CLASS TIME TABLE
                                                            //GET CLASS TIMETABLE ID
                                                            //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                            //ADD IN CLASS TIMETABLE
                                                            //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                            $class_label_tokens = explode(" ", $class_label);
                                                            if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                $class_timetable_type = 3;
                                                            } else {
                                                                $class_timetable_type = 8;
                                                            }
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                            $q_data = array($school_id, $class_timetable_type, $class_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $num_rows = count($query->fetchAll());
                                                            if ($num_rows == 1){
                                                                //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            } elseif($num_rows == 0){
                                                                //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                if (!empty($class_timetable_type) && !empty($class_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                    $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                    $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                            } else {
                                                                //echo "CLASS $class_label MORE TIMETABLEIDs FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            }
                                                            //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                            //exit;
                                                            if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                        }
                                                    }
                                                }
                                                
                                            }
                                            $timetable_loaded = TRUE;
                                        }
                                        
                                      
                                    }
                                    
                                    if ($timetable_loaded){
                                        //ACTIVATE TIMETABLE FOR THE YEAR
                                        $q = "SELECT * FROM schoollms_schema_userdata_teacher_timetable WHERE school_id = ? AND user_id = ? AND year_id = ?";
                                        $q_data = array ($school_id, $user_id, $year_id);
                                        $query = $link->prepare($q);
                                        $query->execute($q_data);
                                        $num_rows = count($query->fetchAll());
                                        if ($num_rows == 0){
                                            $q = "INSERT INTO schoollms_schema_userdata_teacher_timetable VALUES (?,?,?,?,?,NULL)";
                                            $q_data = array ($user_id,$school_id,$timetable_id,$year_id,"Auto-activated during upload");
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            //echo "TEACHER $teacher TIMETABLE NOT LOADED FOR $year_id $year<br>";
                                        }

//                                            exit;
                                    }
                                    
                                    //FIX REGISTER CLASS
                                     if ($teachers[$tid]['register_class'] !== 'N'){
                                         $class_search = $teachers[$tid]['register_class'];
                                         $grade_number = preg_replace('/[^\-\d]*(\-?\d*).*/','$1',$class_search);
                                         $q = "SELECT * FROM schoollms_schema_userdata_school_classes WHERE school_id = ? AND year_id = ? AND grade_id = ? AND class_label LIKE ?";
                                         $q_data = array ($school_id,$year_id,$grade_number,"%$class_search%");

                                         $query = $link->prepare($q);
                                         $query->execute($q_data);
                                         $num_rows = count($query->fetchAll());
        //                                             echo "CLASS NUM ROWS $num_rows YEAR_ID $year_id<br>";
                                         if ($num_rows == 1){
                                             $query->execute($q_data);
                                             $row = $query->fetch();
                                             $class_id = $row['class_id'];
                                             $class_label = $row['class_label'];
                                             $grade_id = $row['grade_id'];
                                             $class = $class_label;
                                         } else {
                                             $new_class = "Class $class_search";
                                             $q = "INSERT INTO schoollms_schema_userdata_school_classes VALUES (?, ?, ?, NULL, ?)";
                                             $q_data = array($school_id,$year_id,$grade_number,strtoupper($new_class));
                                             $query = $link->prepare($q);
                                             $query->execute($q_data);
                                             $q = "SELECT class_id FROM schoollms_schema_userdata_school_classes WHERE school_id = ? AND year_id = ? AND grade_id = ? AND class_label = ?";
                                             $q_data = array($school_id,$year_id,$grade_number, strtoupper($new_class));
                                             $query = $link->prepare($q);
                                             $query->execute($q_data);
                                             $row = $query->fetch();
                                             $class_id = $row['class_id'];
                                             $class = $new_class;
                                             //echo "CLASS $new_class NEEDS TO BE ADDED TO THE DATABASE <br>";
                                         }
                                         $teachers[$tid]['register_class'] = $class;
                                         $teachers[$tid]['register_class_id'] = $class_id;

                                         //GET ROOM ID
                                         $room = $teachers[$tid]['room'];
                                        $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                        $q_data = array ($school_id, "%$room%");
                                        $query = $link->prepare($q);
                                        $query->execute($q_data);
                                        $row = $query->fetch();
                                        $room_id = $row['room_id'];
                                        
                                         //Get Registeration period_label_id
                                         //CONVERT PERIOD TO PERIOD LABEL ID
                                        $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                        $q_data = array ($school_id, $year_id);
                                        $query = $link->prepare($q);
                                        $query->execute($q_data);
                                        $row = $query->fetchAll();
                                        $period_label_id = $row[0]['period_label_id'];
                                        $register_label = strtoupper($row[0]['period_label']);
                                        //GET REGISTRATION SUBJECT ID IF EXIST - OTHERWISE CREATE IT
                                        $q = "SELECT * FROM schoollms_schema_userdata_school_subjects WHERE UPPER(subject_title) = ?";
                                         $q_data = array ($register_label);
                                         $query = $link->prepare($q);
                                         $query->execute($q_data);
                                         $num_rows = count($query->fetchAll());
    //                                                 echo "SUBJECT NUM ROWS $num_rows <br>";
                                         if ($num_rows == 1){
                                             $query->execute($q_data);
                                             $row = $query->fetch();
                                             $register_subject_id = $row['subject_id'];
                                             //echo "SUBJECT ID $subject_id <br>";
                                         } else {
                                            $q = "INSERT INTO schoollms_schema_userdata_school_subjects VALUES (NULL, ?, ?, ?)";
                                            $q_data = array ($register_label,"SchoolLMS",'');
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $q = "SELECT subject_id FROM schoollms_schema_userdata_school_subjects WHERE UPPER(subject_title) = ?";
                                            $q_data = array($register_label);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $row = $query->fetch();
                                            $register_subject_id = $row['subject_id'];
                                         }
                                         
                                         $day_count = 1;
                                         while($day_count <= $school_settings['days']){
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ? AND day_id = ? AND period_label_id = ?";
                                            $q_data = array ($timetable_id, $year_id, $day_count, $period_label_id);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows == 0){
                                                if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                    $q_data = array ($timetable_id,$year_id,$day_count,$period_label_id,$grade_number,$class_id,$room_id,$register_subject_id,$user_id,0);
                                                    $query = $link->prepare($q);
                                                    $query->execute($q_data);
                                                }
                                            }
                                            
                                            $day_count++;
                                         }
                                     }  
                                 }
                             }
                             
                             //exit;
                             $timetable_div = new DIV();
                            //<div id="timetable" name="timetable">
                            $timetable_message = "id!:!timetable!,!name!:!timetable"; 
                            $timetable_div->setDIVSettings($timetable_message);

                            //YEAR
                            $year = date('Y');

                            $p = new Paragraph();
                            $message = "style!:!'text-align: center;font-size: 300%;'!,!text!:!<b>Merensky High School <br><br> Timetable $year</b> <br></b><br>";
                            $p->setParagraphSettings($message);
                            $p->setParagraph();

                            $timetable_div->setDIVItems($break->addNewLine());
                            $timetable_div->setDIVItems($p->getParagraph());
                            $p->clearParagraph();

                            $center = new Center();
                            $timetable_div->setDIVItems($center->openCenter());

                            $current_view = "view"; //USER VIEW PROCESS
                            $platform = PLATFORM;
                            $image_file = "mhslogo.png";
                            $alt = "MHSLMS";
                            $image_src = USER_VIEW_DEFAULT_THEME_IMAGES_DIR."/$current_view/$platform/$image_file";
                            $style = "width:50%;align:center";
                            $image = new Image();
                            $message = "src!:!'$image_src'!,!alt!:!$alt!,!style!:!$style"; 
                            $image->setImage($message);
                            $timetable_div->setDIVItems($image->getImage());

                            $timetable_div->setDIVItems($center->closeCenter());

                            $p = new Paragraph();
                            $message = "style!:!'text-align: center;font-size: 150%;'!,!text!:!<br> Uploaded and generated by: <br><b>School Learner and Learning Management System</b><br>www.schoollms.net - twitter.com/school_lms - facebook.com/schoollms";
                            $p->setParagraphSettings($message);
                            $p->setParagraph();

                            $timetable_div->setDIVItems($break->addNewLine());
                            $timetable_div->setDIVItems($p->getParagraph());
                            $p->clearParagraph();

                            //GENERATE TEACHER TIMETABLE VIEW
                            $temp_teachers = $teachers;
                            foreach ($temp_teachers as $tid => $teacher_school_details) {

                                //echo "$teacher Timetable <br><br>";
                                $teacher = $teachers[$tid]['name_surname'];
                                $room = $teachers[$tid]['room'];
                                $id = $tid;
                                $table = new Table();
                                $message_queue2 = array ();

                                //$p = new Paragraph();
                                $message = "style!:!'page-break-after:always;'";
                                $p->setParagraphSettings($message);
                                $p->setParagraph();

                                //$timetable_div->setDIVItems($break->addNewLine());
                                $timetable_div->setDIVItems($p->getParagraph());
                                $p->clearParagraph();

                                //YEAR
                                //$year = date('Y');

                                //$p = new Paragraph();
                                $message = "style!:!'text-align: center;font-size: 150%;'!,!text!:!<b>$teacher Timetable $year <br> Classroom $room</b>";
                                $p->setParagraphSettings($message);
                                $p->setParagraph();

                                $timetable_div->setDIVItems($break->addNewLine());
                                $timetable_div->setDIVItems($p->getParagraph());
                                $p->clearParagraph();

                                //$timetable_div->setDIVItems($break->addNewLine());

                                //Timetable DRAW Generated USER timetable
                                $user_timetable = new DIV();
                                $message2 = "style!:!'margin-top: 0px; padding-top: 0px;'";
                                $user_timetable->setDIVSettings($message2);
                                //id="table2" style="width:100%; border-collapse: separate; border-spacing: 3px 3px;"
                                $message2 = "id!:!table2!,!style!:!'width:100%; border-collapse: separate; border-spacing: 3px 3px;'";
                                //$user_timetable->setTableOptions($message);                   
                                //Get ROW messages 
                                //Foreach ROW get COL messages
                                //Foreach COL message get CELL message
                                //$message_queue2 = array ();
                                //<table><tbody><tr><td><a href="http://::1&amp;startdate=-1&amp;today=Wed:04 Jan:01 2017 02:36:28"><img src="./images/arrow_left_22x22.png"></a>
                                //DIV 1
                                //<div style="margin-top: 95px; padding-top: 95px;">
        //                        $message_queue[] = "div!?!style!:!'margin-top: 44px; padding-top: 1px;position: fixed; width:97%'";
        //                        //TABLE 1
                                $message_queue2[] = "table!?!$message2";
                                $message_queue2[] = "tbody!?!";
        //                                    //T1 R1
                                $message_queue2[] = "tr!?!width!:!'100%'";
        //                                        //TABLE 1 TD 1
                                $message_queue2[] = "td!?!class!:!'redisp-mark blank'!,!id!:!'firstTd'";
        //                                            //TABLE 2
                                $message_queue2[] = "table!?!";
                                $message_queue2[] = "tbody!?!";
                                $message_queue2[] = "tr!?!";
                                $message_queue2[] = "td!?!";
                                $message_queue2[] = "/td!?!";
                                $message_queue2[] = "/tr!?!";
                                $message_queue2[] = "/tbody!?!";
                                $message_queue2[] = "/table!?!";
        //                //                       //END TABLE 2
                                $message_queue2[] = "/td!?!";
        //                                        //T1 TD2
                                $message_queue2[] = "td!?!style!:!'width: 100%;'";
        //                                        //T1 DIV 1
        //                //                        //<div style="" id="divHeader">
                                $message_queue2[] = "div!?!style!:!'overflow:-moz-hidden-unscrollable;width:100%;position:relative'!,!id!:!divHeader'";
        //                    //                        
        //                                                //<table cellspacing="0" cellpadding="0" border="1" width="100%">
        ////                                                TABLE 3
                                $message_queue2[] = "table!?!cellspacing!:!0!,!cellpadding!:!0!,!border!:!1!,!width!:!100%";
                                $message_queue2[] = "colgroup!?!";
        ////                        //width="11%"
                                $period_count = 1;
                                while ($period_count <= $school_settings["days"]){
                                    $message_queue2[] = "col!?!width!:!17.5%";
                                    $period_count++;
                                }
                                $message_queue2[] = "/colgroup!?!";
        ////                            //                        
                                $message_queue2[] = "tbody!?!width!:!100%";
                                $message_queue2[] = "tr!?!width!:!100%";

                                //LOOP THROUGH DAYS
                                $period_count = 1;
                                while ($period_count <= $school_settings["periods"]){

                                    $period_string = "<b> Period $period_count </b>";

                                    $message_queue2[] = "td!?!class!:!'redips-mark dark';'";
                        //                        $message_queue2[] = "div!?!class!:!tableHeader";
                                    $message_queue2[] = "paragraph!?!style!:!'font: bold 12px/30px;'!,!text!:!<b>$period_string</b>";
                                    $message_queue2[] = "/paragraph!?!";
    //                                $message_queue2[] = "paragraph!?!style!:!''!,!text!:!$day_string ";
    //                                $message_queue2[] = "/paragraph!?!";
    //                    //                        $message_queue2[] = "/div!?!";
                                    $message_queue2[] = "/td!?!";
    //                                $period_count++;
                                    $period_count++;
                                }

                                $message_queue2[] = "/td!?!";
                                $message_queue2[] = "/tr!?!";
                                $message_queue2[] = "/tbody!?!";
                                $message_queue2[] = "/table!?!";
        //
                                $message_queue2[] = "/div!?!";
                                $message_queue2[] = "/td!?!";
                                $message_queue2[] = "/tr!?!";
        //        //                        
        //                                    //T1 R2
                                $message_queue2[] = "tr!?!";
                                $message_queue2[] = "td!?!valign!:!top";
                                $message_queue2[] = "div!?!style!:!'overflow: -moz-hidden-unscrollable;height:100%;position:relative'!,!id!:!firstcol";
                                $message_queue2[] = "table!?!cellspacing!:!0!,!cellpadding!:!0!,!border!:!1!,!width!:!100%";
                                $message_queue2[] = "colgroup!?!";
                                $message_queue2[] = "col!?!width!:!12.5%";
                                $message_queue2[] = "/colgroup!?!";
                                $message_queue2[] = "tbody!?!";

                                //LOOP THROUGH DAYS
                                $day_count = 1;
                                while ($day_count <= $school_settings["days"]){
                                    $day_string = "<b> Day $day_count <b>";

                                    $message_queue2[] = "tr!?!height!:!75px";    
                                    $message_queue2[] = "td!?!class!:!'mark dark'";
                                    $message_queue2[] = "div!?!class!:!tableFirstCol";
                                    $message_queue2[] = "paragraph!?!style!:!''!,!text!:!<b>$day_string</b>";
                                    $message_queue2[] = "/paragraph!?!";
                                    $message_queue2[] = "/div!?!";
                                    $message_queue2[] = "/td!?!";
                                    $message_queue2[] = "/tr!?!";
    //                                $day_count++;
                                    $day_count++;
                                }

                                $message_queue2[] = "/tbody!?!";
                                $message_queue2[] = "/table!?!";
        //
        //                                                $message_queue2[] = "/div!?!";
                                $message_queue2[] = "/td!?!";
        //                //                        
        //                      TIMETABLE SLOTS

                                //;

                                $message_queue2[] = "td!?!valign!:!top";
                                $message_queue2[] = "div!?!onscroll!:!fnScroll()!,!style!:!'overflow:-moz-hidden-unscrollable;width:100%;height:100%;position:relative'!,!id!:!table_div";
        //                    //                        
                                $message_queue2[] = "table!?!cellspacing!:!0!,!cellpadding!:!0!,!border!:!1!,!width!:!100%";
                                $message_queue2[] = "colgroup!?!";
            ////                        //width="11%"
                                $period_count = 1;
                                while ($period_count <= $school_settings["periods"]){
                                    $message_queue2[] = "col!?!width!:!12.5%";
                                    $period_count++;
                                }

                                $message_queue2[] = "/colgroup!?!";
        //                        
                                $message_queue2[] = "tbody!?!";
                                //LOOP THROUGH SLOTS
                                //$day_count = 1;
                                $day_count = 1;
                                while ($day_count <= $school_settings["days"]){
                                    //$period_count = 1;
                                    $period_count = 1;
                                    if ($day_count == 1 && $period_count == 1){
                                        $message_queue2[] = "tr!?!height!:!75px!,!id!:!firstTr";
                                    } else {
                                        $message_queue2[] = "tr!?!height!:!75px";
                                    }
                                    while ($period_count <= $school_settings["periods"]){
                                        if (!array_key_exists("timetable", $teachers[$tid])){
                                            $slot_item = "";
                                        } elseif (array_key_exists($day_count, $teachers[$tid]['timetable']) && array_key_exists($period_count, $teachers[$tid]['timetable'][$day_count])){
                                            $slot_item = $teachers[$tid]['timetable'][$day_count][$period_count];
                                        } else {
                                            $slot_item = "";
                                        }

                                        $message_queue2[] = "td!?!";
//                                        $message_queue2[] = "div!?!class!:!'redips-mark dark'!,!style!:!'width:100%; max-height:75px; overflow:auto;'";
                                        $message_queue2[] = "div!?!id!:!$id";//!,!class!:!'drag $class'";
                                        $message_queue2[] = "paragraph!?!style!:!''!,!text!:!$slot_item";
                                        $message_queue2[] = "/paragraph!?!";
                                        $message_queue2[] = "/div!?!";
//                                        $message_queue2[] = "/div!?!";
                                        $message_queue2[] = "/td!?!"; 

                                        $period_count++;
                                        //$day_count++;

                                            //$return_slots .= '</div></td>';
                                    }
                                    $message_queue2[] = "/tr!?!";
                                    $day_count++;
                                    //$period_count++;
                                }

                                $message_queue2[] = "/tbody!?!";
                                $message_queue2[] = "/table!?!";
                                $message_queue2[] = "/div!?!";
                                                                    //$message_queue2[] = "//table!?!";
                                $message_queue2[] = "/td!?!";
                                $message_queue2[] = "/tr!?!";
                                $message_queue2[] = "/tbody!?!";
                                $message_queue2[] = "/table!?!";

                                $temp_view = new View();
                                $timetable_message = "";
                                foreach ($message_queue2 as $key => $message) {
                                    $msg_tokens = explode("!?!", $message); 
                                    if (strpos($msg_tokens[0], "/") !== FALSE){
                                        $temp_message = $temp_view->closeViewItem($msg_tokens[0]);
                                        $user_timetable->setDIVItems($temp_message);                                   
                                    } else {
                                        $temp_message = $temp_view->openViewItem($message);
                                        $user_timetable->setDIVItems($temp_message);                                
                                    }
                                }

        //                        echo "PARAGRAPH <br>".$user_timetable->items;
                                $user_timetable->setDIV();
                                //echo $user_timetable->getDIV();
                                //exit;
                                //$p = new Paragraph();
                                $timetable_div->setDIVItems($user_timetable->getDIV());

                                //echo 
                                //GENERATE REPORT 
//                                $message = "style!:!'page-break-after:always;'";
//                                $p->setParagraphSettings($message);
//                                $p->setParagraph();
//
//                                //$timetable_div->setDIVItems($break->addNewLine());
//                                $timetable_div->setDIVItems($p->getParagraph());
//                                $p->clearParagraph();
//                                $message = "style!:!'text-align: center;font-size: 150%;'!,!text!:!<b>$teacher Timetable Generator Report </b>";
//                                $p->setParagraphSettings($message);
//                                $p->setParagraph();
//
//                                $timetable_div->setDIVItems($break->addNewLine());
//                                $timetable_div->setDIVItems($p->getParagraph());
//                                $p->clearParagraph();
//
//
//                                foreach($reports[$tid] as $rkey=>$rmessage){
//                                    $message = "style!:!'text-align: center;font-size: 150%;'!,!text!:!$rmessage";
//                                    $p->setParagraphSettings($message);
//                                    $p->setParagraph();
//
//                                    $timetable_div->setDIVItems($break->addNewLine());
//                                    $timetable_div->setDIVItems($p->getParagraph());
//                                    $p->clearParagraph();
//                                }




                                $user_timetable->clearDIV();


                            }
                            
                            $timetable_div->setDIV();
                            echo $timetable_div->getDIV();
                        
                            exit;
                             
                         }
                        exit;
                        
                        break;
                    
                    case 'filter':
                        
                        break;
                    
                    case 'view':
                        
                        break;
                    
                }
                
                $div->setDIV();
                //echo "TAB ".$div->getDIV()."<br>";
                $tabs->setTabItems($div->getDIV());
                $div->clearDIV();
            }
            break;
        
        case 'develop/timetable/load/sphs/teachers/allocations':
            $message_queue = array ();
            //<div class="tabs-selected" title="View/Modify Time Table" style="padding:10px">
            //<div id="timetabletab" title="Reports" style="padding:10px">
            $message_queue["load"] = "class!:!'tabs-selected'!,!title!:!'Load Timetable Data'!,!style!:!'padding:10px'";
            $message_queue["filter"] = "class!:!'tabs-selected'!,!title!:!'Filter'!,!style!:!'padding:10px'";
            $message_queue["view"] = "class!:!'timetabletab'!,!title!:!'View'!,!style!:!'padding:10px'";
            
            foreach ($message_queue as $message_key => $message) {
                $div = new DIV();
                //echo "user_view_body_content_tabs MSG: $message <br>";
                $div->setDIVSettings($message);
               
                switch ($message_key) {
                
                    case 'load':
                        $school_id = 1;
                        $user_type = 4;
                        $dsn = "mysql:host=localhost;dbname=sphslms_qa_vas_timetable;charset=utf8";
                        $opt = [ PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
                                    //PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
                                    PDO::ATTR_EMULATE_PREPARES   => false,
                                ];

                        $link = new PDO ($dsn, 'root', '$0W3t0');
                        $data_message = array();
//                        $data_message["db"] = "sphslms_qa_vas_timetable";
//                        $data_message["engine"] = "mysql";
//                        $data_message["type"] = "db";
//                        $data_message["username"] = "root";
//                        $data_message["password"] = "$0W3t0";
//                        $data_message["host"] = "localhost";
//                        $data_message["charset"] = "utf8";
                        
                       // $schooldb = new Data($data_message);
                        $school_settings = array ();
                        $school_settings["periods"] = 6;
                        $school_settings["days"] = 10;
                        
                        $grades = array ();
                        $grades[] = "8";
                        $grades[] = "9";
                        $grades[] = "10";
                        $grades[] = "11";
                        $grades[] = "12";
                        

                        
                        /*
                         * +--------------------------------+
                            | subject_title                  |
                            +--------------------------------+
                            | CREATIVE ARTS                  |
                            | AFRIKAANS                      |
                            | EMS                            |
                            | ENGLISH                        |
                            | LIFE ORIENTATION               |
                            | MATHEMATICS                    |
                            | NATURAL SCIENCES               |
                            | GEOGRAPHY (J-GEO)              |
                            | TECHNOLOGY                     |
                            | ACCOUNTING                     |
                            | AFRIKAANS FIRST ADDITIONAL LAN |
                            | VISUAL ARTS                    |
                            | BUSINESS STUDIES               |
                            | CIVIL TECHNOLOGY               |
                            | COMPUTER APPLICATIONS TECHNOLO |
                            | CONSUMER STUDIES               |
                            | ECONOMICS                      |
                            | ENGINEERING GRAPHICS AND DESIG |
                            | ENGLISH HOME LANGUAGE          |
                            | GEOGRAPHY                      | 
                            | HISTORY                        |
                            | LIFE SCIENCES                  |
                            | MATHEMATICAL LITERACY          |
                            | PHYSICAL SCIENCES              |
                            | RELIGION STUDIES               |
                            | TOURISM                        |
                            | HISTORY [J-HIS]                |
                            | SOCIAL SCIENCES                |
                            | AFRIKAANS FIRST ADD LANG       |
                            | Afrikaans/Zulu                 |
                            | REGISTRATION                   |
                            | LO Sport                       |
                            +--------------------------------+

                         */
                        $school_subjects = array ();
                        $school_subjects[] = array('abrev' => "ZU;IsiZulu", 'name'=> "Zulu");
                        $school_subjects[] = array('abrev' => "ENG;Eng HML", 'name'=> "English");
                        $school_subjects[] = array('abrev' => "NS", 'name'=> "NATURAL SCIENCES");
                        $school_subjects[] = array('abrev' => "SS", 'name'=> "SOCIAL SCIENCES");
                        $school_subjects[] = array('abrev' => "Afrik/Zulu", 'name'=> "Afrikaans/Zulu");
                        $school_subjects[] = array('abrev' => "L/S;Life Sci", 'name'=> "LIFE SCIENCES");
                        $school_subjects[] = array('abrev' => "Afrikaans/LO", 'name'=> "Afrikaans/Life Orientation");
                        $school_subjects[] = array('abrev' => "LO;LO1;LO2;LO3", 'name'=> "LIFE ORIENTATION");
                        $school_subjects[] = array('abrev' => "LO Sport/LO", 'name'=> "LO Sport/LO");
                        $school_subjects[] = array('abrev' => "Art;A/C", 'name'=> "CREATIVE ARTS");
                        $school_subjects[] = array('abrev' => "EMS", 'name'=> "EMS");
                        $school_subjects[] = array('abrev' => "Maths;Math", 'name'=> "MATHEMATICS");
                        $school_subjects[] = array('abrev' => "Math Lit", 'name'=> "MATHEMATICAL LITERACY");
                        $school_subjects[] = array('abrev' => "CAT", 'name'=> "COMPUTER APPLICATIONS TECHNOLO");
                        $school_subjects[] = array('abrev' => "AFR", 'name'=> "Afrikaans");
                        $school_subjects[] = array('abrev' => "Hist", 'name'=> "HISTORY");
                        $school_subjects[] = array('abrev' => "EGD", 'name'=> "ENGINEERING GRAPHICS AND DESIG");
                        $school_subjects[] = array('abrev' => "Tour", 'name'=> "TOURISM");
                        $school_subjects[] = array('abrev' => "Geog", 'name'=> "GEOGRAPHY");
                        $school_subjects[] = array('abrev' => "B Stud;B. Stud", 'name'=> "BUSINESS STUDIES");
                        $school_subjects[] = array('abrev' => "Civil", 'name'=> "CIVIL TECHNOLOGY");
                        $school_subjects[] = array('abrev' => "C.Stud", 'name'=> "CONSUMER STUDIES");
                        $school_subjects[] = array('abrev' => "Phys.Sci;Phys. Sci", 'name'=> "PHYSICAL SCIENCES");
                        $school_subjects[] = array('abrev' => "Techn", 'name'=> "TECHNOLOGY");
                        $school_subjects[] = array('abrev' => "Math Lit/LO", 'name'=> "MATHEMATICAL LITERACY/Life Orientation");
                        $school_subjects[] = array('abrev' => "Math/LO", 'name'=> "MATHEMATICS/Life Orientation");
                        $school_subjects[] = array('abrev' => "Eng HML/LO", 'name'=> "English/Life Orientation");
                        $school_subjects[] = array('abrev' => "IsiZulu/LO", 'name'=> "Zulu/Life Orientation");
                        $school_subjects[] = array('abrev' => "Econ", 'name'=> "ECONOMICS");
                        $school_subjects[] = array('abrev' => "Account", 'name'=> "ACCOUNTING");
                        //
                        
                        $school_classes = array ();
                        
                        $teacher_timetable_load = array ();
                        //FORMULA - 
                        // 1 - Teacher Details(Surname Initial/Dual Teachers Surnames with "/" between them)
                        // 2 - "-" to separate Teacher Details with additional details like room, register class
                        // 3 - "#" (HASHTAG) to separate the teacher details with slot details 
                        // 4 - Subject Acronym 
                        // 5 - "-" (DASH) to separate subject from class label
                        // 6 - Class Label
                        // 7 - "@" (AT SIGN) to begin the list of day/period slots where subject in class will be loaded and separate classes doing the same subject taught by teacher
                        // 8 - "," (COMMA) is used to separate day and period numbers (eg. DAY 1, PERIOD 3)
                        // 9 - "+" (PLUS) is used to concatenate the list of day/period slots where the subject is loaded to the class
                        // 10 - "&" (AMPERSAND) is used to add other classes doing the same current subject
                        // 11 - ";" (SEMI-COLON) is user to separate subjects data taught by teacher
                        
//$teacher_timetable_load[] = "Badal Y-J7-8U#SS-8U@1,1+3,3+4,2+6,2+8,2+9,3+10,6&9R@1,2+3,4+5,2+6,6+7,4+8,3+10,5&8S@1,3+2,1+5,1+7,3+8,5+9,2+10,4&8W@1,4+2,2+5,5+6,1+7,1+8,6+9,4&9D@1,5+2,4+3,6+7,5+8,1+9,1+10,3&8N@1,6+2,6+3,2+5,4+6,5+9,5+10,1&9P@2,3+3,5+4,3+5,6+6,4+7,2+8,4&9A@2,5+3,1+4,4+6,3+7,6+9,6+10,2";
//$teacher_timetable_load[] = "Barnard K-P3-11N#Afrik/Zulu-8D@1,2+2,3+3,6+4,6+5,6+6,6+7,6+9,2;English-9D@1,3+2,2+3,1+4,4+5,4+6,1+7,1+8,2+9,4+9,5+10,4&8P@1,4+2,5+3,3+4,1+5,1+6,4+6,5+7,2+8,1+9,6+10,1&8D@1,5+2,6+3,4+4,5+5,2+6,2+7,4+7,5+8,4+9,3+10,2&9R@1,6+2,4+3,2+4,2+4,3+5,3+6,3+7,3+8,5+9,1+10,3";
$teacher_timetable_load[] = "Barry B-L6-11S#L/S-K5_12@1,2+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6&K2_10@1,4+2,5+4,1+5,2+6,3+7,4+8,5+9,6+10,1&K4_10@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1&K3_11@1,6+2,4+3,5+5,1+6,2+7,5+8,6+9,4+10,3;NS-8U@2,2+3,4+4,4+5,5+6,6+7,1+10,2&8S@2,3+3,6+4,3+5,4+6,5+9,3+10,5";
//$teacher_timetable_load[] = "Schafer/Vermeulen-L5-N#Life Sci-K1_12@1,1+2,2+3,3+5,5+6,6+7,1+8,2+9,3+10,4&K2_10@1,4+2,5+4,1+5,2+6,3+7,4+8,5+9,6+10,1;Afrikaans-K5_12@1,2+2,3+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6&K6_11@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5&K3_12@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+9,4+10,3;Afrik/Zulu-8P@1,5+2,6+3,4+5,3+7,6+8,3+9,1+10,2";
//$teacher_timetable_load[] = "Pape A-L15-N#LO3-10D@1,2&11S@1,5&10P@3,4&12N@9,1&12W@10,1&11U@10,6;LO2-12W@1,3&11S@2,2&12N@4,4&10P@9,2&11U@9,5&10D@10,2;LO1-9N@1,4+8,4+9,6+10,6&9S@2,5+4,6+6,5+8,1&9U@4,1+6,3+7,4+9,3;LO Sport/LO-K5_12@2,3&K3_11@4,3&K3_10@9,4&k3_12@3,5&k1_10@6,6&k2_11@5,2";
//$teacher_timetable_load[] = "Botha C-A29-10A#Afrikaans-K1_10@1,1+2,2+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K5_10@1,2+2,3+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6&K4_10@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1+10,2;Afrik/Zulu-9K@1,3+2,4+3,5+4,6+6,5+7,2+9,2+10,1&9P@1,6+2,1+3,6+4,1+5,4+6,3+8,5+10,3&9D@1,4+2,5+3,4+4,3+5,2+6,2+7,4+9,6";
//$teacher_timetable_load[] = "Chirambadare T-P4-11W#Maths-8R@1,1+1,2+2,5+3,2+4,5+5,2+6,3+7,4+8,5+9,4+10,4&9R@1,4+2,2+2,3+3,3+4,1+5,6+6,1+7,1+8,2+9,3+10,1&8P@1,6+2,4+3,5+4,3+4,4+5,5+6,2+7,3+8,4+9,5+10,3&K4_10@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1+10,2;Math Lit-K6_10@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5";
//$teacher_timetable_load[] = "Chivaviro T-L13-N#Maths-K5_11@1,2+2,3+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6&K2_12@1,4+2,5+3,4+4,1+5,2+6,3+7,4+8,5+9,6+10,1&K4_11@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1+10,2&K3_12@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+9,4+10,3;NS-9I@2,2+4,6+5,5+6,5+8,2+9,3+10,5";
//$teacher_timetable_load[] = "Claassen E-A9-8P#Afrik/Zulu-8W@1,1+2,6+3,1+4,1+5,2+6,3+8,5+10,4&8N@1,2+2,5+3,3+4,2+5,5+6,4+8,3+10,6&8A@1,4+2,3+3,2+5,6+6,6+7,6+9,1+10,2&8R@1,5+4,4+5,3+6,1+7,3+8,4+9,6+10,1;Afrikaans/LO-K6_12@1,3&K3_12@3,5;Afrikaans-K6_12@2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5&K3_12@1,6+2,4+4,3+5,1+6,2+7,5+8,6+9,4+10,3";
//$teacher_timetable_load[] = "Devnath A-C1-10H#Maths-9P@1,1+2,5+3,3+4,4+5,2+6,2+7,4+8,2+9,3+9,4+10,1&8D@1,4+2,2+3,5+4,1+5,1+6,3+7,1+8,5+9,6+10,3+10,4;Math Lit-K5_11@1,2+2,3+3,2+4,5+5,6+6,1+7,3+8,4+10,6&K4_12@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+10,2&K6_12@2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5;Math Lit/LO-K6_12@1,3&K4_12@9,1&K5_11@9,5";
//$teacher_timetable_load[] = "Du Plessis A-A16-12D#CAT-K1_10@1,1+2,2+3,3+4,4+5,5+7,1+8,2+9,3+10,4&K4_11@2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1+10,2;Afrik/Zulu-8H@1,2+3,6+4,1+5,4+6,6+7,5+8,6+9,6&8K@1,4+2,1+4,6+5,1+6,2+8,5+9,4+10,5&9I@1,5+2,5+3,4+5,2+6,3+7,3+9,5+10,1&9H@1,6+2,4+3,2+4,5+5,6+6,1+7,4+9,2";
//$teacher_timetable_load[] = "Du Plessis B-C2-9S#Math Lit-K1_10@1,1+2,2+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K4_11@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1+10,2&K3_10@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+9,4+10,3;Maths-8U@1,2+2,5+3,2+4,6+5,6+6,3+7,4+8,4+8,5+9,5+10,1&8N@1,3+1,4+2,1+3,6+4,1+5,2+6,1+7,2+8,1+9,6+10,5";
//$teacher_timetable_load[] = "Du Preez S-A7-8K#Afrikaans-K1_11@1,1+2,2+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K6_10@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5&K3_11@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+9,4+10,3&K5_10@1,2+2,3+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6&K4_11@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1+10,2";
//$teacher_timetable_load[] = "Dube M-J3-8R#A/C-9D@1,2+2,6+7,6+10,1&8H@1,4+2,5+5,2+10,6&8S@1,6+3,1+5,3+6,1&9K@2,2+6,6+7,3+9,1&9P@2,4+4,5+7,1+9,2&8N@3,4+7,4+8,4+9,4&8U@4,3+5,1+6,4+9,6&9R@4,6+7,5+8,6+9,5&8A@4,1+6,3+8,1+10,3;Techn-8R@1,3+3,6+6,2+7,2&9A@1,5+5,5+8,2+10,4&9R@2,1+3,5+4,4+10,2&9K@2,3+5,4+8,3+9,3&8A@4,2+6,5+8,5+10,5";
//$teacher_timetable_load[] = "Duda N-J5-N#Hist-K1_12@1,1+2,2+3,3+5,5+6,6+7,1+8,2+9,3+10,4&K5_12@1,2+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6&K3_11@1,6+2,4+3,5+5,1+6,2+7,5+8,6+9,4+10,3&K6_12@2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5";
//$teacher_timetable_load[] = "Engelbrecht J-C5-9A#Afrikaans-K1_11@1,1+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K5_11@1,2+2,3+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6&k6_12@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5&K2_11@1,4+2,5+3,4+4,1+5,2+6,3+7,4+8,5+9,6+10,1&K4_12@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1+10,2";
//$teacher_timetable_load[] = "Grobler B-A17-12P#Afrikaans-K1_12@1,1+2,2+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K2_12@1,4+2,5+3,4+4,1+5,2+6,3+7,4+8,5+9,6+10,1;Afrik/Zulu-9W@1,2+3,2+4,2+5,4+6,1+8,4+9,2+10,3&9R@1,3+2,6+3,1+5,1+6,5+7,6+9,4+10,6&9N@1,5+2,4+3,6+4,5+5,3+6,4+7,2+10,2&9A@2,3+3,5+4,3+5,6+6,2+8,6+9,1+10,5";
//$teacher_timetable_load[] = "Gumbo N-J6-8S#NS-8D@1,1+2,5+3,1+4,3+5,5+6,4+8,2&8K@1,6+2,6+3,4+6,6+8,6+9,1+10,2&8P@2,1+3,6+4,2+5,4+6,3+7,5+8,5&8H@3,3+4,4+5,3+6,5+7,2+8,4+10,5;Maths-8W@1,2+2,3+3,5+4,5+4,6+5,6+6,2+7,6+8,3+9,6+10,6&9A@1,3+1,4+2,2+3,2+4,1+5,2+6,1+7,1+8,1+9,2+10,1";  
//$teacher_timetable_load[] = "Hubbard F-M2-10K#EGD-K5_12@1,2+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6&K6_11@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2&K2_11@1,4+2,5+3,4+4,1+6,3+7,4+8,5+9,6+10,1&K4_10@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1&K3_10@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+10,3";
//$teacher_timetable_load[] = "Jerkin N-A28-10W#Eng HML-K1_11@1,1+2,2+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K5_11@1,2+2,3+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6&K2_12@1,4+2,5+3,4+4,1+5,2+6,3+7,4+8,5+9,6+10,1&K3_11@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+9,4+10,3&K4_11@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1+10,2;
//$teacher_timetable_load[] = "Keulder L-L3-12U#Life Sci-K1_11@1,1+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K2_10@1,4+2,5+4,1+5,2+6,3+7,4+8,5+9,6+10,1&K4_12@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+10,2;NS-9A@1,2+2,1+4,5+5,1+8,4+9,4+10,6&9U@1,3+2,3+3,4+5,4+6,5+7,2+9,2&9N@1,6+2,2+3,5+4,6+8,1+9,5+10,3&9W@2,4+3,6+4,3+5,6+7,5+9,1+10,5";                        
//$teacher_timetable_load[] = "Kruger J-L4-N#Life Sci-K1_11@1,1+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K5_11@1,2+3,2+4,5+5,6+6,1+7,3+8,4+10,6&K6_11@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2&K2_12@1,4+2,5+3,4+4,1+5,2+6,3+7,4+8,5+9,6&K3_10@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+10,3";                        
//$teacher_timetable_load[] = "Langa S-C4-9N#EMS-9K@1,1+3,3+9,6+10,4&9I@1,4+7,4+9,4+10,2&9H@2,2+4,4+5,2+8,5;B.Stud-K6_10@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+10,5&K4_10@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1&K3_10@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+10,3&K5_10@2,3+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6;LO2-10K@3,4;LO3-10K@6,6";
//$teacher_timetable_load[] = "Lebaka J-P1-12N#NS-9S@1,1+4,4+5,2+6,6+8,2+9,4+10,4;Phys.Sci-K6_11@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2&K2_11@1,4+2,5+3,4+4,1+6,3+7,4+8,5+9,6+10,1&K3_10@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+10,3&K5_10@2,3+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6&K4_11@2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1+10,2";
//$teacher_timetable_load[] = "Madihlaba J-J8-8N#A/C-8P@1,1+3,2+6,6+8,2&9S@1,2+2,1+4,3+9,6&9W@1,6+5,2+6,5+10,1&8K@2,2+5,3+7,3+9,3&8R@2,4+5,5+9,5+10,6&9U@2,5+4,6+8,5+10,4&8D@3,3+5,4+8,1+9,4&9N@4,1+6,3+7,6+8,6;Techn-9S@1,3+3,4+7,2+10,5&9U@1,4+3,6+6,4+10,2&8U@1,5+2,6+8,3+9,1&8K@3,1+4,2+5,6+7,4&8S@3,5+7,5+8,4+10,3";
//$teacher_timetable_load[] = "Magadlela-P5-11A#English-8k@1,1+2,3+3,3+4,5+5,5+6,1+7,1+8,4+9,5+10,4;Eng HML-K6_11@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5&K2_10@1,4+2,5+3,4+4,1+5,2+6,3+7,4+8,5+9,6+10,1&K4_10@1,5+2,6+3,1+4,2+5,3+7,6+8,3+9,1+10,2&K3_10@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+9,4+10,3;"
//$teacher_timetable_load[] = "Magida L-J4-8D#LO1-8A@1,1+5,5+6,4+7,4&8R@1,4+2,6+3,3+4,1&8U@1,6+2,4+5,3+7,6&9I@2,1+4,2+8,1+10,6&8W@2,5+6,5+7,3+10,3&9H@3,1+5,1+7,1+9,6&8S@3,2+4,5+6,3+8,3&8N@5,6+6,2+7,5+8,6;LO3-10U@1,2&11K@2,2&12S@3,5&12U@4,4&10S@9,4&11H@10,5;LO2-12U@1,3&11K@4,3&10S@6,6&10U@9,2&11H@9,5&12S@10,1;LO Sport/LO-K4_11@1,5&K5_12@2,3&K2_10@3,4&K2_11@5,2&K4_12@9,1&K4_10@10,2";
//$teacher_timetable_load[] = "Mbuli P-L11-12R#Tour-K1_11@1,1+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K6_10@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+10,5&K2_12@1,4+2,5+3,4+4,1+5,2+6,3+7,4+8,5+9,6&K5_10@2,3+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6&K4_11@2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1+10,2;SS-8A@1,5+3,5+4,3+5,1+7,5+9,2+10,1";
//$teacher_timetable_load[] = "McKechnie M-A19-N#CAT-K1_12@1,1+2,2+3,3+5,5+6,6+7,1+8,2+9,3+10,4&K3_12@1,6+2,4+4,3+5,1+6,2+7,5+8,6+9,4+10,3;Art-K5_11@1,2+2,3+3,2+4,5+5,6+6,1+7,3+8,4+10,6&K4_10@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1&K6_12@2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5";
//$teacher_timetable_load[] = "Mmako D-A6-8H#Afrikaans-K1_10@1,1+2,2+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K6_11@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5&K2_11@1,4+2,5+3,4+4,1+5,2+6,3+7,4+8,5+9,6+10,1&K3_10@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+9,4+10,3&K4_11@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1+10,2;
//$teacher_timetable_load[] = "Moodley R-A30-10D#Eng HML-K5_12@1,2+2,3+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6&K6_10@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5&K4_10@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1+10,2;English-8S@1,4+2,4+2,5+3,3+4,1+5,2+6,2+7,4+8,2+9,4+10,1&8R@1,6+2,2+3,4+3,5+4,3+5,1+6,6+7,1+8,6+9,3+10,3";
//$teacher_timetable_load[] = "Mpedzamombe P-M5-11P#Geog-K1_10@1,1+2,2+3,3+4,4+5,5+7,1+8,2+9,3+10,4&K6_10@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+10,5&K2_10@1,4+2,5+4,1+5,2+6,3+7,4+8,5+9,6+10,1&K4_11@2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1+10,2;SS-9N@1,2+3,4+5,6+6,6+7,5+8,4+9,4&9W@1,5+2,3+3,5+4,5+7,3+8,6+9,5";
//$teacher_timetable_load[] = "Muranda P-A26-10U#Eng HML-K1_11@1,1+2,2+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K5_11@1,2+2,3+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6&K4_12@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1+10,2&K3_11@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+9,4+10,3&K6_12@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5";
//$teacher_timetable_load[] = "Naicker D-C10-9K#Account-K1_11@1,1+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K6_10@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+10,5&K2_11@1,4+2,5+3,4+4,1+6,3+7,4+8,5+9,6+10,1&K3_12@1,6+2,4+4,3+5,1+6,2+7,5+8,6+9,4+10,3;Econ-K4_10@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1&K5_10@2,3+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6";
//$teacher_timetable_load[] = "Naicker J-C9-N#EMS-8S@1,1+2,2+4,4+9,5&8U@2,1+3,5+5,2+10,4&8N@4,6+6,6+7,1+8,2;B Stud-K5_11@1,2+2,3+3,2+4,5+5,6+6,1+7,3+8,4+10,6&K2_11@1,4+2,5+3,4+4,1+6,3+7,4+8,5+9,6+10,1&K4_12@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+10,2&K3_12@1,6+2,4+4,3+5,1+6,2+7,5+8,6+9,4+10,3";
//$teacher_timetable_load[] = "Naidoo M-L12-12A#Hist-K1_10@1,1+2,2+3,3+4,4+5,5+7,1+8,2+9,3+10,4&K5_11@1,2+2,3+3,2+4,5+5,6+6,1+7,3+8,4+10,6&K6_10@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+10,5&K2_11@1,4+2,5+3,4+4,1+6,3+7,4+8,5+9,6+10,1&K3_10@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+10,3;SS-9S@1,5+2,6+3,1+5,3+7,6+8,3+9,2";                        
//$teacher_timetable_load[] = "Naidu C-A31-10P#Eng HML-K1_12@1,1+2,2+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K2_10@1,4+2,5+3,4+4,1+5,2+6,3+7,4+8,5+9,6+10,1&K3_10@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+9,4+10,3&k4_12@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1+10,2;English-8U@1,3+2,3+3,6+4,5+5,4+6,5+7,2+7,3+8,1+9,2+10,5";
//$teacher_timetable_load[] = "Ncokazi S-A27-10N#English-8N@1,1+2,3+3,5+4,3+5,3+6,3+7,3+8,5+9,1+9,2+10,4&9K@1,2+2,5+3,2+4,1+4,2+5,1+6,1+7,1+8,4+9,5+10,3&9P@1,3+2,2+3,1+4,6+5,5+6,5+6,6+7,5+8,3+9,6+10,5&8W@1,5+2,1+3,6+4,4+5,4+6,4+7,4+8,2+9,3+10,1+10,2&8A@1,6+2,6+3,3+3,4+4,5+5,2+6,2+7,2+8,6+9,4+10,6";
//$teacher_timetable_load[] = "Ncube S-P7-11D#Maths-9U@1,1+2,1+3,2+3,3+4,2+5,1+6,1+7,3+8,6+9,1+10,5&8S@1,2+2,6+3,4+4,6+5,5+6,6+7,1+7,2+8,1+9,6+10,6&9S@1,4+2,3+3,5+4,1+5,6+6,2+6,3+7,4+8,5+9,3+10,1&8K@1,5+2,4+2,5+3,6+4,4+5,4+6,4+7,5+8,3+9,2+10,3;LO2-11A@2,2&11R@4,3&10H@10,2;LO3-11R@5,2&10H@9,4&11A@9,5";                       
//$teacher_timetable_load[] = "Ndebele M-A20-10R#Math Lit-K1_12@1,1+2,2+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K6_11@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5&K2_11@1,4+2,5+3,4+4,1+5,2+6,3+7,4+8,5+9,6+10,1&K3_12@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+9,4+10,3;Maths-K5_10@1,2+2,3+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6";
//$teacher_timetable_load[] = "Ndlela L-C11-9H#B Stud-K1_11@1,1+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K2_12@1,4+2,5+3,4+4,1+5,2+6,3+7,4+8,5+9,6&K3_11@1,6+2,4+3,5+5,1+6,2+7,5+8,6+9,4+10,3&K6_12@2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5&K4_11@2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1+10,2;EMS-9P@1,5+7,3+9,5+10,6;LO Sport/LO-K5_10@1,2";
//$teacher_timetable_load[] = "Ndlovu N-P6-11R#English-8H@1,1+2,1+2,2+3,5+4,5+5,5+6,3+7,4+8,5+9,5+10,4;NS-8A@1,2+2,5+4,6+5,3+7,3+8,3+9,3&8W@1,3+2,4+3,4+4,2+6,6+9,2+10,5&8R@2,3+5,6+6,4+7,6+8,2+9,1+10,2;Afrik/Zulu-8U@1,4+3,1+4,1+6,1+7,5+8,6+9,4+10,3;SS-9U@1,5+4,4+5,2+7,1+8,1+9,6+10,1;A/C-8W@1,6+3,3+5,1+8,4";                        
//$teacher_timetable_load[] = "Ngubo P-L17-11H#English-9A@1,1+2,4+3,3+4,2+5,4+6,4+6,5+7,5+8,3+9,3+10,3&9W@1,4+2,5+3,1+3,1+4,1+5,1+6,2+7,1+8,1+8,2+9,6+10,6;LO Sport/LO-K5_10@1,2&K6_12@1,3&K1_12@4,4&K3_10@9,4&K5_11@9,5&K6_11@10,5;LO2-11P@1,5&12D@2,3&10N@3,4&11D@5,2&12P@9,1&10W@10,2;LO1-9D@1,6+4,5+5,6+8,6&9W@2,1+6,3+7,4+8,5&9A@2,6+4,6+5,3+7,2&9R@3,6+5,5+8,4+10,4;LO3-11P@2,2&12D@3,5&11D@4,3&10N@6,6&10W@9,2&12P@10,1";
//$teacher_timetable_load[] = "Ngwenya S-M3-11K#Civil-K1_12@1,1+2,2+3,3+5,5+6,6+7,1+8,2+9,3+10,4&K2_10@1,4+2,5+4,1+5,2+6,3+7,4+8,5+9,6+10,1&K3_11@1,6+2,4+3,5+5,1+6,2+7,5+8,6+9,4+10,3;Techn-9P@1,2+5,3+7,6+9,1&8D@1,3+2,1+3,2+4,4&9I@2,3+3,6+4,3+5,4&9D@4,2+6,5+8,3+10,6&8P@3,1+4,5+9,2+10,5;SS-8H@1,5+2,6+3,4+4,6+6,1+8,1+10,2";
//$teacher_timetable_load[] = "Ntema P-L16-10S#IsiZulu-K1_10@1,1+2,2+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K6_10@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5&K2_10@1,4+2,5+3,4+4,1+5,2+6,3+7,4+8,5+9,6+10,1;Afrik/Zulu-8S@1,5+4,2+5,6+6,4+7,6+8,6+9,1+10,2&9U@1,6+2,6+3,1+4,3+5,3+8,3+9,4+10,3&9S@3,2+4,5+5,1+6,1+7,3+8,4+9,5+10,6";
//$teacher_timetable_load[] = "Pape R-L18-N#C.Stud-K1_10@1,1+2,2+3,3+4,4+5,5+7,1+8,2+9,3+10,4&K6_11@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2&K3_12@1,6+2,4+4,3+5,1+6,2+7,5+8,6+9,4+10,3";
//$teacher_timetable_load[] = "Pillay K-P8-9W#Maths-9D@1,1+2,3+3,2+4,6+5,5+6,6+7,2+8,4+9,2+9,3+10,5&8A@1,3+2,1+2,2+3,6+4,4+5,4+6,1+7,1+8,2+9,5+10,4;Math Lit-K2_10@1,4+2,5+3,4+4,1+5,2+6,3+7,4+8,5+9,6+10,1&K4_10@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1+10,2&K3_11@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+9,4+10,3";
//$teacher_timetable_load[] = "Schoeman A-C8-9P#Maths-9W@1,1+2,2+3,3+4,4+5,3+6,4+7,6+8,3+9,3+10,2+10,4&K5_12@1,2+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6&9N@1,3+2,6+3,1+4,2+5,4+5,5+6,5+7,1+8,2+9,1+10,5&K2_11@1,4+2,5+3,4+4,1+5,2+6,3+7,4+8,5+9,6+10,1&K3_11@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+9,4+10,3";
//$teacher_timetable_load[] = "Sengu M-C6-9R#Math Lit-K1_10@1,1+2,2+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K5_12@1,2+2,3+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6;Maths-9H@1,3+1,5+2,6+3,6+4,6+5,3+6,2+7,2+8,6+9,4+10,2&K2_10@1,4+2,5+3,4+4,1+5,2+6,3+7,4+8,5+9,6+10,1&8H@1,6+2,4+3,1+4,2+5,1+6,4+7,6+8,3+9,1+9,2+10,3";
//$teacher_timetable_load[] = "Shaw G-L14-12W#NS-9R@1,1+2,5+5,4+6,4+7,2+8,1+9,6&9K@1,6+3,6+5,6+6,2+7,5+8,2+10,6&9D@2,1+3,3+4,1+5,3+6,3+7,3+8,5&8N@2,4+3,1+4,5+5,1+7,6+9,3+10,3&9P@1,4+2,6+3,2+4,2+6,1+8,6+10,4;LO2-10R@1,2&12A@3,5&11N@5,2&12R@9,1&10A@9,4&11W@10,5;LO Sport/LO-K6_12@1,3&K2_10@3,4&K3_11@4,3&K5_11@9,5&K2_12@10,1&K4_10@10,2;LO3-11W@1,5&11N@2,2&12A@2,3&12R@4,4&10A@6,6&10R@9,2";
//$teacher_timetable_load[] = "Simelane T-C12-9I#Econ-K5_11@1,2+2,3+3,2+4,5+5,6+6,1+7,3+8,4+10,6&K2_12@1,4+2,5+3,4+4,1+5,2+6,3+7,4+8,5+9,6&K4_12@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+10,2&K3_11@1,6+2,4+3,5+5,1+6,2+7,5+8,6+9,4+10,3;LO1-8H@1,3+4,3+8,2+10,1&9K@2,1+4,4+5,5+8,1;LO Sport/LO-K6_10@9,2;EMS-8D@6,5+7,2+9,5+10,5";                        
//$teacher_timetable_load[] = "Singh R-C3-9U#Eng HML-K1_12@1,1+2,2+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K6_10@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5&K2_12@1,4+2,5+3,4+4,1+5,2+6,3+7,4+8,5+9,6+10,1&K3_10@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+9,4+10,3&K5_10@1,2+2,3+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6";
//$teacher_timetable_load[] = "Somera S-A10-N#Geog-K1_11@1,1+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K5_12@1,2+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6&K2_11@1,4+2,5+3,4+4,1+6,3+7,4+8,5+9,6+10,1&K6_12@2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5";                        
//$teacher_timetable_load[] = "Van Eeden D-C7-9D#Maths-K1_12@1,1+2,2+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K6_11@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5&K5_10@1,2+2,3+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6&9K@1,4+1,5+2,6+3,1+4,3+5,2+6,3+7,4+8,6+9,4+10,2&9I@1,6+2,4+3,5+4,1+5,3+6,4+7,5+7,6+8,3+9,1+10,3";
//$teacher_timetable_load[] = "Walljee N-M4-N#Phys.Sci-K1_11@1,1+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K5_12@1,2+3,2+4,5+5,6+6,1+7,3+8,4+9,5+10,6&K4_12@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+10,2&K3_12@1,6+2,4+4,3+5,1+6,2+7,5+8,6+9,4+10,3;NS-9H@1,4+2,5+3,4+6,5+8,1+9,1+10,1;LO Sport/LO-K1_11@2,2";
//$teacher_timetable_load[] = "Nkosi T-M4-N#Phys.Sci-K1_11@1,1+3,3+4,4+5,5+6,6+7,1+8,2+9,3+10,4&K3_10@1,6+2,4+3,5+4,3+5,1+6,2+7,5+8,6+10,3";
//$teacher_timetable_load[] = "Wasserman T-A5-12S#English-9N@1,1+2,3+3,2+4,3+5,1+6,1+6,2+7,3+8,3+9,3+10,4&9U@1,2+2,2+3,5+4,5+5,6+6,6+7,5+7,6+8,2+9,5+10,6&9S@1,6+2,4+3,3+4,2+5,5+6,4+7,1+8,6+9,1+10,2+10,3;Eng HML-K6_11@1,3+2,1+3,6+4,6+5,4+6,5+7,2+8,1+9,2+10,5&K2_11@1,4+2,5+3,4+4,1+5,2+6,3+7,4+8,5+9,6+10,1";                        
//$teacher_timetable_load[] = "Xhakaza A-P2-11U#English-9I@1,1+2,6+3,1+3,2+4,4+5,1+6,2+7,1+8,4+9,2+10,4&9H@1,2+2,3+3,3+4,2+4,3+5,5+6,3+7,3+8,3+9,3+10,3;SS-8K@1,3+4,1+6,5+7,2+8,1+9,6+10,1&9H@2,1+5,4+6,6+7,5+8,2+9,5+10,6&8P@2,2+4,6+5,2+6,1+7,4+8,6+9,4&9K@3,4+4,5+5,3+6,4+7,6+8,5+10,5;LO Sport/LO-K4_11@1,5";
//$teacher_timetable_load[] = "Zini L-A18-N#EMS@1,2+7,1+9,3+10,4&9W@1,3+4,6+6,6+7,2&9N@2,1+3,3+4,4+9,2&9S@2,2+3,6+5,4+7,5&9U@2,4+5,5+6,2+8,4&8H@3,2+5,6+7,3+9,4&8K@3,5+4,3+8,2+10,6;B.Stud-K2_10@1,4+2,5+4,1+5,2+6,3+7,4+8,5+9,6+10,1&K4_10@1,5+2,6+3,1+4,2+5,3+6,4+7,6+8,3+9,1;LO1-9P@3,4+5,1+8,1+10,2";
//$teacher_timetable_load[] = "Zulu A-J1-8W#Techn-9H@1,1+3,5+4,1+10,5&8N@1,5+2,2+4,4+10,2&8H@2,3+6,2+7,1+9,3&9N@2,5+5,2+7,4+10,1&9W@2,6+3,4+5,5+9,4&8W@3,2+4,3+7,5+9,5;A/C-9I@1,2+5,6+6,6+8,6&9H@6,4+7,6+8,4+10,4;SS-9I@1,3+3,3+4,5+6,1+7,2+8,5+9,6&8D@1,6+2,4+5,3+7,3+8,3+9,1+10,1&8R@2,1+3,1+4,2+5,4+6,5+8,1+9,2";
//$teacher_timetable_load[] = "De Atouguia A-J2-8A#Econ-K1_10@1,1+2,2+3,3+4,4+5,5+7,1+8,2+9,3+10,4;LO1-8K@1,2+5,2+6,3+7,6&8P@1,3+2,3+5,6+10,6&8D@4,2+6,1+8,6+10,1;EMS-9R@1,5+4,5+6,2+9,2&8A@2,4+3,1+8,4+9,6&9A@3,4+6,6+7,4+9,5&9D@3,5+5,1+6,4+10,2&8R@4,6+7,5+8,3+10,5&8W@5,3+7,2+8,1+9,1;A/C-9A@1,6+3,6+7,3+8,5";
                    $teachers = array ();
                        
                        foreach ($teacher_timetable_load as $lkey => $data_load) {
                                if (strpos($data_load, "#") !== FALSE){
                                $data_load_tokens = explode("#", $data_load);
                                //$count = count($data_load_tokens);
                                //echo $count;
                                if (strpos($data_load_tokens[0], "-") !== FALSE){
                                    //echo "TD ".$data_load_tokens[0]."<br>";
                                    $teacher_details = explode("-", $data_load_tokens[0]);
                                    //load teacher details into an array
                                    $teachers[] = array ('name_surname' => $teacher_details[0], 'room' => $teacher_details[1], 'register_class'=> $teacher_details[2]);
                                    //$teachers[] = array ('name_surname' => $teacher_details[0], 'room' => $teacher_details[1]);

                                    $tid = array_search(array ('name_surname' => $teacher_details[0], 'room' => $teacher_details[1], 'register_class'=> $teacher_details[2]), $teachers);
                                    //$tid = array_search(array ('name_surname' => $teacher_details[0], 'room' => $teacher_details[1]), $teachers);
                                    $sid = 0;
                                    $cid = 0;
                                    
                                    $teacher = $teachers[$tid]['name_surname'];
//                                    echo "<br> TID $tid TEACHER $teacher SID $sid CID $cid<br>";
                                    //exit;
                                     $missing_char = array ();
                                     $missing_char['found'] = FALSE;
                                     if (strpos($data_load_tokens[1], ";") !== FALSE){//SUBJECTS FILTER SVM:this strips the array 1 which holds only
                                         $subject_data_tokens = explode(";", $data_load_tokens[1]);
                                         //echo "number of subjects ".count($subject_data_tokens)."<br>";
                                         //print_r($subject_data_tokens);
                                         //echo "<br>";
                                         foreach($subject_data_tokens as $skey=>$subject_data_items){
                                             //echo "SUBJECT ITEMS $subject_data_items<br>";   //TSE DI SHARP DI SUBJECT
                                             //echo "number of subjects ".count($subject_data_tokens);
                                             //print_r($subject_data_tokens);
                                             
                                             if (strpos($subject_data_items, "&") !== FALSE){//CLASSES FILTER
                                                 //print_r($subject_data_tokens);
                                                 //$sid = -1;
                                                 $class_data_tokens = explode("&", $subject_data_items);
                                                  //echo "SUBJECT ITEMS $subject_data_items<br>";
                                                 //print_r($class_data_tokens); 
                                                 foreach($class_data_tokens as $ckey=>$class_data_items){
                                                     //echo "CLASS ITEMS $class_data_items <br>";
                                                     if (strpos($class_data_items, "@") !== FALSE){//CLASS SLOTS FILTER
                                                         
                                                         $slot_data_tokens = explode("@", $class_data_items);
                                                         //print_r($slot_data_tokens);
                                                         foreach($slot_data_tokens as $slkey=>$slot_data_items){
                                                             //echo "CKEY $ckey SLOTID $slkey ITEMS $slot_data_items TEACHER $teacher <br>";
                                                             if ($slkey == 0 && $ckey == 0){
                                                                 if (strpos($slot_data_items, "-") !== FALSE) {//SLOT ITEM FILTER
                                                                     $slot_item_tokens = explode("-", $slot_data_items);
                                                                     //FIRST ITEM IS SUBJECT ACRONYM
                                                                     if (!array_key_exists('subjects', $teachers[$tid])){
                                                                         $teachers[$tid]['subjects'] = array ();
                                                                         //$teacher[$tid]['subjects'] = array ();
                                                                     }
                                                                     //echo 'subjects: ';
                                                                     //print_r($slot_item_tokens);
                                                                     $teachers[$tid]['subjects'][] = array ('acronym'=>$slot_item_tokens[0]);
                                                                     $sid = array_search(array ('acronym'=>$slot_item_tokens[0]), $teachers[$tid]['subjects']);
                                                                     
                                                                     //$teacher[$tid]['classes'][$sid] = array ();
                                                                     $teachers[$tid]['subjects'][$sid]['classes'] = array ();
                                                                     //$teacher[$tid]['classes'][$sid]['classes']
                                                                     $teachers[$tid]['subjects'][$sid]['classes'][] = array ('class_label'=>$slot_item_tokens[1]);
                                                                     $cid = array_search(array ('class_label'=>$slot_item_tokens[1]),$teachers[$tid]['subjects'][$sid]['classes']);
                                                                     $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'] = array ();
                                                                     //echo "1 NEW FIRST SUBJECT ID $sid CLASS ID $cid FOR ".$slot_item_tokens[0]."<br>";
                                                                     
                                               	                  } else {
                                                                     $missing_char['found'] = TRUE;
                                                                     $missing_char['level'] = 'SLOT SUBJECT FILTER';
                                                                     $missing_char['key'] = $ckey;
                                                                     $missing_char['char'] = "'-'";
                                                                     $missing_char['teacher'] = $teacher;
                                                                     break;
                                                                 }
                                                             } elseif ($ckey > 0 && $slkey == 0){
                                                                 
                                                                 //echo 'subjects: ';
                                                                     //print_r($slot_item_tokens);
                                                                     //echo '<BR>';
                                                                 
                                                                 $teachers[$tid]['subjects'][$sid]['classes'][] = array ('class_label'=>$slot_data_items);
                                                                 $cid = array_search(array ('class_label'=>$slot_data_items),$teachers[$tid]['subjects'][$sid]['classes']);
                                                                 $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'] = array ();
//                                                                 echo "3 NEW CLASS ID $cid FOR $slot_data_items <br>";
                                                                 
                                                             } elseif (strpos($slot_data_items, "+") !== FALSE){
                                                                 $period_tokens = explode("+", $slot_data_items);
                                                                 foreach ($period_tokens as $pkey => $period_items) {
                                                                     //echo "PERIOD ITEMS $period_items <br>";
                                                                     if (strpos($period_items, ",") !== FALSE){
                                                                         $period_item_tokens = explode(",", $period_items);
                                                                         //echo "PERIOD ITEM $period_items <br>";
                                                                         if (count($period_item_tokens) == 2){
                                                                             $subject = $teachers[$tid]['subjects'][$sid]['acronym'];
                                                                             
                                                                     //        echo "PERIOD ITEM $period_items. $subject <br>";
                                                                             $class = $teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_label'];
                                                                             //echo "LOADING TIMETABLE SLOT $period_items SUBJECT $sid $subject CLASS $cid $class FOR $teacher <br>";
                                                                             $day = $period_item_tokens[0];
                                                                             $period = $period_item_tokens[1];
                                                                             
                                                                             if (!array_key_exists('timetable', $teachers[$tid])){
                                                                                 $teachers[$tid]['timetable'] = array ();
                                                                             }

                                                                             if (!array_key_exists($day, $teachers[$tid]['timetable'])){
                                                                                 $teachers[$tid]['timetable'][$day] = array ();
                                                                             }

                                                                             if (!array_key_exists($period, $teachers[$tid]['timetable'][$day])){
                                                                                 $teachers[$tid]['timetable'][$day][$period] = array();
                                                                             }

                                                                             $teachers[$tid]['timetable'][$day][$period] = "<b>$subject</b><br> $class";

                                                                             $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'][] = "$period_items";
                                                                             //print_r($teachers[$tid]);
//                                                                             if ($teacher == "Barnard K"){
//                                                                                print_r($teachers[$tid]);
//                                                                             }
                                                                             //exit;
//////
                                                                         } else {
                                                                             $missing_char['found'] = TRUE;
                                                                             $missing_char['level'] = 'PERIOD ITEM TOKENS FILTER';
                                                                             $missing_char['key'] = $pkey;
                                                                             $missing_char['char'] = "More than 2 ','";
                                                                             $missing_char['teacher'] = $teacher;
                                                                             break;
                                                                         }
                                                                     } else {
                                                                         $missing_char['found'] = TRUE;
                                                                         $missing_char['level'] = 'PERIOD ITEM FILTER';
                                                                         $missing_char['key'] = $pkey;
                                                                         $missing_char['char'] = "','";
                                                                         $missing_char['teacher'] = $teacher;
                                                                         break;
                                                                     }
                                                                 }
                                                                 if ($missing_char['found']){
                                                                     break;
                                                                 }
                                                             } elseif (strpos($slot_data_items, ",") !== FALSE){
                                                                 $period_item_tokens = explode(",", $slot_data_items);
//                                                                  echo "PERIOD ITEM $slot_data_items <br>";
                                                                 if (count($period_item_tokens) == 2){
                                                                     
                                                                     $subject = $teachers[$tid]['subjects'][$sid]['acronym'];
                                                                     //print_r($subject);
                                                                     //echo'<br>';
                                                                     $class = $teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_label'];
//                                                                     echo "LOADING TIMETABLE SLOT $period_items SUBJECT $sid $subject CLASS $cid $class FOR $teacher <br>";
                                                                     $day = $period_item_tokens[0];
                                                                     $period = $period_item_tokens[1];
                                                                     if (!array_key_exists('timetable', $teachers[$tid])){
                                                                         $teachers[$tid]['timetable'] = array ();
                                                                     }

                                                                     if (!array_key_exists($day, $teachers[$tid]['timetable'])){
                                                                         $teachers[$tid]['timetable'][$day] = array ();
                                                                     }

                                                                     if (!array_key_exists($period, $teachers[$tid]['timetable'][$day])){
                                                                         $teachers[$tid]['timetable'][$day][$period] = array();
                                                                     }

                                                                     //$teachers[$tid]['timetable'][$day][$period] = "<b>$subject</b><br>$class";
                                                                     $teachers[$tid]['timetable'][$day][$period] = "<b>$subject</b><br> $class";

                                                                     $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'][] = "$slot_data_items";
   
                                                                 } else {
                                                                     $missing_char['found'] = TRUE;
                                                                     $missing_char['level'] = 'PERIOD ITEM TOKENS FILTER';
                                                                     $missing_char['key'] = $pkey;
                                                                     $missing_char['char'] = "More than 2 ','";
                                                                     $missing_char['teacher'] = $teacher;
                                                                     break;
                                                                 }
                                                             } else {
                                                                 $missing_char['found'] = TRUE;
                                                                 $missing_char['level'] = 'SLOT PERIOD FILTER';
                                                                 $missing_char['key'] = $pkey;
                                                                 $missing_char['char'] = "','";
                                                                 $missing_char['teacher'] = $teacher;
                                                                 break;
                                                             }
                                                         }
                                                         if ($missing_char['found']){
                                                             break;
                                                         }                                              
                                                     } else {
                                                         $missing_char['found'] = TRUE;
                                                         $missing_char['level'] = 'CLASS SLOTS FILTER';
                                                         $missing_char['key'] = $ckey;
                                                         $missing_char['char'] = "'@'";
                                                         $missing_char['teacher'] = $teacher;
                                                         break;
                                                         //echo "INCOMPLETE TEACHER LOAD AT KEY $lkey FOR TEACHER $teacher - MISSING '@' FOR SUBJECT CLASS DATA $ckey<br>";
                                                     }
                                                 }
                                                 if ($missing_char['found']){
                                                     break;
                                                 }
                                             } elseif (strpos($subject_data_items, "@") !== FALSE){
                                                 //echo "sub items ";
                                                 //echo $subject_data_items."<br>";
                                                 $slot_data_tokens = explode("@", $subject_data_items);
                                                 //print_r ($slot_data_tokens);
                                                 foreach($slot_data_tokens as $slkey=>$slot_data_items){
                                                     //print_r ($slot_data_items);
                                                     //echo "CKEY $skey SLOTID $slkey ITEMS $slot_data_items TEACHER $teacher <br>";
                                                     if ($slkey == 0 && $skey == 0){
                                                         if (strpos($slot_data_items, "-") !== FALSE) {//SLOT ITEM FILTER
                                                             //print_r ($slot_data_items);
                                                             $slot_item_tokens = explode("-", $slot_data_items);
                                                             
                                                             //FIRST ITEM IS SUBJECT ACRONYM
                                                             if (!array_key_exists('subjects', $teachers[$tid])){
                                                                 $teachers[$tid]['subjects'] = array ();
                                                                 //$teacher[$tid]['subjects'] = array ();
                                                             }
                                                             //print_r($slot_item_tokens);
                                                             $teachers[$tid]['subjects'][] = array ('acronym'=>$slot_item_tokens[0]);
                                                             $sid = array_search(array ('acronym'=>$slot_item_tokens[0]), $teachers[$tid]['subjects']);
                                                             //$teacher[$tid]['classes'][$sid] = array ();
                                                             $teachers[$tid]['subjects'][$sid]['classes'] = array ();
                                                             //$teacher[$tid]['classes'][$sid]['classes']
                                                             $teachers[$tid]['subjects'][$sid]['classes'][] = array ('class_label'=>$slot_item_tokens[1]);
                                                             $cid = array_search(array ('class_label'=>$slot_item_tokens[1]),$teachers[$tid]['subjects'][$sid]['classes']);
                                                             $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'] = array ();
//                                                                     echo "1 NEW FIRST SUBJECT ID $sid CLASS ID $cid FOR ".$slot_item_tokens[0]."<br>";

                                                         } else {
                                                             $missing_char['found'] = TRUE;
                                                             $missing_char['level'] = 'SLOT SUBJECT FILTER';
                                                             $missing_char['key'] = $ckey;
                                                             $missing_char['char'] = "'-'";
                                                             $missing_char['teacher'] = $teacher;
                                                             break;
                                                         }
                                                     
                                                        
                                                         } elseif ($ckey > 0 && $slkey == 0){
                                                         if (strpos($slot_data_items, "-") !== FALSE) {//SLOT ITEM FILTER
                                                             //print_r ($slot_data_items);
                                                             $slot_item_tokens = explode("-", $slot_data_items);
                                                             
                                                             //FIRST ITEM IS SUBJECT ACRONYM
                                                             if (!array_key_exists('subjects', $teachers[$tid])){
                                                                 $teachers[$tid]['subjects'] = array ();
                                                                 //$teacher[$tid]['subjects'] = array ();
                                                             }
                                                             //print_r($slot_item_tokens);
                                                             $teachers[$tid]['subjects'][] = array ('acronym'=>$slot_item_tokens[0]);
                                                             $sid = array_search(array ('acronym'=>$slot_item_tokens[0]), $teachers[$tid]['subjects']);
                                                             //$teacher[$tid]['classes'][$sid] = array ();
                                                             $teachers[$tid]['subjects'][$sid]['classes'] = array ();
                                                             //$teacher[$tid]['classes'][$sid]['classes']
                                                             $teachers[$tid]['subjects'][$sid]['classes'][] = array ('class_label'=>$slot_item_tokens[1]);
                                                             $cid = array_search(array ('class_label'=>$slot_item_tokens[1]),$teachers[$tid]['subjects'][$sid]['classes']);
                                                             $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'] = array ();
//                                                                     echo "1 NEW FIRST SUBJECT ID $sid CLASS ID $cid FOR ".$slot_item_tokens[0]."<br>";
                                                         } else {
                                                             $missing_char['found'] = TRUE;
                                                             $missing_char['level'] = 'SLOT SUBJECT FILTER';
                                                             $missing_char['key'] = $ckey;
                                                             $missing_char['char'] = "'-'";
                                                             $missing_char['teacher'] = $teacher;
                                                             break;
                                                         }
//                                                         }
//                                                         $teachers[$tid]['subjects'][$sid]['classes'][] = array ('class_label'=>$slot_data_items);
//                                                         $cid = array_search(array ('class_label'=>$slot_data_items),$teachers[$tid]['subjects'][$sid]['classes']);
//                                                         $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'] = array ();
//                                                                 echo "HERE 3 NEW CLASS ID $cid FOR $slot_data_items <br>";
                                                     } elseif (strpos($slot_data_items, "+") !== FALSE){
                                                         $period_tokens = explode("+", $slot_data_items);
                                                         foreach ($period_tokens as $pkey => $period_items) {
//                                                                     echo "PERIOD ITEMS $period_items <br>";
                                                             if (strpos($period_items, ",") !== FALSE){
                                                                 $period_item_tokens = explode(",", $period_items);
                                                                 //echo "PERIOD ITEM $period_items <br>";
                                                                 if (count($period_item_tokens) == 2){
                                                                     $subject = $teachers[$tid]['subjects'][$sid]['acronym'];
                                                                     //echo "PERIOD ITEM $period_items. $subject <br>";
                                                                     $class = $teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_label'];
//                                                                     echo "LOADING TIMETABLE SLOT $period_items SUBJECT $sid $subject CLASS $cid $class FOR $teacher <br>";
                                                                     $day = $period_item_tokens[0];
                                                                     $period = $period_item_tokens[1];

                                                                     if (!array_key_exists('timetable', $teachers[$tid])){
                                                                         $teachers[$tid]['timetable'] = array ();
                                                                     }

                                                                     if (!array_key_exists($day, $teachers[$tid]['timetable'])){
                                                                         $teachers[$tid]['timetable'][$day] = array ();
                                                                     }

                                                                     if (!array_key_exists($period, $teachers[$tid]['timetable'][$day])){
                                                                         $teachers[$tid]['timetable'][$day][$period] = array();
                                                                     }

                                                                     $teachers[$tid]['timetable'][$day][$period] = "<b>$subject</b><br> $class";

                                                                     $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'][] = "$period_items";

//                                                                             if ($teacher == "Barnard K"){
//                                                                                print_r($teachers[$tid]);
//                                                                             }
                                                                     //exit;
//////
                                                                 } else {
                                                                     $missing_char['found'] = TRUE;
                                                                     $missing_char['level'] = 'PERIOD ITEM TOKENS FILTER';
                                                                     $missing_char['key'] = $pkey;
                                                                     $missing_char['char'] = "More than 2 ','";
                                                                     $missing_char['teacher'] = $teacher;
                                                                     break;
                                                                 }
                                                             } else {
                                                                 $missing_char['found'] = TRUE;
                                                                 $missing_char['level'] = 'PERIOD ITEM FILTER';
                                                                 $missing_char['key'] = $pkey;
                                                                 $missing_char['char'] = "','";
                                                                 $missing_char['teacher'] = $teacher;
                                                                 break;
                                                             }
                                                         }
                                                         if ($missing_char['found']){
                                                             break;
                                                         }
                                                     } elseif (strpos($slot_data_items, ",") !== FALSE){
                                                         $period_item_tokens = explode(",", $slot_data_items);
//                                                                  echo "PERIOD ITEM $slot_data_items <br>";
                                                         if (count($period_item_tokens) == 2){
                                                             $subject = $teachers[$tid]['subjects'][$sid]['acronym'];
                                                             $class = $teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_label'];
//                                                                     echo "LOADING TIMETABLE SLOT $period_items SUBJECT $sid $subject CLASS $cid $class FOR $teacher <br>";
                                                             $day = $period_item_tokens[0];
                                                             $period = $period_item_tokens[1];
                                                             if (!array_key_exists('timetable', $teachers[$tid])){
                                                                 $teachers[$tid]['timetable'] = array ();
                                                             }

                                                             if (!array_key_exists($day, $teachers[$tid]['timetable'])){
                                                                 $teachers[$tid]['timetable'][$day] = array ();
                                                             }

                                                             if (!array_key_exists($period, $teachers[$tid]['timetable'][$day])){
                                                                 $teachers[$tid]['timetable'][$day][$period] = array();
                                                             }

                                                             //$teachers[$tid]['timetable'][$day][$period] = "<b>$subject</b><br>$class";
                                                             $teachers[$tid]['timetable'][$day][$period] = "<b>$subject</b><br> $class";

                                                             $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'][] = "$slot_data_items";

                                                         } else {
                                                             $missing_char['found'] = TRUE;
                                                             $missing_char['level'] = 'PERIOD ITEM TOKENS FILTER';
                                                             $missing_char['key'] = $pkey;
                                                             $missing_char['char'] = "More than 2 ','";
                                                             $missing_char['teacher'] = $teacher;
                                                             break;
                                                         }
                                                     } else {
                                                         $missing_char['found'] = TRUE;
                                                         $missing_char['level'] = 'SLOT PERIOD FILTER';
                                                         $missing_char['key'] = $pkey;
                                                         $missing_char['char'] = "','";
                                                         $missing_char['teacher'] = $teacher;
                                                         break;
                                                     }
                                                 }
                                             } else {
                                                 $missing_char['found'] = TRUE;
                                                 $missing_char['level'] = 'SUBJECT FILTER';
                                                 $missing_char['key'] = $skey;
                                                 $missing_char['char'] = "'+'";
                                                 $missing_char['teacher'] = $teacher;
                                                 break;
                                                 //echo "INCOMPLETE TEACHER LOAD AT KEY $lkey FOR TEACHER $teacher <br>";
                                             }
                                             //echo "SKEY $skey<br>";
                                             //echo "CKEY $ckey SLOTID $slkey ITEMS $slot_data_items TEACHER $teacher <br>";
                                         }
                                         //exit;
                                         
                                     } elseif(strpos($data_load_tokens[1], "@") !== FALSE) {
                                         //the else
                                         $class_data_items = $data_load_tokens[1];
                                         $slot_data_tokens = explode("@", $class_data_items);
                                         foreach($slot_data_tokens as $slkey=>$slot_data_items){
                                             //echo "SLOT ITEMS CKEY $ckey SLOTID $slkey ITEMS $slot_data_items TEACHER $teacher <br>";
                                             if ($slkey == 0 && $skey == 0){
                                                 if (strpos($slot_data_items, "-") !== FALSE) {//SLOT ITEM FILTER
//                                                                    echo " ITEMS $class_data_items <br>";
                                                     $slot_item_tokens = explode("-", $slot_data_items);
                                                     //FIRST ITEM IS SUBJECT ACRONYM
                                                     if (!array_key_exists('subjects', $teachers[$tid])){
                                                         $teachers[$tid]['subjects'] = array ();
                                                         //$teacher[$tid]['subjects'] = array ();
                                                     }

                                                     $teachers[$tid]['subjects'][] = array ('acronym'=>$slot_item_tokens[0]);
                                                     $sid = array_search(array ('acronym'=>$slot_item_tokens[0]), $teachers[$tid]['subjects']);
                                                     //$teacher[$tid]['classes'][$sid] = array ();
                                                     $teachers[$tid]['subjects'][$sid]['classes'] = array ();
                                                     //$teacher[$tid]['classes'][$sid]['classes']
                                                     $teachers[$tid]['subjects'][$sid]['classes'][] = array ('class_label'=>$slot_item_tokens[1]);
                                                     $cid = array_search(array ('class_label'=>$slot_item_tokens[1]),$teachers[$tid]['subjects'][$sid]['classes']);
                                                     $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'] = array ();

//                                                                     echo "2 NEW FIRST SUBJECT ID $sid CLASS ID $cid FOR ".$slot_data_items[0]."<br>";

                                                 } else {
                                                     $missing_char['found'] = TRUE;
                                                     $missing_char['level'] = 'SLOT SUBJECT FILTER';
                                                     $missing_char['key'] = $ckey;
                                                     $missing_char['char'] = "'-'";
                                                     $missing_char['teacher'] = $teacher;
                                                     break;
                                                 }
                                             } elseif ($ckey > 0 && $slkey == 0){
                                                 $teachers[$tid]['subjects'][$sid]['classes'][] = array ('class_label'=>$slot_data_items);
                                                 $cid = array_search(array ('class_label'=>$slot_data_items),$teachers[$tid]['subjects'][$sid]['classes']);
                                                 $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'] = array ();
//                                                                 echo "NEW CLASS ID $cid FOR $slot_data_items <br>";
                                             } elseif (strpos($slot_data_items, "+") !== FALSE){
                                                 $period_tokens = explode("+", $slot_data_items);
                                                 foreach ($period_tokens as $pkey => $period_items) {
//                                                                     echo "PERIOD ITEMS $period_items <br>";
                                                     if (strpos($period_items, ",") !== FALSE){
                                                         $period_item_tokens = explode(",", $period_items);
                                                         if (count($period_item_tokens) == 2){

                                                            $subject = $teachers[$tid]['subjects'][$sid]['acronym'];
                                                            $class = $teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_label'];


//                                                                             echo "LOADING TIMETABLE SLOT $period_items SUBJECT $sid $subject CLASS $cid $class FOR $teacher <br>";

                                                             $day = $period_item_tokens[0];
                                                             $period = $period_item_tokens[1];
                                                             if (!array_key_exists('timetable', $teachers[$tid])){
                                                                 $teachers[$tid]['timetable'] = array ();
                                                             }

                                                             if (!array_key_exists($day, $teachers[$tid]['timetable'])){
                                                                 $teachers[$tid]['timetable'][$day] = array ();
                                                             }

                                                             if (!array_key_exists($period, $teachers[$tid]['timetable'][$day])){
                                                                 $teachers[$tid]['timetable'][$day][$period] = array();
                                                             }

                                                             $teachers[$tid]['timetable'][$day][$period] = "<b>$subject</b><br> $class";

                                                             $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'][] = "$period_items";

//                                                                             if ($teacher == "Barnard K"){
//                                                                                print_r($teachers[$tid]);
//                                                                             }
                                                             //exit;
//////
                                                         } else {
                                                             $missing_char['found'] = TRUE;
                                                             $missing_char['level'] = 'PERIOD ITEM TOKENS FILTER';
                                                             $missing_char['key'] = $pkey;
                                                             $missing_char['char'] = "More than 2 ','";
                                                             $missing_char['teacher'] = $teacher;
                                                             break;
                                                         }
                                                     } else {
                                                         $missing_char['found'] = TRUE;
                                                         $missing_char['level'] = 'PERIOD ITEM FILTER';
                                                         $missing_char['key'] = $pkey;
                                                         $missing_char['char'] = "','";
                                                         $missing_char['teacher'] = $teacher;
                                                         break;
                                                     }
                                                 }
                                                 if ($missing_char['found']){
                                                     break;
                                                 }
                                             } elseif (strpos($slot_data_items, ",") !== FALSE){
                                                 $period_item_tokens = explode(",", $slot_data_items);
                                                 //echo "PERIOD ITEM $slot_data_items <br>";
                                                 if (count($period_item_tokens) == 2){
                                                     $subject = $teachers[$tid]['subjects'][$sid]['acronym'];
                                                     $class = $teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_label'];
//                                                                     echo "LOADING TIMETABLE SLOT $period_items SUBJECT $sid $subject CLASS $cid $class FOR $teacher <br>";
                                                     $day = $period_item_tokens[0];
                                                     $period = $period_item_tokens[1];
                                                     if (!array_key_exists('timetable', $teachers[$tid])){
                                                         $teachers[$tid]['timetable'] = array ();
                                                     }

                                                     if (!array_key_exists($day, $teachers[$tid]['timetable'])){
                                                         $teachers[$tid]['timetable'][$day] = array ();
                                                     }

                                                     if (!array_key_exists($period, $teachers[$tid]['timetable'][$day])){
                                                         $teachers[$tid]['timetable'][$day][$period] = array();
                                                     }

                                                     $teachers[$tid]['timetable'][$day][$period] = "<b>$subject</b><br> $class";

                                                     $teachers[$tid]['subjects'][$sid]['classes'][$cid]['periods'][] = "$period_items";

//
                                                 } else {
                                                     $missing_char['found'] = TRUE;
                                                     $missing_char['level'] = 'PERIOD ITEM TOKENS FILTER';
                                                     $missing_char['key'] = $pkey;
                                                     $missing_char['char'] = "More than 2 ','";
                                                     $missing_char['teacher'] = $teacher;
                                                     break;
                                                 }
                                             } else {
                                                 $missing_char['found'] = TRUE;
                                                 $missing_char['level'] = 'SLOT PERIOD FILTER';
                                                 $missing_char['key'] = $pkey;
                                                 $missing_char['char'] = "','";
                                                 $missing_char['teacher'] = $teacher;
                                                 break;
                                             }
                                         }

                                     } else {
                                         $missing_char['found'] = TRUE;
                                         $missing_char['level'] = 'CLASS SLOTS FILTER';
                                         $missing_char['key'] = $ckey;
                                         $missing_char['char'] = "'@'";
                                         $missing_char['teacher'] = $teacher;
                                         break;
                                     }
                                } else {
                                    $missing_char['found'] = TRUE;
                                     $missing_char['level'] = 'TEACHER DETAILS';
                                     $missing_char['key'] = $lkey;
                                     $missing_char['char'] = "'-'";
                                     $missing_char['teacher'] = $teacher;
                                     break;
                                    //echo "INCOMPLETE TEACHER LOAD AT KEY $lkey MISSING '-' IN THE <br>";
                                }
                            } else {
                                $missing_char['found'] = TRUE;
                                 $missing_char['level'] = 'TEACHER LOAD';
                                 $missing_char['key'] = $lkey;
                                 $missing_char['char'] = "'#'";
                                 $missing_char['teacher'] = $teacher;
                                 break;
                                //echo "INCOMPLETE TEACHER LOAD AT KEY $lkey MISSING '#'<br>";
                            }
                        } 

                        if ($missing_char['found']){
                             echo "INCOMPLETE TEACHER LOAD AT KEY ".$missing_char['key']." LEVEL ".$missing_char['level']." MISSING CHAR ".$missing_char['char']." FOR TEACHER ".$missing_char['teacher']."<b>";
                         } else {
                             /*FOR EACH TEACHER
                              * -- GET TEACHER ID FROM ACCESS PROFILE IF IT EXISTS - OTHERWISE CREATE IT
                              * -- USING THE TEACHER ID
                              * ------ CHECK IF TEACHER DETAILS ARE UPDATE TO DATE FOR YEAR
                              * ----------- IF THE SUBJECT/CLASS IN THE TIMETABLE IS NOT LOADED IN THE DETAILS TABLE - LOAD IT
                              * ---------------- FOREACH SUBJECT/CLASS
                              * -----------------------GET ITS ID - IF EXITS ELSE CREATE IT 
                              * ---------------- UPDATE SUBJECT / CLASS TIMETABLE
                              * ----------- FOR ALL SUBJECTS IN THE DETAILS TABLE NOT IN THE TIMETABLE REMOVE
                              * ------ GET THIS YEAR'S TIMETABLE ID IF NOT FOUND CREATE IT 
                              * 
                              */
                             
                             //print_r($teachers);
                             //exit;
                             $tnoid_count = 1;
                             $user_type = 4;
                             $temp_teachers = $teachers;
                             //GET YEAR ID IF EXISTS - OTHERWISE CREATE ONE
                             $year = date('Y');
                             $q = "SELECT year_id FROM schoollms_schema_userdata_school_year WHERE year_label = ?";
                             $q_data = array ($year);
                             $query = $link->prepare($q);
                             $query->execute($q_data);
                             $num_rows = count($query->fetchAll());
                             if ($num_rows == 1){
                                 $query->execute($q_data);
                                 $row = $query->fetch();
                                 $year_id = $row['year_id'];
                             } else {
                                 //ADD NEW YEAR
                                 
                             }
                             
                             //GET REGISTER CLASS
                             $subject_class_assigned = array ();
                             $subject_class_count = array();
                             foreach ($temp_teachers as $tid => $teacher_details) {
                                 $teacher = $teachers[$tid]['name_surname'];
                                 
                                 
                                 $subject_id = -1;
                                 //FIX SUBJECTS AND CLASSES
                                 //echo "CHECKING $teacher SUBJECTS <br>";
                                 if (!array_key_exists("subjects", $teacher_details)){
                                     continue;
                                 }
                                 
                                 //print_r($teacher_details["subjects"]);
                                 foreach($teacher_details["subjects"] as $sid=>$subject_details){
                                     $subject = $subject_details['acronym'];
                                     //echo "SUBJECT $subject <br>";
                                     foreach($subject_details['classes'] as $cid=>$class_details){
                                        $class = $class_details['class_label'];
                                        
                                        if (is_numeric($class)){
                                            continue;
                                        }
                                        //echo "S $subject CLASS $class <br>";
                                        $grade_number = -1;
                                        $subject_id_found = FALSE;
                                        foreach($school_subjects as $subjectkey=>$subjectdetails){
                                            //print_r($subjectdetails);
                                            //echo "<br>if ((strpos(strtoupper(".$subjectdetails['abrev']."), strtoupper($subject)) !== FALSE && strpos(strtoupper(".$subjectdetails['abrev']."), '/') !== FALSE && strpos(strtoupper($subject), '/') !== FALSE) || strtoupper($subject) == strtoupper(".$subjectdetails['abrev'].") || FULLNAME strtoupper($subject) == strtoupper(".$subjectdetails['name'].")";// && array_key_exists('id', $subjectdetails)){ </b><br>";
                                             if ((strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE && strpos(strtoupper($subjectdetails['abrev']), "/") !== FALSE && strpos(strtoupper($subject), "/") !== FALSE) || strtoupper($subject) == strtoupper($subjectdetails['abrev']) || strtoupper($subject) == strtoupper($subjectdetails['name']) && array_key_exists('id', $subjectdetails)){
                                                 if (strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE && strpos(strtoupper($subjectdetails['abrev']), "/") !== FALSE && strpos(strtoupper($subject), "/") !== FALSE && array_key_exists('id', $subjectdetails)){
                                                     $subject_id = $subjectdetails['id'];
                                                     $subject = $subjectdetails['name'];
                                                     $subject_abrev = $subjectdetails['name'];
                                                     $subject_id_found = TRUE;
                                                     break;
                                                 } elseif(strtoupper($subject) == strtoupper($subjectdetails['name']) && array_key_exists('id', $subjectdetails)){
                                                     $subject_id = $subjectdetails['id'];
                                                     $subject = $subjectdetails['name'];
                                                     $subject_abrev = $subjectdetails['name'];
                                                     $subject_id_found = TRUE;
                                                     break;
                                                 }                                                     
                                             } elseif(strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE || strtoupper($subject) == strtoupper($subjectdetails['abrev']) || strtoupper($subject) == strtoupper($subjectdetails['name']) && array_key_exists('id', $subjectdetails)){
                                                 $subject_abrev = $subjectdetails['name'];
                                             }
                                         }

                                         $class_id_found = FALSE;
                                         $class_number_found = 0;
                                         $class_abrev = "";
                                         if (count($school_classes) > 0){
                                             //$class = $teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_label'];
                                             if (strpos($class, "_") !== FALSE){
                                                //$subject = $teachers[$tid]['subjects'][$sid]['acronym'];
                                                $class_abrev = "$subject_abrev-$class";
                                             } else {
                                                $class_abrev = $class;
                                             }

//                                             echo "<b>FINDING NEW CLASS - IF CLASS NUMBER TAKEN FOR $class_abrev</b><br>";
                                             foreach($school_classes as $classkey=>$classdetails){
//                                                 echo "COMPARE SCHOOL CLASSES ABREV ".$classdetails['abrev']." CURRENT ABREV ".$class_abrev."<br>";
                                                 if (strcmp(strtoupper($classdetails['abrev']), strtoupper($class_abrev)) == 0){
                                                     
                                                     if (array_key_exists("$tid-$class_abrev", $subject_class_assigned)){
                                                         $class_number = $subject_class_assigned["$tid-$class_abrev"];
                                                         $class_assigned_tokens = explode(" ", $classdetails['class_label']);
                                                         $count_class_assigned = count($class_assigned_tokens);
                                                         $class_number_assigned = $class_assigned_tokens[$count_class_assigned-1];
//                                                         echo "CLASS NUMBER ASSIGNED $class_number_assigned == $class_number CLASS ABREV $class_abrev<br>";
                                                         if ((int) $class_number_assigned !== (int) $class_number || strpos($class_abrev, $class_number_assigned) !== FALSE){
                                                             if ((int) $class_number_assigned == (int) $class_number){
                                                                 $class_number_found = $class_number_assigned + 1;
                                                             } else {
                                                                $class_number_found = $class_number;
                                                             }
//                                                             $class_id_found = TRUE;
                                                             break;
                                                         }
                                                         
                                                         $class_id_found = TRUE;
                                                         $class_id = $classdetails['class_id'];
                                                         $class_label = $classdetails['class_label'];
                                                         $grade_number = $classdetails['grade_id'];
                                                         $class = $class_label;
//                                                         echo "CLASS $class ASSIGNED TO $tid ABREV $class_abrev CLASS NUMBER $class_number<br>";
                                                         break;
                                                     } else {
                                                         break;
                                                     }
                                                 }
                                             }
                                         }

                                         //GET SUBJECT DETAILS FROM LMS
                                         if (!$subject_id_found){
                                             $subject_found = FALSE;
                                             $subject_key = -1;
                                             foreach($school_subjects as $subjectkey=>$subjectdetails){
//                                                 echo "CHECK SUBJECT ABREV ".strtoupper($subjectdetails['abrev'])." SUBJECT ".strtoupper($subject)."<br>";
                                                 if ((strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE && strpos(strtoupper($subjectdetails['abrev']), "/") !== FALSE && strpos(strtoupper($subject), "/") !== FALSE) || strtoupper($subject) == strtoupper($subjectdetails['abrev']) || strtoupper($subject) == strtoupper($subjectdetails['name'])){
                                                     if (strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE && strpos(strtoupper($subjectdetails['abrev']), "/") !== FALSE && strpos(strtoupper($subject), "/") !== FALSE){
                                                         $subject = $subjectdetails['name'];
                                   	                      $subject_found = TRUE;
                                                         $subject_key = $subjectkey;
                                                         break;
                                                     } elseif(strtoupper($subject) == strtoupper($subjectdetails['name']) || strtoupper($subject) == strtoupper($subjectdetails['abrev'])){
                                                         $subject = $subjectdetails['name'];
                                                         $subject_found = TRUE;
                                                         $subject_key = $subjectkey;
                                          	               break;
                                                     } elseif(strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE){
//                                                         echo "CHECKING ABRVS <br>";
//                                                         $subjectdetails_tokens = explode(";", $subjectdetails['abrev']);
//                                                         $sdt_found = FALSE;
//                                                         foreach($subjectdetails_tokens as $sdtkey=>$sdt_item){
////                                                             echo "if (strtoupper($subject) == strtoupper($sdt_item)){<br>";
//                                                             if (strtoupper($subject) == strtoupper($sdt_item)){
                                                                 $subject = $subjectdetails['name'];
                                                                 $subject_found = TRUE;
                                                                 $subject_key = $subjectkey;
                                                                 $sdt_found = FALSE;
                                                                 break;
//                                                             }
//                                                         }
//                                                         if ($sdt_found){
//                                                             break;
//                                                         }
                                                     }
                                                             
                                                 } elseif(strtoupper($subject) == strtoupper($subjectdetails['name']) || strtoupper($subject) == strtoupper($subjectdetails['abrev'])){
                                                     $subject = $subjectdetails['name'];
                                                     $subject_found = TRUE;
                                                     $subject_key = $subjectkey;
                                                     break;
                                                 } elseif(strpos(strtoupper($subjectdetails['abrev']), strtoupper($subject)) !== FALSE){//(strpos($subjectdetails['abrev'], ";") !== FALSE){
//                                                     echo "CHECKING ABRVS <br>";
//                                                     $subjectdetails_tokens = explode(";", $subjectdetails['abrev']);
//                                                     $sdt_found = FALSE;
//                                                     foreach($subjectdetails_tokens as $sdtkey=>$sdt_item){
////                                                         echo "if (strtoupper($subject) == strtoupper($sdt_item)){<br>";
//                                                         if (strtoupper($subject) == strtoupper($sdt_item)){
                                                             $subject = $subjectdetails['name'];
                                                             $subject_found = TRUE;
                                                             $subject_key = $subjectkey;
                                                             $sdt_found = FALSE;
                                                             break;
//                                                         }
//                                                     }
//                                                     if ($sdt_found){
//                                                         break;
//                                                     }
                                                 }
                                             }

                                             if ($subject_found){
                                                 $q = "SELECT * FROM schoollms_schema_userdata_school_subjects WHERE subject_title = ?";
                                                 $q_data = array ("$subject");
                                                 $query = $link->prepare($q);
                                                 $query->execute($q_data);
                                                 $num_rows = count($query->fetchAll());
//                                                 echo "SUBJECT NUM ROWS $num_rows <br>";
                                                 if ($num_rows == 1){
                                                     $query->execute($q_data);
                                                     $row = $query->fetch();
                                                     $subject_id = $row['subject_id'];
                                                     //echo "SUBJECT ID $subject_id <br>";
                                                 } elseif($num_rows > 1){
                                                    $query->execute($q_data);
                                                    while($row = $query->fetch()){
                                                        
                                                    }
                                                 } else {
//                                                     echo "INSERT SUBJECT $subject <br>";
                                                    $q = "INSERT INTO schoollms_schema_userdata_school_subjects VALUES (NULL, ?, ?, ?)";
                                                    $q_data = array ($subject,"SchoolLMS",'');
                                                    $query = $link->prepare($q);
                                                    $query->execute($q_data);
                                                    $q = "SELECT subject_id FROM schoollms_schema_userdata_school_subjects WHERE subject_title = ?";
                                                    $q_data = array($subject);
                                                    $query = $link->prepare($q);
                                                    $query->execute($q_data);
                                                    $row = $query->fetch();
                                                    $subject_id = $row['subject_id'];
                                                 }
                                             } else {
                                        
                                                 echo "SUBJECT $subject NEEDS TO BE ADDED TO SUBJECTS ARRAY IN CODE <br>";
                                                 exit;
                                             }

                                             if ($subject_key > 0){
                                                $school_subjects[$subject_key]['id'] = $subject_id;
                                             }
                                         }

                                         //GET CLASS DETAILS FROM LMS
//                                         echo "CLASS NUMBER FOUND $class_number_found CLASS FOUND $class_id_found <br>";
                                         if (!$class_id_found){
                                             if (strpos($class, "_") !== FALSE){
                                                 //We are dealing with a subject class
                                                 $class_tokens = explode("_", $class);
                                                 if ($class_number_found == 0){
                                                    $class_number = substr($class_tokens[0], -1);
                                                 } else {
                                                     $class_number = $class_number_found;  
                                                 }
                                                 
                                                 $grade_number = $class_tokens[1];

                                                 $subject_label = str_replace(" ", "%", $subject);
                                                 $class_search = "$subject_label%$grade_number%$class_number";
                                                 
                                                 $class_abrev = "$subject-$class";
//                                                 echo "BEFORE TEST CLASS SEARCH $class_search TID $tid<br>";
                                                 if (!array_key_exists("$tid-$class_abrev", $subject_class_assigned)){
                                                    if (array_key_exists("$class_abrev", $subject_class_count)){
                                                        $subject_class_count["$class_abrev"]++;
                                                        $class_number = $subject_class_count["$class_abrev"];
                                                        $class_search = "$subject_label%$grade_number%$class_number";
                                                    } else {
                                                        $subject_class_count["$class_abrev"] = $class_number;
                                                    }
                                                    $subject_class_assigned["$tid-$class_abrev"] = $class_number;
                                                 } else {
                                                     $subject_class_assigned["$tid-$class_abrev"] = $class_number;
                                                 }
//                                                 echo "AFTER TEST CLASS SEARCH $class_search TID $tid<br>";
                                                 $subject_class_assigned["$class_search"] = TRUE;
                                             } else {
                                                 $grade_number = preg_replace('/[^\-\d]*(\-?\d*).*/','$1',$class);
                                                 $class_abrev = "$class";
                                                 $class_search = $class;
                                             }
                                             
                                             if ($grade_number < 0){
                                                 $grade_number *= -1;
                                             }
                                             
//                                             echo "CLASS SEARCH $class_search GRADE NUMBER $grade_number<br>";
                                             
                                             //Dealing with grade class
                                             $q = "SELECT * FROM schoollms_schema_userdata_school_classes WHERE school_id = ? AND year_id = ? AND grade_id = ? AND class_label LIKE ?";
                                             $q_data = array ($school_id,$year_id,$grade_number,"%$class_search%");
                                             
                                             $query = $link->prepare($q);
                                             $query->execute($q_data);
                                             $num_rows = count($query->fetchAll());
//                                             echo "CLASS NUM ROWS $num_rows YEAR_ID $year_id<br>";
                                             if ($num_rows == 1){
                                                 $query->execute($q_data);
                                                 $row = $query->fetch();
                                                 $class_id = $row['class_id'];
                                                 $class_label = $row['class_label'];
                                                 $grade_id = $row['grade_id'];
                                                 
                                                 $class = $class_label;
                                             } elseif ($num_rows > 1) {
                                                $class_tokens = explode("%", $class_search);
                                                if (strpos($class_tokens[0], "/") !== FALSE){
                                                    $class_token_found = FALSE;
                                                    $query->execute($q_data);
                                                    while ($row = $query->fetch()) {
                                                        $temp_class_label = $row["class_label"];
                                                        if (strpos(strtoupper($temp_class_label), strtoupper($class_tokens[0])) !== FALSE){
                                                            $class_id = $row['class_id'];
                                                            $class_label = $row['class_label'];
                                                            $grade_id = $row['grade_id'];

                                                            $class = $class_label;
                                                            $class_token_found = TRUE;
                                                            break;
                                                        }
                                                    }
                                                    if (!$class_token_found){
                                                        $new_class = "";
                                                         $number_seen = 1;
//                                                         echo "INSERTING 0 $class_search<br>";
                                                         if (count($class_tokens) > 1){
                                                             foreach ($class_tokens as $classkey => $class_label_item) {
                                                                 if (is_numeric($class_label_item) && $number_seen == 1){
                                                                     $new_class .= "$class_label_item ";
                                                                     $number_seen++;
                                                                 } elseif ($number_seen == 2) {
                                                                     $new_class .= "Class $class_label_item";
                                                                     break;
                                                                 } else {
                                                                     $new_class .= "$class_label_item ";
                                                                 }
                                                             }
                                                         } else {
                                                             $new_class = $class_search;
                                                         }           
                                                         echo " NEW CLASS $new_class <br>";
                                                         $q = "INSERT INTO schoollms_schema_userdata_school_classes VALUES (?, ?, ?, NULL, ?)";
                                                         $q_data = array($school_id,$year_id,$grade_number,  strtoupper($new_class));
                                                         $query = $link->prepare($q);
                                                         $query->execute($q_data);
                                                         $q = "SELECT * FROM schoollms_schema_userdata_school_classes WHERE school_id = ? AND year_id = ? AND grade_id = ? AND class_label = ?";
                                                         $q_data = array($school_id,$year_id,$grade_number, strtoupper($new_class));
                                                         $query = $link->prepare($q);
                                                         $query->execute($q_data);
                                                         $row = $query->fetch();
                                                         $class_id = $row['class_id'];
                                                         $grade_id = $row['grade_id'];
                                                         $class = $new_class;
                                                    }
                                                } else { 
                                                
                                                     $new_class = "";
                                                     $number_seen = 1;
                                                     foreach ($class_tokens as $classkey => $class_label_item) {
                                                         if (is_numeric($class_label_item) && $number_seen == 1){
                                                             $new_class .= "$class_label_item ";
                                                             $number_seen++;
                                                         } elseif ($number_seen == 2) {
                                                             $new_class .= "Class $class_label_item";
                                                             break;
                                                         } else {
                                                             $new_class .= "$class_label_item ";
                                                         }
                                                     }
//                                                   echo "INSERTING 1 $class_search<br>";
                                                     $q = "INSERT INTO schoollms_schema_userdata_school_classes VALUES (?, ?, ?, NULL, ?)";
                                                     $q_data = array($school_id,$year_id,$grade_number,  strtoupper($new_class));
                                                     $query = $link->prepare($q);
                                                     $query->execute($q_data);
                                                     $q = "SELECT * FROM schoollms_schema_userdata_school_classes WHERE school_id = ? AND year_id = ? AND grade_id = ? AND class_label = ?";
                                                     $q_data = array($school_id,$year_id,$grade_number, strtoupper($new_class));
                                                     $query = $link->prepare($q);
                                                     $query->execute($q_data);
                                                     $row = $query->fetch();
                                                     $class_id = $row['class_id'];
                                                     $grade_id = $row['grade_id'];
                                                     $class = $new_class;
                                                }
                                            } else {
//                                                echo "INSERTING 2 $class_search<br>";
                                                 $class_tokens = explode("%", $class_search);
                                                 $new_class = "";
                                                 $number_seen = 1;
                                                 if (count($class_tokens) > 1){
                                                     foreach ($class_tokens as $classkey => $class_label_item) {
                                                         if (is_numeric($class_label_item) && $number_seen == 1){
                                                             $new_class .= "$class_label_item ";
                                                             $number_seen++;
                                                         } elseif ($number_seen == 2) {
                                                             $new_class .= "Class $class_label_item";
                                                             break;
                                                         } else {
                                                             $new_class .= "$class_label_item ";
                                                         }
                                                     }
                                                 } else {
                                                     $new_class = "CLASS $class_search";
                                                 }
                                                 echo "NEW CLASS $new_class <br>";
                                                 $q = "INSERT INTO schoollms_schema_userdata_school_classes VALUES (?, ?, ?, NULL, ?)";
                                                 $q_data = array($school_id,$year_id,$grade_number,  strtoupper($new_class));
                                                 $query = $link->prepare($q);
                                                 $query->execute($q_data);
                                                 $q = "SELECT * FROM schoollms_schema_userdata_school_classes WHERE school_id = ? AND year_id = ? AND grade_id = ? AND class_label = ?";
                                                 $q_data = array($school_id,$year_id,$grade_number, strtoupper($new_class));
                                                 $query = $link->prepare($q);
                                                 $query->execute($q_data);
                                                 $row = $query->fetch();
                                                 $class_id = $row['class_id'];
                                                 $grade_id = $row['grade_id'];
                                                 $class = $new_class;
//                                                 echo "CLASS $new_class NEEDS TO BE ADDED TO THE DATABASE <br>";
                                             }
                                             
                                             $school_classes[] = array ('abrev' => $class_abrev, 'class_label' => $class, 'class_id' => $class_id, 'grade_id'=>$grade_id);
                                         }
                                         
                                         echo "TEACHER $teacher SUBJECT $subject ID $subject_id CLASS $class ID $class_id GRADE $grade_number <br>";


                                         $teachers[$tid]['subjects'][$sid]['name'] = strtoupper($subject);
                                         $teachers[$tid]['subjects'][$sid]['id'] = $subject_id;
                                         $teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_label'] = $class;
                                         $teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_id'] = $class_id;
                                         //$teachers[$tid]['subjects'][$sid]['classes'][$cid]['class_label'] = $class;
                                         $teachers[$tid]['subjects'][$sid]['classes'][$cid]['grade_id'] = $grade_number;
                                         
                                         foreach ($class_details['periods'] as $periodkey => $period_items) {
                                             $period_item_tokens = explode(",", $period_items);
                                             $period = $period_item_tokens[1];
                                             $day = $period_item_tokens[0];
                                             $teachers[$tid]['timetable'][$day][$period] = "<b>".strtoupper($subject)."</b><br>$class";
                                             
                                         }
                                         
                                     }
                                 }
                                 
                                 //exit;
                                 
                                 $list_teachers_in_timetable = array ();
                                 if (strpos($teacher, "/")){ //LOOKING AT 2 OR MORE TEACHERS
                                     $teacher_tokens = explode("/", $teacher);
                                     foreach ($teacher_tokens as $tkey=>$teacher){
                                         $list_teachers_in_timetable[] = $teacher;
                                     }
                                 } else {
                                     $list_teachers_in_timetable[] = $teacher;
                                 }
                                 
                                 foreach($list_teachers_in_timetable as $lkey=>$teacher){
                                    $teacher_tokens = explode(" ", $teacher);
                                    
                                    if (count($teacher_tokens) >= 2){
                                        $surname = "";
                                        if (count($teacher_tokens) > 2){
                                            $count_surname = 0;
                                            $tokens_count =  count($teacher_tokens)-1;
                                            while($count_surname < $tokens_count){
                                                $surname .= $teacher_tokens[$count_surname]." ";
                                                $count_surname++;
                                            }
                                            $surname = trim($surname);
                                            $initials = $teacher_tokens[$tokens_count];
                                        } else {
                                            $surname = $teacher_tokens[0];
                                            $initials = $teacher_tokens[1];
                                        }
                                        //echo "SCHOOLID $school_id SURNAME $surname INITIALS $initials USER TYPE $user_type <br>";
                                        $q = "SELECT * FROM schoollms_schema_userdata_access_profile WHERE school_id = ? AND type_id = ? AND name LIKE ? AND surname LIKE ?";
                                        $q_data = array ($school_id, $user_type, "%$initials%", "%$surname%");
                                        //echo "Q $q<br>";
                                    } else {
                                        $intials = "I";
                                        $surname = "$teacher";
                                        $q = "SELECT * FROM schoollms_schema_userdata_access_profile WHERE school_id = ? AND type_id = ? AND surname LIKE ?";
                                        $q_data = array ($school_id, $user_type, "%$teacher%");
                                    }
                                    
                                    //echo "Q $q<br>";
                                    $query = $link->prepare($q);
                                    $query->execute($q_data);
                                    $num_rows = count($query->fetchAll());
                                    //echo "NUM ROWS $num_rows <br>";
                                    $timetable_loaded = FALSE;
                                    //exit;
                                    if ($num_rows == 1){//FOUND THE TEACHER
                                        //GET USER DETAILS 
                                        $query->execute($q_data);
                                        $row = $query->fetch();
                                        //var_dump($row);
                                        //exit;
                                        $user_id = $row['user_id'];
                                        $name = $row['name'];
                                        $surname = $row['surname'];
//                                        echo "FOUND USER ID $user_id FOR $surname $name<br>";
                                      
                                        //GET USER SCHOOL DETAILS FOR THIS YEAR
                                        //--- START SUBJECTS/CLASSES GET THEIR IDS
                                        $q = "SELECT * FROM schoollms_schema_userdata_teacher_schooldetails WHERE user_id = ? AND year_id = ?";
                                        $q_data = array($user_id, $year_id);
                                        $query = $link->prepare($q);
                                        $query->execute($q_data);
                                        $num_rows = count($query->fetchAll());
                                        if ($num_rows == 1){
                                            //FOR EACH ITEM IN THIS YEAR DATA
                                            //CHECK IF ITEM IS CAPTURE AND NOT MODIFIED
                                            //OTHERWISE CAPUTRE/MODIFY ACCORDINGLY
                                            
                                        } else {
                                            //ADD THIS YEAR DATA
                                            $temp2_teacher_details = $teachers[$tid];
                                            if (!array_key_exists("subjects", $temp2_teacher_details)){
                                                continue;
                                            }
                                            foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                $subject_id = $temp_teacher_subjects['id'];
                                                foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                    $class_id = $temp_teacher_classes['class_id'];
                                                    $grade_id = $temp_teacher_classes['grade_id'];
                                                    $q = "SELECT * FROM schoollms_schema_userdata_teacher_schooldetails WHERE user_id = ? AND class_id = ? AND year_id = ?";
                                                    $q_data = array($user_id, $class_id, $year_id);
                                                    $query = $link->prepare($q);
                                                    $query->execute($q_data);
                                                    $num_rows = count($query->fetchAll());
                                                    if ($num_rows == 1){
                    
                                                    } else {
                                                        $q = "INSERT INTO schoollms_schema_userdata_teacher_schooldetails VALUES (?,?,?,?,?,?)";
                                                        $q_data = array ($user_id, $school_id, $grade_id, $class_id, $subject_id, $year_id);
                                                        $query = $link->prepare($q);
                                                        $query->execute($q_data);
                                                    }
                                                }
                                            }
                                        }
                                        
                                       // exit;
                                        
                                        //GET THIS YEAR'S TIMETABLE DETAILS OTHERWISE LOAD THEM
                                        $timetable_loaded = FALSE;
                                        $timetable_type = 2;
                                        $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                        $q_data = array($school_id, $timetable_type, $user_id);
                                        
                                        $query = $link->prepare($q);
                                        $query->execute($q_data);
                                        $num_rows = count($query->fetchAll());
                                        if ($num_rows == 1){
                                            $query->execute($q_data);
                                            $row = $query->fetch();
                                            $timetable_id = $row["timetabl_id"];
                                            //echo "TEACHER $teacher HAS TIMETABLE ID $timetable_id <br>";
                                            
                                            //GET THIS YEARS TIMETABLE DETAILS - IF EXISTS OTHERWISE ADD FROM LOADED TIMETABLE
                                            //---- FOREACH OLD TIMETABLE ITEM _ COMPARE TO NEW TIMETABLE _ MAKE CHANGES WHERE APPROPRIATE
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                            $q_data = array ($timetable_id, $year_id);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows > 0){
                                                //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                //ALSO CHECK EACH CLASS TIMETABLE
                                            } else {
                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                //NO ITEMS - NEED NEW
                                                //ADD IN USER TIMETABLE
                                                //GET BREAK PERIOD IDS
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                $q_data = array ($school_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $break_periods = array ();
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Break'){
                                                        $break_periods [] = $period_label_id; 
                                                        
                                                    }
                                                }

                                                //GET PERIOD LABELS 
                                                $q = "select l.period_label_id, l.period_label from schoollms_schema_userdata_school_timetable_period_labels l join schoollms_schema_userdata_school_timetable_period p where l.school_id = p.school_id and l.school_id =  ? and l.period_label_id = p.period_label_id  order by p.period_start asc";
                                                $q_data = array ($school_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $period_labels = array ();
                                                $period_labels_count = 1;
                                                $break_period = 0;
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Registration'){
                                                        continue;
                                                    }
                                                    $temp_labels = $period_labels;
                                                    $found = FALSE;
                                                    foreach($temp_labels as $tkey=>$temp_label){ 
                                                        if ($temp_label['period_label_id'] == $period_label_id){
                                                            $found = TRUE;
                                                            break;
                                                        }
                                                    }
                                                    if(!$found){
                                                        if ($period_label == 'Break'){
                                                            $break_period = $period_labels_count;
                                                        }
                                                        
                                                        $period_labels[$period_labels_count] = array ('period_label_id' => $period_label_id, 'period_label' => $period_label);
                                                        $period_labels_count++;
                                                        
                                                    }
                                                    
                                                    
                                                }
                                                //echo "PERIOD LABELS <br>";
                                                //print_r($period_labels);
                                                //echo "<br>";
                                                
                                                $temp2_teacher_details = $teachers[$tid];
                                                //GET ROOM ID
                                                $room = $teachers[$tid]['room'];
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                $q_data = array ($school_id, "%$room%");
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $row = $query->fetch();
                                                $room_id = $row['room_id'];
                                                if (!array_key_exists("subjects", $temp2_teacher_details)){
                                                    continue;
                                                }
                                                foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                    $subject_id = $temp_teacher_subjects['id'];
                                                    foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                        $class_id = $temp_teacher_classes['class_id'];
                                                        $class_label = $temp_teacher_classes['class_label'];
                                                        $grade_id = $temp_teacher_classes['grade_id'];
                                                        echo "<br>SUBJECT  $subject_id CLASS $class_label Grade $grade_id <br>";
                                                        if (is_array($temp_teacher_classes)){
                                                            //echo "COUNT periods ".count($temp_teacher_classes['periods'])."<br>";
                                                            print_r($temp_teacher_classes['periods']);
                                                        }
                                                        foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                            //echo "PERIOD ITEMS<br>";
                                                            //print_r($period_items);
                                                            $period_tokens = explode(",", $period_items);
                                                            $day = $period_tokens[0];
                                                            $period = $period_tokens[1];
                                                            //echo "<br> DAY $day PERIOD $period <br>";
                                                            //USERTIMETABLE
                                                            
                                                            //CONVERT PERIOD TO PERIOD LABEL ID
//                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
//                                                            $q_data = array ($school_id, $year_id);
//                                                            $query = $link->prepare($q);
//                                                            $query->execute($q_data);
//                                                            $row = $query->fetchAll();
//                                                            echo "PERIOD ROWS <br>";
//                                                            print_r($row);
//                                                            echo "<br>";
//                                                            if (!array_key_exists($period, $row)){
//                                                                continue;
//                                                            }
                                                            $period_label_id = $period_labels[$period]['period_label_id'];
                                                            if ($period > $break_period){
                                                                $break_count = 0;
                                                                echo "PERIOD $period PERIOD LABEL ID $period_label_id BREAK $break_period BEFORE BREAK COUNT <br>";
                                                                foreach($break_periods as $breakkey=>$break_period_id){
                                                                    echo "PERIOD LABEL ID $period_label_id BREAK ID $break_period_id BREAK COUNT $break_count<br>";
                                                                    if ($period == count($period_labels)-2){
                                                                        $break_count = 1;
                                                                        echo "BREAK COUNT = 1 <br>";
                                                                    } elseif ($period_label_id > $break_period_id){
                                                                        $break_count = 1;
                                                                        
                                                                        echo "BREAK COUNT = PERIOD_LABEL_ID $period_label_id - BREAK_PERIOD_ID $break_period_id<br>";
                                                                    } 
                                                                }

                                                                $period += $break_count;
                                                                
                                                            } elseif ($period == $break_period){
                                                                $break_count = 1;
                                                                echo "BREAK COUNT = PERIOD_LABEL_ID - BREAK_PERIOD_ID + 1<br>";
                                                                //break;
                                                                $period += $break_count;
                                                            }
                                                            
                                                            
//                                                            print_r($period_labels);
                                                            echo "<br>PERIOD $period PERIOD LABEL ID $period_label_id BREAK PERIOD $break_period AFTER BREAK COUNT $break_count</b><br>";
//                                                            if ($period > count($row) && !array_key_exists($period, $row)){
//                                                                continue;
//                                                            }
                                                            if ($period <=  count($period_labels)){
                                                                $period_label_id = $period_labels[$period]['period_label_id'];
                                                            }
                                                            //
                                                            
                                                            
                                                            //timetabl_id,year_id,day_id,period_label_id,grade_id,class_id,room_id,subject_id,teacher_id,substitute_id,
                                                            echo "<br>timetabl_id $timetable_id, year_id $year_id, day $day, period_label_id $period_label_id, grade_id $grade_id, class_id $class_id, room_id $room_id, subject_id $subject_id, user_id $user_id,<br>";
                                                            if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                            //CLASS TIME TABLE
                                                            //GET CLASS TIMETABLE ID
                                                            //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                            //ADD IN CLASS TIMETABLE
                                                            //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                            $class_label_tokens = explode(" ", $class_label);
                                                            if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                $class_timetable_type = 3;
                                                            } else {
                                                                $class_timetable_type = 8;
                                                            }
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                            $q_data = array($school_id, $class_timetable_type, $class_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $num_rows = count($query->fetchAll());
                                                            if ($num_rows == 1){
                                                                //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            } elseif($num_rows == 0){
                                                                //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                if (!empty($class_timetable_type) && !empty($class_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                    $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                    $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                            } else {
                                                                //echo "CLASS $class_label MORE TIMETABLEIDs FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            }
                                                            //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                            //exit;
                                                            if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                        }
                                                    }
                                                }
                                                
                                            }
                                            $timetable_loaded = TRUE;      
                                            //exit;
                                            
                                         } elseif ($num_rows > 1){
                                            $query->execute($q_data);
                                            $timetable_id = 0;
                                            while ($row = $query->fetch()){
                                                if ($timetable_id  < $row["timetabl_id"]){
                                                    $timetable_id = $row["timetabl_id"];
                                                }
                                                //echo "FOUND USER ID $user_id FOR $surname $name<br>";
                                            }
                                            
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                            $q_data = array ($timetable_id, $year_id);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows > 0){
                                                //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                //ALSO CHECK EACH CLASS TIMETABLE
                                            } else {
                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                //NO ITEMS - NEED NEW
                                                //ADD IN USER TIMETABLE
                                                //GET BREAK PERIOD IDS
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                $q_data = array ($school_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $break_periods = array ();
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Break'){
                                                        $break_periods [] = $period_label_id; 
                                                    }
                                                }

                                                $temp2_teacher_details = $teachers[$tid];
                                                //GET ROOM ID
                                                $room = $teachers[$tid]['room'];
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                $q_data = array ($school_id, "%$room%");
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $row = $query->fetch();
                                                $room_id = $row['room_id'];
                                                foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                    $subject_id = $temp_teacher_subjects['id'];
                                                    foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                        $class_id = $temp_teacher_classes['class_id'];
                                                        $class_label = $temp_teacher_classes['class_label'];
                                                        $grade_id = $temp_teacher_classes['grade_id'];
                                                        
                                                        foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                            $period_tokens = explode(",", $period_items);
                                                            $day = $period_tokens[0];
                                                            $period = $period_tokens[1];
                                                            //USERTIMETABLE
                                                            
                                                            //CONVERT PERIOD TO PERIOD LABEL ID
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                            $q_data = array ($school_id, $year_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $row = $query->fetchAll();
                                                            
                                                            
                                                            $period_label_id = $row[$period]['period_label_id'];
                                                            $break_count = 0;
                                                            //echo "<b>PERIOD $period PERIOD ID $period_label_id BEFORE BREAK COUNT <br>";
                                                            foreach($break_periods as $breakkey=>$break_period_id){
                                                                //echo "PERIOD ID $period_label_id BREAK ID $break_period_id $break_count<br>";
                                                                if ($period_label_id == $break_period_id){
                                                                    $break_count = $period_label_id - $break_period_id  + 1;
                                                                    //break;
                                                                } elseif ($period == count($row)-2){
                                                                    $break_count = 1;
                                                                } elseif ($period_label_id > $break_period_id){
                                                                    $break_count = $period_label_id - $break_period_id;
                                                                }
                                                            }
                                                            
                                                            $period += $break_count;
                                                            if ($period > count($row)){
                                                                break;
                                                            }
                                                            $period_label_id = $row[$period]['period_label_id'];
                                                            
                                                            //echo "PERIOD $period PERIOD ID $period_label_id AFTER BREAK COUNT $break_count</b><br>";
                                                            
                                                            
                                                            //echo "} elseif ($num_rows > 1){ timetabl_id $timetable_id, year_id $year_id, day $day, period_label_id $period_label_id, grade_id $grade_id, class_id $class_id, room_id $room_id, subject_id $subject_id, user_id $user_id,<br>";
                                                            
                                                            if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                            //CLASS TIME TABLE
                                                            //GET CLASS TIMETABLE ID
                                                            //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                            //ADD IN CLASS TIMETABLE
                                                            //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                            $class_label_tokens = explode(" ", $class_label);
                                                            if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                $class_timetable_type = 3;
                                                            } else {
                                                                $class_timetable_type = 8;
                                                            }
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                            $q_data = array($school_id, $class_timetable_type, $class_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $num_rows = count($query->fetchAll());
                                                            if ($num_rows == 1){
                                                                //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            } elseif($num_rows == 0){
                                                                //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                if (!empty($class_timetable_type) && !empty($class_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                    $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                    $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                            } else {
                                                                //echo "CLASS $class_label MORE TIMETABLEIDs FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            }
                                                            //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                            //exit;
                                                            if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                        }
                                                    }
                                                }
                                                
                                            }
                                            $timetable_loaded = TRUE;
                                        } elseif ($num_rows == 0){
                                            //echo "TEACHER $teacher HAS NO TIMETABLE ID - MUST BE CREATED<br>";
                                            //CREATE TIMETABLE AND ADD IN schoollms_schema_userdata_teacher_timetable
                                            $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL, ?, ?, ?, ?, ?)";
                                            $q_data = array($school_id, $timetable_type, $user_id, "$initials $surname");

                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                            $q_data = array($school_id, $timetable_type, $user_id);

                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $query->execute($q_data);
                                            $row = $query->fetch();
                                            $timetable_id = $row["timetabl_id"];
                                            
                                            //echo "TEACHER $teacher HAS TIMETABLE ID $timetable_id <br>";
                                            
                                            //GET THIS YEARS TIMETABLE DETAILS - IF EXISTS OTHERWISE ADD FROM LOADED TIMETABLE
                                            //---- FOREACH OLD TIMETABLE ITEM _ COMPARE TO NEW TIMETABLE _ MAKE CHANGES WHERE APPROPRIATE
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                            $q_data = array ($timetable_id, $year_id);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows > 0){
                                                //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                //ALSO CHECK EACH CLASS TIMETABLE
                                            } else {
                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                //NO ITEMS - NEED NEW
                                                //ADD IN USER TIMETABLE
                                                //GET BREAK PERIOD IDS
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                $q_data = array ($school_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $break_periods = array ();
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Break'){
                                                        $break_periods [] = $period_label_id; 
                                                        
                                                    }
                                                }

                                                //GET PERIOD LABELS 
                                                $q = "select l.period_label_id, l.period_label from schoollms_schema_userdata_school_timetable_period_labels l join schoollms_schema_userdata_school_timetable_period p where l.school_id = p.school_id and l.school_id =  ? and l.period_label_id = p.period_label_id  order by p.period_start asc";
                                                $q_data = array ($school_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $period_labels = array ();
                                                $period_labels_count = 1;
                                                $break_period = 0;
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Registration'){
                                                        continue;
                                                    }
                                                    $temp_labels = $period_labels;
                                                    $found = FALSE;
                                                    foreach($temp_labels as $tkey=>$temp_label){ 
                                                        if ($temp_label['period_label_id'] == $period_label_id){
                                                            $found = TRUE;
                                                            break;
                                                        }
                                                    }
                                                    if(!$found){
                                                        if ($period_label == 'Break'){
                                                            $break_period = $period_labels_count;
                                                        }
                                                        
                                                        $period_labels[$period_labels_count] = array ('period_label_id' => $period_label_id, 'period_label' => $period_label);
                                                        $period_labels_count++;
                                                        
                                                    }
                                                    
                                                    
                                                }
                                                //echo "PERIOD LABELS <br>";
                                                //print_r($period_labels);
                                                //echo "<br>";
                                                
                                                $temp2_teacher_details = $teachers[$tid];
                                                //GET ROOM ID
                                                $room = $teachers[$tid]['room'];
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                $q_data = array ($school_id, "%$room%");
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $row = $query->fetch();
                                                $room_id = $row['room_id'];
                                                if (!array_key_exists("subjects", $temp2_teacher_details)){
                                                    continue;
                                                }
                                                foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                    $subject_id = $temp_teacher_subjects['id'];
                                                    foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                        $class_id = $temp_teacher_classes['class_id'];
                                                        $class_label = $temp_teacher_classes['class_label'];
                                                        $grade_id = $temp_teacher_classes['grade_id'];
                                                        echo "<br>SUBJECT  $subject_id CLASS $class_label Grade $grade_id <br>";
                                                        if (is_array($temp_teacher_classes)){
                                                            //echo "COUNT periods ".count($temp_teacher_classes['periods'])."<br>";
                                                            print_r($temp_teacher_classes['periods']);
                                                        }
                                                        foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                            //echo "PERIOD ITEMS<br>";
                                                            //print_r($period_items);
                                                            $period_tokens = explode(",", $period_items);
                                                            $day = $period_tokens[0];
                                                            $period = $period_tokens[1];
                                                            //echo "<br> DAY $day PERIOD $period <br>";
                                                            //USERTIMETABLE
                                                            
                                                            //CONVERT PERIOD TO PERIOD LABEL ID
//                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
//                                                            $q_data = array ($school_id, $year_id);
//                                                            $query = $link->prepare($q);
//                                                            $query->execute($q_data);
//                                                            $row = $query->fetchAll();
//                                                            echo "PERIOD ROWS <br>";
//                                                            print_r($row);
//                                                            echo "<br>";
//                                                            if (!array_key_exists($period, $row)){
//                                                                continue;
//                                                            }
                                                            $period_label_id = $period_labels[$period]['period_label_id'];
                                                            if ($period > $break_period){
                                                                $break_count = 0;
                                                                echo "PERIOD $period PERIOD LABEL ID $period_label_id BREAK $break_period BEFORE BREAK COUNT <br>";
                                                                foreach($break_periods as $breakkey=>$break_period_id){
                                                                    echo "PERIOD LABEL ID $period_label_id BREAK ID $break_period_id BREAK COUNT $break_count<br>";
                                                                    if ($period == count($period_labels)-2){
                                                                        $break_count = 1;
                                                                        echo "BREAK COUNT = 1 <br>";
                                                                    } elseif ($period_label_id > $break_period_id){
                                                                        $break_count = 1;
                                                                        
                                                                        echo "BREAK COUNT = PERIOD_LABEL_ID $period_label_id - BREAK_PERIOD_ID $break_period_id<br>";
                                                                    } 
                                                                }

                                                                $period += $break_count;
                                                                
                                                            } elseif ($period == $break_period){
                                                                $break_count = 1;
                                                                echo "BREAK COUNT = PERIOD_LABEL_ID - BREAK_PERIOD_ID + 1<br>";
                                                                //break;
                                                                $period += $break_count;
                                                            }
                                                            
                                                            
//                                                            print_r($period_labels);
                                                            echo "<br>PERIOD $period PERIOD LABEL ID $period_label_id BREAK PERIOD $break_period AFTER BREAK COUNT $break_count</b><br>";
//                                                            if ($period > count($row) && !array_key_exists($period, $row)){
//                                                                continue;
//                                                            }
                                                            if ($period <=  count($period_labels)){
                                                                $period_label_id = $period_labels[$period]['period_label_id'];
                                                            }
                                                            //
                                                            
                                                            
                                                            //timetabl_id,year_id,day_id,period_label_id,grade_id,class_id,room_id,subject_id,teacher_id,substitute_id,
                                                            echo "<br>timetabl_id $timetable_id, year_id $year_id, day $day, period_label_id $period_label_id, grade_id $grade_id, class_id $class_id, room_id $room_id, subject_id $subject_id, user_id $user_id,<br>";
                                                            if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                            //CLASS TIME TABLE
                                                            //GET CLASS TIMETABLE ID
                                                            //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                            //ADD IN CLASS TIMETABLE
                                                            //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                            $class_label_tokens = explode(" ", $class_label);
                                                            if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                $class_timetable_type = 3;
                                                            } else {
                                                                $class_timetable_type = 8;
                                                            }
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                            $q_data = array($school_id, $class_timetable_type, $class_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $num_rows = count($query->fetchAll());
                                                            if ($num_rows == 1){
                                                                //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            } elseif($num_rows == 0){
                                                                //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                if (!empty($class_timetable_type) && !empty($class_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                    $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                    $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                            } else {
                                                                //echo "CLASS $class_label MORE TIMETABLEIDs FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            }
                                                            //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                            //exit;
                                                            if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                        }
                                                    }
                                                }
                                                
                                            }
                                            $timetable_loaded = TRUE;      
                                            //exit;
                                            
                                         } elseif ($num_rows > 1){
                                            $query->execute($q_data);
                                            $timetable_id = 0;
                                            while ($row = $query->fetch()){
                                                if ($timetable_id  < $row["timetabl_id"]){
                                                    $timetable_id = $row["timetabl_id"];
                                                }
                                                //echo "FOUND USER ID $user_id FOR $surname $name<br>";
                                            }
                                            
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                            $q_data = array ($timetable_id, $year_id);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows > 0){
                                                //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                //ALSO CHECK EACH CLASS TIMETABLE
                                            } else {
                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                //NO ITEMS - NEED NEW
                                                //ADD IN USER TIMETABLE
                                                //GET BREAK PERIOD IDS
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                $q_data = array ($school_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $break_periods = array ();
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Break'){
                                                        $break_periods [] = $period_label_id; 
                                                    }
                                                }

                                                $temp2_teacher_details = $teachers[$tid];
                                                //GET ROOM ID
                                                $room = $teachers[$tid]['room'];
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                $q_data = array ($school_id, "%$room%");
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $row = $query->fetch();
                                                $room_id = $row['room_id'];
                                                foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                    $subject_id = $temp_teacher_subjects['id'];
                                                    foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                        $class_id = $temp_teacher_classes['class_id'];
                                                        $class_label = $temp_teacher_classes['class_label'];
                                                        $grade_id = $temp_teacher_classes['grade_id'];
                                                        
                                                        foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                            $period_tokens = explode(",", $period_items);
                                                            $day = $period_tokens[0];
                                                            $period = $period_tokens[1];
                                                            //USERTIMETABLE
                                                            
                                                            //CONVERT PERIOD TO PERIOD LABEL ID
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                            $q_data = array ($school_id, $year_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $row = $query->fetchAll();
                                                            
                                                            
                                                            $period_label_id = $row[$period]['period_label_id'];
                                                            $break_count = 0;
                                                            //echo "<b>PERIOD $period PERIOD ID $period_label_id BEFORE BREAK COUNT <br>";
                                                            foreach($break_periods as $breakkey=>$break_period_id){
                                                                //echo "PERIOD ID $period_label_id BREAK ID $break_period_id $break_count<br>";
                                                                if ($period_label_id == $break_period_id){
                                                                    $break_count = $period_label_id - $break_period_id  + 1;
                                                                    //break;
                                                                } elseif ($period == count($row)-2){
                                                                    $break_count = 1;
                                                                } elseif ($period_label_id > $break_period_id){
                                                                    $break_count = $period_label_id - $break_period_id;
                                                                }
                                                            }
                                                            
                                                            $period += $break_count;
                                                            if ($period > count($row)){
                                                                break;
                                                            }
                                                            $period_label_id = $row[$period]['period_label_id'];
                                                            
                                                            //echo "PERIOD $period PERIOD ID $period_label_id AFTER BREAK COUNT $break_count</b><br>";
                                                            
                                                            
                                                            //echo "} elseif ($num_rows > 1){ timetabl_id $timetable_id, year_id $year_id, day $day, period_label_id $period_label_id, grade_id $grade_id, class_id $class_id, room_id $room_id, subject_id $subject_id, user_id $user_id,<br>";
                                                            
                                                            if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                            //CLASS TIME TABLE
                                                            //GET CLASS TIMETABLE ID
                                                            //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                            //ADD IN CLASS TIMETABLE
                                                            //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                            $class_label_tokens = explode(" ", $class_label);
                                                            if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                $class_timetable_type = 3;
                                                            } else {
                                                                $class_timetable_type = 8;
                                                            }
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                            $q_data = array($school_id, $class_timetable_type, $class_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $num_rows = count($query->fetchAll());
                                                            if ($num_rows == 1){
                                                                //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            } elseif($num_rows == 0){
                                                                //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                if (!empty($class_timetable_type) && !empty($class_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                    $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                    $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                            } else {
                                                                //echo "CLASS $class_label MORE TIMETABLEIDs FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            }
                                                            //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                            //exit;
                                                            if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                        }
                                                    }
                                                }
                                                
                                            }
                                            $timetable_loaded = TRUE;
                                        }
                                        
                                                                               
                                    } elseif ($num_rows > 1) {
                                        $query->execute($q_data);
                                        $temp_user_id = 0;
                                        while ($row = $query->fetch()){
                                            $user_id = $row['user_id'];
                                            $name = $row['name'];
                                            $surname = $row['surname'];
                                            $access_id = $row['access_id'];
                                            if ($temp_user_id < $user_id){
                                                $temp_user_id = $user_id;
                                            }
                                        }
                                        
                                        if ($temp_user_id !== 0){
                                            $user_id = $temp_user_id;
                                            //GET USER SCHOOL DETAILS FOR THIS YEAR
                                            //--- START SUBJECTS/CLASSES GET THEIR IDS

                                            //GET THIS YEAR'S TIMETABLE DETAILS OTHERWISE LOAD THEM
                                           
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                            $q_data = array($school_id, 2, $user_id);

                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows == 1){
                                                $query->execute($q_data);
                                                $row = $query->fetch();
                                                $timetable_id = $row["timetabl_id"];
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                                $q_data = array ($timetable_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $num_rows = count($query->fetchAll());
                                                if ($num_rows > 0){
                                                    //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                    //ALSO CHECK EACH CLASS TIMETABLE
                                                } else {
                                                    //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                    //NO ITEMS - NEED NEW
                                                    //ADD IN USER TIMETABLE
                                                    //GET BREAK PERIOD IDS
                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                    $q_data = array ($school_id, $year_id);
                                                    $query = $link->prepare($q);
                                                    $query->execute($q_data);
                                                    $break_periods = array ();
                                                    while($row = $query->fetch()){
                                                        $period_label_id = $row['period_label_id'];
                                                        $period_label = $row['period_label'];
                                                        if ($period_label == 'Break'){
                                                            $break_periods [] = $period_label_id; 
                                                        }
                                                    }

                                                    $temp2_teacher_details = $teachers[$tid];
                                                    //GET ROOM ID
                                                    $room = $teachers[$tid]['room'];
                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                    $q_data = array ($school_id, "%$room%");
                                                    $query = $link->prepare($q);
                                                    $query->execute($q_data);
                                                    $row = $query->fetch();
                                                    $room_id = $row['room_id'];
                                                    foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                        $subject_id = $temp_teacher_subjects['id'];
                                                        foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                            $class_id = $temp_teacher_classes['class_id'];
                                                            $class_label = $temp_teacher_classes['class_label'];
                                                            $grade_id = $temp_teacher_classes['grade_id'];

                                                            foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                                $period_tokens = explode(",", $period_items);
                                                                $day = $period_tokens[0];
                                                                $period = $period_tokens[1];
                                                                //USERTIMETABLE

                                                                //CONVERT PERIOD TO PERIOD LABEL ID
                                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                                $q_data = array ($school_id, $year_id);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                                $row = $query->fetchAll();


                                                                $period_label_id = $row[$period]['period_label_id'];
                                                                $break_count = 0;
                                                                //echo "<b>PERIOD $period PERIOD ID $period_label_id BEFORE BREAK COUNT <br>";
                                                                foreach($break_periods as $breakkey=>$break_period_id){
                                                                    //echo "PERIOD ID $period_label_id BREAK ID $break_period_id $break_count<br>";
                                                                    if ($period_label_id == $break_period_id){
                                                                        $break_count = $period_label_id - $break_period_id  + 1;
                                                                        //break;
                                                                    } elseif ($period == count($row)-2){
                                                                        $break_count = 1;
                                                                    } elseif ($period_label_id > $break_period_id){
                                                                        $break_count = $period_label_id - $break_period_id;
                                                                    }
                                                                }

                                                                $period += $break_count;
                                                                if ($period > count($row)){
                                                                    break;
                                                                }
                                                                $period_label_id = $row[$period]['period_label_id'];

                                                                //echo "PERIOD $period PERIOD ID $period_label_id AFTER BREAK COUNT $break_count</b><br>";


                                                                //timetabl_id,year_id,day_id,period_label_id,grade_id,class_id,room_id,subject_id,teacher_id,substitute_id,
                                                                if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                    $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                }    
                                                                //CLASS TIME TABLE
                                                                //GET CLASS TIMETABLE ID
                                                                //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                                //ADD IN CLASS TIMETABLE
                                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                                $class_label_tokens = explode(" ", $class_label);
                                                                if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                    $class_timetable_type = 3;
                                                                } else {
                                                                    $class_timetable_type = 8;
                                                                }
                                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                                $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                                $num_rows = count($query->fetchAll());
                                                                if ($num_rows == 1){
                                                                    //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                } elseif($num_rows == 0){
                                                                    //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                    if (!empty($class_timetable_type) && !empty($class_id)){
                                                                        $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                        $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                        $query = $link->prepare($q);
                                                                        $query->execute($q_data);
                                                                        $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                        $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                        $query = $link->prepare($q);
                                                                        $query->execute($q_data);
                                                                        $row = $query->fetch();
                                                                        $class_timetable_id = $row['timetabl_id'];
                                                                    }
                                                                } else {
                                                                    //echo "CLASS *$class_label MORE TIMETABLEIDs FOUND <br>";
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                                //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                                //exit;
                                                                if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                    $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                }
                                                            }
                                                        }
                                                    }

                                                }
                                                $timetable_loaded = TRUE;
                                            } elseif ($num_rows > 1){
                                                $query->execute($q_data);
                                                $timetable_id = 0;
                                                while ($row = $query->fetch()){
                                                    if ($timetable_id < $row["timetabl_id"]){
                                                        $timetable_id = $row["timetabl_id"];
                                                    }
                                                    //echo "FOUND USER ID $user_id FOR $surname $name<br>";
                                                }
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                                $q_data = array ($timetable_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $num_rows = count($query->fetchAll());
                                                if ($num_rows > 0){
                                                    //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                    //ALSO CHECK EACH CLASS TIMETABLE
                                                } else {
                                                    //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                    //NO ITEMS - NEED NEW
                                                    //ADD IN USER TIMETABLE
                                                    //GET BREAK PERIOD IDS
                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                    $q_data = array ($school_id, $year_id);
                                                    $query = $link->prepare($q);
                                                    $query->execute($q_data);
                                                    $break_periods = array ();
                                                    while($row = $query->fetch()){
                                                        $period_label_id = $row['period_label_id'];
                                                        $period_label = $row['period_label'];
                                                        if ($period_label == 'Break'){
                                                            $break_periods [] = $period_label_id; 
                                                        }
                                                    }

                                                    $temp2_teacher_details = $teachers[$tid];
                                                    //GET ROOM ID
                                                    $room = $teachers[$tid]['room'];
                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                    $q_data = array ($school_id, "%$room%");
                                                    $query = $link->prepare($q);
                                                    $query->execute($q_data);
                                                    $row = $query->fetch();
                                                    $room_id = $row['room_id'];
                                                    foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                        $subject_id = $temp_teacher_subjects['id'];
                                                        foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                            $class_id = $temp_teacher_classes['class_id'];
                                                            $class_label = $temp_teacher_classes['class_label'];
                                                            $grade_id = $temp_teacher_classes['grade_id'];

                                                            foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                                $period_tokens = explode(",", $period_items);
                                                                $day = $period_tokens[0];
                                                                $period = $period_tokens[1];
                                                                //USERTIMETABLE

                                                                //CONVERT PERIOD TO PERIOD LABEL ID
                                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                                $q_data = array ($school_id, $year_id);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                                $row = $query->fetchAll();


                                                                $period_label_id = $row[$period]['period_label_id'];
                                                                $break_count = 0;
                                                                //echo "<b>PERIOD $period PERIOD ID $period_label_id BEFORE BREAK COUNT <br>";
                                                                foreach($break_periods as $breakkey=>$break_period_id){
                                                                    //echo "PERIOD ID $period_label_id BREAK ID $break_period_id $break_count<br>";
                                                                    if ($period_label_id == $break_period_id){
                                                                        $break_count = $period_label_id - $break_period_id  + 1;
                                                                        //break;
                                                                    } elseif ($period == count($row)-2){
                                                                        $break_count = 1;
                                                                    } elseif ($period_label_id > $break_period_id){
                                                                        $break_count = $period_label_id - $break_period_id;
                                                                    }
                                                                }

                                                                $period += $break_count;
                                                                if ($period > count($row)){
                                                                    break;
                                                                }
                                                                $period_label_id = $row[$period]['period_label_id'];

                                                                //echo "PERIOD $period PERIOD ID $period_label_id AFTER BREAK COUNT $break_count</b><br>";


                                                                //timetabl_id,year_id,day_id,period_label_id,grade_id,class_id,room_id,subject_id,teacher_id,substitute_id,
                                                                if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                    $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                }
                                                                //CLASS TIME TABLE
                                                                //GET CLASS TIMETABLE ID
                                                                //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                                //ADD IN CLASS TIMETABLE
                                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                                $class_label_tokens = explode(" ", $class_label);
                                                                if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                    $class_timetable_type = 3;
                                                                } else {
                                                                    $class_timetable_type = 8;
                                                                }
                                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                                $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                                $num_rows = count($query->fetchAll());
                                                                if ($num_rows == 1){
                                                                    //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                } elseif($num_rows == 0){
                                                                    //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                    if (!empty($class_timetable_type) && !empty($class_id)){
                                                                        $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                        $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                        $query = $link->prepare($q);
                                                                        $query->execute($q_data);
                                                                        $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                        $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                        $query = $link->prepare($q);
                                                                        $query->execute($q_data);
                                                                        $row = $query->fetch();
                                                                        $class_timetable_id = $row['timetabl_id'];
                                                                    }
                                                                } else {
                                                                    //echo "CLASS $class_label MORE TIMETABLEIDs FOUND <br>";
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                                //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                                //exit;
                                                                if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                    $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                }
                                                            }
                                                        }
                                                    }

                                                }
                                                $timetable_loaded = TRUE;
                                            } elseif ($num_rows == 0){
//                                                echo "TEACHER $teacher HAS NO TIMETABLE ID - MUST BE CREATED<br>";
                                            }
                                        }
                                    } elseif ($num_rows == 0){
                                        echo "TEACHER $teacher NOT FOUND - MUST CREATE ACCOUNT <br>";
                                        $access_id = "TNOID".$tnoid_count;
                                        $tnoid_count++;
                                        $q = "INSERT INTO schoollms_schema_userdata_access_profile VALUES (NULL, ?, ?, ?, ?, ?)";
                                        $q_data  = array ($school_id, $user_type, $access_id, $initials, $surname);
                                        $query = $link->prepare($q);
                                        $query->execute($q_data);
                                        echo "Teacher $teacher access details CREATED $access_id <br>";

                                        $q = "SELECT * FROM schoollms_schema_userdata_access_profile WHERE school_id = ? AND type_id = ? AND name LIKE ? AND surname LIKE ?";
                                        $query = $link->prepare($q);
                                        $q_data = array ($school_id,$user_type,"%$initials%","%$surname%");
                                        $query->execute($q_data);
                                        $row = $query->fetch();
                                        $user_id = $row["user_id"];
                                        //GET USER DETAILS 
                                        $query->execute($q_data);
                                        $row = $query->fetch();
                                        //var_dump($row);
                                        //exit;
                                        $user_id = $row['user_id'];
                                        $name = $row['name'];
                                        $surname = $row['surname'];
//                                        echo "FOUND USER ID $user_id FOR $surname $name<br>";
                                      
                                        //GET USER SCHOOL DETAILS FOR THIS YEAR
                                        //--- START SUBJECTS/CLASSES GET THEIR IDS
                                        $q = "SELECT * FROM schoollms_schema_userdata_teacher_schooldetails WHERE user_id = ? AND year_id = ?";
                                        $q_data = array($user_id, $year_id);
                                        $query = $link->prepare($q);
                                        $query->execute($q_data);
                                        $num_rows = count($query->fetchAll());
                                        if ($num_rows == 1){
                                            //FOR EACH ITEM IN THIS YEAR DATA
                                            //CHECK IF ITEM IS CAPTURE AND NOT MODIFIED
                                            //OTHERWISE CAPUTRE/MODIFY ACCORDINGLY
                                            
                                        } else {
                                            //ADD THIS YEAR DATA
                                            $temp2_teacher_details = $teachers[$tid];
                                            if (!array_key_exists("subjects", $temp2_teacher_details)){
                                                continue;
                                            }
                                            foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                $subject_id = $temp_teacher_subjects['id'];
                                                foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                    $class_id = $temp_teacher_classes['class_id'];
                                                    $grade_id = $temp_teacher_classes['grade_id'];
                                                    $q = "SELECT * FROM schoollms_schema_userdata_teacher_schooldetails WHERE user_id = ? AND class_id = ? AND year_id = ?";
                                                    $q_data = array($user_id, $class_id, $year_id);
                                                    $query = $link->prepare($q);
                                                    $query->execute($q_data);
                                                    $num_rows = count($query->fetchAll());
                                                    if ($num_rows == 1){
                    
                                                    } else {
                                                        $q = "INSERT INTO schoollms_schema_userdata_teacher_schooldetails VALUES (?,?,?,?,?,?)";
                                                        $q_data = array ($user_id, $school_id, $grade_id, $class_id, $subject_id, $year_id);
                                                        $query = $link->prepare($q);
                                                        $query->execute($q_data);
                                                    }
                                                }
                                            }
                                        }
                                        
                                       // exit;
                                        
                                        //GET THIS YEAR'S TIMETABLE DETAILS OTHERWISE LOAD THEM
                                        $timetable_loaded = FALSE;
                                        $timetable_type = 2;
                                        $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                        $q_data = array($school_id, $timetable_type, $user_id);
                                        
                                        $query = $link->prepare($q);
                                        $query->execute($q_data);
                                        $num_rows = count($query->fetchAll());
                                        if ($num_rows == 1){
                                            $query->execute($q_data);
                                            $row = $query->fetch();
                                            $timetable_id = $row["timetabl_id"];
                                            //echo "TEACHER $teacher HAS TIMETABLE ID $timetable_id <br>";
                                            
                                            //GET THIS YEARS TIMETABLE DETAILS - IF EXISTS OTHERWISE ADD FROM LOADED TIMETABLE
                                            //---- FOREACH OLD TIMETABLE ITEM _ COMPARE TO NEW TIMETABLE _ MAKE CHANGES WHERE APPROPRIATE
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                            $q_data = array ($timetable_id, $year_id);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows > 0){
                                                //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                //ALSO CHECK EACH CLASS TIMETABLE
                                            } else {
                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                //NO ITEMS - NEED NEW
                                                //ADD IN USER TIMETABLE
                                                //GET BREAK PERIOD IDS
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                $q_data = array ($school_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $break_periods = array ();
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Break'){
                                                        $break_periods [] = $period_label_id; 
                                                        
                                                    }
                                                }

                                                //GET PERIOD LABELS 
                                                $q = "select l.period_label_id, l.period_label from schoollms_schema_userdata_school_timetable_period_labels l join schoollms_schema_userdata_school_timetable_period p where l.school_id = p.school_id and l.school_id =  ? and l.period_label_id = p.period_label_id  order by p.period_start asc";
                                                $q_data = array ($school_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $period_labels = array ();
                                                $period_labels_count = 1;
                                                $break_period = 0;
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Registration'){
                                                        continue;
                                                    }
                                                    $temp_labels = $period_labels;
                                                    $found = FALSE;
                                                    foreach($temp_labels as $tkey=>$temp_label){ 
                                                        if ($temp_label['period_label_id'] == $period_label_id){
                                                            $found = TRUE;
                                                            break;
                                                        }
                                                    }
                                                    if(!$found){
                                                        if ($period_label == 'Break'){
                                                            $break_period = $period_labels_count;
                                                        }
                                                        
                                                        $period_labels[$period_labels_count] = array ('period_label_id' => $period_label_id, 'period_label' => $period_label);
                                                        $period_labels_count++;
                                                        
                                                    }
                                                    
                                                    
                                                }
                                                //echo "PERIOD LABELS <br>";
                                                //print_r($period_labels);
                                                //echo "<br>";
                                                
                                                $temp2_teacher_details = $teachers[$tid];
                                                //GET ROOM ID
                                                $room = $teachers[$tid]['room'];
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                $q_data = array ($school_id, "%$room%");
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $row = $query->fetch();
                                                $room_id = $row['room_id'];
                                                if (!array_key_exists("subjects", $temp2_teacher_details)){
                                                    continue;
                                                }
                                                foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                    $subject_id = $temp_teacher_subjects['id'];
                                                    foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                        $class_id = $temp_teacher_classes['class_id'];
                                                        $class_label = $temp_teacher_classes['class_label'];
                                                        $grade_id = $temp_teacher_classes['grade_id'];
                                                        echo "<br>SUBJECT  $subject_id CLASS $class_label Grade $grade_id <br>";
                                                        if (is_array($temp_teacher_classes)){
                                                            //echo "COUNT periods ".count($temp_teacher_classes['periods'])."<br>";
                                                            print_r($temp_teacher_classes['periods']);
                                                        }
                                                        foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                            //echo "PERIOD ITEMS<br>";
                                                            //print_r($period_items);
                                                            $period_tokens = explode(",", $period_items);
                                                            $day = $period_tokens[0];
                                                            $period = $period_tokens[1];
                                                            //echo "<br> DAY $day PERIOD $period <br>";
                                                            //USERTIMETABLE
                                                            
                                                            //CONVERT PERIOD TO PERIOD LABEL ID
//                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
//                                                            $q_data = array ($school_id, $year_id);
//                                                            $query = $link->prepare($q);
//                                                            $query->execute($q_data);
//                                                            $row = $query->fetchAll();
//                                                            echo "PERIOD ROWS <br>";
//                                                            print_r($row);
//                                                            echo "<br>";
//                                                            if (!array_key_exists($period, $row)){
//                                                                continue;
//                                                            }
                                                            $period_label_id = $period_labels[$period]['period_label_id'];
                                                            if ($period > $break_period){
                                                                $break_count = 0;
                                                                echo "PERIOD $period PERIOD LABEL ID $period_label_id BREAK $break_period BEFORE BREAK COUNT <br>";
                                                                foreach($break_periods as $breakkey=>$break_period_id){
                                                                    echo "PERIOD LABEL ID $period_label_id BREAK ID $break_period_id BREAK COUNT $break_count<br>";
                                                                    if ($period == count($period_labels)-2){
                                                                        $break_count = 1;
                                                                        echo "BREAK COUNT = 1 <br>";
                                                                    } elseif ($period_label_id > $break_period_id){
                                                                        $break_count = 1;
                                                                        
                                                                        echo "BREAK COUNT = PERIOD_LABEL_ID $period_label_id - BREAK_PERIOD_ID $break_period_id<br>";
                                                                    } 
                                                                }

                                                                $period += $break_count;
                                                                
                                                            } elseif ($period == $break_period){
                                                                $break_count = 1;
                                                                echo "BREAK COUNT = PERIOD_LABEL_ID - BREAK_PERIOD_ID + 1<br>";
                                                                //break;
                                                                $period += $break_count;
                                                            }
                                                            
                                                            
//                                                            print_r($period_labels);
                                                            echo "<br>PERIOD $period PERIOD LABEL ID $period_label_id BREAK PERIOD $break_period AFTER BREAK COUNT $break_count</b><br>";
//                                                            if ($period > count($row) && !array_key_exists($period, $row)){
//                                                                continue;
//                                                            }
                                                            if ($period <=  count($period_labels)){
                                                                $period_label_id = $period_labels[$period]['period_label_id'];
                                                            }
                                                            //
                                                            
                                                            
                                                            //timetabl_id,year_id,day_id,period_label_id,grade_id,class_id,room_id,subject_id,teacher_id,substitute_id,
                                                            echo "<br>timetabl_id $timetable_id, year_id $year_id, day $day, period_label_id $period_label_id, grade_id $grade_id, class_id $class_id, room_id $room_id, subject_id $subject_id, user_id $user_id,<br>";
                                                            if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                            //CLASS TIME TABLE
                                                            //GET CLASS TIMETABLE ID
                                                            //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                            //ADD IN CLASS TIMETABLE
                                                            //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                            $class_label_tokens = explode(" ", $class_label);
                                                            if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                $class_timetable_type = 3;
                                                            } else {
                                                                $class_timetable_type = 8;
                                                            }
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                            $q_data = array($school_id, $class_timetable_type, $class_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $num_rows = count($query->fetchAll());
                                                            if ($num_rows == 1){
                                                                //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            } elseif($num_rows == 0){
                                                                //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                if (!empty($class_timetable_type) && !empty($class_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                    $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                    $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                            } else {
                                                                //echo "CLASS $class_label MORE TIMETABLEIDs FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            }
                                                            //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                            //exit;
                                                            if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                        }
                                                    }
                                                }
                                                
                                            }
                                            $timetable_loaded = TRUE;      
                                            //exit;
                                            
                                         } elseif ($num_rows > 1){
                                            $query->execute($q_data);
                                            $timetable_id = 0;
                                            while ($row = $query->fetch()){
                                                if ($timetable_id  < $row["timetabl_id"]){
                                                    $timetable_id = $row["timetabl_id"];
                                                }
                                                //echo "FOUND USER ID $user_id FOR $surname $name<br>";
                                            }
                                            
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                            $q_data = array ($timetable_id, $year_id);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows > 0){
                                                //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                //ALSO CHECK EACH CLASS TIMETABLE
                                            } else {
                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                //NO ITEMS - NEED NEW
                                                //ADD IN USER TIMETABLE
                                                //GET BREAK PERIOD IDS
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                $q_data = array ($school_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $break_periods = array ();
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Break'){
                                                        $break_periods [] = $period_label_id; 
                                                    }
                                                }

                                                $temp2_teacher_details = $teachers[$tid];
                                                //GET ROOM ID
                                                $room = $teachers[$tid]['room'];
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                $q_data = array ($school_id, "%$room%");
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $row = $query->fetch();
                                                $room_id = $row['room_id'];
                                                foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                    $subject_id = $temp_teacher_subjects['id'];
                                                    foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                        $class_id = $temp_teacher_classes['class_id'];
                                                        $class_label = $temp_teacher_classes['class_label'];
                                                        $grade_id = $temp_teacher_classes['grade_id'];
                                                        
                                                        foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                            $period_tokens = explode(",", $period_items);
                                                            $day = $period_tokens[0];
                                                            $period = $period_tokens[1];
                                                            //USERTIMETABLE
                                                            
                                                            //CONVERT PERIOD TO PERIOD LABEL ID
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                            $q_data = array ($school_id, $year_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $row = $query->fetchAll();
                                                            
                                                            
                                                            $period_label_id = $row[$period]['period_label_id'];
                                                            $break_count = 0;
                                                            //echo "<b>PERIOD $period PERIOD ID $period_label_id BEFORE BREAK COUNT <br>";
                                                            foreach($break_periods as $breakkey=>$break_period_id){
                                                                //echo "PERIOD ID $period_label_id BREAK ID $break_period_id $break_count<br>";
                                                                if ($period_label_id == $break_period_id){
                                                                    $break_count = $period_label_id - $break_period_id  + 1;
                                                                    //break;
                                                                } elseif ($period == count($row)-2){
                                                                    $break_count = 1;
                                                                } elseif ($period_label_id > $break_period_id){
                                                                    $break_count = $period_label_id - $break_period_id;
                                                                }
                                                            }
                                                            
                                                            $period += $break_count;
                                                            if ($period > count($row)){
                                                                break;
                                                            }
                                                            $period_label_id = $row[$period]['period_label_id'];
                                                            
                                                            //echo "PERIOD $period PERIOD ID $period_label_id AFTER BREAK COUNT $break_count</b><br>";
                                                            
                                                            
                                                            //echo "} elseif ($num_rows > 1){ timetabl_id $timetable_id, year_id $year_id, day $day, period_label_id $period_label_id, grade_id $grade_id, class_id $class_id, room_id $room_id, subject_id $subject_id, user_id $user_id,<br>";
                                                            
                                                            if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                            //CLASS TIME TABLE
                                                            //GET CLASS TIMETABLE ID
                                                            //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                            //ADD IN CLASS TIMETABLE
                                                            //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                            $class_label_tokens = explode(" ", $class_label);
                                                            if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                $class_timetable_type = 3;
                                                            } else {
                                                                $class_timetable_type = 8;
                                                            }
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                            $q_data = array($school_id, $class_timetable_type, $class_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $num_rows = count($query->fetchAll());
                                                            if ($num_rows == 1){
                                                                //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            } elseif($num_rows == 0){
                                                                //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                if (!empty($class_timetable_type) && !empty($class_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                    $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                    $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                            } else {
                                                                //echo "CLASS $class_label MORE TIMETABLEIDs FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            }
                                                            //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                            //exit;
                                                            if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                        }
                                                    }
                                                }
                                                
                                            }
                                            $timetable_loaded = TRUE;
                                        } elseif ($num_rows == 0){
                                            //echo "TEACHER $teacher HAS NO TIMETABLE ID - MUST BE CREATED<br>";
                                            //CREATE TIMETABLE AND ADD IN schoollms_schema_userdata_teacher_timetable
                             
                                            $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL, ?, ?, ?, ?, ?)";
                                            $q_data = array($school_id, $timetable_type, $user_id, "$initials $surname");

                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                            $q_data = array($school_id, $timetable_type, $user_id);

                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $query->execute($q_data);
                                            $row = $query->fetch();
                                            $timetable_id = $row["timetabl_id"];
                                            
                                            //echo "TEACHER $teacher HAS TIMETABLE ID $timetable_id <br>";
                                            
                                            //GET THIS YEARS TIMETABLE DETAILS - IF EXISTS OTHERWISE ADD FROM LOADED TIMETABLE
                                            //---- FOREACH OLD TIMETABLE ITEM _ COMPARE TO NEW TIMETABLE _ MAKE CHANGES WHERE APPROPRIATE
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                            $q_data = array ($timetable_id, $year_id);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows > 0){
                                                //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                //ALSO CHECK EACH CLASS TIMETABLE
                                            } else {
                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                //NO ITEMS - NEED NEW
                                                //ADD IN USER TIMETABLE
                                                //GET BREAK PERIOD IDS
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                $q_data = array ($school_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $break_periods = array ();
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Break'){
                                                        $break_periods [] = $period_label_id; 
                                                        
                                                    }
                                                }

                                                //GET PERIOD LABELS 
                                                $q = "select l.period_label_id, l.period_label from schoollms_schema_userdata_school_timetable_period_labels l join schoollms_schema_userdata_school_timetable_period p where l.school_id = p.school_id and l.school_id =  ? and l.period_label_id = p.period_label_id  order by p.period_start asc";
                                                $q_data = array ($school_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $period_labels = array ();
                                                $period_labels_count = 1;
                                                $break_period = 0;
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Registration'){
                                                        continue;
                                                    }
                                                    $temp_labels = $period_labels;
                                                    $found = FALSE;
                                                    foreach($temp_labels as $tkey=>$temp_label){ 
                                                        if ($temp_label['period_label_id'] == $period_label_id){
                                                            $found = TRUE;
                                                            break;
                                                        }
                                                    }
                                                    if(!$found){
                                                        if ($period_label == 'Break'){
                                                            $break_period = $period_labels_count;
                                                        }
                                                        
                                                        $period_labels[$period_labels_count] = array ('period_label_id' => $period_label_id, 'period_label' => $period_label);
                                                        $period_labels_count++;
                                                        
                                                    }
                                                    
                                                    
                                                }
                                                //echo "PERIOD LABELS <br>";
                                                //print_r($period_labels);
                                                //echo "<br>";
                                                
                                                $temp2_teacher_details = $teachers[$tid];
                                                //GET ROOM ID
                                                $room = $teachers[$tid]['room'];
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                $q_data = array ($school_id, "%$room%");
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $row = $query->fetch();
                                                $room_id = $row['room_id'];
                                                if (!array_key_exists("subjects", $temp2_teacher_details)){
                                                    continue;
                                                }
                                                foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                    $subject_id = $temp_teacher_subjects['id'];
                                                    foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                        $class_id = $temp_teacher_classes['class_id'];
                                                        $class_label = $temp_teacher_classes['class_label'];
                                                        $grade_id = $temp_teacher_classes['grade_id'];
                                                        echo "<br>SUBJECT  $subject_id CLASS $class_label Grade $grade_id <br>";
                                                        if (is_array($temp_teacher_classes)){
                                                            //echo "COUNT periods ".count($temp_teacher_classes['periods'])."<br>";
                                                            print_r($temp_teacher_classes['periods']);
                                                        }
                                                        foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                            //echo "PERIOD ITEMS<br>";
                                                            //print_r($period_items);
                                                            $period_tokens = explode(",", $period_items);
                                                            $day = $period_tokens[0];
                                                            $period = $period_tokens[1];
                                                            //echo "<br> DAY $day PERIOD $period <br>";
                                                            //USERTIMETABLE
                                                            
                                                            //CONVERT PERIOD TO PERIOD LABEL ID
//                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
//                                                            $q_data = array ($school_id, $year_id);
//                                                            $query = $link->prepare($q);
//                                                            $query->execute($q_data);
//                                                            $row = $query->fetchAll();
//                                                            echo "PERIOD ROWS <br>";
//                                                            print_r($row);
//                                                            echo "<br>";
//                                                            if (!array_key_exists($period, $row)){
//                                                                continue;
//                                                            }
                                                            $period_label_id = $period_labels[$period]['period_label_id'];
                                                            if ($period > $break_period){
                                                                $break_count = 0;
                                                                echo "PERIOD $period PERIOD LABEL ID $period_label_id BREAK $break_period BEFORE BREAK COUNT <br>";
                                                                foreach($break_periods as $breakkey=>$break_period_id){
                                                                    echo "PERIOD LABEL ID $period_label_id BREAK ID $break_period_id BREAK COUNT $break_count<br>";
                                                                    if ($period == count($period_labels)-2){
                                                                        $break_count = 1;
                                                                        echo "BREAK COUNT = 1 <br>";
                                                                    } elseif ($period_label_id > $break_period_id){
                                                                        $break_count = 1;
                                                                        
                                                                        echo "BREAK COUNT = PERIOD_LABEL_ID $period_label_id - BREAK_PERIOD_ID $break_period_id<br>";
                                                                    } 
                                                                }

                                                                $period += $break_count;
                                                                
                                                            } elseif ($period == $break_period){
                                                                $break_count = 1;
                                                                echo "BREAK COUNT = PERIOD_LABEL_ID - BREAK_PERIOD_ID + 1<br>";
                                                                //break;
                                                                $period += $break_count;
                                                            }
                                                            
                                                            
//                                                            print_r($period_labels);
                                                            echo "<br>PERIOD $period PERIOD LABEL ID $period_label_id BREAK PERIOD $break_period AFTER BREAK COUNT $break_count</b><br>";
//                                                            if ($period > count($row) && !array_key_exists($period, $row)){
//                                                                continue;
//                                                            }
                                                            if ($period <=  count($period_labels)){
                                                                $period_label_id = $period_labels[$period]['period_label_id'];
                                                            }
                                                            //
                                                            
                                                            
                                                            //timetabl_id,year_id,day_id,period_label_id,grade_id,class_id,room_id,subject_id,teacher_id,substitute_id,
                                                            echo "<br>timetabl_id $timetable_id, year_id $year_id, day $day, period_label_id $period_label_id, grade_id $grade_id, class_id $class_id, room_id $room_id, subject_id $subject_id, user_id $user_id,<br>";
                                                            if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                            //CLASS TIME TABLE
                                                            //GET CLASS TIMETABLE ID
                                                            //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                            //ADD IN CLASS TIMETABLE
                                                            //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                            $class_label_tokens = explode(" ", $class_label);
                                                            if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                $class_timetable_type = 3;
                                                            } else {
                                                                $class_timetable_type = 8;
                                                            }
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                            $q_data = array($school_id, $class_timetable_type, $class_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $num_rows = count($query->fetchAll());
                                                            if ($num_rows == 1){
                                                                //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            } elseif($num_rows == 0){
                                                                //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                if (!empty($class_timetable_type) && !empty($class_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                    $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                    $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                            } else {
                                                                //echo "CLASS $class_label MORE TIMETABLEIDs FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            }
                                                            //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                            //exit;
                                                            if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                        }
                                                    }
                                                }
                                                
                                            }
                                            $timetable_loaded = TRUE;      
                                            //exit;
                                            
                                         } elseif ($num_rows > 1){
                                            $query->execute($q_data);
                                            $timetable_id = 0;
                                            while ($row = $query->fetch()){
                                                if ($timetable_id  < $row["timetabl_id"]){
                                                    $timetable_id = $row["timetabl_id"];
                                                }
                                                //echo "FOUND USER ID $user_id FOR $surname $name<br>";
                                            }
                                            
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
                                            $q_data = array ($timetable_id, $year_id);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows > 0){
                                                //echo "TEACHER $teacher TIMETABLE LOADED FOR $year_id  $year <br>";
                                                //ALSO CHECK EACH CLASS TIMETABLE
                                            } else {
                                                //echo "LOADING THIS YEAR'S TIMETABLE FOR $teacher <br>";
                                                //NO ITEMS - NEED NEW
                                                //ADD IN USER TIMETABLE
                                                //GET BREAK PERIOD IDS
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                $q_data = array ($school_id, $year_id);
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $break_periods = array ();
                                                while($row = $query->fetch()){
                                                    $period_label_id = $row['period_label_id'];
                                                    $period_label = $row['period_label'];
                                                    if ($period_label == 'Break'){
                                                        $break_periods [] = $period_label_id; 
                                                    }
                                                }

                                                $temp2_teacher_details = $teachers[$tid];
                                                //GET ROOM ID
                                                $room = $teachers[$tid]['room'];
                                                $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                                $q_data = array ($school_id, "%$room%");
                                                $query = $link->prepare($q);
                                                $query->execute($q_data);
                                                $row = $query->fetch();
                                                $room_id = $row['room_id'];
                                                foreach($temp2_teacher_details['subjects'] as $tsid=>$temp_teacher_subjects){
                                                    $subject_id = $temp_teacher_subjects['id'];
                                                    foreach ($temp_teacher_subjects['classes'] as $tcid => $temp_teacher_classes) {
                                                        $class_id = $temp_teacher_classes['class_id'];
                                                        $class_label = $temp_teacher_classes['class_label'];
                                                        $grade_id = $temp_teacher_classes['grade_id'];
                                                        
                                                        foreach ($temp_teacher_classes['periods'] as $tpid => $period_items) {
                                                            $period_tokens = explode(",", $period_items);
                                                            $day = $period_tokens[0];
                                                            $period = $period_tokens[1];
                                                            //USERTIMETABLE
                                                            
                                                            //CONVERT PERIOD TO PERIOD LABEL ID
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                                            $q_data = array ($school_id, $year_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $row = $query->fetchAll();
                                                            
                                                            
                                                            $period_label_id = $row[$period]['period_label_id'];
                                                            $break_count = 0;
                                                            //echo "<b>PERIOD $period PERIOD ID $period_label_id BEFORE BREAK COUNT <br>";
                                                            foreach($break_periods as $breakkey=>$break_period_id){
                                                                //echo "PERIOD ID $period_label_id BREAK ID $break_period_id $break_count<br>";
                                                                if ($period_label_id == $break_period_id){
                                                                    $break_count = $period_label_id - $break_period_id  + 1;
                                                                    //break;
                                                                } elseif ($period == count($row)-2){
                                                                    $break_count = 1;
                                                                } elseif ($period_label_id > $break_period_id){
                                                                    $break_count = $period_label_id - $break_period_id;
                                                                }
                                                            }
                                                            
                                                            $period += $break_count;
                                                            if ($period > count($row)){
                                                                break;
                                                            }
                                                            $period_label_id = $row[$period]['period_label_id'];
                                                            
                                                            //echo "PERIOD $period PERIOD ID $period_label_id AFTER BREAK COUNT $break_count</b><br>";
                                                            
                                                            
                                                            //echo "} elseif ($num_rows > 1){ timetabl_id $timetable_id, year_id $year_id, day $day, period_label_id $period_label_id, grade_id $grade_id, class_id $class_id, room_id $room_id, subject_id $subject_id, user_id $user_id,<br>";
                                                            
                                                            if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                            //CLASS TIME TABLE
                                                            //GET CLASS TIMETABLE ID
                                                            //FIND CLASS TIMETABLE - IF EXISTS - ELSE CREATE CLASS TIMETABLE
                                                            //ADD IN CLASS TIMETABLE
                                                            //echo "LOADING THIS YEAR'S TIMETABLE FOR CLASS $class_label TEACHER $teacher <br>";
                                                            $class_label_tokens = explode(" ", $class_label);
                                                            if (strtoupper($class_label_tokens[0]) == "CLASS"){
                                                                $class_timetable_type = 3;
                                                            } else {
                                                                $class_timetable_type = 8;
                                                            }
                                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ? ORDER BY timetabl_id";
                                                            $q_data = array($school_id, $class_timetable_type, $class_id);
                                                            $query = $link->prepare($q);
                                                            $query->execute($q_data);
                                                            $num_rows = count($query->fetchAll());
                                                            if ($num_rows == 1){
                                                                //echo "CLASS $class_label TIMETABLEID FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            } elseif($num_rows == 0){
                                                                //echo "CLASS $class_label TIMETABLEID NOT FOUND <br>";
                                                                if (!empty($class_timetable_type) && !empty($class_id)){
                                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable VALUES (NULL,?,?,?,?,NULL)";
                                                                    $q_data = array ($school_id,$class_timetable_type,$class_id,$class_label);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable WHERE school_id = ? AND timetable_type_id = ? AND timetable_type_item_id = ?";
                                                                    $q_data = array($school_id, $class_timetable_type, $class_id);
                                                                    $query = $link->prepare($q);
                                                                    $query->execute($q_data);
                                                                    $row = $query->fetch();
                                                                    $class_timetable_id = $row['timetabl_id'];
                                                                }
                                                            } else {
                                                                //echo "CLASS $class_label MORE TIMETABLEIDs FOUND <br>";
                                                                $query->execute($q_data);
                                                                $row = $query->fetch();
                                                                $class_timetable_id = $row['timetabl_id'];
                                                            }
                                                            //echo "CLASS $class_label ID $class_id TIMETABLEID $class_timetable_id <br>";
                                                            //exit;
                                                            if (!empty($class_timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                                $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                                $q_data = array ($class_timetable_id, $year_id, $day, $period_label_id,$grade_id,$class_id,$room_id,$subject_id,$user_id,0);
                                                                $query = $link->prepare($q);
                                                                $query->execute($q_data);
                                                            }
                                                        }
                                                    }
                                                }
                                                
                                            }
                                            $timetable_loaded = TRUE;
                                        }
                                        
                                      
                                    }
                                    
                                    if ($timetable_loaded){
                                        //ACTIVATE TIMETABLE FOR THE YEAR
                                        $q = "SELECT * FROM schoollms_schema_userdata_teacher_timetable WHERE school_id = ? AND user_id = ? AND year_id = ?";
                                        $q_data = array ($school_id, $user_id, $year_id);
                                        $query = $link->prepare($q);
                                        $query->execute($q_data);
                                        $num_rows = count($query->fetchAll());
                                        if ($num_rows == 0){
                                            $q = "INSERT INTO schoollms_schema_userdata_teacher_timetable VALUES (?,?,?,?,?,NULL)";
                                            $q_data = array ($user_id,$school_id,$timetable_id,$year_id,"Auto-activated during upload");
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            //echo "TEACHER $teacher TIMETABLE NOT LOADED FOR $year_id $year<br>";
                                        }

//                                            exit;
                                    }
                                    
                                    //FIX REGISTER CLASS
                                     if ($teachers[$tid]['register_class'] !== 'N'){
                                         $class_search = $teachers[$tid]['register_class'];
                                         $grade_number = preg_replace('/[^\-\d]*(\-?\d*).*/','$1',$class_search);
                                         $q = "SELECT * FROM schoollms_schema_userdata_school_classes WHERE school_id = ? AND year_id = ? AND grade_id = ? AND class_label LIKE ?";
                                         $q_data = array ($school_id,$year_id,$grade_number,"%$class_search%");

                                         $query = $link->prepare($q);
                                         $query->execute($q_data);
                                         $num_rows = count($query->fetchAll());
        //                                             echo "CLASS NUM ROWS $num_rows YEAR_ID $year_id<br>";
                                         if ($num_rows == 1){
                                             $query->execute($q_data);
                                             $row = $query->fetch();
                                             $class_id = $row['class_id'];
                                             $class_label = $row['class_label'];
                                             $grade_id = $row['grade_id'];
                                             $class = $class_label;
                                         } else {
                                             $new_class = "Class $class_search";
                                             $q = "INSERT INTO schoollms_schema_userdata_school_classes VALUES (?, ?, ?, NULL, ?)";
                                             $q_data = array($school_id,$year_id,$grade_number,strtoupper($new_class));
                                             $query = $link->prepare($q);
                                             $query->execute($q_data);
                                             $q = "SELECT class_id FROM schoollms_schema_userdata_school_classes WHERE school_id = ? AND year_id = ? AND grade_id = ? AND class_label = ?";
                                             $q_data = array($school_id,$year_id,$grade_number, strtoupper($new_class));
                                             $query = $link->prepare($q);
                                             $query->execute($q_data);
                                             $row = $query->fetch();
                                             $class_id = $row['class_id'];
                                             $class = $new_class;
                                             //echo "CLASS $new_class NEEDS TO BE ADDED TO THE DATABASE <br>";
                                         }
                                         $teachers[$tid]['register_class'] = $class;
                                         $teachers[$tid]['register_class_id'] = $class_id;

                                         //GET ROOM ID
                                         $room = $teachers[$tid]['room'];
                                        $q = "SELECT * FROM schoollms_schema_userdata_school_building_rooms WHERE school_id = ? AND room_label LIKE ?";
                                        $q_data = array ($school_id, "%$room%");
                                        $query = $link->prepare($q);
                                        $query->execute($q_data);
                                        $row = $query->fetch();
                                        $room_id = $row['room_id'];
                                        
                                         //Get Registeration period_label_id
                                         //CONVERT PERIOD TO PERIOD LABEL ID
                                        $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = ? AND year_id = ? ORDER BY period_label_id";
                                        $q_data = array ($school_id, $year_id);
                                        $query = $link->prepare($q);
                                        $query->execute($q_data);
                                        $row = $query->fetchAll();
                                        $period_label_id = $row[0]['period_label_id'];
                                        $register_label = strtoupper($row[0]['period_label']);
                                        //GET REGISTRATION SUBJECT ID IF EXIST - OTHERWISE CREATE IT
                                        $q = "SELECT * FROM schoollms_schema_userdata_school_subjects WHERE UPPER(subject_title) = ?";
                                         $q_data = array ($register_label);
                                         $query = $link->prepare($q);
                                         $query->execute($q_data);
                                         $num_rows = count($query->fetchAll());
    //                                                 echo "SUBJECT NUM ROWS $num_rows <br>";
                                         if ($num_rows == 1){
                                             $query->execute($q_data);
                                             $row = $query->fetch();
                                             $register_subject_id = $row['subject_id'];
                                             //echo "SUBJECT ID $subject_id <br>";
                                         } else {
                                            $q = "INSERT INTO schoollms_schema_userdata_school_subjects VALUES (NULL, ?, ?, ?)";
                                            $q_data = array ($register_label,"SchoolLMS",'');
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $q = "SELECT subject_id FROM schoollms_schema_userdata_school_subjects WHERE UPPER(subject_title) = ?";
                                            $q_data = array($register_label);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $row = $query->fetch();
                                            $register_subject_id = $row['subject_id'];
                                         }
                                         
                                         $day_count = 1;
                                         while($day_count <= $school_settings['days']){
                                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ? AND day_id = ? AND period_label_id = ?";
                                            $q_data = array ($timetable_id, $year_id, $day_count, $period_label_id);
                                            $query = $link->prepare($q);
                                            $query->execute($q_data);
                                            $num_rows = count($query->fetchAll());
                                            if ($num_rows == 0){
                                                if (!empty($timetable_id) && !empty($year_id) && !empty($day) && !empty($period_label_id) && !empty($grade_id) && !empty($class_id) && !empty($room_id) && !empty($subject_id) && !empty($user_id)){
                                                    $q = "INSERT INTO schoollms_schema_userdata_school_timetable_items VALUES (?,?,?,?,?,?,?,?,?,?,NULL)";
                                                    $q_data = array ($timetable_id,$year_id,$day_count,$period_label_id,$grade_number,$class_id,$room_id,$register_subject_id,$user_id,0);
                                                    $query = $link->prepare($q);
                                                    $query->execute($q_data);
                                                }
                                            }
                                            
                                            $day_count++;
                                         }
                                     }  
                                 }
                             }
                             
                             //exit;
                             $timetable_div = new DIV();
                            //<div id="timetable" name="timetable">
                            $timetable_message = "id!:!timetable!,!name!:!timetable"; 
                            $timetable_div->setDIVSettings($timetable_message);

                            //YEAR
                            $year = date('Y');

                            $p = new Paragraph();
                            $message = "style!:!'text-align: center;font-size: 300%;'!,!text!:!<b>Sunward park High School <br><br> Timetable $year</b> <br></b><br>";
                            $p->setParagraphSettings($message);
                            $p->setParagraph();

                            $timetable_div->setDIVItems($break->addNewLine());
                            $timetable_div->setDIVItems($p->getParagraph());
                            $p->clearParagraph();

                            $center = new Center();
                            $timetable_div->setDIVItems($center->openCenter());

                            $current_view = "view"; //USER VIEW PROCESS
                            $platform = PLATFORM;
                            $image_file = "schoollogo.png";
                            $alt = "SPHSLMS";
                            $image_src = USER_VIEW_DEFAULT_THEME_IMAGES_DIR."/$current_view/$platform/$image_file";
                            $style = "width:50%;align:center";
                            $image = new Image();
                            $message = "src!:!'$image_src'!,!alt!:!$alt!,!style!:!$style"; 
                            $image->setImage($message);
                            $timetable_div->setDIVItems($image->getImage());

                            $timetable_div->setDIVItems($center->closeCenter());

                            $p = new Paragraph();
                            $message = "style!:!'text-align: center;font-size: 150%;'!,!text!:!<br> Uploaded and generated by: <br><b>School Learner and Learning Management System</b><br>www.schoollms.net - twitter.com/school_lms - facebook.com/schoollms";
                            $p->setParagraphSettings($message);
                            $p->setParagraph();

                            $timetable_div->setDIVItems($break->addNewLine());
                            $timetable_div->setDIVItems($p->getParagraph());
                            $p->clearParagraph();

                            //GENERATE TEACHER TIMETABLE VIEW
                            $temp_teachers = $teachers;
                            foreach ($temp_teachers as $tid => $teacher_school_details) {

                                //echo "$teacher Timetable <br><br>";
                                $teacher = $teachers[$tid]['name_surname'];
                                $room = $teachers[$tid]['room'];
                                $id = $tid;
                                $table = new Table();
                                $message_queue2 = array ();

                                //$p = new Paragraph();
                                $message = "style!:!'page-break-after:always;'";
                                $p->setParagraphSettings($message);
                                $p->setParagraph();

                                //$timetable_div->setDIVItems($break->addNewLine());
                                $timetable_div->setDIVItems($p->getParagraph());
                                $p->clearParagraph();

                                //YEAR
                                //$year = date('Y');

                                //$p = new Paragraph();
                                $message = "style!:!'text-align: center;font-size: 150%;'!,!text!:!<b>$teacher Timetable $year <br> Classroom $room</b>";
                                $p->setParagraphSettings($message);
                                $p->setParagraph();

                                $timetable_div->setDIVItems($break->addNewLine());
                                $timetable_div->setDIVItems($p->getParagraph());
                                $p->clearParagraph();

                                //$timetable_div->setDIVItems($break->addNewLine());

                                //Timetable DRAW Generated USER timetable
                                $user_timetable = new DIV();
                                $message2 = "style!:!'margin-top: 0px; padding-top: 0px;'";
                                $user_timetable->setDIVSettings($message2);
                                //id="table2" style="width:100%; border-collapse: separate; border-spacing: 3px 3px;"
                                $message2 = "id!:!table2!,!style!:!'width:100%; border-collapse: separate; border-spacing: 3px 3px;'";
                                //$user_timetable->setTableOptions($message);                   
                                //Get ROW messages 
                                //Foreach ROW get COL messages
                                //Foreach COL message get CELL message
                                //$message_queue2 = array ();
                                //<table><tbody><tr><td><a href="http://::1&amp;startdate=-1&amp;today=Wed:04 Jan:01 2017 02:36:28"><img src="./images/arrow_left_22x22.png"></a>
                                //DIV 1
                                //<div style="margin-top: 95px; padding-top: 95px;">
        //                        $message_queue[] = "div!?!style!:!'margin-top: 44px; padding-top: 1px;position: fixed; width:97%'";
        //                        //TABLE 1
                                $message_queue2[] = "table!?!$message2";
                                $message_queue2[] = "tbody!?!";
        //                                    //T1 R1
                                $message_queue2[] = "tr!?!width!:!'100%'";
        //                                        //TABLE 1 TD 1
                                $message_queue2[] = "td!?!class!:!'redisp-mark blank'!,!id!:!'firstTd'";
        //                                            //TABLE 2
                                $message_queue2[] = "table!?!";
                                $message_queue2[] = "tbody!?!";
                                $message_queue2[] = "tr!?!";
                                $message_queue2[] = "td!?!";
                                $message_queue2[] = "/td!?!";
                                $message_queue2[] = "/tr!?!";
                                $message_queue2[] = "/tbody!?!";
                                $message_queue2[] = "/table!?!";
        //                //                       //END TABLE 2
                                $message_queue2[] = "/td!?!";
        //                                        //T1 TD2
                                $message_queue2[] = "td!?!style!:!'width: 100%;'";
        //                                        //T1 DIV 1
        //                //                        //<div style="" id="divHeader">
                                $message_queue2[] = "div!?!style!:!'overflow:-moz-hidden-unscrollable;width:100%;position:relative'!,!id!:!divHeader'";
        //                    //                        
        //                                                //<table cellspacing="0" cellpadding="0" border="1" width="100%">
        ////                                                TABLE 3
                                $message_queue2[] = "table!?!cellspacing!:!0!,!cellpadding!:!0!,!border!:!1!,!width!:!100%";
                                $message_queue2[] = "colgroup!?!";
        ////                        //width="11%"
                                $period_count = 1;
                                while ($period_count <= $school_settings["days"]){
                                    $message_queue2[] = "col!?!width!:!17.5%";
                                    $period_count++;
                                }
                                $message_queue2[] = "/colgroup!?!";
        ////                            //                        
                                $message_queue2[] = "tbody!?!width!:!100%";
                                $message_queue2[] = "tr!?!width!:!100%";

                                //LOOP THROUGH DAYS
                                $period_count = 1;
                                while ($period_count <= $school_settings["periods"]){

                                    $period_string = "<b> Period $period_count </b>";

                                    $message_queue2[] = "td!?!class!:!'redips-mark dark';'";
                        //                        $message_queue2[] = "div!?!class!:!tableHeader";
                                    $message_queue2[] = "paragraph!?!style!:!'font: bold 12px/30px;'!,!text!:!<b>$period_string</b>";
                                    $message_queue2[] = "/paragraph!?!";
    //                                $message_queue2[] = "paragraph!?!style!:!''!,!text!:!$day_string ";
    //                                $message_queue2[] = "/paragraph!?!";
    //                    //                        $message_queue2[] = "/div!?!";
                                    $message_queue2[] = "/td!?!";
    //                                $period_count++;
                                    $period_count++;
                                }

                                $message_queue2[] = "/td!?!";
                                $message_queue2[] = "/tr!?!";
                                $message_queue2[] = "/tbody!?!";
                                $message_queue2[] = "/table!?!";
        //
                                $message_queue2[] = "/div!?!";
                                $message_queue2[] = "/td!?!";
                                $message_queue2[] = "/tr!?!";
        //        //                        
        //                                    //T1 R2
                                $message_queue2[] = "tr!?!";
                                $message_queue2[] = "td!?!valign!:!top";
                                $message_queue2[] = "div!?!style!:!'overflow: -moz-hidden-unscrollable;height:100%;position:relative'!,!id!:!firstcol";
                                $message_queue2[] = "table!?!cellspacing!:!0!,!cellpadding!:!0!,!border!:!1!,!width!:!100%";
                                $message_queue2[] = "colgroup!?!";
                                $message_queue2[] = "col!?!width!:!12.5%";
                                $message_queue2[] = "/colgroup!?!";
                                $message_queue2[] = "tbody!?!";

                                //LOOP THROUGH DAYS
                                $day_count = 1;
                                while ($day_count <= $school_settings["days"]){
                                    $day_string = "<b> Day $day_count <b>";

                                    $message_queue2[] = "tr!?!height!:!75px";    
                                    $message_queue2[] = "td!?!class!:!'mark dark'";
                                    $message_queue2[] = "div!?!class!:!tableFirstCol";
                                    $message_queue2[] = "paragraph!?!style!:!''!,!text!:!<b>$day_string</b>";
                                    $message_queue2[] = "/paragraph!?!";
                                    $message_queue2[] = "/div!?!";
                                    $message_queue2[] = "/td!?!";
                                    $message_queue2[] = "/tr!?!";
    //                                $day_count++;
                                    $day_count++;
                                }

                                $message_queue2[] = "/tbody!?!";
                                $message_queue2[] = "/table!?!";
        //
        //                                                $message_queue2[] = "/div!?!";
                                $message_queue2[] = "/td!?!";
        //                //                        
        //                      TIMETABLE SLOTS

                                //;

                                $message_queue2[] = "td!?!valign!:!top";
                                $message_queue2[] = "div!?!onscroll!:!fnScroll()!,!style!:!'overflow:-moz-hidden-unscrollable;width:100%;height:100%;position:relative'!,!id!:!table_div";
        //                    //                        
                                $message_queue2[] = "table!?!cellspacing!:!0!,!cellpadding!:!0!,!border!:!1!,!width!:!100%";
                                $message_queue2[] = "colgroup!?!";
            ////                        //width="11%"
                                $period_count = 1;
                                while ($period_count <= $school_settings["periods"]){
                                    $message_queue2[] = "col!?!width!:!12.5%";
                                    $period_count++;
                                }

                                $message_queue2[] = "/colgroup!?!";
        //                        
                                $message_queue2[] = "tbody!?!";
                                //LOOP THROUGH SLOTS
                                //$day_count = 1;
                                $day_count = 1;
                                while ($day_count <= $school_settings["days"]){
                                    //$period_count = 1;
                                    $period_count = 1;
                                    if ($day_count == 1 && $period_count == 1){
                                        $message_queue2[] = "tr!?!height!:!75px!,!id!:!firstTr";
                                    } else {
                                        $message_queue2[] = "tr!?!height!:!75px";
                                    }
                                    while ($period_count <= $school_settings["periods"]){
                                        if (!array_key_exists("timetable", $teachers[$tid])){
                                            $slot_item = "";
                                        } elseif (array_key_exists($day_count, $teachers[$tid]['timetable']) && array_key_exists($period_count, $teachers[$tid]['timetable'][$day_count])){
                                            $slot_item = $teachers[$tid]['timetable'][$day_count][$period_count];
                                        } else {
                                            $slot_item = "";
                                        }

                                        $message_queue2[] = "td!?!";
//                                        $message_queue2[] = "div!?!class!:!'redips-mark dark'!,!style!:!'width:100%; max-height:75px; overflow:auto;'";
                                        $message_queue2[] = "div!?!id!:!$id";//!,!class!:!'drag $class'";
                                        $message_queue2[] = "paragraph!?!style!:!''!,!text!:!$slot_item";
                                        $message_queue2[] = "/paragraph!?!";
                                        $message_queue2[] = "/div!?!";
//                                        $message_queue2[] = "/div!?!";
                                        $message_queue2[] = "/td!?!"; 

                                        $period_count++;
                                        //$day_count++;

                                            //$return_slots .= '</div></td>';
                                    }
                                    $message_queue2[] = "/tr!?!";
                                    $day_count++;
                                    //$period_count++;
                                }

                                $message_queue2[] = "/tbody!?!";
                                $message_queue2[] = "/table!?!";
                                $message_queue2[] = "/div!?!";
                                                                    //$message_queue2[] = "//table!?!";
                                $message_queue2[] = "/td!?!";
                                $message_queue2[] = "/tr!?!";
                                $message_queue2[] = "/tbody!?!";
                                $message_queue2[] = "/table!?!";

                                $temp_view = new View();
                                $timetable_message = "";
                                foreach ($message_queue2 as $key => $message) {
                                    $msg_tokens = explode("!?!", $message); 
                                    if (strpos($msg_tokens[0], "/") !== FALSE){
                                        $temp_message = $temp_view->closeViewItem($msg_tokens[0]);
                                        $user_timetable->setDIVItems($temp_message);                                   
                                    } else {
                                        $temp_message = $temp_view->openViewItem($message);
                                        $user_timetable->setDIVItems($temp_message);                                
                                    }
                                }

        //                        echo "PARAGRAPH <br>".$user_timetable->items;
                                $user_timetable->setDIV();
                                //echo $user_timetable->getDIV();
                                //exit;
                                //$p = new Paragraph();
                                $timetable_div->setDIVItems($user_timetable->getDIV());

                                //echo 
                                //GENERATE REPORT 
//                                $message = "style!:!'page-break-after:always;'";
//                                $p->setParagraphSettings($message);
//                                $p->setParagraph();
//
//                                //$timetable_div->setDIVItems($break->addNewLine());
//                                $timetable_div->setDIVItems($p->getParagraph());
//                                $p->clearParagraph();
//                                $message = "style!:!'text-align: center;font-size: 150%;'!,!text!:!<b>$teacher Timetable Generator Report </b>";
//                                $p->setParagraphSettings($message);
//                                $p->setParagraph();
//
//                                $timetable_div->setDIVItems($break->addNewLine());
//                                $timetable_div->setDIVItems($p->getParagraph());
//                                $p->clearParagraph();
//
//
//                                foreach($reports[$tid] as $rkey=>$rmessage){
//                                    $message = "style!:!'text-align: center;font-size: 150%;'!,!text!:!$rmessage";
//                                    $p->setParagraphSettings($message);
//                                    $p->setParagraph();
//
//                                    $timetable_div->setDIVItems($break->addNewLine());
//                                    $timetable_div->setDIVItems($p->getParagraph());
//                                    $p->clearParagraph();
//                                }




                                $user_timetable->clearDIV();


                            }
                            
                            $timetable_div->setDIV();
                            echo $timetable_div->getDIV();
                        
                            exit;
                             
                         }
                        exit;
                        
                        break;
                    
                    case 'filter':
                        
                        break;
                    
                    case 'view':
                        
                        break;
                    
                }
                
                $div->setDIV();
                //echo "TAB ".$div->getDIV()."<br>";
                $tabs->setTabItems($div->getDIV());
                $div->clearDIV();
            }
            break;
        
        case 'develop/timetable':
            $message_queue = array ();
            //<div class="tabs-selected" title="View/Modify Time Table" style="padding:10px">
            //<div id="timetabletab" title="Reports" style="padding:10px">
            $message_queue["school"] = "class!:!'tabs-selected'!,!title!:!'Develop School'!,!style!:!'padding:10px'";
            $message_queue["track"] = "class!:!'tabs-selected'!,!title!:!'Develop Tracker'!,!style!:!'padding:10px'";
            $message_queue["timetable"] = "class!:!'timetabletab'!,!title!:!'Develop Timetable'!,!style!:!'padding:10px'";
            $message_queue["classes"] = "class!:!'tabs-selected'!,!title!:!'Develop Classes'!,!style!:!'padding:10px'";
            $message_queue["teacher"] = "class!:!'timetabletab'!,!title!:!'Develop Teachers'!,!style!:!'padding:10px'";
            $message_queue["learners"] = "class!:!'tabs-selected'!,!title!:!'Develop Learners'!,!style!:!'padding:10px'";
            $message_queue["subjects"] = "class!:!'tabs-selected'!,!title!:!'Develop Subjects'!,!style!:!'padding:10px'";
            $message_queue["marks"] = "class!:!'tabs-selected'!,!title!:!'Develop Marks'!,!style!:!'padding:10px'";
            $message_queue["calendar"] = "class!:!'tabs-selected'!,!title!:!'Develop Calendar'!,!style!:!'padding:10px'";
           
            foreach ($message_queue as $message_key => $message) {
                $div = new DIV();
                //echo "user_view_body_content_tabs MSG: $message <br>";
                $div->setDIVSettings($message);
               
                switch ($message_key) {
                
                    case 'timetable':
//                        $data_message = array ();
//                        $data_message["type"] = "database";
//                        $data_message["engine"] = "mysql";
//                        $data_message["db"] = "school_lms_vas_dev_timetable";
//                        $data_message["username"] = "root";
//                        $data_message["password"] = "$0W3t0";
//                        $data_message["host"] = "localhost";
//                        
//                        $data = new DB($data_message);
//                        //$data->openDataDatabase($data_message);
//                        $q = "SELECT COUNT(user_id) FROM schoollms_schema_userdata_access_profile";
//                        $data->execSQL($q);
//                        echo "TIME IS ".$data->getTime();
                        
//                        $message = "style!:!'text-align: center;font-size: 150%;'!,!text!:!App Description";
//                        $p->setParagraphSettings($message);
//                        $p->setParagraph();
//                        $table->setTableItems($table->setTableTDItems($p->getParagraph()));
//                        $p->clearParagraph();
                        
                        $school_settings = array ();
                        $school_settings["periods"] = 11;
                        $school_settings["days"] = 5;
                        
                        $grades = array ();
                        $grades[] = "4";
                        $grades[] = "5";
                        $grades[] = "6";
                        $grades[] = "7";
                        //$grades[] = "8";
                        
                        $subjects = array ();
                        $subjects[] = "Zulu";
                        $subjects[] = "FAL";
                        $subjects[] = "N/S";
                        $subjects[] = "S/S";
                        $subjects[] = "Life Skills";
                        $subjects[] = "N/S Tech";
                        $subjects[] = "Xitsonga";
                        $subjects[] = "Tech";
                        $subjects[] = "L/O";
                        $subjects[] = "A/C";
                        $subjects[] = "EMS";
                        $subjects[] = "Maths";
                        $subjects[] = "L/S";
                        $subjects[] = "Sesotho";
                        
                        $subject_allocations = array ();
                        $subject_allocations["Zulu"] = array ();
                        $subject_allocations["Zulu"]["4"] = array ();
                        $subject_allocations["Zulu"]["4"]["periods"] = 12;
                        $subject_allocations["Zulu"]["4"]["period_limits"] = 2;
//                        $subject_allocations["Zulu"] = array ();
                        $subject_allocations["Zulu"]["5"] = array ();
                        $subject_allocations["Zulu"]["5"]["periods"] = 12;
                        $subject_allocations["Zulu"]["5"]["period_limits"] = 2;
//                        $subject_allocations["Zulu"] = array ();
                        $subject_allocations["Zulu"]["6"] = array ();
                        $subject_allocations["Zulu"]["6"]["periods"] = 12;
                        $subject_allocations["Zulu"]["6"]["period_limits"] = 2;
//                        $subject_allocations["Zulu"] = array ();
                        $subject_allocations["Zulu"]["7"] = array ();
                        $subject_allocations["Zulu"]["7"]["periods"] = 10;
                        $subject_allocations["Zulu"]["7"]["period_limits"] = 2;
                        
                        $subject_allocations["FAL"] = array ();
                        $subject_allocations["FAL"]["4"] = array ();
                        $subject_allocations["FAL"]["4"]["periods"] = 10;
                        $subject_allocations["FAL"]["4"]["period_limits"] = 3;
//                        $subject_allocations["FAL"] = array ();
                        $subject_allocations["FAL"]["5"] = array ();
                        $subject_allocations["FAL"]["5"]["periods"] = 10;
                        $subject_allocations["FAL"]["5"]["period_limits"] = 3;
//                        $subject_allocations["FAL"] = array ();
                        $subject_allocations["FAL"]["6"] = array ();
                        $subject_allocations["FAL"]["6"]["periods"] = 10;
                        $subject_allocations["FAL"]["6"]["period_limits"] = 3;
//                        $subject_allocations["FAL"] = array ();
                        $subject_allocations["FAL"]["7"] = array ();
                        $subject_allocations["FAL"]["7"]["periods"] = 8;
                        $subject_allocations["FAL"]["7"]["period_limits"] = 3;
                        
                        $subject_allocations["N/S"] = array ();
                        $subject_allocations["N/S"]["4"] = array ();
                        $subject_allocations["N/S"]["4"]["periods"] = 7;
                        $subject_allocations["N/S"]["4"]["period_limits"] = 2;
//                        $subject_allocations["N/S"] = array ();
                        $subject_allocations["N/S"]["5"] = array ();
                        $subject_allocations["N/S"]["5"]["periods"] = 7;
                        $subject_allocations["N/S"]["5"]["period_limits"] = 2;
//                        $subject_allocations["N/S"] = array ();
                        $subject_allocations["N/S"]["6"] = array ();
                        $subject_allocations["N/S"]["6"]["periods"] = 7;
                        $subject_allocations["N/S"]["6"]["period_limits"] = 2;
//                        $subject_allocations["N/S"] = array ();
                        $subject_allocations["N/S"]["7"] = array ();
                        $subject_allocations["N/S"]["7"]["periods"] = 6;
                        $subject_allocations["N/S"]["7"]["period_limits"] = 2;
                        
                        
                        $subject_allocations["S/S"] = array ();
                        $subject_allocations["S/S"]["4"] = array ();
                        $subject_allocations["S/S"]["4"]["periods"] = 6;
                        $subject_allocations["S/S"]["4"]["period_limits"] = 2;
//                        $subject_allocations["S/S"] = array ();
                        $subject_allocations["S/S"]["5"] = array ();
                        $subject_allocations["S/S"]["5"]["periods"] = 6;
                        $subject_allocations["S/S"]["5"]["period_limits"] = 2;
//                        $subject_allocations["S/S"] = array ();
                        $subject_allocations["S/S"]["6"] = array ();
                        $subject_allocations["S/S"]["6"]["periods"] = 6;
                        $subject_allocations["S/S"]["6"]["period_limits"] = 2;
//                        $subject_allocations["S/S"] = array ();
                        $subject_allocations["S/S"]["7"] = array ();
                        $subject_allocations["S/S"]["7"]["periods"] = 6;
                        $subject_allocations["S/S"]["7"]["period_limits"] = 2;
                        
                        $subject_allocations["Life Skills"] = array ();
                        $subject_allocations["Life Skills"]["4"] = array ();
                        $subject_allocations["Life Skills"]["4"]["periods"] = 8;
                        $subject_allocations["Life Skills"]["4"]["period_limits"] = 2;
//                        $subject_allocations["Life Skills"] = array ();
                        $subject_allocations["Life Skills"]["5"] = array ();
                        $subject_allocations["Life Skills"]["5"]["periods"] = 8;
                        $subject_allocations["Life Skills"]["5"]["period_limits"] = 2;
//                        $subject_allocations["Life Skills"] = array ();
                        $subject_allocations["Life Skills"]["6"] = array ();
                        $subject_allocations["Life Skills"]["6"]["periods"] = 8;
                        $subject_allocations["Life Skills"]["6"]["period_limits"] = 2;
//                        $subject_allocations["Life Skills"] = array ();
                        $subject_allocations["Life Skills"]["7"] = array ();
                        $subject_allocations["Life Skills"]["7"]["periods"] = 4;
                        $subject_allocations["Life Skills"]["7"]["period_limits"] = 2;
                        
                        $subject_allocations["N/S Tech"] = array ();
                        $subject_allocations["N/S Tech"]["4"] = array ();
                        $subject_allocations["N/S Tech"]["4"]["periods"] = 7;
                        $subject_allocations["N/S Tech"]["4"]["period_limits"] = 2;
//                        $subject_allocations["N/S Tech"] = array ();
                        $subject_allocations["N/S Tech"]["5"] = array ();
                        $subject_allocations["N/S Tech"]["5"]["periods"] = 7;
                        $subject_allocations["N/S Tech"]["5"]["period_limits"] = 2;
//                        $subject_allocations["N/S Tech"] = array ();
                        $subject_allocations["N/S Tech"]["6"] = array ();
                        $subject_allocations["N/S Tech"]["6"]["periods"] = 7;
                        $subject_allocations["N/S Tech"]["6"]["period_limits"] = 2;
//                        $subject_allocations["N/S Tech"] = array ();
                        $subject_allocations["N/S Tech"]["7"] = array ();
                        $subject_allocations["N/S Tech"]["7"]["periods"] = 6;
                        $subject_allocations["N/S Tech"]["7"]["period_limits"] = 2;
                        
                        $subject_allocations["Xitsonga"] = array ();
                        $subject_allocations["Xitsonga"]["4"] = array ();
                        $subject_allocations["Xitsonga"]["4"]["periods"] = 12;
                        $subject_allocations["Xitsonga"]["4"]["period_limits"] = 2;
//                        $subject_allocations["Xitsonga"] = array ();
                        $subject_allocations["Xitsonga"]["5"] = array ();
                        $subject_allocations["Xitsonga"]["5"]["periods"] = 12;
                        $subject_allocations["Xitsonga"]["5"]["period_limits"] = 2;
//                        $subject_allocations["Xitsonga"] = array ();
                        $subject_allocations["Xitsonga"]["6"] = array ();
                        $subject_allocations["Xitsonga"]["6"]["periods"] = 12;
                        $subject_allocations["Xitsonga"]["6"]["period_limits"] = 2;
//                        $subject_allocations["Xitsonga"] = array ();
                        $subject_allocations["Xitsonga"]["7"] = array ();
                        $subject_allocations["Xitsonga"]["7"]["periods"] = 10;
                        $subject_allocations["Xitsonga"]["7"]["period_limits"] = 2;
                        
//                        $subject_allocations["HL"] = array ();
//                        $subject_allocations["HL"]["4"] = array ();
//                        $subject_allocations["HL"]["4"]["periods"] = 12;
//                        $subject_allocations["HL"]["4"]["period_limits"] = 3;
////                        $subject_allocations["HL"] = array ();
//                        $subject_allocations["HL"]["5"] = array ();
//                        $subject_allocations["HL"]["5"]["periods"] = 12;
//                        $subject_allocations["HL"]["5"]["period_limits"] = 3;
////                        $subject_allocations["HL"] = array ();
//                        $subject_allocations["HL"]["6"] = array ();
//                        $subject_allocations["HL"]["6"]["periods"] = 12;
//                        $subject_allocations["HL"]["6"]["period_limits"] = 3;
////                        $subject_allocations["HL"] = array ();
//                        $subject_allocations["HL"]["7"] = array ();
//                        $subject_allocations["HL"]["7"]["periods"] = 10;
//                        $subject_allocations["HL"]["7"]["period_limits"] = 3;
                        
                        $subject_allocations["Tech"] = array ();
                        $subject_allocations["Tech"]["4"] = array ();
                        $subject_allocations["Tech"]["4"]["periods"] = 4;
                        $subject_allocations["Tech"]["4"]["period_limits"] = 2;
//                        $subject_allocations["Tech"] = array ();
                        $subject_allocations["Tech"]["5"] = array ();
                        $subject_allocations["Tech"]["5"]["periods"] = 4;
                        $subject_allocations["Tech"]["5"]["period_limits"] = 2;
//                        $subject_allocations["Tech"] = array ();
                        $subject_allocations["Tech"]["6"] = array ();
                        $subject_allocations["Tech"]["6"]["periods"] = 4;
                        $subject_allocations["Tech"]["6"]["period_limits"] = 2;
//                        $subject_allocations["Tech"] = array ();
                        $subject_allocations["Tech"]["7"] = array ();
                        $subject_allocations["Tech"]["7"]["periods"] = 4;
                        $subject_allocations["Tech"]["7"]["period_limits"] = 2;
                        
                        $subject_allocations["L/O"] = array ();
                        $subject_allocations["L/O"]["4"] = array ();
                        $subject_allocations["L/O"]["4"]["periods"] = 8;
                        $subject_allocations["L/O"]["4"]["period_limits"] = 2;
//                        $subject_allocations["L/O"] = array ();
                        $subject_allocations["L/O"]["5"] = array ();
                        $subject_allocations["L/O"]["5"]["periods"] = 8;
                        $subject_allocations["L/O"]["5"]["period_limits"] = 2;
//                        $subject_allocations["L/O"] = array ();
                        $subject_allocations["L/O"]["6"] = array ();
                        $subject_allocations["L/O"]["6"]["periods"] = 8;
                        $subject_allocations["L/O"]["6"]["period_limits"] = 2;
//                        $subject_allocations["L/O"] = array ();
                        $subject_allocations["L/O"]["7"] = array ();
                        $subject_allocations["L/O"]["7"]["periods"] = 4;
                        $subject_allocations["L/O"]["7"]["period_limits"] = 2;
                        
                        $subject_allocations["A/C"] = array ();
                        $subject_allocations["A/C"]["4"] = array ();
                        $subject_allocations["A/C"]["4"]["periods"] = 12;
                        $subject_allocations["A/C"]["4"]["period_limits"] = 2;
//                        $subject_allocations["A/C"] = array ();
                        $subject_allocations["A/C"]["5"] = array ();
                        $subject_allocations["A/C"]["5"]["periods"] = 12;
                        $subject_allocations["A/C"]["5"]["period_limits"] = 2;
//                        $subject_allocations["Creative Art"] = array ();
                        $subject_allocations["A/C"]["6"] = array ();
                        $subject_allocations["A/C"]["6"]["periods"] = 12;
                        $subject_allocations["A/C"]["6"]["period_limits"] = 2;
//                        $subject_allocations["Creative Art"] = array ();
                        $subject_allocations["A/C"]["7"] = array ();
                        $subject_allocations["A/C"]["7"]["periods"] = 4;
                        $subject_allocations["A/C"]["7"]["period_limits"] = 2;
                        
                        
                        $subject_allocations["EMS"] = array ();
                        $subject_allocations["EMS"]["4"] = array ();
                        $subject_allocations["EMS"]["4"]["periods"] = 12;
                        $subject_allocations["EMS"]["4"]["period_limits"] = 2;
//                        $subject_allocations["EMS"] = array ();
                        $subject_allocations["EMS"]["5"] = array ();
                        $subject_allocations["EMS"]["5"]["periods"] = 12;
                        $subject_allocations["EMS"]["5"]["period_limits"] = 2;
//                        $subject_allocations["EMS"] = array ();
                        $subject_allocations["EMS"]["6"] = array ();
                        $subject_allocations["EMS"]["6"]["periods"] = 12;
                        $subject_allocations["EMS"]["6"]["period_limits"] = 2;
//                        $subject_allocations["EMS"] = array ();
                        $subject_allocations["EMS"]["7"] = array ();
                        $subject_allocations["EMS"]["7"]["periods"] = 4;
                        $subject_allocations["EMS"]["7"]["period_limits"] = 2;
                        
                        $subject_allocations["Maths"] = array ();
                        $subject_allocations["Maths"]["4"] = array ();
                        $subject_allocations["Maths"]["4"]["periods"] = 12;
                        $subject_allocations["Maths"]["4"]["period_limits"] = 3;
//                        $subject_allocations["Maths"] = array ();
                        $subject_allocations["Maths"]["5"] = array ();
                        $subject_allocations["Maths"]["5"]["periods"] = 12;
                        $subject_allocations["Maths"]["5"]["period_limits"] = 3;
//                        $subject_allocations["Maths"] = array ();
                        $subject_allocations["Maths"]["6"] = array ();
                        $subject_allocations["Maths"]["6"]["periods"] = 12;
                        $subject_allocations["Maths"]["6"]["period_limits"] = 3;
//                        $subject_allocations["Maths"] = array ();
                        $subject_allocations["Maths"]["7"] = array ();
                        $subject_allocations["Maths"]["7"]["periods"] = 9;
                        $subject_allocations["Maths"]["7"]["period_limits"] = 3;
                        
                        $subject_allocations["L/S"] = array ();
                        $subject_allocations["L/S"]["4"] = array ();
                        $subject_allocations["L/S"]["4"]["periods"] = 8;
                        $subject_allocations["L/S"]["4"]["period_limits"] = 2;
                        //$subject_allocations["Life Skills"] = array ();
                        $subject_allocations["L/S"]["5"] = array ();
                        $subject_allocations["L/S"]["5"]["periods"] = 8;
                        $subject_allocations["L/S"]["5"]["period_limits"] = 2;
                        //$subject_allocations["Life Skills"] = array ();
                        $subject_allocations["L/S"]["6"] = array ();
                        $subject_allocations["L/S"]["6"]["periods"] = 8;
                        $subject_allocations["L/S"]["6"]["period_limits"] = 2;
                        //$subject_allocations["Life Skills"] = array ();
                        $subject_allocations["L/S"]["7"] = array ();
                        $subject_allocations["L/S"]["7"]["periods"] = 4;
                        $subject_allocations["L/S"]["7"]["period_limits"] = 2;
                        
                        $subject_allocations["Sesotho"] = array ();
                        $subject_allocations["Sesotho"]["4"] = array ();
                        $subject_allocations["Sesotho"]["4"]["periods"] = 12;
                        $subject_allocations["Sesotho"]["4"]["period_limits"] = 2;
//                        $subject_allocations["Sesotho"] = array ();
                        $subject_allocations["Sesotho"]["5"] = array ();
                        $subject_allocations["Sesotho"]["5"]["periods"] = 12;
                        $subject_allocations["Sesotho"]["5"]["period_limits"] = 2;
//                        $subject_allocations["Sesotho"] = array ();
                        $subject_allocations["Sesotho"]["6"] = array ();
                        $subject_allocations["Sesotho"]["6"]["periods"] = 12;
                        $subject_allocations["Sesotho"]["6"]["period_limits"] = 2;
                        //$subject_allocations["Sesotho"] = array ();
                        $subject_allocations["Sesotho"]["7"] = array ();
                        $subject_allocations["Sesotho"]["7"]["periods"] = 10;
                        $subject_allocations["Sesotho"]["7"]["period_limits"] = 2;
                        
                        $teachers = array ();
                        $teachers[] = "Khumalo M.N";
                        $teachers[] = "Mohlala F.P";
                        $teachers[] = "Njoni K.M";
                        $teachers[] = "Tshabalala M.T";
                        $teachers[] = "Gubevu S";
                        $teachers[] = "Sedibe F.M";
                        $teachers[] = "Mofokeng N";
                        $teachers[] = "Phore D.D.I";
                        $teachers[] = "Rakosa D";
                        $teachers[] = "Zindela W";
                        $teachers[] = "Buthelezi Z.N";
                        $teachers[] = "Motselebane S.P";
                        $teachers[] = "Mpala S";
                        $teachers[] = "Gumede T.K";
                        $teachers[] = "Matiwane Z";
                        $teachers[] = "Rabotho M.G";
                        $teachers[] = "Khaba N";
                        $teachers[] = "Mathe R.E";
                        $teachers[] = "Phenduka M.H";
                        $teachers[] = "Chauke H.E";
                        $teachers[] = "Madiba C.M";
                        $teachers[] = "Tsoari M.V";
                        $teachers[] = "Ngwane T.P";
                        $teachers[] = "Mahlangu T.M";
                        $teachers[] = "Leeuw M.E";
                        
                        $teacher_allocations = array ();
           
                        $teacher_setup = array ();
                        $teacher_setup[] = "Gumede T.K#5:subjects-Maths*3;7:subjects-L/O*1,N/S*1";
                        $teacher_setup[] = "Phore D.D.I#5:subjects-Maths*2;7:subjects-Maths*2";
                        $teacher_setup[] = "Rakosa D#6:subjects-Maths*2;5:subjects-N/S Tech*1";
                        $teacher_setup[] = "Zindela W#4:subjects-Maths*3,N/S Tech*1";
                        $teacher_setup[] = "Buthelezi Z.N#4:subjects-Zulu*2;6:subjects-Zulu*2";
                        $teacher_setup[] = "Motselebane S.P#4:subjects-Maths*2;5:subjects-Life Skills*1;7:subjects-A/C*3";
                        $teacher_setup[] = "Mpala S#5:subjects-FAL*3;4:subjects-S/S*2";
                        $teacher_setup[] = "Mofokeng N#7:subjects-Maths*2,Tech*3;6:subjects-L/S*2";
                        $teacher_setup[] = "Matiwane Z#6:subjects-Maths*3;4:subjects-N/S Tech*1";
                        $teacher_setup[] = "Rabotho M.G#4:subjects-FAL*2;5:subjects-N/S*3,S/S*1";
                        $teacher_setup[] = "Khaba N#4:subjects-FAL*3,L/S*2";
                        $teacher_setup[] = "Mathe R.E#7:subjects-FAL*2,N/S*3;5:subjects-N/S Tech*1";
                        $teacher_setup[] = "Phenduka M.H#6:subjects-S/S*4;7:subjects-EMS*4,S/S*1";
                        $teacher_setup[] = "Mohlala F.P#4:subjects-Sesotho*1;5:subjects-Sesotho*1,S/S*3";
                        $teacher_setup[] = "Njoni K.M#4:subjects-Xitsonga*1,S/S*3;5:subjects-Xitsonga*1";
                        $teacher_setup[] = "Tshabalala M.T#5:subjects-Zulu*2;6:subjects-Zulu*2";
                        $teacher_setup[] = "Gubevu S#7:subjects-Zulu*3";
                        $teacher_setup[] = "Sedibe F.M#6:subjects-Sesotho*1,S/S*4;7:subjects-Sesotho*1";
                        $teacher_setup[] = "Leeuw M.E#6:subjects-FAL*3;4:subjects-L/S*2";
                        
                        foreach($teacher_setup as $index=>$setup){
                            $setup_tokens = explode("#", $setup);
                            $teacher = $setup_tokens[0];
                            if (array_key_exists($teacher, $teacher_allocations)){
                                
                            } else {
//                                echo "<b>TEACHER $teacher </b><br>";
                                $teacher_allocations["$teacher"] = array ();
                                $teacher_tokens = explode(";", $setup_tokens[1]);
                                foreach ($teacher_tokens as $tindex => $teacher_items) {
                                    $grade_tokens = explode(":", $teacher_items);
                                    $grade = $grade_tokens[0];
                                    $teacher_allocations["$teacher"]["$grade"] = array ();
                                    $subject_tokens = explode("-", $grade_tokens[1]);
                                    $subject_option = $subject_tokens[0]; 
//                                    echo "Grade $grade OPTION $subject_option<br>";
                                    $teacher_allocations["$teacher"]["$grade"]["$subject_option"] = array ();
                                    $subject_tokens = explode(",", $subject_tokens[1]);
                                    foreach ($subject_tokens as $sindex => $subject_items) {
                                        $subject_items_tokens = explode("*", $subject_items);
                                        $subject = $subject_items_tokens[0];
//                                        echo "SUBJECT $subject <br><br>";
                                        $teacher_allocations["$teacher"]["$grade"]["$subject_option"]["$subject"] = array ();
                                        $teacher_allocations["$teacher"]["$grade"]["$subject_option"]["$subject"]["classes"] = $subject_items_tokens[1]; 
                                    }
                                }
                                
                            }
                        }
                        
                        //print_r($teacher_allocations);
//                        exit;
                        
                        $teacher_allocations["Chauke H.E"] = array ();
                        $teacher_allocations["Chauke H.E"]["5"] = array ();
                        $teacher_allocations["Chauke H.E"]["5"]["subjects"] = array ();
                        $teacher_allocations["Chauke H.E"]["5"]["subjects"]["L/S"] = array ();
                        $teacher_allocations["Chauke H.E"]["5"]["subjects"]["L/S"]["classes"] = 3;
                        $teacher_allocations["Chauke H.E"]["7"] = array ();
                        $teacher_allocations["Chauke H.E"]["7"]["subjects"] = array ();
                        $teacher_allocations["Chauke H.E"]["7"]["subjects"]["Xitsonga"] = array ();
                        $teacher_allocations["Chauke H.E"]["7"]["subjects"]["Xitsonga"]["classes"] = 1;
                        $teacher_allocations["Chauke H.E"]["6"] = array ();
                        $teacher_allocations["Chauke H.E"]["6"]["subjects"] = array ();
                        $teacher_allocations["Chauke H.E"]["6"]["subjects"]["Xitsonga"] = array ();
                        $teacher_allocations["Chauke H.E"]["6"]["subjects"]["Xitsonga"]["classes"] = 1;
                        
                        $teacher_allocations["Madiba C.M"] = array ();
                        $teacher_allocations["Madiba C.M"]["5"] = array ();
                        $teacher_allocations["Madiba C.M"]["5"]["subjects"] = array ();
                        $teacher_allocations["Madiba C.M"]["5"]["subjects"]["Zulu"] = array ();
                        $teacher_allocations["Madiba C.M"]["5"]["subjects"]["Zulu"]["classes"] = 2;
//                        $teacher_allocations["Madiba C.M"]["5"] = array ();
//                        $teacher_allocations["Madiba C.M"]["5"]["subjects"] = array ();
                        $teacher_allocations["Madiba C.M"]["5"]["subjects"]["Life Skills"] = array ();
                        $teacher_allocations["Madiba C.M"]["5"]["subjects"]["Life Skills"]["classes"] = 2;
//                        $teacher_allocations["Madiba C.M"]["6"] = array ();
//                        $teacher_allocations["Madiba C.M"]["6"]["subjects"] = array ();
//                        $teacher_allocations["Madiba C.M"]["6"]["subjects"]["N/S Tech"] = array ();
//                        $teacher_allocations["Madiba C.M"]["6"]["subjects"]["N/S Tech"]["classes"] = 2;
                        
                        $teacher_allocations["Tsoari M.V"] = array ();
                        $teacher_allocations["Tsoari M.V"]["5"] = array ();
                        $teacher_allocations["Tsoari M.V"]["5"]["subjects"] = array ();
                        $teacher_allocations["Tsoari M.V"]["5"]["subjects"]["FAL"] = array ();
                        $teacher_allocations["Tsoari M.V"]["5"]["subjects"]["FAL"]["classes"] = 2;
                        $teacher_allocations["Tsoari M.V"]["4"] = array ();
                        $teacher_allocations["Tsoari M.V"]["4"]["subjects"] = array ();
                        $teacher_allocations["Tsoari M.V"]["4"]["subjects"]["Tech"] = array ();
                        $teacher_allocations["Tsoari M.V"]["4"]["subjects"]["Tech"]["classes"] = 1;
                        $teacher_allocations["Tsoari M.V"]["6"] = array ();
                        $teacher_allocations["Tsoari M.V"]["6"]["subjects"] = array ();
                        $teacher_allocations["Tsoari M.V"]["6"]["subjects"]["N/S Tech"] = array ();
                        $teacher_allocations["Tsoari M.V"]["6"]["subjects"]["N/S Tech"]["classes"] = 3;
                        
                        $teacher_allocations["Ngwane T.P"] = array ();
                        $teacher_allocations["Ngwane T.P"]["6"] = array ();
                        $teacher_allocations["Ngwane T.P"]["6"]["subjects"] = array ();
                        $teacher_allocations["Ngwane T.P"]["6"]["subjects"]["FAL"] = array ();
                        $teacher_allocations["Ngwane T.P"]["6"]["subjects"]["FAL"]["classes"] = 2;
                        $teacher_allocations["Ngwane T.P"]["7"] = array ();
                        $teacher_allocations["Ngwane T.P"]["7"]["subjects"] = array ();
                        $teacher_allocations["Ngwane T.P"]["7"]["subjects"]["L/O"] = array ();
                        $teacher_allocations["Ngwane T.P"]["7"]["subjects"]["L/O"]["classes"] = 3;
//                        $teacher_allocations["Ngwane T.P"]["6"] = array ();
//                        $teacher_allocations["Ngwane T.P"]["6"]["subjects"] = array ();
                        $teacher_allocations["Ngwane T.P"]["6"]["subjects"]["N/S Tech"] = array ();
                        $teacher_allocations["Ngwane T.P"]["6"]["subjects"]["N/S Tech"]["classes"] = 2;
                        
                        $teacher_allocations["Khumalo M.N"] = array ();
                        $teacher_allocations["Khumalo M.N"]["4"] = array ();
                        $teacher_allocations["Khumalo M.N"]["4"]["subjects"] = array ();
                        $teacher_allocations["Khumalo M.N"]["4"]["subjects"]["Zulu"] = array ();
                        $teacher_allocations["Khumalo M.N"]["4"]["subjects"]["Zulu"]["classes"] = 2;
//                        $teacher_allocations["Khumalo M.N"]["4"] = array ();
//                        $teacher_allocations["Khumalo M.N"]["4"]["subjects"] = array ();
                        $teacher_allocations["Khumalo M.N"]["4"]["subjects"]["N/S Tech"] = array ();
                        $teacher_allocations["Khumalo M.N"]["4"]["subjects"]["N/S Tech"]["classes"] = 3;
//                        $teacher_allocations["Khumalo M.N"]["4"]["classes"] = array ();
//                        $teacher_allocations["Khumalo M.N"]["4"]["classes"]["total"] = 0;
                        
                        $teacher_allocations["Mahlangu T.M"] = array ();
                        $teacher_allocations["Mahlangu T.M"]["7"] = array ();
                        $teacher_allocations["Mahlangu T.M"]["7"]["subjects"] = array ();
                        $teacher_allocations["Mahlangu T.M"]["7"]["subjects"]["FAL"] = array ();
                        $teacher_allocations["Mahlangu T.M"]["7"]["subjects"]["FAL"]["classes"] = 2;
                        $teacher_allocations["Mahlangu T.M"]["7"]["subjects"]["A/C"] = array ();
                        $teacher_allocations["Mahlangu T.M"]["7"]["subjects"]["A/C"]["classes"] = 1;
                        $teacher_allocations["Mahlangu T.M"]["6"] = array ();
                        $teacher_allocations["Mahlangu T.M"]["6"]["subjects"] = array ();        
                        $teacher_allocations["Mahlangu T.M"]["6"]["subjects"]["Life Skills"] = array ();
                        $teacher_allocations["Mahlangu T.M"]["6"]["subjects"]["Life Skills"]["classes"] = 3;
                        
//                        $teacher_allocations["Mahlangu T.M"]["4"]["classes"] = array ();
//                        $teacher_allocations["Mahlangu T.M"]["4"]["classes"]["total"] = 0;
                        
                        
                        
                        
                        //exit;
                        $teacher_teaches_subject = array ();
                        foreach($teachers as $tid=>$teacher){
                            foreach($grades as $gid=>$grade){
                                foreach ($subjects as $sid => $subject) {
                                    $teacher_teaches_subject["$tid-$gid-$sid"] = FALSE;
                                }
                            }
                        }
                        
                        $temp_teacher_allocations = $teacher_allocations;
                        $teacher_total_periods = array ();
                        $teacher_subject_periods = array ();
                        $school_grade_classes = array ();
                        
                        foreach ($teachers as $tid => $teacher) {
                            if (array_key_exists($teacher, $teacher_allocations)){
                                foreach ($grades as $gid => $grade) {
                                    if (array_key_exists($grade, $teacher_allocations[$teacher])){
                                        foreach ($teacher_allocations[$teacher][$grade]["subjects"] as $subject => $subject_items) {
//                                            foreach ($subject_items as $subject=>$subject_setup){
                                                //echo $subject."<br>";
                                                $sid = 0;
                                                foreach($subjects as $temp_sid=>$temp_subject){
                                                    if ($subject == $temp_subject){
                                                        $sid = $temp_sid;
                                                        break;
                                                    }
                                                }
                                                //echo "TEACHES ".$teacher_teaches_subject["$tid-$gid-$sid"]."<br>";
                                                $teacher_teaches_subject["$tid-$gid-$sid"] = TRUE;
                                                //echo "Teacher $teacher teaches SUBJECT $subject GRADE $grade ".$teacher_teaches_subject["$tid-$gid-$sid"]." INDEX $tid-$gid-$sid<br>";
                                                //echo "TEACHES ".$teacher_teaches_subject["$tid-$gid-$sid"];
                                                
//                                                
                                                $subject_periods = $subject_allocations[$subject]["$grade"]["periods"];
                                                //TEACHER CLASSES PER SUBJECT
                                                $teacher_classes = $teacher_allocations[$teacher]["$grade"]["subjects"][$subject]["classes"];
                                                //TEACHER PERIODSs
                                                $total_periods = $subject_periods * $teacher_classes;
                                                if (array_key_exists($tid, $teacher_total_periods)){
                                                    
                                                    $teacher_subject_periods["$tid-$gid-$sid"] = $total_periods;
                                                    $teacher_total_periods[$tid] += $total_periods;
                                                    //echo "TEACHER $tid $teacher allocated $teacher_classes classes for $subject grade $grade hence teaches $total_periods (with $subject_periods for $subject in $grade)<br>";
                                                } else {
                                                    $teacher_total_periods[$tid] = $total_periods;
                                                    $teacher_subject_periods["$tid-$gid-$sid"] = $subject_periods;
                                                }
        
                                                //echo "TEACHER $tid $teacher allocated $teacher_classes classes for $subject grade $grade hence teaches $total_periods (with $subject_periods for $subject in $grade) and now at ".$teacher_total_periods[$tid]." OVERALL<br>";
                                                //GRADE CLASSES
                                                if (array_key_exists("$gid-$sid", $school_grade_classes)){
                                                    $school_grade_classes["$gid-$sid"] += $teacher_classes; 
                                                } else {
                                                    $school_grade_classes["$gid-$sid"] = $teacher_classes;
                                                }
                                                //echo "Teacher $tid $teacher Grade $gid $grade Subject $sid $subject <br>";
                                            }
                                        }
                                        
                                        if (array_key_exists("$gid-$sid", $school_grade_classes)){
                                            //echo "SCHOOL has ".$school_grade_classes["$gid-$sid"]." for Grade $grade SUBJECT $subject<br>";
                                        } else {
                                            //echo "Teacher $tid $teacher does not teach grade $grade <br>";
                                        }
                                    }
                            } else {
                                //echo "Teacher $tid $teacher in not allocated any subject <br>";
                            }
                        }
                       
                        //exit;
                        
                        //CREATE CLASSES
                        $school_classes = array ();
                        $classletters = array ();
                        $classletters[] = "A";
                        $classletters[] = "B";
                        $classletters[] = "C";
                        $classletters[] = "D";
                        $classletters[] = "E";
                        $classletters[] = "F";
                        $classletters[] = "G";
                        $classletters[] = "H";
                        $classletters[] = "I";
                        $classletters[] = "J";
                        $classletters[] = "K";
                        $classletters[] = "L";
                        $classletters[] = "M";
                        $classletters[] = "N";
                        $classletters[] = "O";
                        $classletters[] = "P";
                        $classletters[] = "Q";
                        $classletters[] = "R";
                        $classletters[] = "S";
                        $classletters[] = "T";
                        $classletters[] = "U";
                        $classletters[] = "V";
                        $classletters[] = "W";
                        $classletters[] = "X";
                        $classletters[] = "Y";
                        $classletters[] = "Z";
                        
                        $vernac_subjects = array ("Zulu", "Sesotho", "Xitsonga");
                        $vernac_subjects_ids = array ();
                        $vernac_subject_teachers = array ();
                        $school_class_count = 1;
                        foreach ($grades as $gid => $grade) {
                            $temp_subjects = $subjects;
                            foreach ($temp_subjects as $sid => $subject) {
                                if (in_array($subject, $vernac_subjects)){
                                    //echo "SUBJECT $subject PERIODS ".$school_grade_classes["$gid-$sid"]."<br>";
                                    if (array_key_exists("$gid-$sid", $school_classes)){
                                        //echo "<br> VERNAC CLASSES FOR $subject Grade $grade CREATED";
                                        //print_r($school_classes["$gid-$sid"]);
                                        //echo "<br><br>";
                                        continue;
                                    }
                                    
                                    $total_grade_classes = 0;
                                    $vernac_subjects_ids = array ();
                                    foreach($vernac_subjects as $tkey => $tsubject){
                                        $tsid = array_search($tsubject, $subjects);
                                        if (array_key_exists("$gid-$tsid", $school_grade_classes)){
                                            $vernac_subjects_ids[] = $tsid;
                                            //echo "TOTAL_GRADE_PERIODS $total_grade_classes SUBJECT $tsubject PERIODS ".$school_grade_classes["$gid-$tsid"]."<br>";
                                            if ($total_grade_classes < $school_grade_classes["$gid-$tsid"]){
                                                $total_grade_classes = $school_grade_classes["$gid-$tsid"];
                                            }
                                        }
                                    }
                                    $class_count = 0;
                                    while($class_count < $total_grade_classes){
                                        $letter = $classletters[$class_count];
                                        foreach($vernac_subjects_ids as $tkey=>$tsid){
                                            if (array_key_exists("$gid-$tsid", $school_classes)){
                                                $school_classes["$gid-$tsid"][] = "Class $grade".$letter;
                                            } else {
                                                $school_classes["$gid-$tsid"] = array ();
                                                $school_classes["$gid-$tsid"][] = "Class $grade".$letter;
                                            }
                                            $tsubject = $subjects[$tsid];
                                            //echo "<br> VERNAC CLASS FOR $tsubject Class $grade".$letter;
                                        }
                                        $class_count++;
                                        $school_class_count++;
                                    }
                                } elseif (array_key_exists("$gid-$sid", $school_grade_classes)){
                                    $total_grade_classes = $school_grade_classes["$gid-$sid"];
                                    $class_count = 0;
                                    while($class_count < $total_grade_classes){
                                        $letter = $classletters[$class_count];                                        
                                        if (array_key_exists("$gid-$sid", $school_classes)){
                                            $school_classes["$gid-$sid"][] = "Class $grade".$letter;
                                        } else {
                                            $school_classes["$gid-$sid"] = array ();
                                            $school_classes["$gid-$sid"][] = "Class $grade".$letter;
                                        }
                                        //echo "<br>SUBJECT $subject CLASS  $grade".$letter." CREATED <br>";
                                        $class_count++;
                                        $school_class_count++;
                                    }
                                }
                            }
                        }
                        
//                        exit;
                        //PER SUBJECT ASSIGN CLASSES TO TEACHERS
                        $teacher_classes_per_subject_per_grade = array ();
                        $class_availability_per_subject_per_grade = array ();
                        $teacher_class_availability = array ();
                        $class_subject_teacher = array ();
                        $school_vernac_classes = array ();
                        
                        foreach ($grades as $gid => $grade) {
                            foreach($subjects as $sid=>$subject){
                                if (array_key_exists("$gid-$sid", $school_classes)){
                                    foreach ($school_classes["$gid-$sid"] as $cid => $class){
                                        $class_availability_per_subject_per_grade["$gid-$sid-$cid"] = TRUE;
                                        if (in_array($subject, $vernac_subjects)){
                                            $school_vernac_classes["$gid-$sid-$cid"] = FALSE;
                                        }
                                    }
                                }
                            }
                        }
        
                        
                        
                        foreach ($teachers as $tid => $teacher) {
                            //$teacher_allocated_classes_for_this_grade_subject = FALSE;
                            
                            foreach ($grades as $gid => $grade) {
                                foreach($subjects as $sid=>$subject){
                                    //TEACHER TEACHES THIS SUBJECT
                                    
                                    if ($teacher_teaches_subject["$tid-$gid-$sid"]){
//                                        echo "PROCESSING TEACHER $teacher SUBJECT $subject Grade $grade<br>";
//                                        echo "CLASS ASSIGNMENTS Teacher $teacher teaches $subject grade $grade INDEX $tid-$gid-$sid<b>";
                                        //FOR EACH CLASS
                                        if (array_key_exists("$gid-$sid", $school_classes)){
                                            $total_classes = count($school_classes["$gid-$sid"]);
                                            $count_classes = 0;
                                            foreach ($school_classes["$gid-$sid"] as $cid => $class) {
                                                //IF CLASS HAS ALREADY BEING ASSIGNED A TEACHER
//                                                if (in_array($subject, $vernac_subjects)){
//                                                    //echo "<b> TRYING CLASS $class FOR $teacher TEACHING $subject </b> <br>";
//                                                }
                                                
                                                if (in_array($subject, $vernac_subjects)){
                                                    $vernac_subject_teachers["$gid-$sid"][] = "$subject $tid $teacher";
                                                    //echo "IF CLASS $class IS TAKEN <br>";
                                                    if ($school_vernac_classes["$gid-$sid-$cid"]){
                                                        //echo "CLASS IS TAKEN BY<br>";
                                                        if (array_key_exists("$gid-$sid-$cid", $class_subject_teacher)){
//                                                            print_r($class_subject_teacher["$gid-$sid-$cid"]);
                                                            //echo "<br><br>";
                                                            continue;
                                                        } else {
                                                            //echo "TRY ASSIGNING CLASS TO $teacher <br>";
                                                            $school_vernac_classes["$gid-$sid-$cid"] = TRUE;
                                                        }
                                                        
                                                    } else {
                                                        //echo "TRY ASSIGNING CLASS TO $teacher <br>";
                                                        $school_vernac_classes["$gid-$sid-$cid"] = TRUE;
                                                    }
                                                }
                                                
//                                                if (in_array($subject, $vernac_subjects)){
//                                                    echo "if ( CLASS AVAIL ".$class_availability_per_subject_per_grade["$gid-$sid-$cid"]." FOR SUBJECT $subject ) <br>";
//                                                }
                                                
                                                if ($class_availability_per_subject_per_grade["$gid-$sid-$cid"]){
                                                    //IF TEACHER CLASSES ARE STILL PENDING ALLOCATION FOR SUBJECT
                                                    if (array_key_exists("$tid-$gid-$sid", $teacher_class_availability)){      
                                                        if ($teacher_class_availability["$tid-$gid-$sid"] == 0){
//                                                            if (in_array($subject, $vernac_subjects)){
//                                                                echo "TEACHER $teacher NOT AVAILABLE <br>";
//                                                                
//                                                            }
                                                            //$teacher_allocated_classes_for_this_grade_subject = TRUE;
                                                            break;
                                                        }
                                                    } else {
                                                        $teacher_class_availability["$tid-$gid-$sid"] = $teacher_allocations[$teacher][$grade]["subjects"][$subject]["classes"];
                                                    }

                                                    $class_availability_per_subject_per_grade["$gid-$sid-$cid"] = FALSE;

                                                    $teacher_classes_per_subject_per_grade["$tid-$gid-$sid"] = "$class-$gid-$cid";
                                                    if (array_key_exists("$gid-$sid-$cid", $class_subject_teacher)){
                                                        $class_subject_teacher["$gid-$sid-$cid"][] = $tid;
                                                    } else {
                                                        $class_subject_teacher["$gid-$sid-$cid"] = array ();
                                                        $class_subject_teacher["$gid-$sid-$cid"][] = $tid;
                                                    }
                                                    
//                                                    if (in_array($subject, $vernac_subjects)){
//                                                        echo "Teacher $teacher is assigned class $class for $subject<br>";
//                                                    }
                                                    
                                                    $teacher_class_availability["$tid-$gid-$sid"]--;
                                                    
                                                    //echo "SUBJECT $subject <br>";
                                                    //print_r($vernac_subjects);
                                                    
                                                    if (in_array($subject, $vernac_subjects)){
                                                        //echo "SUBJECT $subject IS VERNAC <br>";
                                                        $temp_teacher_allocations = $teacher_allocations;
                                                        foreach($temp_teacher_allocations as $tteacher=>$grade_data){
                                                            $ttid = array_search($tteacher, $teachers);
                                                            if ($ttid == $tid){
                                                                continue;
                                                            }
                                                            
                                                            //echo "LOOKING AT $tteacher <br>";
                                                            foreach($grade_data as $tgrade=>$grade_option_data){
                                                                //echo "if ($tgrade == $grade){<br>";
                                                                if ($tgrade == $grade){
                                                                    $tgid = $gid;
                                                                    foreach($grade_option_data["subjects"] as $tsubject=>$subject_option_data){
//                                                                        echo "TSUBJECT $tsubject SUBJECT $subject <br>";
                                                                        if (in_array($tsubject, $vernac_subjects)){
                                                                            $tsid = array_search($tsubject, $subjects);
                                                                            if ($tsid == $sid){
                                                                                continue;
                                                                            }

                                                                            if ($class_availability_per_subject_per_grade["$gid-$tsid-$cid"]){
                                                                                if (array_key_exists("$ttid-$tgid-$tsid", $teacher_class_availability)){      
                                                                                    if ($teacher_class_availability["$ttid-$tgid-$tsid"] == 0){
                                                                                        //$teacher_allocated_classes_for_this_grade_subject = TRUE;
                                                                                        break;
                                                                                    }
                                                                                } else {
                                                                                    $teacher_class_availability["$ttid-$tgid-$tsid"] = $teacher_allocations[$tteacher][$grade]["subjects"][$tsubject]["classes"];
                                                                                }

                                                                                $teacher_classes_per_subject_per_grade["$ttid-$tgid-$tsid"] = "$class-$tgid-$cid";
                                                                                $class_subject_teacher["$tgid-$tsid-$cid"][] = $ttid;
                                                                                $teacher_class_availability["$ttid-$tgid-$tsid"]--;
                                                                                $class_availability_per_subject_per_grade["$gid-$tsid-$cid"] = FALSE;
//                                                                                echo "Vernac Teacher $tteacher is assigned class $class for $tsubject<br>";
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    } else {
                                                        //echo "Subject $subject NOT VERNAC <br>";
                                                    }
                                                    //echo "Teacher $tid Index $gid-$sid-$cid <br>";
                                                    //echo "Teacher $teacher is assigned class $class for $subject<br>";
                                                    $count_classes++;
                                                    
                                                }
                                            }
                                        }
                                        //echo "GRADE $grade COUNT CLASSES $count_classes vs TOTAL CLASSES $total_classes for $subject<br>";
                                    }
                                }
                                
                            }
                        }
                        
//                        exit;
                        
                        
                        $teacher_timetable = array ();
                        $class_timetable = array ();
                        $class_periods_per_subject = array ();
                        $teacher_availabilty = array ();
                       
                        $day_count = 1;
                        while($day_count <= $school_settings["days"]){
                            foreach ($teachers as $tid => $teacher) {
                                $period_count = 1;
                                while ($period_count <= $school_settings["periods"]){
                                    $teacher_availabilty["$tid-$day_count-$period_count"] = TRUE;
                                    $teacher_timetable[$tid][$day_count][$period_count] = "";
                                    //if ($teacher == "Rakosa D"){
                                    //    echo "TEACHER $tid $teacher IS AVAILABLE FOR DAY $day_count PERIOD $period_count KEY $tid-$day_count-$period_count <br>";
                                    //}
                                    
                                    $period_count++;
                                }
                            }
                            $day_count++;
                        }
                       
                        //exit;
                        
                        $class_availabilty = array ();
                        $class_subject_period_assign = array ();
                        $teacher_class_day_assigned = array ();
                        $teacher_period_counter = array ();
                        $assign_count = array ();
                        $reports = array ();
                        $total_teacher_periods_for_subject_to_class = array();
                        foreach($grades as $gid=>$grade){
                            foreach ($subjects as $sid => $subject) {
                                if (array_key_exists("$gid-$sid", $school_classes)){
                                    //FOR EACH CLASS IN GRADE
                                    //$total_teacher_periods_for_subject_to_class["$gid-$sid"] = 0;
                                    foreach($school_classes["$gid-$sid"] as $cid=>$class){
                                        $day_count = 1;
                                        $class_subject_period_assign["$gid-$sid-$cid"] = 0;
                                        while($day_count <= $school_settings["days"]){
                                            foreach ($teachers as $tid => $teacher) {
                                                if (array_key_exists("$tid-$gid-$sid", $teacher_subject_periods)){
                                                    $total_teacher_periods_for_subject_to_class["$tid-$gid-$sid-$cid"] = $subject_allocations[$subject][$grade]["periods"];//ceil($teacher_subject_periods["$tid-$gid-$sid"]/$teacher_allocations[$teacher][$grade]["subjects"][$subject]["classes"]);
                                                }
                                                
                                                $teacher_class_day_assigned["$tid-$gid-$cid-$day_count"] = FALSE;
                                                $teacher_period_counter["$tid-$gid-$sid-$cid"] = 0;
                                                $assign_count["$tid-$gid-$sid-$cid"] = 0;

                                            }

                                            $period_count = 1;
                                            while ($period_count <= $school_settings["periods"]){
                                                $class_availabilty["$gid-$cid-$day_count-$period_count"] = TRUE;
                                                $class_timetable["$gid-$cid"][$day_count][$day_count] = "";
                                                //echo "TEACHER $tid $teacher IS AVAILABLE FOR DAY $count_days PERIOD $count_periods KEY $tid-$count_days-$count_periods <br>";
                                                $period_count++;
                                            }
                                            $class_subject_period_assign["$gid-$sid-$cid-$day_count"] = 0;
                                            $day_count++;
                                        }
                                    }
                                }
                            }
                        }
                        
                        //$last_day = 1;
                        $grade_classes = array ();
                        $vernac_teacher_assign = array ();
                        
                        $temp_teacher_total_periods = $teacher_total_periods;
                        foreach($grades as $gid=>$grade){
                            
                            $temp_subjects = $subjects;
                            foreach ($temp_subjects as $sid => $subject) {
                                if (array_key_exists("$gid-$sid", $school_classes)){
                                //FOR EACH CLASS IN GRADE
//                                    $subject_period_count = 0;
//                                    while ($subject_period_count < $subject_allocations[$subject][$grade]["periods"]){
                                        $temp_school_classes = $school_classes;
                                        foreach($temp_school_classes["$gid-$sid"] as $cid=>$class){
                                            //FOR EACH SUBJECT
                                          //  echo "<br> Find teacher assigned to this $class for $subject <br>";
                                            //FIND TEACHER ASSIGNED TO THIS CLASS
                                            if (array_key_exists("$gid-$sid-$cid", $class_subject_teacher)){
                                                $grade_classes["$gid-$cid"] = $class;
                                                $temp_class_subject_teacher = $class_subject_teacher;
                                                foreach($temp_class_subject_teacher["$gid-$sid-$cid"] as $tid){
                                                    $teacher = $teachers[$tid];
                                                    //echo "Teacher $tid $teacher Index $gid-$sid-$cid <br>";
                                                    //CHECK IF CLASS HAS REACHED SUBJECT PERIODS
//                                                    if ($teacher == "Rakosa D"){
//                                                        echo "<br> <b>Teacher $teacher Teaches $subject Grade $grade TEST ".$teacher_teaches_subject["$tid-$gid-$sid"]." INDEX $tid-$gid-$sid </b><br>";
//                                                    }
    //                                                if ($teacher_teaches_subject["$tid-$gid-$sid"]){
    //                                                    $teacher_period_count = 0;
    //                                                    if (!array_key_exists("$tid-$gid-$sid", $teacher_subject_periods)){
    //                                                        continue;
    //                                                    }
    //                                                    
                                                        //echo "<br> <b>Teacher $teacher Teaches $subject Grade $grade TEST ".$teacher_teaches_subject["$tid-$gid-$sid"]." INDEX $tid-$gid-$sid </b><br>";
                                                        $temp_day_count = 1;
                                                        while ($temp_day_count <= $school_settings["days"]){
                                                            $class_subject_period_assign["$gid-$sid-$cid-$temp_day_count"] = 0;
                                                            $temp_day_count++;
                                                        }
                                                        //$assign_count = 0; 
//                                                        $total_teacher_periods_for_subject_to_class["$gid-$sid"] = ceil($teacher_subject_periods["$tid-$gid-$sid"]/$teacher_allocations[$teacher][$grade]["subjects"][$subject]["classes"]);
                                                        while($teacher_period_counter["$tid-$gid-$sid-$cid"] < $total_teacher_periods_for_subject_to_class["$tid-$gid-$sid-$cid"]){
//                                                             if ($teacher == "Rakosa D"){
//                                                                echo "Teacher $teacher teaches $subject grade $grade INDEX $tid-$gid-$sid <br> COUNTER ".$teacher_period_counter["$tid-$gid-$sid-$cid"]." VS CEILING ".ceil($teacher_subject_periods["$tid-$gid-$sid"]/$teacher_allocations[$teacher][$grade]["subjects"][$subject]["classes"])." <br>";
//    //                                                        }
//                                                             }
    //                                                               //FOR EACH DAY
                                                                $day_count = 1;
                                                                $assign_day = 0;
                                                                $assign_day_reset = FALSE;
                                                                while ($day_count <= $school_settings["days"]){

                                                                    //$assign_day = rand(1, $school_settings["days"]);
                                                                    if ($assign_day == 0){
                                                                        $assign_day = rand(1, $school_settings["days"]);
                                                                    }

                                                                    if ($assign_day > (int) $school_settings["days"] && $day_count < (int) $school_settings["days"]){
                                                                        $assign_period_reset = TRUE;
                                                                        $assign_day = 1;
                                                                    }

                                                                    //echo "if($assign_day > ".$school_settings["days"].") { RESET $assign_day_reset<br> ";
                                                                    if($assign_day > (int) $school_settings["days"]) {
                                                                        $assign_day_reset = TRUE;
                                                                        $assign_day = 1;
                                                                    } elseif(!$assign_day_reset) {
                                                                        $assign_day++;
                                                                    } else {
                                                                        $assign_day_reset = FALSE;
                                                                    }


                                                                    //FOR EACH PERIOD
                                                                    $period_count = 1;
                                                                    $subject_period_assign_count = 1;
                                                                    $assign_period = 0;
                                                                    $assign_period_reset = FALSE;
                                                                    while ($period_count <= $school_settings["periods"]){
                                                                        
//                                                                         if ($teacher == "Rakosa D"){
//                                                                            //echo "TEXT KEY $gid-$sid-$cid-$assign_day IN ARRAY class_subject_period_assign <br>";
//                                                                         }
                                                                         
                                                                        if (array_key_exists("$gid-$sid-$cid-$assign_day", $class_subject_period_assign)){
//                                                                            if ($teacher == "Rakosa D"){
//                                                                                //echo "KEY $gid-$sid-$cid-$assign_day EXISTS <br>";
//                                                                                //echo "if (".$class_subject_period_assign["$gid-$sid-$cid-$assign_day"]." > ".$subject_allocations[$subject][$grade]["periods"].")<br>";
//                                                                            }
                                                                            
                                                                            
                                                                            if ($class_subject_period_assign["$gid-$sid-$cid-$assign_day"] > $subject_allocations[$subject][$grade]["period_limits"]){
                                                                                $class_subject_period_assign["$gid-$sid-$cid-$assign_day"] = 0;
                                                                                break;
                                                                            }
                                                                        }
                                                                        
//                                                                        if ($teacher == "Rakosa D"){
//                                                                            //echo "DAY $day_count ASSIGN DAY $assign_day PERIOD $period_count ASSIGN PERIOD $assign_period SUBJECT $subject CLASS $class<br> ";
//                                                                        }
                                                                         //CHECK IF TEACHER ASSIGNED TO THIS CLASS IS AVAILABLE FOR THIS PERIOD
                                                                        //ALSO CONSIDERING THE LIMIT OF PERIODS THAT CAN BE ASSIGNED THIS SUBJECT
                                                                        //echo "$subject_period_assign_count < ".$subject_allocations[$subject][$grade]['period_limits']." <br>";
                                                                        if ($assign_period == 0){
                                                                            $assign_period = rand(1, $school_settings["periods"]);
                                                                        }

                                                                        if ($assign_period > $school_settings["periods"] && $period_count < $school_settings["periods"]){
                                                                            $assign_period = 1;
                                                                             $assign_period_reset = TRUE;
                                                                        }

                                                                        if($assign_period > (int) $school_settings["periods"]) {
                                                                            $assign_period = 1;
                                                                             $assign_period_reset = TRUE;
                                                                        } elseif(!$assign_period_reset) {
                                                                            $assign_period++;
                                                                        } else {
                                                                            $assign_period_reset = FALSE;
                                                                        }


//                                                                        if (!array_key_exists("$tid-$assign_day-$assign_period", $teacher_availabilty)){
//                                                                            $assign_period_reset = TRUE;
//                                                                            if($assign_period > (int) $school_settings["periods"]) {
//                                                                                $assign_period = 1;
//                                                                            }
//                                                                            
//                                                                            $period_count++;
//                                                                            continue;
//                                                                        }
//                                                                         if ($teacher == "Rakosa D"){
//                                                                            //echo "Teacher AVAILABILITY INDEX $tid-$assign_day-$assign_period <br>";
//                                                                         }
                                                                         
                                                                        if ($assign_day > (int) $school_settings["days"]){
//                                                                             if ($teacher == "Rakosa D"){
//                                                                                //echo "DAY COUNT INCREMENT FROM DAY $day_count ASSIGN $assign_day<br>";
//                                                                             }
                                                                            $day_count++;
//                                                                             if ($teacher == "Rakosa D"){
//                                                                                 //echo "TO DAY $day_count <br>";
//                                                                             }
                                                                            break;
                                                                        } elseif ($assign_period > (int) $school_settings["periods"]){
//                                                                             if ($teacher == "Rakosa D"){
//                                                                                //echo "ASSIGN RESET FROM $assign_period<br>";
//                                                                             }
                                                                            //$period_count++;
                                                                            $assign_period = 1;
                                                                            $assign_period_reset = TRUE;
                                                                            continue;
                                                                        }
                                                                        
//                                                                        if ($teacher == "Rakosa D"){// || $subject == "Zulu" || $class == "Class 5A"){
//                                                                            echo "<b>Teacher $teacher SUBJECT $subject TRYING DAY $day_count PERIOD $period_count / ASSIGN DAY $assign_day  ASSIGN PERIOD $assign_period </b> <br>";
//                                                                        }
                                                                        
//                                                                         if ($teacher == "Rakosa D"){
//                                                                             echo "<br>if ( TEACHER AVAILABLE ".$teacher_availabilty["$tid-$assign_day-$assign_period"]." && TOTAL LEFT PERIODS ".$temp_teacher_total_periods[$tid]." !== 0){ <br>";
//                                                                         }
                                                                       
                                                                        if ($teacher_availabilty["$tid-$assign_day-$assign_period"] && $temp_teacher_total_periods[$tid] !== 0){
//                                                                            if ($teacher == "Rakosa D"){
//                                                                                echo "<br>TEACHER AVAILABLE AND WITHIN LIMIT OF TOTAL PERIODS <br>";
//                                                                                echo "TEACHER AVAILABILITY ".$teacher_availabilty["$tid-$assign_day-$assign_period"]." INDEX $tid-$assign_day-$assign_period<br>";
//                                                                                echo "SUBJECT $subject GRADE $grade LIMITS ".$subject_allocations[$subject][$grade]["period_limits"]."<br>";
//                                                                                echo "if (CLASS $class AVAIL ".$class_availabilty["$gid-$cid-$assign_day-$assign_period"]." && CLASS SUBJECT PERIOD ".$class_subject_period_assign["$gid-$sid-$cid-$assign_day"]." < ".$subject_allocations[$subject][$grade]["period_limits"]." LIMIT){ <br>";
//                                                                            }
                                                                            
                                                                            if ($class_availabilty["$gid-$cid-$assign_day-$assign_period"] && $class_subject_period_assign["$gid-$sid-$cid-$assign_day"] < $subject_allocations[$subject][$grade]["period_limits"]){

                                                                                //if (array_key_exists("$tid-$gid-$sid", $assign_count)){
                                                                                $assign_count["$tid-$gid-$sid-$cid"]++;
                                                                                
//                                                                                if ($assign_count["$tid-$gid-$sid-$cid"] > $total_teacher_periods_for_subject_to_class["$tid-$gid-$sid-$cid"]){
//                                                                                    break;
//                                                                                }
                                                                                
                                                                                $temp_teacher_total_periods[$tid]--;
                                                                                
                                                                                $teacher_availabilty["$tid-$assign_day-$assign_period"] = FALSE;
                                                                                $class_availabilty["$gid-$cid-$assign_day-$assign_period"] = FALSE;
                                                                                //$subject_period_assign_count++;
                                                                                $class_subject_period_assign["$gid-$sid-$cid-$assign_day"]++;
                                                                                
                                                                                $teacher_timetable[$tid][$assign_day][$assign_period] = "<b>$subject</b> <br> $class";
                                                                                if (in_array($subject, $vernac_subjects)){
                                                                                    $class_timetable["$gid-$cid"][$assign_day][$assign_period] = "<p style='font-size: 80%'><b> $subject </b> $teacher </p>";
                                                                                } else {
                                                                                    $class_timetable["$gid-$cid"][$assign_day][$assign_period] = "<b> $subject </b> <br> $teacher";
                                                                                }
                                                                                
                                                                                

                                                                                if (in_array($subject, $vernac_subjects)){
                                                                                    $temp2_subjects = $subjects;
                                                                                    foreach ($temp2_subjects as $tsid => $tsubject) {
                                                                                        if (in_array($tsubject, $vernac_subjects)){
//                                                                                            if ($subject == "Zulu"){
//                                                                                                echo "FROM Teacher $teacher CLASS $class TSUBJECT $tsubject TSID $tsid SID $sid <br>";
//                                                                                            }
                                                                                            
                                                                                            if ($tsid == $sid){
                                                                                                continue;
                                                                                            }
                                                                                            
                                                                                            $temp2_class_subject_teacher = $class_subject_teacher;
                                                                                            if (array_key_exists("$gid-$tsid-$cid", $temp2_class_subject_teacher)){
                                                                                                
                                                                                                $found_assign_count_limit = FALSE;
                                                                                                foreach($temp2_class_subject_teacher["$gid-$tsid-$cid"] as $tkey=>$ttid){
                                                                                                    $tteacher = $teachers[$ttid];
                                                                                                    if ($temp_teacher_total_periods[$ttid] !== 0){
                                                                                                        $assign_count["$ttid-$gid-$tsid-$cid"]++;
                                                                                
//                                                                                                        if ($assign_count["$ttid-$gid-$tsid-$cid"] > $total_teacher_periods_for_subject_to_class["$ttid-$gid-$tsid-$cid"]){
//                                                                                                            $found_assign_count_limit = TRUE;       
//                                                                                                            continue;
//                                                                                                        }
                                                                                                        $temp_teacher_total_periods[$ttid]--;
                                                                                                        $teacher_availabilty["$ttid-$assign_day-$assign_period"] = FALSE;
                                                                                                        $teacher_period_counter["$ttid-$gid-$tsid-$cid"]++;
                                                                                                        $teacher_timetable[$ttid][$assign_day][$assign_period] = "<b>$tsubject</b> <br> $class"; 
                                                                                                        $class_timetable["$gid-$cid"][$assign_day][$assign_period] .= "<p style='font-size: 80%'><b> $tsubject </b> $tteacher </p>";
//                                                                                                        echo "On Day $assign_day Period $assign_period Teacher $tteacher will teach $tsubject to $class <br> Total Periods Left ".$temp_teacher_total_periods[$ttid]." Out of ".$teacher_total_periods[$ttid]."<br>";
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }

                                                                                if (array_key_exists("$gid-$sid-$cid", $class_periods_per_subject)){
                                                                                    $class_periods_per_subject["$gid-$sid-$cid"]++;

                                                                                } else {
                                                                                    $class_periods_per_subject["$gid-$sid-$cid"] = 1;
                                                                                }

                                                                                //if ($k

                                                                                if ($class_subject_period_assign["$gid-$sid-$cid-$assign_day"] > $subject_allocations[$subject][$grade]["period_limits"]){
//                                                                                    $class_subject_period_assign["$gid-$sid-$cid-$assign_day"] = 0;
                                                                               //     echo "DAY COUNTT REACHED";
                                                                                    $teacher_class_day_assigned["$tid-$gid-$cid-$assign_day"] = TRUE;
                                                                                    break;
                                                                                }
                                                                                
//                                                                                if ($teacher == "Rakosa D"){// || $subject == "Zulu" || $class == "Class 5A"){ 
//                                                                                    echo "On Day $assign_day Period $assign_period Teacher $teacher will teach $subject to $class <br> Total Periods Left ".$temp_teacher_total_periods[$tid]." Out of ".$teacher_total_periods[$tid]."<br>";
//                                                                                }
                                                                            } elseif ($class_subject_period_assign["$gid-$sid-$cid-$assign_day"] > $subject_allocations[$subject][$grade]["period_limits"]){
//                                                                                $class_subject_period_assign["$gid-$sid-$cid-$assign_day"] = 0;
                                                                                $teacher_class_day_assigned["$tid-$gid-$cid-$day_count"] = TRUE;
                                                                                break;
                                                                            }
    //                                                                         elseif ($teacher_total_periods["$tid-$sid"]){
    //
    //                                                                        }
                                                                        }

                                                                        $period_count++;
                                                                    }
                                                                    $day_count++;
                                                                }
                                                                $teacher_period_counter["$tid-$gid-$sid-$cid"]++;
    //                                                            //$teacher_period_count++;
                                                        }
                                                        if ($assign_count["$tid-$gid-$sid-$cid"] >= $total_teacher_periods_for_subject_to_class["$tid-$gid-$sid-$cid"]){
                                                            $reports[$tid][] = "TEACHER $teacher SUBJECT $subject TIMETABLE COMPLETE FOR CLASS $class <br> (PERIODS ASSIGNED ".$assign_count["$tid-$gid-$sid-$cid"]."/ ALLOCATED ".$total_teacher_periods_for_subject_to_class["$tid-$gid-$sid-$cid"].") <br>";
                                                        } else {
//                                                            $temp2_school_classes = $school_classes;
//                                                            //RESET THE CURRENT INCOMPLETE CLASS ASSIGNMENTS
//                                                            $temp_teacher_total_periods[$tid] += $assign_count;
//                                                            
//                                                            $day_count = 1;
//                                                            while ($day_count <= $school_settings["days"]){
//                                                                $period_count = 1;
//                                                                $class_subject_period_assign["$gid-$sid-$cid-$assign_day"] = 0;
//                                                                while ($period_count <= $school_settings["periods"]){
//                                                                    $teacher_availabilty["$tid-$assign_day-$assign_period"] = TRUE;
//                                                                    $class_availabilty["$gid-$cid-$assign_day-$assign_period"] = TRUE;
//                                                                    $period_count++;                                                                    
//                                                                }
//                                                                $day_count++;
//                                                            }
                                                            $reports[$tid][] = "TEACHER $teacher SUBJECT $subject CLASS $class INCOMPLETE - NEEDS TO BE ASSIGNED ANOTHER CLASS <br> (PERIODS ASSIGNED ".$assign_count["$tid-$gid-$sid-$cid"]."/ ALLOCATED ".$total_teacher_periods_for_subject_to_class["$tid-$gid-$sid-$cid"].")";
                                                        }
    //                                                }
                                                }
                                            }
                                        }
//                                        $subject_period_count++;
//                                       
//                                    }
                                }
                            }
                        }
    
//                        exit;
                        
                        //Timetable Load User Timetable DATA
                        $timetable_div = new DIV();
                        //<div id="timetable" name="timetable">
                        $timetable_message = "id!:!timetable!,!name!:!timetable"; 
                        $timetable_div->setDIVSettings($timetable_message);

                        //YEAR
                        $year = date('Y');
                            
                        $p = new Paragraph();
                        $message = "style!:!'text-align: center;font-size: 300%;'!,!text!:!<b>Umtholo Primary School <br><br> Timetable $year</b> <br><br> Generated By: </b><br>";
                        $p->setParagraphSettings($message);
                        $p->setParagraph();

                        $timetable_div->setDIVItems($break->addNewLine());
                        $timetable_div->setDIVItems($p->getParagraph());
                        $p->clearParagraph();

                        $center = new Center();
                        $timetable_div->setDIVItems($center->openCenter());
                        
                        $current_view = "view"; //USER VIEW PROCESS
                        $platform = PLATFORM;
                        $image_file = "schoollmslogo.png";
                        $alt = "SchoolLMS";
                        $image_src = USER_VIEW_DEFAULT_THEME_IMAGES_DIR."/$current_view/$platform/$image_file";
                        $style = "width:50%;align:center";
                        $image = new Image();
                        $message = "src!:!'$image_src'!,!alt!:!$alt!,!style!:!$style"; 
                        $image->setImage($message);
                        $timetable_div->setDIVItems($image->getImage());
                        
                        $timetable_div->setDIVItems($center->closeCenter());
                        
                        $p = new Paragraph();
                        $message = "style!:!'text-align: center;font-size: 150%;'!,!text!:!<b>School Learner and Learning Management System</b><br>www.schoollms.net - twitter.com/school_lms - facebook.com/schoollms";
                        $p->setParagraphSettings($message);
                        $p->setParagraph();

                        $timetable_div->setDIVItems($break->addNewLine());
                        $timetable_div->setDIVItems($p->getParagraph());
                        $p->clearParagraph();
                        
                        //GENERATE TEACHER TIMETABLE VIEW
                        foreach ($teachers as $tid => $teacher) {
                            
                            //echo "$teacher Timetable <br><br>";
                            $id = $tid;
                            $table = new Table();
                            $message_queue2 = array ();

                            //$p = new Paragraph();
                            $message = "style!:!'page-break-after:always;'";
                            $p->setParagraphSettings($message);
                            $p->setParagraph();
                            
                            //$timetable_div->setDIVItems($break->addNewLine());
                            $timetable_div->setDIVItems($p->getParagraph());
                            $p->clearParagraph();
                            
                            //YEAR
                            //$year = date('Y');
                            
                            //$p = new Paragraph();
                            $message = "style!:!'text-align: center;font-size: 150%;'!,!text!:!<b>$teacher Timetable $year</b>";
                            $p->setParagraphSettings($message);
                            $p->setParagraph();
                            
                            $timetable_div->setDIVItems($break->addNewLine());
                            $timetable_div->setDIVItems($p->getParagraph());
                            $p->clearParagraph();

                            //$timetable_div->setDIVItems($break->addNewLine());
                            
                            //Timetable DRAW Generated USER timetable
                            $user_timetable = new DIV();
                            $message2 = "style!:!'margin-top: 0px; padding-top: 0px;'";
                            $user_timetable->setDIVSettings($message2);
                            //id="table2" style="width:100%; border-collapse: separate; border-spacing: 3px 3px;"
                            $message2 = "id!:!table2!,!style!:!'width:100%; border-collapse: separate; border-spacing: 3px 3px;'";
                            //$user_timetable->setTableOptions($message);                   
                            //Get ROW messages 
                            //Foreach ROW get COL messages
                            //Foreach COL message get CELL message
                            //$message_queue2 = array ();
                            //<table><tbody><tr><td><a href="http://::1&amp;startdate=-1&amp;today=Wed:04 Jan:01 2017 02:36:28"><img src="./images/arrow_left_22x22.png"></a>
                            //DIV 1
                            //<div style="margin-top: 95px; padding-top: 95px;">
    //                        $message_queue[] = "div!?!style!:!'margin-top: 44px; padding-top: 1px;position: fixed; width:97%'";
    //                        //TABLE 1
                            $message_queue2[] = "table!?!$message2";
                            $message_queue2[] = "tbody!?!";
    //                                    //T1 R1
                            $message_queue2[] = "tr!?!width!:!'100%'";
    //                                        //TABLE 1 TD 1
                            $message_queue2[] = "td!?!class!:!'redisp-mark blank'!,!id!:!'firstTd'";
    //                                            //TABLE 2
                            $message_queue2[] = "table!?!";
                            $message_queue2[] = "tbody!?!";
                            $message_queue2[] = "tr!?!";
                            $message_queue2[] = "td!?!";
                            $message_queue2[] = "/td!?!";
                            $message_queue2[] = "/tr!?!";
                            $message_queue2[] = "/tbody!?!";
                            $message_queue2[] = "/table!?!";
    //                //                       //END TABLE 2
                            $message_queue2[] = "/td!?!";
    //                                        //T1 TD2
                            $message_queue2[] = "td!?!style!:!'width: 100%;'";
    //                                        //T1 DIV 1
    //                //                        //<div style="" id="divHeader">
                            $message_queue2[] = "div!?!style!:!'overflow:-moz-hidden-unscrollable;width:100%;position:relative'!,!id!:!divHeader'";
    //                    //                        
    //                                                //<table cellspacing="0" cellpadding="0" border="1" width="100%">
    ////                                                TABLE 3
                            $message_queue2[] = "table!?!cellspacing!:!0!,!cellpadding!:!0!,!border!:!1!,!width!:!100%";
                            $message_queue2[] = "colgroup!?!";
    ////                        //width="11%"
                            $period_count = 1;
                            while ($period_count <= $school_settings["periods"]){
                                $message_queue2[] = "col!?!width!:!20.5%";
                                $period_count++;
                            }
                            $message_queue2[] = "/colgroup!?!";
    ////                            //                        
                            $message_queue2[] = "tbody!?!width!:!100%";
                            $message_queue2[] = "tr!?!width!:!100%";
                            
                            //LOOP THROUGH DAYS
                            $day_count = 1;
                            while ($day_count <= $school_settings["days"]){
                                
                                $day_string = "<b> Day $day_count </b>";
                            
                                $message_queue2[] = "td!?!class!:!'redips-mark dark';'";
                    //                        $message_queue2[] = "div!?!class!:!tableHeader";
                                $message_queue2[] = "paragraph!?!style!:!'font: bold 12px/30px;'!,!text!:!<b>$day_string</b>";
                                $message_queue2[] = "/paragraph!?!";
//                                $message_queue2[] = "paragraph!?!style!:!''!,!text!:!$day_string ";
//                                $message_queue2[] = "/paragraph!?!";
//                    //                        $message_queue2[] = "/div!?!";
                                $message_queue2[] = "/td!?!";
//                                $period_count++;
                                $day_count++;
                            }
                            
                            $message_queue2[] = "/td!?!";
                            $message_queue2[] = "/tr!?!";
                            $message_queue2[] = "/tbody!?!";
                            $message_queue2[] = "/table!?!";
    //
                            $message_queue2[] = "/div!?!";
                            $message_queue2[] = "/td!?!";
                            $message_queue2[] = "/tr!?!";
    //        //                        
    //                                    //T1 R2
                            $message_queue2[] = "tr!?!";
                            $message_queue2[] = "td!?!valign!:!top";
                            $message_queue2[] = "div!?!style!:!'overflow: -moz-hidden-unscrollable;height:100%;position:relative'!,!id!:!firstcol";
                            $message_queue2[] = "table!?!cellspacing!:!0!,!cellpadding!:!0!,!border!:!1!,!width!:!100%";
                            $message_queue2[] = "colgroup!?!";
                            $message_queue2[] = "col!?!width!:!12.5%";
                            $message_queue2[] = "/colgroup!?!";
                            $message_queue2[] = "tbody!?!";
                            
                            //LOOP THROUGH PERIODS
                            $period_count = 1;
                            while ($period_count <= $school_settings["periods"]){
                                $period_label = "<b> Period $period_count <b>";
                                
                                $message_queue2[] = "tr!?!height!:!75px";    
                                $message_queue2[] = "td!?!class!:!'mark dark'";
                                $message_queue2[] = "div!?!class!:!tableFirstCol";
                                $message_queue2[] = "paragraph!?!style!:!''!,!text!:!<b>$period_label</b>";
                                $message_queue2[] = "/paragraph!?!";
                                $message_queue2[] = "/div!?!";
                                $message_queue2[] = "/td!?!";
                                $message_queue2[] = "/tr!?!";
//                                $day_count++;
                                $period_count++;
                            }
                            
                            $message_queue2[] = "/tbody!?!";
                            $message_queue2[] = "/table!?!";
    //
    //                                                $message_queue2[] = "/div!?!";
                            $message_queue2[] = "/td!?!";
    //                //                        
    //                      TIMETABLE SLOTS

                            //;

                            $message_queue2[] = "td!?!valign!:!top";
                            $message_queue2[] = "div!?!onscroll!:!fnScroll()!,!style!:!'overflow:-moz-hidden-unscrollable;width:100%;height:100%;position:relative'!,!id!:!table_div";
    //                    //                        
                            $message_queue2[] = "table!?!cellspacing!:!0!,!cellpadding!:!0!,!border!:!1!,!width!:!100%";
                            $message_queue2[] = "colgroup!?!";
        ////                        //width="11%"
                            $period_count = 1;
                            while ($period_count <= $school_settings["periods"]){
                                $message_queue2[] = "col!?!width!:!20.5%";
                                $period_count++;
                            }
                            
                            $message_queue2[] = "/colgroup!?!";
    //                        
                            $message_queue2[] = "tbody!?!";
                            //LOOP THROUGH SLOTS
                            //$day_count = 1;
                            $period_count = 1;
                            while ($period_count <= $school_settings["periods"]){
                                //$period_count = 1;
                                $day_count = 1;
                                if ($day_count == 1 && $period_count == 1){
                                    $message_queue2[] = "tr!?!height!:!75px!,!id!:!firstTr";
                                } else {
                                    $message_queue2[] = "tr!?!height!:!75px";
                                }
                                while ($day_count <= $school_settings["days"]){
                                    $slot_item = $teacher_timetable[$tid][$day_count][$period_count];
                                    
                                    $message_queue2[] = "td!?!";
                                    $message_queue2[] = "div!?!class!:!'redips-mark dark'!,!style!:!'width:161px; max-height:75px; overflow:auto;'";
                                    $message_queue2[] = "div!?!id!:!$id";//!,!class!:!'drag $class'";
                                    $message_queue2[] = "paragraph!?!style!:!''!,!text!:!$slot_item";
                                    $message_queue2[] = "/paragraph!?!";
                                    $message_queue2[] = "/div!?!";
                                    $message_queue2[] = "/div!?!";
                                    $message_queue2[] = "/td!?!"; 
 
                                    //$period_count++;
                                    $day_count++;
                                   
                                        //$return_slots .= '</div></td>';
                                }
                                $message_queue2[] = "/tr!?!";
                                //$day_count++;
                                $period_count++;
                            }
                            
                            $message_queue2[] = "/tbody!?!";
                            $message_queue2[] = "/table!?!";
                            $message_queue2[] = "/div!?!";
                                                                //$message_queue2[] = "//table!?!";
                            $message_queue2[] = "/td!?!";
                            $message_queue2[] = "/tr!?!";
                            $message_queue2[] = "/tbody!?!";
                            $message_queue2[] = "/table!?!";
                            
                            $temp_view = new View();
                            $timetable_message = "";
                            foreach ($message_queue2 as $key => $message) {
                                $msg_tokens = explode("!?!", $message); 
                                if (strpos($msg_tokens[0], "/") !== FALSE){
                                    $temp_message = $temp_view->closeViewItem($msg_tokens[0]);
                                    $user_timetable->setDIVItems($temp_message);                                   
                                } else {
                                    $temp_message = $temp_view->openViewItem($message);
                                    $user_timetable->setDIVItems($temp_message);                                
                                }
                            }

    //                        echo "PARAGRAPH <br>".$user_timetable->items;
                            $user_timetable->setDIV();
                            //echo $user_timetable->getDIV();
                            //$p = new Paragraph();
                            $timetable_div->setDIVItems($user_timetable->getDIV());
                            
                            //GENERATE REPORT 
                            $message = "style!:!'page-break-after:always;'";
                            $p->setParagraphSettings($message);
                            $p->setParagraph();
                            
                            //$timetable_div->setDIVItems($break->addNewLine());
                            $timetable_div->setDIVItems($p->getParagraph());
                            $p->clearParagraph();
                            $message = "style!:!'text-align: center;font-size: 150%;'!,!text!:!<b>$teacher Timetable Generator Report </b>";
                            $p->setParagraphSettings($message);
                            $p->setParagraph();
                            
                            $timetable_div->setDIVItems($break->addNewLine());
                            $timetable_div->setDIVItems($p->getParagraph());
                            $p->clearParagraph();
                            
                            
                            foreach($reports[$tid] as $rkey=>$rmessage){
                                $message = "style!:!'text-align: center;font-size: 150%;'!,!text!:!$rmessage";
                                $p->setParagraphSettings($message);
                                $p->setParagraph();

                                $timetable_div->setDIVItems($break->addNewLine());
                                $timetable_div->setDIVItems($p->getParagraph());
                                $p->clearParagraph();
                            }
                            
                            
                            
                            
                            $user_timetable->clearDIV();
                            
                            
                        }
                        
                        //GENERATE CLASS TIMETABLE VIEW
                        //$temp_school_classes = $school_classes;
                        foreach($grade_classes as $gcid=> $class){
                            $id = $gcid;
                            $table = new Table();
                            $message_queue2 = array ();

                            
                        
                            //$p = new Paragraph();
                            $message = "style!:!'page-break-after:always;'";
                            $p->setParagraphSettings($message);
                            $p->setParagraph();
                            
                            //$timetable_div->setDIVItems($break->addNewLine());
                            $timetable_div->setDIVItems($p->getParagraph());
                            $p->clearParagraph();
                            
                            //YEAR
                            //$year = date('Y');
                            
                            //$p = new Paragraph();
                            $message = "style!:!'text-align: center;font-size: 150%;'!,!text!:!<b>$class Timetable $year</b>";
                            $p->setParagraphSettings($message);
                            $p->setParagraph();
                            
                            $timetable_div->setDIVItems($break->addNewLine());
                            $timetable_div->setDIVItems($p->getParagraph());
                            $p->clearParagraph();

                            //$timetable_div->setDIVItems($break->addNewLine());
                            
                            //Timetable DRAW Generated USER timetable
                            $user_timetable = new DIV();
                            $message2 = "style!:!'margin-top: 0px; padding-top: 0px;'";
                            $user_timetable->setDIVSettings($message2);
                            //id="table2" style="width:100%; border-collapse: separate; border-spacing: 3px 3px;"
                            $message2 = "id!:!table2!,!style!:!'width:100%; border-collapse: separate; border-spacing: 3px 3px;'";
                            //$user_timetable->setTableOptions($message);                   
                            //Get ROW messages 
                            //Foreach ROW get COL messages
                            //Foreach COL message get CELL message
                            //$message_queue2 = array ();
                            //<table><tbody><tr><td><a href="http://::1&amp;startdate=-1&amp;today=Wed:04 Jan:01 2017 02:36:28"><img src="./images/arrow_left_22x22.png"></a>
                            //DIV 1
                            //<div style="margin-top: 95px; padding-top: 95px;">
    //                        $message_queue[] = "div!?!style!:!'margin-top: 44px; padding-top: 1px;position: fixed; width:97%'";
    //                        //TABLE 1
                            $message_queue2[] = "table!?!$message2";
                            $message_queue2[] = "tbody!?!";
    //                                    //T1 R1
                            $message_queue2[] = "tr!?!width!:!'100%'";
    //                                        //TABLE 1 TD 1
                            $message_queue2[] = "td!?!class!:!'redisp-mark blank'!,!id!:!'firstTd'";
    //                                            //TABLE 2
                            $message_queue2[] = "table!?!";
                            $message_queue2[] = "tbody!?!";
                            $message_queue2[] = "tr!?!";
                            $message_queue2[] = "td!?!";
                            $message_queue2[] = "/td!?!";
                            $message_queue2[] = "/tr!?!";
                            $message_queue2[] = "/tbody!?!";
                            $message_queue2[] = "/table!?!";
    //                //                       //END TABLE 2
                            $message_queue2[] = "/td!?!";
    //                                        //T1 TD2
                            $message_queue2[] = "td!?!style!:!'width: 100%;'";
    //                                        //T1 DIV 1
    //                //                        //<div style="" id="divHeader">
                            $message_queue2[] = "div!?!style!:!'overflow:-moz-hidden-unscrollable;width:100%;position:relative'!,!id!:!divHeader'";
    //                    //                        
    //                                                //<table cellspacing="0" cellpadding="0" border="1" width="100%">
    ////                                                TABLE 3
                            $message_queue2[] = "table!?!cellspacing!:!0!,!cellpadding!:!0!,!border!:!1!,!width!:!100%";
                            $message_queue2[] = "colgroup!?!";
    ////                        //width="11%"
                            $period_count = 1;
                            while ($period_count <= $school_settings["periods"]){
                                $message_queue2[] = "col!?!width!:!20.5%";
                                $period_count++;
                            }
                            $message_queue2[] = "/colgroup!?!";
    ////                            //                        
                            $message_queue2[] = "tbody!?!width!:!100%";
                            $message_queue2[] = "tr!?!width!:!100%";
                            
                            //LOOP THROUGH DAYS
                            $day_count = 1;
                            while ($day_count <= $school_settings["days"]){
                                
                                $day_string = "<b> Day $day_count </b>";
                            
                                $message_queue2[] = "td!?!class!:!'redips-mark dark';'";
                    //                        $message_queue2[] = "div!?!class!:!tableHeader";
                                $message_queue2[] = "paragraph!?!style!:!'font: bold 12px/30px;'!,!text!:!<b>$day_string</b>";
                                $message_queue2[] = "/paragraph!?!";
//                                $message_queue2[] = "paragraph!?!style!:!''!,!text!:!$day_string ";
//                                $message_queue2[] = "/paragraph!?!";
//                    //                        $message_queue2[] = "/div!?!";
                                $message_queue2[] = "/td!?!";
//                                $period_count++;
                                $day_count++;
                            }
                            
                            $message_queue2[] = "/td!?!";
                            $message_queue2[] = "/tr!?!";
                            $message_queue2[] = "/tbody!?!";
                            $message_queue2[] = "/table!?!";
    //
                            $message_queue2[] = "/div!?!";
                            $message_queue2[] = "/td!?!";
                            $message_queue2[] = "/tr!?!";
    //        //                        
    //                                    //T1 R2
                            $message_queue2[] = "tr!?!";
                            $message_queue2[] = "td!?!valign!:!top";
                            $message_queue2[] = "div!?!style!:!'overflow: -moz-hidden-unscrollable;height:100%;position:relative'!,!id!:!firstcol";
                            $message_queue2[] = "table!?!cellspacing!:!0!,!cellpadding!:!0!,!border!:!1!,!width!:!100%";
                            $message_queue2[] = "colgroup!?!";
                            $message_queue2[] = "col!?!width!:!12.5%";
                            $message_queue2[] = "/colgroup!?!";
                            $message_queue2[] = "tbody!?!";
                            
                            //LOOP THROUGH PERIODS
                            $period_count = 1;
                            while ($period_count <= $school_settings["periods"]){
                                $period_label = "<b> Period $period_count <b>";
                                
                                $message_queue2[] = "tr!?!height!:!105px";    
                                $message_queue2[] = "td!?!class!:!'mark dark'";
                                $message_queue2[] = "div!?!class!:!tableFirstCol";
                                $message_queue2[] = "paragraph!?!style!:!''!,!text!:!<b>$period_label</b>";
                                $message_queue2[] = "/paragraph!?!";
                                $message_queue2[] = "/div!?!";
                                $message_queue2[] = "/td!?!";
                                $message_queue2[] = "/tr!?!";
//                                $day_count++;
                                $period_count++;
                            }
                            
                            $message_queue2[] = "/tbody!?!";
                            $message_queue2[] = "/table!?!";
    //
    //                                                $message_queue2[] = "/div!?!";
                            $message_queue2[] = "/td!?!";
    //                //                        
    //                      TIMETABLE SLOTS

                            //;

                            $message_queue2[] = "td!?!valign!:!top";
                            $message_queue2[] = "div!?!onscroll!:!fnScroll()!,!style!:!'overflow:-moz-hidden-unscrollable;width:100%;height:100%;position:relative'!,!id!:!table_div";
    //                    //                        
                            $message_queue2[] = "table!?!cellspacing!:!0!,!cellpadding!:!0!,!border!:!1!,!width!:!100%";
                            $message_queue2[] = "colgroup!?!";
        ////                        //width="11%"
                            $period_count = 1;
                            while ($period_count <= $school_settings["periods"]){
                                $message_queue2[] = "col!?!width!:!20.5%";
                                $period_count++;
                            }
                            
                            $message_queue2[] = "/colgroup!?!";
    //                        
                            $message_queue2[] = "tbody!?!";
                            //LOOP THROUGH SLOTS
                            //$day_count = 1;
                            $period_count = 1;
                            while ($period_count <= $school_settings["periods"]){
                                //$period_count = 1;
                                $day_count = 1;
                                if ($day_count == 1 && $period_count == 1){
                                    $message_queue2[] = "tr!?!height!:!105px!,!id!:!firstTr";
                                } else {
                                    $message_queue2[] = "tr!?!height!:!105px";
                                }
                                while ($day_count <= $school_settings["days"]){
                                    if (array_key_exists($gcid, $class_timetable) && array_key_exists($day_count, $class_timetable[$gcid]) && array_key_exists($period_count, $class_timetable[$gcid][$day_count])){
                                        $slot_item = $class_timetable[$gcid][$day_count][$period_count];
                                    } else {
                                        $slot_item = "";
                                    }
                                    
                                    $message_queue2[] = "td!?!";
                                    //$message_queue2[] = "div!?!class!:!'redips-mark dark'!,!style!:!'width:161px; max-height:75px; overflow:auto;'";
                                    $message_queue2[] = "div!?!id!:!$gcid";//!,!class!:!'drag $class'";
                                    $message_queue2[] = "paragraph!?!style!:!''!,!text!:!$slot_item";
                                    $message_queue2[] = "/paragraph!?!";
                                    $message_queue2[] = "/div!?!";
                                    //$message_queue2[] = "/div!?!";
                                    $message_queue2[] = "/td!?!"; 
 
                                    //$period_count++;
                                    $day_count++;
                                   
                                        //$return_slots .= '</div></td>';
                                }
                                $message_queue2[] = "/tr!?!";
                                //$day_count++;
                                $period_count++;
                            }
                            
                            $message_queue2[] = "/tbody!?!";
                            $message_queue2[] = "/table!?!";
                            $message_queue2[] = "/div!?!";
                                                                //$message_queue2[] = "//table!?!";
                            $message_queue2[] = "/td!?!";
                            $message_queue2[] = "/tr!?!";
                            $message_queue2[] = "/tbody!?!";
                            $message_queue2[] = "/table!?!";
                            
                            $temp_view = new View();
                            $timetable_message = "";
                            foreach ($message_queue2 as $key => $message) {
                                $msg_tokens = explode("!?!", $message); 
                                if (strpos($msg_tokens[0], "/") !== FALSE){
                                    $temp_message = $temp_view->closeViewItem($msg_tokens[0]);
                                    $user_timetable->setDIVItems($temp_message);                                   
                                } else {
                                    $temp_message = $temp_view->openViewItem($message);
                                    $user_timetable->setDIVItems($temp_message);                                
                                }
                            }

    //                        echo "PARAGRAPH <br>".$user_timetable->items;
                            $user_timetable->setDIV();
                            //echo $user_timetable->getDIV();
                            $timetable_div->setDIVItems($user_timetable->getDIV());
                            $user_timetable->clearDIV();
                        }
                        
                        $timetable_div->setDIV();
                        echo $timetable_div->getDIV();
                        
                        exit;
                        
                        break;        
                        
                }
                
                
                $div->setDIV();
                //echo "TAB ".$div->getDIV()."<br>";
                $tabs->setTabItems($div->getDIV());
                $div->clearDIV();
            }
            break;
            
        case 'admin':
            $message_queue = array ();
            //<div class="tabs-selected" title="View/Modify Time Table" style="padding:10px">
            //<div id="timetabletab" title="Reports" style="padding:10px">
            $message_queue["track"] = "class!:!'tabs-selected'!,!title!:!'Elearning Tracker'!,!style!:!'padding:10px'";
            $message_queue["timetable"] = "class!:!'timetabletab'!,!title!:!'Admin Timetable'!,!style!:!'padding:10px'";
            $message_queue["classes"] = "class!:!'tabs-selected'!,!title!:!'Admin Classes'!,!style!:!'padding:10px'";
            $message_queue["teacher"] = "class!:!'timetabletab'!,!title!:!'Admin Teachers'!,!style!:!'padding:10px'";
            $message_queue["learners"] = "class!:!'tabs-selected'!,!title!:!'Admin Learners'!,!style!:!'padding:10px'";
            $message_queue["subjects"] = "class!:!'tabs-selected'!,!title!:!'Admin Subjects'!,!style!:!'padding:10px'";
            $message_queue["marks"] = "class!:!'tabs-selected'!,!title!:!'Admin Marks'!,!style!:!'padding:10px'";
            $message_queue["calendar"] = "class!:!'tabs-selected'!,!title!:!'Admin Calendar'!,!style!:!'padding:10px'";
           
            foreach ($message_queue as $message_key => $message) {
                $div = new DIV();
                //echo "user_view_body_content_tabs MSG: $message <br>";
                $div->setDIVSettings($message);
               
                
                $div->setDIV();
                //echo "TAB ".$div->getDIV()."<br>";
                $tabs->setTabItems($div->getDIV());
                $div->clearDIV();
            }
            break;
        
        case 'teacher':
            $message_queue = array ();
            //<div class="tabs-selected" title="View/Modify Time Table" style="padding:10px">
            //<div id="timetabletab" title="Reports" style="padding:10px">
            $message_queue["track"] = "class!:!'tabs-selected'!,!title!:!'Elearning Tracker'!,!style!:!'padding:10px'";
            $message_queue["timetable"] = "class!:!'timetabletab'!,!title!:!'Timetable'!,!style!:!'padding:10px'";
            $message_queue["reports"] = "class!:!'tabs-selected'!,!title!:!'Reports'!,!style!:!'padding:10px'";
            $message_queue["calendar"] = "class!:!'timetabletab'!,!title!:!'Calendar'!,!style!:!'padding:10px'";
            $message_queue["profile"] = "class!:!'tabs-selected'!,!title!:!'Profile'!,!style!:!'padding:10px'";
           
            foreach ($message_queue as $message_key => $message) {
                $div = new DIV();
                //echo "user_view_body_content_tabs MSG: $message <br>";
                $div->setDIVSettings($message);
               
                
                
                $div->setDIV();
                //echo "TAB ".$div->getDIV()."<br>";
                $tabs->setTabItems($div->getDIV());
                $div->clearDIV();
            }
            break;
        
        case 'support':
            $message_queue = array ();
            //<div class="tabs-selected" title="View/Modify Time Table" style="padding:10px">
            //<div id="timetabletab" title="Reports" style="padding:10px">
            $message_queue["data"] = "class!:!'tabs-selected'!,!title!:!'Manage Data'!,!style!:!'padding:10px'";
            $message_queue["system"] = "class!:!'timetabletab'!,!title!:!'Manage System'!,!style!:!'padding:10px'";
            $message_queue["security"] = "class!:!'tabs-selected'!,!title!:!'Manage Security'!,!style!:!'padding:10px'";
            $message_queue["users"] = "class!:!'timetabletab'!,!title!:!'Manage Users'!,!style!:!'padding:10px'";
            $message_queue["apps"] = "class!:!'tabs-selected'!,!title!:!'Manage Apps'!,!style!:!'padding:10px'";
           
            global $data;
            
            foreach ($message_queue as $message_key => $message) {
                $div = new DIV();
                //echo "user_view_body_content_tabs MSG: $message <br>";
                $div->setDIVSettings($message);
        
                //Timetable Load User Table Based On Role And Tab Association
                switch ($message_key) {
                
                    case 'data':
//                        $data_message = array ();
//                        $data_message["type"] = "database";
//                        $data_message["engine"] = "mysql";
//                        $data_message["charset"] = "utf8";
//                        $data_message["db"] = "school_lms_dev_vas_timetable";
//                        $data_message["username"] = "root";
//                        $data_message["password"] = "$0W3t0";
//                        $data_message["host"] = "localhost";
                        
                        $data = new Data("db");
                        //$q = "count:user_id:schoollms_schema_userdata_access_profile";
                        
                        $q = "SELECT l.* FROM schoollms_schema_userdata_school_timetable_period_labels l"
                            . " JOIN schoollms_schema_userdata_school_timetable_period p ON p.period_label_id = l.period_label_id and l.school_id = p.school_id"
                            . " WHERE l.school_id = ? AND week_day_id = 1"
                            . " ORDER BY UNIX_TIMESTAMP(concat('2016-01-01', ' ', period_start)) ASC";
                        
                        $data->prepareDataDatabaseQuery($q);
                        
                        $q_data = array (1);
                        
                        $data->db_query->execute($q_data);
                        
                        $num_rows = count($data->db_query->fetchAll());
                        
//                        while ($row = $data->db_query->fetch())
//                        {
//                            echo "PID: ".$row['period_label_id']." PLABEL".$row['period_label']. "<br>";
//                        }
                        
                        echo "NUM USERS ".$num_rows;
//                        //$data->openDataDatabase($data_message);
//                        
//                        $data->execSQL($q);
//                        echo "TIME IS ".$data->getTime()." NUM ROWS ".$data->numrows;
                        //exit;
                        break;        
                        
                }
                
                $div->setDIV();
                //echo "TAB ".$div->getDIV()."<br>";
                $tabs->setTabItems($div->getDIV());
                $div->clearDIV();
            }
            break;
            
        case 'login':
            //<div id="tabs" class="easyui-tabs scroller" style="width:98%;height:550px;flex: 1; overflow: auto;margin-left:10px; ">
            

            break;
        
        case 'logged':
            
            //Timetable TABS MENU
            //DEPENDING USER ROLE - eg Teacher in this case
            $message_queue = array ();
            //<div class="tabs-selected" title="View/Modify Time Table" style="padding:10px">
            //<div id="timetabletab" title="Reports" style="padding:10px">
            $message_queue["timetable"] = "class!:!'tabs-selected'!,!title!:!'Teacher Timetable'!,!style!:!'padding:10px'";
            $message_queue["report"] = "class!:!'timetabletab'!,!title!:!'Timetable Reports'!,!style!:!'padding:10px'";


            foreach ($message_queue as $message_key => $message) {
                $div = new DIV();
                //echo "user_view_body_content_tabs MSG: $message <br>";
                $div->setDIVSettings($message);

                //Timetable Load User Table Based On Role And Tab Association
                switch ($message_key) {
                    case "timetable":
                        $table = new Table();
                        $message_queue2 = array ();

                        //Timetable Load User Timetable DATA
                        $timetable_div = new DIV();
                        //<div id="timetable" name="timetable">
                        $timetable_message = "id!:!timetable!,!name!:!timetable"; 
                        $timetable_div->setDIVSettings($timetable_message);

                        //Timetable DRAW Generated USER timetable
                        $user_timetable = new DIV();
                        $message2 = "style!:!'margin-top: 51px; padding-top: 0px;'";
                        $user_timetable->setDIVSettings($message2);
                        //id="table2" style="width:100%; border-collapse: separate; border-spacing: 3px 3px;"
                        $message2 = "id!:!table2!,!style!:!'width:100%; border-collapse: separate; border-spacing: 3px 3px;'";
                        //$user_timetable->setTableOptions($message);                   
                        //Get ROW messages 
                        //Foreach ROW get COL messages
                        //Foreach COL message get CELL message
                        $message_queue2 = array ();
                        //<table><tbody><tr><td><a href="http://::1&amp;startdate=-1&amp;today=Wed:04 Jan:01 2017 02:36:28"><img src="./images/arrow_left_22x22.png"></a>
                        //DIV 1
                        //<div style="margin-top: 95px; padding-top: 95px;">
//                        $message_queue[] = "div!?!style!:!'margin-top: 44px; padding-top: 1px;position: fixed; width:97%'";
//                        //TABLE 1
                        $message_queue2[] = "table!?!$message2";
                        $message_queue2[] = "tbody!?!";
//                                    //T1 R1
                        $message_queue2[] = "tr!?!width!:!'100%'";
//                                        //TABLE 1 TD 1
                        $message_queue2[] = "td!?!class!:!'redisp-mark blank'!,!id!:!'firstTd'";
//                                            //TABLE 2
                        $message_queue2[] = "table!?!";
                        $message_queue2[] = "tbody!?!";
                        $message_queue2[] = "tr!?!";
                        $message_queue2[] = "td!?!";
////                                //                        
                        $message_queue2[] = "link!?!href!:!'http://::1&startdate=-1&today=Wed:04 Jan:01 2017 02:36:28'";
                        $current_view = "view"; //USER VIEW PROCESS
                        $platform = PLATFORM;
                        $image_file = "arrow_left.png";
                        $alt = "Previous Cycle";
                        $image_src = USER_VIEW_DEFAULT_THEME_IMAGES_DIR."/$current_view/$platform/$image_file";
                        $style = "width:150%;";
                        $image = new Image();
                        $message = "src!:!'$image_src'!,!alt!:!$alt!,!style!:!$style";
                        $message_queue2[] = "image!?!$message";
                        $message_queue2[] = "/link!?!";
                                //                        
                        $message_queue2[] = "/td!?!";
                        $message_queue2[] = "td!?!";
                                ////                        //<button onclick="openMenu()" name="btnMenu" id="btnMenu" style="background-color:transparent; border-color:transparent;">
                        $message_queue2[] = "button!?!onclick!:!openMenu()!,!name!:!btnMenu!,!id!:!btnMenu!,!style!:!'background-color:transparent; border-color:transparent;'";
                        //<img src="./images/menu2_26x22.png">

                        $current_view = "view"; //USER VIEW PROCESS
                        $platform = PLATFORM;
                        $image_file = "menu2.png";
                        $alt = "Previous Cycle";
                        $image_src = USER_VIEW_DEFAULT_THEME_IMAGES_DIR."/$current_view/$platform/$image_file";
                        $style = "width:150%;";
                        $image = new Image();
                        $message = "src!:!'$image_src'!,!alt!:!$alt!,!style!:!$style";
                        $message_queue2[] = "image!?!$message";
                        $message_queue2[] = "/button!?!";

                        $message_queue2[] = "/td!?!";      
                        $message_queue2[] = "td!?!";
//                        
                        $message_queue2[] = "link!?!href!:!'http://::1&amp;startdate=1&amp;today=Wed:04 Jan:01 2017 02:36:28'";
                        $current_view = "view"; //USER VIEW PROCESS
                        $platform = PLATFORM;
                        $image_file = "arrow_right.png";
                        $alt = "Future Cycle";
                        $image_src = USER_VIEW_DEFAULT_THEME_IMAGES_DIR."/$current_view/$platform/$image_file";
                        $style = "width:150%;";
                        $image = new Image();
                        $message = "src!:!'$image_src'!,!alt!:!$alt!,!style!:!$style";
                        $message_queue2[] = "image!?!$message";
                        $message_queue2[] = "/link!?!";
                        $message_queue2[] = "/td!?!";
                        $message_queue2[] = "/tr!?!";
                        $message_queue2[] = "/tbody!?!";
                        $message_queue2[] = "/table!?!";
//                //                       //END TABLE 2
                        $message_queue2[] = "/td!?!";
//                                        //T1 TD2
                        $message_queue2[] = "td!?!style!:!'width: 100%;'";
//                                        //T1 DIV 1
//                //                        //<div style="" id="divHeader">
//                                            $message_queue2[] = "div!?!style!:!'overflow:hidden;width:100%;position:relative'!,!id!:!divHeader'";
//                    //                        
//                                                //<table cellspacing="0" cellpadding="0" border="1" width="100%">
////                                                TABLE 3
                        $message_queue2[] = "table!?!cellspacing!:!0!,!cellpadding!:!0!,!border!:!1!,!width!:!100%";
                        $message_queue2[] = "colgroup!?!";
////                        //width="11%"
                        $message_queue2[] = "col!?!width!:!11%";
                        $message_queue2[] = "col!?!width!:!11%";
                        $message_queue2[] = "col!?!width!:!11%";
                        $message_queue2[] = "col!?!width!:!11%";
                        $message_queue2[] = "col!?!width!:!11%";
                        $message_queue2[] = "col!?!width!:!11%";
                        $message_queue2[] = "col!?!width!:!11%";
                        $message_queue2[] = "col!?!width!:!12.5%";
                        $message_queue2[] = "/colgroup!?!";
////                            //                        
                        $message_queue2[] = "tbody!?!width!:!100%";
                        $message_queue2[] = "tr!?!width!:!100%";
////                                //                        
                                //                        //PERIODS
                                                        
                        $data = new Data("db");
                        //$q = "count:user_id:schoollms_schema_userdata_access_profile";

                        $q = "SELECT l.* FROM schoollms_schema_userdata_school_timetable_period_labels l"
                            . " JOIN schoollms_schema_userdata_school_timetable_period p ON p.period_label_id = l.period_label_id and l.school_id = p.school_id"
                            . " WHERE l.school_id = ? AND week_day_id = 1"
                            . " ORDER BY UNIX_TIMESTAMP(concat('2016-01-01', ' ', period_start)) ASC";

                        $data->prepareDataDatabaseQuery($q);

                        $q_data = array (1);

                        $data->db_query->execute($q_data);

                        while ($row = $data->db_query->fetch())
                        {
                            //echo "PID: ".$row['period_label_id']." PLABEL".$row['period_label']. "<br>";
                            $period_label = $row['period_label'];
                            $message_queue2[] = "td!?!class!:!'redips-mark dark'";
                //                        $message_queue2[] = "div!?!class!:!tableHeader";
                            $message_queue2[] = "paragraph!?!style!:!'font: bold 12px/30px;'!,!text!:!<b>$period_label</b>";
                            $message_queue2[] = "/paragraph!?!";
                //                        $message_queue2[] = "/div!?!";
                            $message_queue2[] = "/td!?!";
                        }
                              
                        $message_queue2[] = "/td!?!";
                        $message_queue2[] = "/tr!?!";
                        $message_queue2[] = "/tbody!?!";
                        $message_queue2[] = "/table!?!";
//
//                                            $message_queue2[] = "/div!?!";
                        $message_queue2[] = "/td!?!";
                        $message_queue2[] = "/tr!?!";
//        //                        
//                                    //T1 R2
                        $message_queue2[] = "tr!?!";
                        $message_queue2[] = "td!?!valign!:!top";
                        $message_queue2[] = "div!?!style!:!'overflow: hidden;height:500px;position:relative'!,!id!:!firstcol";
                        $message_queue2[] = "table!?!cellspacing!:!0!,!cellpadding!:!0!,!border!:!1!,!width!:!100%";
                        $message_queue2[] = "colgroup!?!";
                        $message_queue2[] = "col!?!width!:!6.25%";
                        $message_queue2[] = "/colgroup!?!";
                        $message_queue2[] = "tbody!?!";

                        $today = date('D:d M:m Y H:i:s');
                        $school_id = 1;
                        $message = "$today!~!$school_id";
                        
                        $days = timetable_days($message);
                        //PRINT_DAYS
                        $slots = array ();
                        foreach ($days as $key=>$day) {
        
                            $timetable_day = $day['timetable_day'];
                            $timetable_day_date = $day['timetable_day_date'];
                            $tokens = explode(" ", $timetable_day_date);

                            $year = $tokens[2];
                            $month_items = explode(":", $tokens[1]);
                            $day_items = explode(":", $tokens[0]);
                            $clock_items = explode(":", $tokens[3]);
                        
                            $day_string = "<b>Day $timetable_day</b><br>$day_items[0]<br>$day_items[1]-$month_items[0]-$year";
                            
                            $message_queue2[] = "tr!?!height!:!75px";    
                            $message_queue2[] = "td!?!class!:!'mark dark'";
                            $message_queue2[] = "div!?!class!:!tableFirstCol";
                            $message_queue2[] = "paragraph!?!style!:!''!,!text!:!$day_string ";
                            $message_queue2[] = "/paragraph!?!";
                            $message_queue2[] = "/div!?!";
                            $message_queue2[] = "/td!?!";
                            $message_queue2[] = "/tr!?!";
                            
                            $slot_key = $key+1;
                            $time_table_id = 802;
                            $user_id = 1500;
                            $user_type = 2;
                            $year_id = 4;
                            $school_id = 1;
                            $parent_id = null;
                            $message = "$day_string!~!$slot_key!~!$time_table_id!~!$user_type!~!$user_id!~!$year_id!~!$school_id!~!$parent_id";
                            $slots[$key] = timetable_get_period_slot_data($message);
                        }

                        $message_queue2[] = "/tbody!?!";
                        $message_queue2[] = "/table!?!";
//
//                                                $message_queue2[] = "/div!?!";
                        $message_queue2[] = "/td!?!";
//                //                        
//                      TIMETABLE SLOTS

                        //;

                        $message_queue2[] = "td!?!valign!:!top";
                        $message_queue2[] = "div!?!onscroll!:!fnScroll()!,!style!:!'overflow:scroll;width:100%;height:500px;position:relative'!,!id!:!table_div";
//                    //                        
                        $message_queue2[] = "table!?!cellspacing!:!0!,!cellpadding!:!0!,!border!:!1!,!width!:!100%";
                        $message_queue2[] = "colgroup!?!";
    ////                        //width="11%"
                        $message_queue2[] = "col!?!width!:!12.5%";
                        $message_queue2[] = "col!?!width!:!12.5%";
                        $message_queue2[] = "col!?!width!:!12.5%";
                        $message_queue2[] = "col!?!width!:!12.5%";
                        $message_queue2[] = "col!?!width!:!12.5%";
                        $message_queue2[] = "col!?!width!:!12.5%";
                        $message_queue2[] = "col!?!width!:!12.5%";
                        $message_queue2[] = "col!?!width!:!12.5%";
                        $message_queue2[] = "/colgroup!?!";
//                        
                        $message_queue2[] = "tbody!?!";
        
                        
                        foreach($slots as $key=>$slot_data){
                            
                            foreach ($slot_data as $index => $slot_item) {
                                //echo "INDEX $index SLOT ITEM $slot_item <br>";
                                $message_queue2[] = $slot_item;
                            }
                            //exit;
                        }


                        $message_queue2[] = "/tbody!?!";
                        $message_queue2[] = "/table!?!";
                        $message_queue2[] = "/div!?!";
                                                            //$message_queue2[] = "//table!?!";
                        $message_queue2[] = "/td!?!";
                        $message_queue2[] = "/tr!?!";
                        $message_queue2[] = "/tbody!?!";
                        $message_queue2[] = "/table!?!";
//                        $message_queue2[] = "/div!?!";
                        
                        $close_message_tokens = array ();
                        $open_message_tokens = array ();
                        $temp_view = new View();
                        
                        $timetable_message = "";
                        $temp_message_queue2 = $message_queue2;
                        foreach ($message_queue2 as $key => $message) {
                            $msg_tokens = explode("!?!", $message); 
                            if (strpos($msg_tokens[0], "/") !== FALSE){
                                $temp_message = $temp_view->closeViewItem($msg_tokens[0]);
                                $user_timetable->setDIVItems($temp_message);                                   
                            } else {
                                $temp_message = $temp_view->openViewItem($message);
                                $user_timetable->setDIVItems($temp_message);                                
                            }
                        }

//                        echo "PARAGRAPH <br>".$user_timetable->items;
                        $user_timetable->setDIV();
//                        echo $user_timetable->getDIV();
//                        exit;
                        $timetable_div->setDIVItems($user_timetable->getDIV());
                        $user_timetable->clearDIV();
                        $timetable_div->setDIV();
                        //echo $timetable_div->getDIV();
                        //exit;
                        $div->setDIVItems($timetable_div->getDIV());
                        $timetable_div->clearDIV();
                        break;

                    case "reports":
                        $div->setDIVItems("Reports");
                        $timetable_div = new DIV();
                        //<div id="timetable" name="timetable">
                        $timetable_message = "id!:!report_timetable!,!name!:!report_timetable"; 
                        $timetable_div->setDIVSettings($timetable_message);
                        $timetable_div->setDIV();
                        $div->setDIVItems($timetable_div->getDIV());
                        $timetable_div->clearDIV();
                        break;

                    default:
                        break;
                }

                $div->setDIV();
                //echo "TAB ".$div->getDIV()."<br>";
                $tabs->setTabItems($div->getDIV());
                $div->clearDIV();
            }

            break;
        
        case 'install':
            $message_queue = array ();
            //<div class="tabs-selected" title="View/Modify Time Table" style="padding:10px">
            //<div id="timetabletab" title="Reports" style="padding:10px">
            $message_queue["step1"] = "class!:!'tabs-selected'!,!title!:!'Step 1 - Pre-Requisites Installation'!,!style!:!'padding:10px'";
            $message_queue["step2"] = "class!:!'timetabletab'!,!title!:!'Step 2 - Application Installation'!,!style!:!'padding:10px'";
            $message_queue["step3"] = "class!:!'timetabletab'!,!title!:!'Step 3 - Application Configuration'!,!style!:!'padding:10px'";

            foreach ($message_queue as $key => $message) {
                $div = new DIV();
                //echo "user_view_body_content_tabs MSG: $message <br>";
                $div->setDIVSettings($message);
                
                switch ($key) {
                    case "step1":
                        $p = new Paragraph();
                        $message = "style!:!'text-align: center;font-size: 200%;'!,!text!:!The following applications must be installed completely in order to proceed with the installation of SchoolLMS";
                        $p->setParagraphSettings($message);
                        $p->setParagraph();
                        //echo "user_view_body_footer MSG : ".$p->getParagraph();
                        $div->setDIVItems($break->addNewLine());
                        $div->setDIVItems($p->getParagraph());
                        $p->clearParagraph();
                        
                        $div->setDIVItems($break->addNewLine());
    
                        $button = new Button();
                        
                        //id="" class="primary-btn" name="btnImstall" type="button
                        $message = "id!:!'btnImstall'!,!class!:!primary-btn!,!name!:!btnImstall!,!type!:!button";
                        $button->setButtonOptions($message);
                        
                        $message = "style!:!'text-align: center;font-size: 150%;'!,!text!:!Install";
                        $p->setParagraphSettings($message);
                        $p->setParagraph();
                        $button->setButtonItems($p->getParagraph());
                        $button->setButton();
                        $p->clearParagraph();
                        
                        $table = new Table();
                        $message = "style!:!'border: 1px solid black;'";
                        $table->setTableOptions($message);
                        //$table->setTableItems($table->openTable($message));
                        $table->setTableItems($table->openTableTR());
                        $table->setTableItems($table->openTableTD());
                        
                        $message = "style!:!'text-align: center;font-size: 150%;'!,!text!:!App Logo";
                        $p->setParagraphSettings($message);
                        $p->setParagraph();
                        $table->setTableItems($table->setTableTDItems($p->getParagraph()));
                        $p->clearParagraph();
                        
                        $table->setTableItems($table->closeTableTD());
                        $table->clearTableTD();
                        $table->setTableItems($table->openTableTD());
                        
                        $message = "style!:!'text-align: center;font-size: 150%;'!,!text!:!App Description";
                        $p->setParagraphSettings($message);
                        $p->setParagraph();
                        $table->setTableItems($table->setTableTDItems($p->getParagraph()));
                        $p->clearParagraph();
                        
                        $table->setTableItems($table->closeTableTD());
                        $table->clearTableTD();
                        $table->setTableItems($table->closeTableTR());
                        $table->setTableItems($table->openTableTR());
                        $table->setTableItems($table->openTableTD());
                        $current_view = "view"; //USER VIEW PROCESS
                        
                        $platform = PLATFORM;
                        $image_file = "gnurootdebian_forandroid.png";
                        $alt = "GNURoot Debian";
                        $image_src = USER_VIEW_DEFAULT_THEME_IMAGES_DIR."/$current_view/$platform/$image_file";
                        $style = "display:block;margin:auto;width:36%;";
                        $image = new Image();
                        $message = "src!:!$image_src!,!alt!:!$alt!,!style!:!$style";
                        $image->setImage($message);
                        $table->setTableItems($table->setTableTDItems($image->getImage()));
                        $table->setTableItems($table->closeTableTD());
                        $table->clearTableTD();
                        $table->setTableItems($table->openTableTD());
                        $table->setTableItems($table->setTableTDItems("GNURoot Debian provides a method for you to install and use Debian and its associated applications/packages alongside Android. This does NOT require root. A regular uninstall fully cleans up after this application. This is expandable and you will be able to install your own applciations/packages into it.".$break->addNewLine().$button->getButton()));
                        $table->setTableItems($table->closeTableTD());
                        $table->clearTableTD();
                        $table->setTableItems($table->closeTableTR());
//                        $message_queue = array ();
//                        //TD ITEMS
//                        $message_queue[] = ;
//                        $message_queue[] = "";//<?php echo $teachertimetable_year_id; 
//                        $message_queue[] = "Grade";
//                        $message_queue[] = " ";//<select name='teachertimetable_grade_id' id='teachertimetable_grade_id'></select>
//                        $message_queue[] = "Timetable";
//                        $message_queue[] = " ";//<select name='timetable_id' id='timetable_id'>  </select>
//                        $message_queue[] = "Class List";
//                        $message_queue[] = " ";//<select name='class_list' id='class_list' style="width:450px;">  </select>

//                        foreach ($message_queue as $key => $message) {
//                            $table->setTableTDItems($message);
//                            $table->setTableTD();
//                            $table->setTableTRItems($table->getTableTD());
//                            $table->clearTableTD();
//                        }
//
//                        $table->setTableTR();
//                        $table->setTableItems($table->getTableTR());
                        $table->setTable();
                        
                        $div->setDIVItems($table->getTable());
                        break;
                    
                    case "step2":
                        $p = new Paragraph();
                        $message = "style!:!'text-align: center;font-size: 200%;'!,!text!:!This step entails the installation of the application installer";
                        $p->setParagraphSettings($message);
                        $p->setParagraph();
                        //echo "user_view_body_footer MSG : ".$p->getParagraph();
                        $div->setDIVItems($break->addNewLine());
                        $div->setDIVItems($p->getParagraph());
                        $p->clearParagraph();
                        break;
                    
                    case "step3":
                        $p = new Paragraph();
                        $message = "style!:!'text-align: center;font-size: 200%;'!,!text!:!In order to start the application - the following must be configured";
                        $p->setParagraphSettings($message);
                        $p->setParagraph();
                        //echo "user_view_body_footer MSG : ".$p->getParagraph();
                        $div->setDIVItems($break->addNewLine());
                        $div->setDIVItems($p->getParagraph());
                        $p->clearParagraph();
                        break;
                    
                    default :
                        break;
                    
                }
                
                $div->setDIV();
                //echo "TAB ".$div->getDIV()."<br>";
                $tabs->setTabItems($div->getDIV());
                $div->clearDIV();
            }
                
            break;

        default:
            
            break;
    }
    
    
    $tabs->setTabs();
    
    //echo "TABS ".$tabs->getTabs()."<br>";
    
    //exit;
    return $tabs->getTabs();
}

function user_view_body_header(){
    
    $header = new Header();
    //<div class="header" style="z-index: 100"><center>
    $message = "header_class!:!class='header'!,!header_style!:!style='z-index: 100;'";
    $header->setHeader($message);
    
    //Timetable Header Image
    //DEPENDING ON USER view, platform GET src and style
    $view = "view";
    $platform = PLATFORM;
    $image_file = "schoollmslogo.png";
    $alt = "SchoolLMS";
    $image_src = USER_VIEW_DEFAULT_THEME_IMAGES_DIR."/$view/$platform/$image_file";
    $style = "display:block;margin:auto;width:12%;";
    $image = new Image();
    $message = "src!:!$image_src!,!alt!:!$alt!,!style!:!$style";
    $image->setImage($message);
    
    $message = "header!:!".$image->getImage();
    $header->setHeader($message);
    
    return $header->getHeader();
}

function user_view_body_menu(){

    $menu = new Menu();
    
    //MENU SETTINGS
    //<div id='mm' class='easyui-menu' data-options='onClick:menuHandler' style='width:120px;'>
    $message = "id!:!'mm'!,!class!:!'easyui-menu'!,!data-options!:!'onClick:menuHandler'!,!style!:!'width:120px;'";
    $menu->setMenuSettings($message);
    
    //MENU OPTIONS
    //Depending on USER profile get user menu options
    //Eg say USER is teach; the following will apply;
    /*
     * <div data-options="name:'lessonplan'">Lesson Plan</div>
    <div data-options="name:'publishnotes'">Publish Notes</div>
    <div data-options="name:'publishlesson',iconCls:'icon-save'">Publish Lesson</div>
    <div data-options="name:'classlist',iconCls:'icon-print'">Class List</div>
    <div data-options="name:'blocktablets'">Block Tablets</div>
    <div data-options="name:'broadcastlesson'">Broadcast Lesson</div>
     */
    $message_queue = array ();
    $message_queue[] = "data-options!:!name:'lessonplan'!,!title!:!Lesson Plan";
    $message_queue[] = "data-options!:!name:'publishlesson',iconCls:'icon-save'!,!title!:!Publish Lesson";
    $message_queue[] = "data-options!:!name:'publishnotes'!,!title!:!Publish Notes";
    $message_queue[] = "data-options!:!name:'classlist',iconCls:'icon-print'!,!title!:!Class List";
    $message_queue[] = "data-options!:!name:'blocktablets'!,!title!:!Block Tablets";
    $message_queue[] = "data-options!:!name:'broadcastlesson'!,!title!:!Broadcast Lesson";
    
    foreach ($message_queue as $key => $message) {
        //echo "<br>MSG: $message <br>";
        $menu->setMenuOptions($message);
        //echo "MENU OPTION: ".$menu->menu_options;
    }
 
    $menu->setMenu();
    
    //echo "<br>MENU: ".$menu->getMenu();
    return $menu->getMenu();
}

function user_view_head(){
    
    $head = new Head();
    $head->setHead('icon_cache', user_view_head_icon());
    $head->setHead('title_cache', user_view_head_title());
    $head->setHead('meta_cache', user_view_head_meta());
    $head->setHead('stylesheet_cache', user_view_head_stylesheet());
    $head->setHead('script_cache', user_view_head_script());
    
    $head->setHead('head', $head->getHead('icon_cache')." ".$head->getHead('title_cache')." ".$head->getHead('meta_cache')." ".$head->getHead('stylesheet_cache')." ".$head->getHead('script_cache'));
    
    return $head->getHead();
        
}

function user_view_head_icon(){
    
    $icon_image = "schoollmslogo.ico";
    $icon_platform = PLATFORM;
    $icon_theme_dir = USER_VIEW_DEFAULT_THEME_IMAGES_DIR."/icon";
    $icon_rel = "shortcut icon";
    $icon_type = "image/x-icon";
    $message = "icon_image!:!$icon_image!,!icon_theme_dir!:!$icon_theme_dir!,!icon_platform!:!$icon_platform!,!icon_type!:!$icon_type!,!icon_rel!:!$icon_rel";

    $icon = new Icon($message);

    return $icon->getIcon();
}

function user_view_head_title(){
    
    $year = date('Y');
    
    //BASED ON PLATFORM AND USER PROFILE GET USER SYSTEM TITLE
     
    $message = "SchoolLMS &COPY; $year";

    $title = new Title($message);

    return  $title->getTitle();
}

function user_view_head_meta(){
    
    //META
    $message_queue = array ();
    $message_queue[] = "http-equiv!:!Content-Type!,!content!:!text/html; charset=utf-8";
    $message_queue[] = "name!:!viewport!,!content!:!width=device-width, initial-scale=1, maximum-scale=1";
    $message_queue[] = "name!:!keywords!,!content!:!SchoolLMS";

    $metadata = "";
    foreach ($message_queue as $key => $message) {
        if ($key == 0){
            $meta = new Meta($message);
        } else {
            $meta->setMeta($message);
        }
        $metadata .= $meta->getMeta($message);
    }
    
    return $metadata;
}

function user_view_head_stylesheet(){
    
    //STYLESHEETS
    $message = "view";

    $style = new DefaultThemeCSS($message);
    
    return $style->css_links;
}

function user_view_head_script(){
    
    //SCRIPTS
    //GET MODULE (IF ANY)
    $message = "view";

    $script = new DefaultThemeJS($message);
     
    return $script->js_links;
 
}

function user_view_table_close($msg_tokens, $close_message_tokens, $open_message_tokens){
    
    $close_count = count($close_message_tokens)-1;
    $count = $close_count;
    
    echo "<br><b>CLOSED ".$msg_tokens[0]."</b><br>";
    if (strpos($msg_tokens[0], "//")){
        $remove_token = trim($msg_tokens[0], "//");
    } else {
        $remove_token = trim($msg_tokens[0], "/");
    }
    //$temp_close_message_tokens = $close_message_tokens;
    while($close_message_tokens[$count] !== $remove_token){
        $count--;
    }
    unset($close_message_tokens[$count]);
    $close_message_tokens = array_merge($close_message_tokens);
    $count = $close_count;
    while($open_message_tokens[$count] !== $remove_token){
        $count--;
    }
    unset($open_message_tokens[$count]);
    $open_message_tokens = array_merge($open_message_tokens);
    
    $result = array ();
    $result[] = $close_message_tokens;
    $result[] = $open_message_tokens;
    
    echo "<br><b> user_view_table_close MSG: <br>";
    echo "CLOSE ARRAY <br>";
    print_r($close_message_tokens);
    echo "<br> OPEN ARRAY <br>";
    print_r($open_message_tokens);
    echo "</b>";
    
    return $result;
    
}

function user_view_table_find_close($msg_tokens, $close_message_tokens, $open_message_tokens, $find_message, $remove_count){
    
    $close_count = 0;
    $allow_table_items = array ('table', 'tbody', 'tr', 'td', 'colgroup', 'link', 'div', 'paragraph', 'button');
    $non_table_items = array ('link', 'div', 'paragraph', 'button');
    $table_items = array ('tr', 'td');
    $remove_token = "";
    //$find_message = "stop";
    $result = array ();
//    $open_message_tokens = $close_table->table_open_message_tokens;
//    $close_message_tokens = $close_table->table_close_message_tokens;
    //$msg_tokens = $close_table->table_msg_tokens;
        
    if (in_array($msg_tokens[0], $allow_table_items)){

        $close_count = count($close_message_tokens)-1;
        if ($close_count >= 0){
            //if ($close_count == 0){
            echo "NEW MSG TOKEN ".$msg_tokens[0]."<br>";
            echo "OLD CLOSE TOKEN ".$close_message_tokens[$close_count]."<br>";
            //echo "OLD OPEN TOKEN ".$open_message_tokens[$close_count-1]."<br>";
            if ($close_message_tokens[$close_count] !== $msg_tokens[0]){
                $close_message_tokens[] = $msg_tokens[0];
                $close_count = count($close_message_tokens)-1;
            } else {
                //$remove_token = "finding";
            }
            
        } else {
            $close_message_tokens[] = $msg_tokens[0];
            $close_count = count($close_message_tokens)-1;
            
        }
        $remove_count = $close_count-1;
        echo "NEW CLOSE TOKEN ".$close_message_tokens[$close_count]."<br>";
        if ($remove_count > 0){
            echo "NEW OPEN TOKEN ".$open_message_tokens[$remove_count]."<br>";
        }
        //$close_table->table_msg_tokens = $msg_tokens;
//        $close_table->table_close_message_tokens = $close_message_tokens;
        $open_count = count($open_message_tokens)-1;
        echo "<br> INITIATE PROCESSING $find_message REMOVE $remove_count";
        echo "<br> CLOSE $close_count OPEN $open_count <br>";
        echo "CLOSE ARRAY <br>";
        print_r($close_message_tokens);
        echo "<br> OPEN ARRAY <br>";
        print_r($open_message_tokens);
        if ($remove_count > 0){
            echo "<br>OPEN TEST ".$open_message_tokens[$remove_count]." MSG TOKEN ".$msg_tokens[0]."<br>";
        }
        
        
        if ($close_count == 0){
            //echo "<br> ECHO $close_count <br> CLOSE MSG ".$close_message_tokens[$close_count];
            $open_message_tokens[] = $msg_tokens[0];
//            $close_table->table_open_message_tokens = $open_message_tokens;
            //echo " <br> OPEN MSG ".$open_message_tokens[$close_count-1]."<br>";
             $find_message = "stop";
        } elseif ($close_message_tokens[$close_count] == $open_message_tokens[$remove_count]){
            $remove_token = $close_message_tokens[$close_count]; 
            
            echo "<br> CLOSE $remove_token = OPEN ".$open_message_tokens[$remove_count]."<br>";
            
            echo "BEFORE UNSET OPEN <br>";
            echo "<br> CLOSE ARRAY <br>";
            print_r($close_message_tokens);
            echo "<br> OPEN ARRAY <br>";
            print_r($open_message_tokens);
            unset($open_message_tokens[$remove_count]);
            $open_message_tokens = array_merge($open_message_tokens);

            echo "BEFORE UNSET CLOSE <br>";
            echo "<br> CLOSE ARRAY <br>";
            print_r($close_message_tokens);
            echo "<br> OPEN ARRAY <br>";
            print_r($open_message_tokens);
            unset($close_message_tokens[$close_count]);
            $close_message_tokens = array_merge($close_message_tokens); 
            //$open_message_tokens[] = $msg_tokens[0];
            $find_message = "close";
            
            echo "AFTER UNSET <br>";
            echo "<br> CLOSE ARRAY <br>";
            print_r($close_message_tokens);
            echo "<br> OPEN ARRAY <br>";
            print_r($open_message_tokens);
//            $close_table->table_close_message_tokens = $close_message_tokens;
            
            

        } elseif (in_array($open_message_tokens[$remove_count], $non_table_items) && in_array($msg_tokens[0], $table_items)) {
            
            $remove_token = $open_message_tokens[$remove_count];
     
            echo "<br> NON TABLE OPEN $remove_token AT $remove_count AND TABLE ".$msg_tokens[0];
            echo "<br> BEFORE OPEN UNSET FIND CLOSE ".count($close_message_tokens)." OPEN ".count($open_message_tokens);
            echo "<br> CLOSE ARRAY <br>";
            print_r($close_message_tokens);
            echo "<br> OPEN ARRAY <br>";
            print_r($open_message_tokens);
            unset($open_message_tokens[$remove_count]);
            $open_message_tokens = array_merge($open_message_tokens);
            
            echo "<br> BEFORE CLOSE UNSET FIND CLOSE ".count($close_message_tokens)." OPEN ".count($open_message_tokens);
            echo "<br> CLOSE ARRAY <br>";
            print_r($close_message_tokens);
            echo "<br> OPEN ARRAY <br>";
            print_r($open_message_tokens);
            $close_message_tokens[$remove_count] = $msg_tokens[0];
            unset($close_message_tokens[$close_count]);
            $close_message_tokens = array_merge($close_message_tokens);
            echo "<br> AFTER UNSET FIND CLOSE ".count($close_message_tokens)." OPEN ".count($open_message_tokens);
            echo "<br> CLOSE ARRAY <br>";
            print_r($close_message_tokens);
            echo "<br> OPEN ARRAY <br>";
            print_r($open_message_tokens);
            $find_message = "find";
              
            echo " <br> REMOVE COUNT $remove_count REMOVE TOKEN $remove_token<br>";
           
        } elseif (in_array($open_message_tokens[$remove_count], $non_table_items) && in_array($msg_tokens[0], $non_table_items)) {
            //$remove_count = $close_count-1;
            $remove_token = $open_message_tokens[$remove_count];
           
            unset($open_message_tokens[$remove_count]);
            $open_message_tokens = array_merge($open_message_tokens);
            $open_message_tokens[] = $msg_tokens[0];

            $find_message = "close";
        //} elseif ($msg_tokens[0] == "tr" && $open_message_tokens[$remove_count] == "td"){
        } else {
            //echo "<br> ECHO $close_count <br> CLOSE MSG ".$close_message_tokens[$close_count];
            $open_message_tokens[] = $msg_tokens[0];
            $find_message = "stop";
            //echo " <br> OPEN MSG ".$open_message_tokens[$close_count-1]."<br>";
        }
    } elseif($remove_count >= 0) {
        if (in_array($open_message_tokens[$remove_count],$table_items)){
            
        }
    } else {
        $find_message = "stop";
    }
    
    
    //if (empty($result)){
        $result[] = $close_message_tokens;
        $result[] = $open_message_tokens;
        $result[] = $remove_token;
        $result[] = $find_message;
        $result[] = $remove_count;
    //}
    
    return $result;
}

//TIMETABLE FUNCTIONS
function timetable_prepare_tracker_view($message=null){
    
     $data = new Data("db");
    //$message_tokens = explode("!~!", $message);
    
    $timetable_id = -1;
    $school_id = 1;
    
    $today = date('D:d M:m Y H:i:s');
    
    $q = "SELECT period_label_id FROM schoollms_schema_userdata_school_timetable_period_labels"
            . " WHERE school_id = ?";

    //global $data;
    
    $data->prepareDataDatabaseQuery($q);
//////
    $q_data = array (1);

    $data->db_query->execute($q_data);
////
    $num_periods = count($data->db_query->fetchAll());
//    
//    echo "NUM ROWS $num_periods <br>";
//    //$num_periods = $row["num_periods"];
//    
    $day_tokens = explode(" ", $today);
    
    $year = $day_tokens[2];
//    
//    
//    
    $q = "SELECT year_id FROM schoollms_schema_userdata_school_year WHERE year_label = ?";
    
    $q_data = array($year);
    
    $data->prepareDataDatabaseQuery($q);
    
    $data->db_query->execute($q_data);
    
    $year_id = $data->db_query->fetchColumn();
    
//    echo "YEAR $year YEARID $year_id <br>";
//    
    $q = "delete from schoollms_schema_userdata_school_timetable_view where timetabl_id = ?";
    
    $q_data = array ($timetable_id);
    
    $data->prepareDataDatabaseQuery($q);
    
    $data->db_query->execute($q_data);
    
    $today = date('D:d M:m Y H:i:s');
    
    $this_day = date('Y-m-d');
    //Get TimeDays From Today
    $school_id = 1;
    $message = "$today!~!$school_id";

    $q = "SELECT l.* FROM schoollms_schema_userdata_school_timetable_period_labels l"
        . " JOIN schoollms_schema_userdata_school_timetable_period p ON p.period_label_id = l.period_label_id and l.school_id = p.school_id"
        . " WHERE l.school_id = ? AND week_day_id = 1"
        . " ORDER BY UNIX_TIMESTAMP(concat('2016-01-01', ' ', period_start)) ASC";

    $data->prepareDataDatabaseQuery($q);

    $q_data = array (1);

    $period_labels = array ();
    $data->db_query->execute($q_data);

    while ($row = $data->db_query->fetch())
    {
        $period_labels [] = $row;
//        echo "PERIOD LABEL ID ".$row["period_label_id"]."<br>";
    }
    
    $message = "$today!~!$school_id";
    $days = timetable_days($message);
    
    $slots = array ();
    //exit;
    foreach ($days as $key=>$day) {

        $timetable_day = $day['timetable_day'];
        $timetable_day_date = $day['timetable_day_date'];
        $tokens = explode(" ", $timetable_day_date);

        $year = $tokens[2];
        $month_items = explode(":", $tokens[1]);
        $day_items = explode(":", $tokens[0]);
        $clock_items = explode(":", $tokens[3]);

           
        $count_periods = 1;
    
        //LOOP BY NUMBER OF PERIODS
    ////                        //width="11%"
        $temp_period_labels = $period_labels;
        
        //echo "So far, so good <br>";
        
//        print_r($period_labels);
        
//        exit;
        foreach ($temp_period_labels as $pindex=>$period_items){
////            //$message_queue2[] = "col!?!width!:!11%";
////            //$count_periods++;
////            
               $period_label_id = $period_items["period_label_id"];
               //$period_label_id 
////                $event = FALSE;
////                //echo "I GET HERE<br>";
////                if ($item[2] == 'Registration'){
////                    //CHECK IF THERE IS ANY EVENT FOR REGISTRATION ON THIS DAY
////                    $q = "SELECT * FROM schoollms_schema_userdata_events WHERE event_register = 'Y' AND event_date like '%$date_stamp%'";
////                    $result = sqlQuery($q);
////                    //echo count($result);
////                    if (count($result) > 0){
////                        
////                        $event = TRUE;
////                        $slot_details = "<table>";
////                        foreach ($result as $key => $value) {
////                            
////                            $eid = $value[0][0];
////                            $ehost = $value[0][3];
////                            $etitle = $value[0][4];
////                            $slot_details .= "<tr><td><span style='color: black; font-size: 8pt'><b>Event:</b></span><br><span style='color: black; font-size: 10pt'>$etitle  </span><br><span style='color: black; font-size: 8pt'><b>Host:</b></span><br><button type='submit' style='background-color:transparent; border-color:transparent;' id='btnRegister' name='btnRegister' onClick='eventRegister($eid)'><img src='./images/register_3.jpeg'></button></td></tr>";
////                        
////                            break;
////                        }
////                        $slot_details .= "</table>";
////                        //echo $slot_details;
////                    } else {
////                        continue;
////                    }
////                }
////                
////                if ($item[2] == 'Break'){
////                    
////                    continue;
////                }
////                
////                $subject_id = 14;
////                if (!$event){
////                    $sql = "SELECT * FROM user_action_log WHERE day_id = $timetable_day AND period_label_id = $period_label_id";
////
////                    $timetable_logs = sqlQuery($sql);
////
////                    $num_teachers_accessed = 0;
////                    $num_teachers_published = 0;
////                    $num_learners_accessed = 0;
////
////                    //echo "USER LOG $sql <br>";
////
////                    foreach ($timetable_logs as $key => $log) {
////
////                        $action_type = $log[0][1];
////                        $action_time = $log[0][2];
////                        $user_id = $log[0][3];
////                        $day_id = $log[0][4];
////                        $period_l_id = $log[0][5];
////                        $class_id = $log[0][6];
////                        $subject_id = $log[0][7];
////                        $lesson_date = $log[0][8];
////
////
////                        if (empty($user_id) || !isset($user_id)){
////                            //echo "USERID $user_id<br>";
////                            continue;
////                        }
////
////                        //echo "GOT TYPE $action_type TIME $action_time UID $user_id DAY $day_id PERIOD $period_l_id CLASS $class_id SUB $subject_id <br>";
////                        //GET USER SCHOOL ID
////                        $q = "SELECT * FROM schoollms_schema_userdata_access_profile WHERE user_id = $user_id";
////
////                        $user_school_data = sqlQuery($q);
////
////                        $school_id = 0;
////                        foreach($user_school_data as $key2 => $user_school_items){
////
////                            $school_id = $user_school_items[1];
////                            $user_type = $user_school_items[1];
////                            break;
////                        }
////
////                        $not_found = TRUE;
////                        if ($school_id !== 0){
////                            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_period WHERE school_id = $school_id AND week_day_id = $day_id AND period_label_id = $period_l_id";
////
////                            $period_data = sqlQuery($q);
////
////                            foreach ($period_data as $key2 => $period_items) {
////
////                                $action_time_tokens = explode(" ", $action_time);
////                                $act_time = $action_time_tokens[1];
////                                $period_start = $period_items[3];
////                                $period_end = $period_items[4];
////
////                                //echo "ACT TIME $act_time PS $period_start PE $period_end <br>";
////                                //IF TIME BETWEEN
////                                $date1 = strtotime("$action_time");
////                                $date2 = strtotime("$lesson_date $period_start");
////                                $date3 = strtotime("$lesson_date $period_end");
////                                if ($date1 > $date2 && $date1 < $date3){
////
////
////                                    switch ($action_type){
////
////                                        case 1://Teacher Publish Lesson
////                                            //$num_teachers_accessed = 0;
////                                            $num_teachers_published++;
////                                            //$num_learners_accessed = 0;
////                                            $not_found = FALSE;
////                                            break;
////
////                                        case 2://Teacher Access Lesson
////                                            $num_teachers_accessed++;
////                                            //$num_teachers_published++;
////                                            //$num_learners_accessed = 0;
////                                            $not_found = FALSE;
////                                            break;
////
////                                        case 3://Learner Access Lesson
////                                            //$num_teachers_accessed = 0;
////                                            //$num_teachers_published++;
////                                            $num_learners_accessed++;
////                                            $not_found = FALSE;    
////                                            break;
////
////                                        default:
////
////                                            break;
////                                    }
////                                }
////                            }
////                        }
////                    }
////
////                    if ($not_found){
////                        $subject_id = 6;
////                        $slot_details = "<b> 0% </b> STATS ";
////                    } else {
////                        $subject_id = 9;
////                        $slot_details = "<table><tr><td><b>#Published:</b> $num_teachers_published</td></tr>"
////                            . "<tr><td><b>#Taught:</b> $num_teachers_accessed </td></tr>"
////                            . "<tr><td><b>#Learned:</b> $num_learners_accessed</td></tr></table>";
////                    }
////                }
////                //echo "SLOT $slot_details <br />";
////                $slot_details = sqlEscapeString($slot_details);
////                
////                //echo "TT $timetable_id,D $timetable_day,P $period_id,R $room_id,S $subject_id,T $teacher_id,SUB $substitute_id <br>";
////				//echo "$slot_details <br/>";
////                //$slot_details = sqlEscapeString($slot_details);
////		//echo "AFTER ESCAPE $slot_details <br/>";
////
////                //$pos = "$row"."_$period_id"
////                $sql = "insert into schoollms_schema_userdata_school_timetable_view (timetabl_id, day_date, tbl_row, tbl_col, slot_code, slot_details) values ($timetable_id,'$date_stamp','$row','$period_label_id','s-$subject_id','$slot_details')";
////                //echo "SQL $sql <br />";
////                $result = sqlQuery($sql);
////                
////                //echo "RESULT $result <br>";
////            }
        }
//        
        //$row++;
    }
    
}

function timetable_view($message=null){
    
    global $data;
    
    if (is_null($message)){
        $timetable_type = "";
    } else {
        $timetable_type = $message;
    }
    //Timetable Load User Timetable DATA

    //echo "TIMETABLE VIEW $message <br>";
    
    switch ($timetable_type) {
        case 'guest-eltracker':

            //echo "I GET TRACKER <br>";
            //timetable_prepare_tracker_view($message);
            break;
        
        case 'teacher':
            //timetable_prepare_view($message);
            //echo "I GET HEARE TEACHER<br>";
            break;

        default:
            echo "I GET HEARE <br>";
            //exit;
            timetable_prepare_tracker_view($message);
            break;
    }
    
    //Timetable DRAW Generated USER timetable
    $user_timetable = new DIV();
    $message2 = "style!:!'margin-top: 51px; padding-top: 0px;'";
    $user_timetable->setDIVSettings($message2);
    //id="table2" style="width:100%; border-collapse: separate; border-spacing: 3px 3px;"
    $message2 = "id!:!table2!,!style!:!'width:100%; border-collapse: separate; border-spacing: 3px 3px;'";
    //$user_timetable->setTableOptions($message);                   
    //Get ROW messages 
    //Foreach ROW get COL messages
    //Foreach COL message get CELL message
    $message_queue2 = array ();
    //<table><tbody><tr><td><a href="http://::1&amp;startdate=-1&amp;today=Wed:04 Jan:01 2017 02:36:28"><img src="./images/arrow_left_22x22.png"></a>
    //DIV 1
    //<div style="margin-top: 95px; padding-top: 95px;">
//                        $message_queue[] = "div!?!style!:!'margin-top: 44px; padding-top: 1px;position: fixed; width:97%'";
//                        //TABLE 1
    $message_queue2[] = "table!?!$message2";
    $message_queue2[] = "tbody!?!";
//                                    //T1 R1
    $message_queue2[] = "tr!?!width!:!'100%'";
//                                        //TABLE 1 TD 1
    $message_queue2[] = "td!?!class!:!'redisp-mark blank'!,!id!:!'firstTd'";
//                                            //TABLE 2
    $message_queue2[] = "table!?!";
    $message_queue2[] = "tbody!?!";
    $message_queue2[] = "tr!?!";
    $message_queue2[] = "td!?!";
////                                //                        
    $message_queue2[] = "link!?!href!:!'http://::1&startdate=-1&today=Wed:04 Jan:01 2017 02:36:28'";
    $current_view = "view"; //USER VIEW PROCESS
    $platform = PLATFORM;
    $image_file = "arrow_left.png";
    $alt = "Previous Cycle";
    $image_src = USER_VIEW_DEFAULT_THEME_IMAGES_DIR."/$current_view/$platform/$image_file";
    $style = "width:150%;";
    $image = new Image();
    $message = "src!:!'$image_src'!,!alt!:!$alt!,!style!:!$style";
    $message_queue2[] = "image!?!$message";
    $message_queue2[] = "/link!?!";
            //                        
    $message_queue2[] = "/td!?!";
    $message_queue2[] = "td!?!";
            ////                        //<button onclick="openMenu()" name="btnMenu" id="btnMenu" style="background-color:transparent; border-color:transparent;">
    $message_queue2[] = "button!?!onclick!:!openMenu()!,!name!:!btnMenu!,!id!:!btnMenu!,!style!:!'background-color:transparent; border-color:transparent;'";
    //<img src="./images/menu2_26x22.png">

    $current_view = "view"; //USER VIEW PROCESS
    $platform = PLATFORM;
    $image_file = "menu2.png";
    $alt = "Previous Cycle";
    $image_src = USER_VIEW_DEFAULT_THEME_IMAGES_DIR."/$current_view/$platform/$image_file";
    $style = "width:150%;";
    $image = new Image();
    $message = "src!:!'$image_src'!,!alt!:!$alt!,!style!:!$style";
    $message_queue2[] = "image!?!$message";
    $message_queue2[] = "/button!?!";

    $message_queue2[] = "/td!?!";      
    $message_queue2[] = "td!?!";
//                        
    $message_queue2[] = "link!?!href!:!'http://::1&amp;startdate=1&amp;today=Wed:04 Jan:01 2017 02:36:28'";
    $current_view = "view"; //USER VIEW PROCESS
    $platform = PLATFORM;
    $image_file = "arrow_right.png";
    $alt = "Future Cycle";
    $image_src = USER_VIEW_DEFAULT_THEME_IMAGES_DIR."/$current_view/$platform/$image_file";
    $style = "width:150%;";
    $image = new Image();
    $message = "src!:!'$image_src'!,!alt!:!$alt!,!style!:!$style";
    $message_queue2[] = "image!?!$message";
    $message_queue2[] = "/link!?!";
    $message_queue2[] = "/td!?!";
    $message_queue2[] = "/tr!?!";
    $message_queue2[] = "/tbody!?!";
    $message_queue2[] = "/table!?!";
//                //                       //END TABLE 2
    $message_queue2[] = "/td!?!";
//                                        //T1 TD2
    $message_queue2[] = "td!?!style!:!'width: 100%;'";
//                                        //T1 DIV 1
//                //                        //<div style="" id="divHeader">
//                                            $message_queue2[] = "div!?!style!:!'overflow:hidden;width:100%;position:relative'!,!id!:!divHeader'";
//                    //                        
//                                                //<table cellspacing="0" cellpadding="0" border="1" width="100%">
////                                                TABLE 3
    $message_queue2[] = "table!?!cellspacing!:!0!,!cellpadding!:!0!,!border!:!1!,!width!:!100%";
    $message_queue2[] = "colgroup!?!";
    
    $data = new Data("db");
    //$q = "count:user_id:schoollms_schema_userdata_access_profile";

    $q = "SELECT COUNT(period_label_id) FROM schoollms_schema_userdata_school_timetable_period_labels "
            . "WHERE school_id ?";

    $data->prepareDataDatabaseQuery($q);

    $q_data = array (1);

    $num_periods = $data->db_query->execute($q_data);
    
    $num_periods = $data->db_query->fetchColumn();
    
    $count_periods = 1;
    
    //LOOP BY NUMBER OF PERIODS
////                        //width="11%"
    while ($count_periods < $num_periods){
        $message_queue2[] = "col!?!width!:!11%";
        $count_periods++;
    }
    $message_queue2[] = "col!?!width!:!12.5%";
    $message_queue2[] = "/colgroup!?!";
////                            //                        
    $message_queue2[] = "tbody!?!width!:!100%";
    $message_queue2[] = "tr!?!width!:!100%";
////                                //                        
            //                        //PERIODS

    $data = new Data("db");
    //$q = "count:user_id:schoollms_schema_userdata_access_profile";

    $q = "SELECT l.* FROM schoollms_schema_userdata_school_timetable_period_labels l"
        . " JOIN schoollms_schema_userdata_school_timetable_period p ON p.period_label_id = l.period_label_id and l.school_id = p.school_id"
        . " WHERE l.school_id = ? AND week_day_id = 1"
        . " ORDER BY UNIX_TIMESTAMP(concat('2016-01-01', ' ', period_start)) ASC";

    $data->prepareDataDatabaseQuery($q);

    $q_data = array (1);

    $data->db_query->execute($q_data);

    while ($row = $data->db_query->fetch())
    {
        //echo "PID: ".$row['period_label_id']." PLABEL".$row['period_label']. "<br>";
        $period_label = $row['period_label'];
        $message_queue2[] = "td!?!class!:!'redips-mark dark'";
//                        $message_queue2[] = "div!?!class!:!tableHeader";
        $message_queue2[] = "paragraph!?!style!:!'font: bold 12px/30px;'!,!text!:!<b>$period_label</b>";
        $message_queue2[] = "/paragraph!?!";
//                        $message_queue2[] = "/div!?!";
        $message_queue2[] = "/td!?!";
    }

    $message_queue2[] = "/td!?!";
    $message_queue2[] = "/tr!?!";
    $message_queue2[] = "/tbody!?!";
    $message_queue2[] = "/table!?!";
//
//                                            $message_queue2[] = "/div!?!";
    $message_queue2[] = "/td!?!";
    $message_queue2[] = "/tr!?!";
//        //                        
//                                    //T1 R2
    $message_queue2[] = "tr!?!";
    $message_queue2[] = "td!?!valign!:!top";
    $message_queue2[] = "div!?!style!:!'overflow: hidden;height:500px;position:relative'!,!id!:!firstcol";
    $message_queue2[] = "table!?!cellspacing!:!0!,!cellpadding!:!0!,!border!:!1!,!width!:!100%";
    $message_queue2[] = "colgroup!?!";
    $message_queue2[] = "col!?!width!:!6.25%";
    $message_queue2[] = "/colgroup!?!";
    $message_queue2[] = "tbody!?!";

    $today = date('D:d M:m Y H:i:s');
    $school_id = 1;
    $message = "$today!~!$school_id";

    $days = timetable_days($message);
    //PRINT_DAYS
    $slots = array ();
    foreach ($days as $key=>$day) {

        $timetable_day = $day['timetable_day'];
        $timetable_day_date = $day['timetable_day_date'];
        $tokens = explode(" ", $timetable_day_date);

        $year = $tokens[2];
        $month_items = explode(":", $tokens[1]);
        $day_items = explode(":", $tokens[0]);
        $clock_items = explode(":", $tokens[3]);

        $day_string = "<b>Day $timetable_day</b><br>$day_items[0]<br>$day_items[1]-$month_items[0]-$year";

        $message_queue2[] = "tr!?!height!:!75px";    
        $message_queue2[] = "td!?!class!:!'mark dark'";
        $message_queue2[] = "div!?!class!:!tableFirstCol";
        $message_queue2[] = "paragraph!?!style!:!''!,!text!:!$day_string ";
        $message_queue2[] = "/paragraph!?!";
        $message_queue2[] = "/div!?!";
        $message_queue2[] = "/td!?!";
        $message_queue2[] = "/tr!?!";

        switch ($timetable_type) {
            case 'guest-eltracker':

                
                break;
            
            case 'teacher':
                $slot_key = $key+1;
                $time_table_id = 802;
                $user_id = 1500;
                $user_type = 2;
                $year_id = 4;
                $school_id = 1;
                $parent_id = null;
                $message = "$day_string!~!$slot_key!~!$time_table_id!~!$user_type!~!$user_id!~!$year_id!~!$school_id!~!$parent_id";
                $slots[$key] = timetable_get_period_slot_data($message);
                
                break;

            default:
                $slot_key = $key+1;
                $time_table_id = 802;
                $user_id = 1500;
                $user_type = 2;
                $year_id = 4;
                $school_id = 1;
                $parent_id = null;
                $message = "$day_string!~!$slot_key!~!$time_table_id!~!$user_type!~!$user_id!~!$year_id!~!$school_id!~!$parent_id";
                $slots[$key] = timetable_get_period_slot_data($message);
                break;
        }
        
    }

    $message_queue2[] = "/tbody!?!";
    $message_queue2[] = "/table!?!";
//
//                                                $message_queue2[] = "/div!?!";
    $message_queue2[] = "/td!?!";
//                //                        
//                      TIMETABLE SLOTS

    $message_queue2[] = "td!?!valign!:!top";
    $message_queue2[] = "div!?!onscroll!:!fnScroll()!,!style!:!'overflow:scroll;width:100%;height:500px;position:relative'!,!id!:!table_div";
//                    //                        
    $message_queue2[] = "table!?!cellspacing!:!0!,!cellpadding!:!0!,!border!:!1!,!width!:!100%";
    $message_queue2[] = "colgroup!?!";
    //LOOP BY NUMBER OF PERIODS
////                        //width="11%"
    $count_periods = 1;
    while ($count_periods <= $num_periods){
        $message_queue2[] = "col!?!width!:!12.5%";
        $count_periods++;
    }
    
    $message_queue2[] = "/colgroup!?!";
//                        
    $message_queue2[] = "tbody!?!";


    foreach($slots as $key=>$slot_data){

        foreach ($slot_data as $index => $slot_item) {
            //echo "INDEX $index SLOT ITEM $slot_item <br>";
            $message_queue2[] = $slot_item;
        }
        //exit;
    }


    $message_queue2[] = "/tbody!?!";
    $message_queue2[] = "/table!?!";
    $message_queue2[] = "/div!?!";
                                        //$message_queue2[] = "//table!?!";
    $message_queue2[] = "/td!?!";
    $message_queue2[] = "/tr!?!";
    $message_queue2[] = "/tbody!?!";
    $message_queue2[] = "/table!?!";
//                        $message_queue2[] = "/div!?!";

    $close_message_tokens = array ();
    $open_message_tokens = array ();
    $temp_view = new View();

    $timetable_message = "";
    $temp_message_queue2 = $message_queue2;
    foreach ($message_queue2 as $key => $message) {
        $msg_tokens = explode("!?!", $message); 
        if (strpos($msg_tokens[0], "/") !== FALSE){
            $temp_message = $temp_view->closeViewItem($msg_tokens[0]);
            $user_timetable->setDIVItems($temp_message);                                   
        } else {
            $temp_message = $temp_view->openViewItem($message);
            $user_timetable->setDIVItems($temp_message);                                
        }
    }

//                        echo "PARAGRAPH <br>".$user_timetable->items;
    $user_timetable->setDIV();
//                        echo $user_timetable->getDIV();
//                        exit;
    return $user_timetable->getDIV();
  
}

function timetable_days($message){
    
    global $data;
    
    $message_tokens = explode("!~!", $message);
    $today = $message_tokens[0];
    $school_id = $message_tokens[1];
    
    //Get Today Items
    $today_items = explode(" ", $today);
    //echo "today Items : $today_items";
    $year = $today_items[2];
    $month_items = explode(":", $today_items[1]);
    $day_items = explode(":", $today_items[0]);
    $clock_items = explode(":", $today_items[3]);
    
    //Get Year Start Date
    $q = "SELECT start_time FROM schoollms_schema_userdata_school_year_calendar WHERE calendar_type = 1 AND year_id IN (SELECT year_id FROM schoollms_schema_userdata_school_year WHERE year_label = ?)";
                    
    //$data = new Data("db");
    $data->prepareDataDatabaseQuery($q);
    
    $q_data = array ($year);

    $data->db_query->execute($q_data);
    
    //$row = $data->db_query->fetchColumn();
    
    $start = $data->db_query->fetchColumn();//$row['start_time'];//"2017|01|02|00|00|00"
 
    //echo "START DATE ".$start."<br>";
    
    //exit;
    
    $year_start_date_items = explode("|", $start);
    
    //Fix Date Format to YYYY-MM-DD
    //Find Todays Timetable Day
    $today_token = "$year-$month_items[1]-$day_items[1]";
    $start_date_token = "$year_start_date_items[0]-$year_start_date_items[1]-$year_start_date_items[2]";
    
    //echo "<br> T $today_token S $start_date_token";
    //Count days between start date and today
    $message = "$start_date_token!~!$today_token";
    $num_days = timetable_get_schooldays($message);
    //$num_days = removeHolidays($num_days,)
    //Get School Days
    
    $q = "SELECT COUNT(*) as num_timetable_days FROM schoollms_schema_userdata_school_timetable_days WHERE school_id = ?";
    
    $data->prepareDataDatabaseQuery($q);

    $q_data = array ($school_id);
    
    $data->db_query->execute($q_data);
    
    $row = $data->db_query->fetch();
    
    $num_timetable_days = $row["num_timetable_days"];;
    
   // echo "NUM TABLE DAYS $num_timetable_days";
    $message = "$num_days!~!$num_timetable_days";
    $today_day = timetable_get_today_timetable_day($message);
    
    //echo "TODAY $today DAY $today_day <br>";
    
    //Get Days with Date  - From today to the last timetable day
    $message = "$today!~!$today_day!~!$num_timetable_days";
    return timetable_get_days($message);
    
}

function timetable_get_schooldays($message){
    $message_tokens = explode("!~!", $message);
    
    $start_date_token = $message_tokens[0]; 
    $today_token = $message_tokens[1];
    
    //Remove weekends and Holidays from $date_1 to $date_2
    $count_days = 1;
    $new_num_days = 0;
    $last_day = $start_date_token;
    
    //Get Num Days
    $message = "$start_date_token!~!$today_token!~!%a";
    $num_days = timetable_date_difference($message);
    
    //echo "NUM DAYS $num_days";
    
    //echo "<br> START DAY $last_day";
    //Weekends
    $weekends = array ("Sat", "Sun");
    
    while ($count_days <= $num_days){
        $message = "$last_day!~!1!~!0!~!0";
        $next_day =  timetable_add_date($message);
        $next_day_tokens = explode(" ", $next_day);
        
        //echo "<br> NEXT DAY $next_day";
        
        $year = $next_day_tokens[2];
        $month_items = explode(":", $next_day_tokens[1]);
        $day_items = explode(":", $next_day_tokens[0]);
        $clock_items = explode(":", $next_day_tokens[3]);
    
        //Check Weekends
        if (in_array($day_items[0], $weekends)){
            //Do Nothing
        } elseif (timetable_day_is_holiday($next_day)) {//Check Holidays
            //Do Nothing
        } else {
            $new_num_days++;
        }

        $next_day = "$year-$month_items[1]-$day_items[1]";
        $last_day = $next_day;
        $count_days++;
    }
    
    //echo "<br> NUM SCHOOL DAYS $new_num_days";
    //exit;
    return $new_num_days;
    
    
}


function timetable_day_is_holiday($message){

    global $data;
    
    $day = $message;
    
    $result = FALSE;
    $day_tokens = explode(" ", $day);
  
    $year = $day_tokens[2];
    $month_items = explode(":", $day_tokens[1]);
    $day_items = explode(":", $day_tokens[0]);
    $clock_items = explode(":", $day_tokens[3]);
    
    $day_test_token = "$year|$month_items[1]|$day_items[1]|00|00|00";
    
    //Get Holidays
    $q = "SELECT start_time FROM schoollms_schema_userdata_school_year_calendar"
            . " WHERE calendar_type = 6 AND year_id IN (SELECT year_id FROM schoollms_schema_userdata_school_year WHERE year_label = ?)";
    
    $data->prepareDataDatabaseQuery($q);

    $q_data = array ($year);
    
    $data->db_query->execute($q_data);
    
    while($row = $data->db_query->fetch()){
        
        $holiday = $row["start_time"];
        
        //echo "IF HOLIDAY $holiday = DAY TEST $day_test_token <br>";
        
        if (strcmp($holiday, $day_test_token) == 0){
            $result = TRUE;
            break;
        }
    }
        
    return $result;
}


function timetable_get_days($message){
     
    $message_tokens = explode("!~!", $message);
    $today = $message_tokens[0]; 
    $today_day = $message_tokens[1]; 
    $num_timetable_days = $message_tokens[2];
    
    //Weekends
    $weekends = array ("Sat", "Sun");
    
    $days = array ();
    $day_store = array ();
    $day_store['timetable_day'] = $today_day;
    $day_store['timetable_day_date'] = $today;
    array_push($days, $day_store);
    
    //Get Today Items
    $today_items = explode(" ", $today);
    
    $year = $today_items[2];
    $month_items = explode(":", $today_items[1]);
    $day_items = explode(":", $today_items[0]);
    $clock_items = explode(":", $today_items[3]);
    
    $today_token = "$year-$month_items[1]-$day_items[1]";
    $last_day = $today_token;
    
    $next_day_day = $today_day + 1;
    
    //echo "TODAY $today DAY $today_day <br>";
    $count_days = 1;
    while ($count_days <= $num_timetable_days){
        
        $message = "$last_day!~!1!~!0!~!0";
        $next_day =  timetable_add_date($message);
        $next_day_tokens = explode(" ", $next_day);
        
        $year = $next_day_tokens[2];
        $month_items = explode(":", $next_day_tokens[1]);
        $day_items = explode(":", $next_day_tokens[0]);
        $clock_items = explode(":", $next_day_tokens[3]);
    
        //Check Weekends
        if (in_array($day_items[0], $weekends)){
            //Do Nothing
        } elseif (timetable_day_is_holiday($next_day)) {//Check Holidays
            //Do Nothing
        } else {
            if ($next_day_day > $num_timetable_days){
                $next_day_day = 1;
            }
    
            //echo "DATE $next_day DAY $next_day_day COUNT $count_days <br>";
            
            $day_store['timetable_day'] = $next_day_day;
            $day_store['timetable_day_date'] = $next_day;
            array_push($days, $day_store);
            $next_day_day++;
            $count_days++;
        }
        
        
        $next_day = "$year-$month_items[1]-$day_items[1]";
        $last_day = $next_day;
        
    }
 
    //print_r($days);
    
    return $days;
}

function timetable_add_date($message) {
    $message_tokens = explode("!~!", $message);
    $givendate = $message_tokens[0];
    $day = $message_tokens[1];
    $mth = $message_tokens[2];
    $yr = $message_tokens[3];
    
    
    $cd = strtotime($givendate);
    $newdate = date('D:d M:m Y H:i:s', mktime(date('h',$cd),
    date('i',$cd), date('s',$cd), date('m',$cd)+$mth,
    date('d',$cd)+$day, date('Y',$cd)+$yr));
    return $newdate;
}

function timetable_get_today_timetable_day($message){
    
    $message_token = explode("!~!", $message);
    $num_days = $message_token[0];
    $num_timetable_days = $message_token[1];
    
    if ($num_days > $num_timetable_days){
        $today_day = $num_days - $num_timetable_days;
        while ($today_day > $num_timetable_days){
            $today_day = $today_day - $num_timetable_days;
        }
    } else {
        $today_day = $num_timetable_days - $num_days;
    }
    
    if ($today_day == 0){
        $today_day = 1;
    }
    
    return $today_day;
}

function timetable_date_difference($message)
{
    $message_tokens = explode("!~!", $message);
    $date_1 = $message_tokens[0]; 
    $date_2 = $message_tokens[1]; 
    $differenceFormat = $message_tokens[2];
    
    $datetime1 = date_create($date_1);
    $datetime2 = date_create($date_2);
    
    $interval = date_diff($datetime1, $datetime2);
    
    return $interval->format($differenceFormat);
    
}


function items($timetable_id, $day_id, $date_stamp, $period_label_id, $grade_id, $class_id, $room_id, $subject_id, $teacher_id, $substitute_id, $user_type, $user_id){
    
    //global $timetable_items;
    global $data;
  
    $message_tokens = explode("!~!", $message);
    $timetable_id = $message_token[0];
    $day_id = $message_token[1];
    $date_stamp = $message_token[2];
    $period_label_id = $message_token[3];
    $grade_id = $message_token[4]; 
    $class_id = $message_token[5]; 
    $room_id = $message_token[6]; 
    $subject_id = $message_token[7]; 
    $teacher_id = $message_token[8]; 
    $substitute_id = $message_token[9]; 
    $user_type = $message_token[10]; 
    $user_id = $message_token[11];;
    
    $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items_form";
    
	//echo "$sql;";
	$data->execSQL($sql);
    //$count = count($timetable_items);
    
    //echo "COUNT ITEMS $count <br>";
    //Get TimeTable Details
	$field = "";
	while($row = $data->getRow()){
    //foreach ($timetable_items as $items) {
        
        $field = $row->field;
        //$field_data_link = $items[0][8];
        $field_references = explode("#", $row->field_data_link);
        //echo "<br/>$row->field_data_link<br/>";        
        $tablename = $field_references[0];
        $select_field = $field_references[1];
        $display_field = $field_references[2];
       // echo "$field<br/>";
        switch ($field) {
            case 'timetabl_id':
                
                break;

            case 'day_id':


                break;
            
            case 'period_label_id':
            
                break;
            
            
            case 'room_id':
				
					
					$sql = "select $display_field from $tablename where $select_field = '$room_id'";
					//echo "<br/>$sql<br/>";
					$data1->execSQL($sql);
					if($row1 = $data1->getRow())
					{
						$room = $row1->$display_field;
					}
					/*$result = sqlQuery($sql);
					foreach ($result as $value) {
						$room = $value[0][0];
					}*/
					
					break;
				
           
             case 'class_id':
                $sql = "select $display_field from $tablename where $select_field = '$class_id'";
				//echo "<br/>$sql<br/>";
				//echo "<br/>$sql<br/>";
				$data1->execSQL($sql);
				if($row1 = $data1->getRow())
				{
					$class = $row1->$display_field;
				}
                /*$result = sqlQuery($sql);
                foreach ($result as $value) {
                    $class = $value[0][0];
                }*/
                break;
                
             case 'grade_id':
                $sql = "select $display_field from $tablename where $select_field = '$grade_id'";
				//echo "<br/>$sql<br/>";
				$data1->execSQL($sql);
				if($row1 = $data1->getRow())
				{
					$grade = $row1->$display_field;
				}
                /*$result = sqlQuery($sql);
                foreach ($result as $value) {
                    $grade = $value[0][0];
                }*/
                break;
                
            case 'subject_id':
                $sql = "select $display_field from $tablename where $select_field = '$subject_id'";
				//echo "<br/>$sql<br/>";
				$data1->execSQL($sql);
				if($row1 = $data1->getRow())
				{
					$subject = $row1->$display_field;
				}
                /*$result = sqlQuery($sql);
                foreach ($result as $value) {
                    $subject = $value[0][0];
                }*/

                break;
            
            case 'teacher_id':
                $sql = "select * from $tablename where $select_field = '$teacher_id'";
				//echo "<br/>$sql --- <br/>";
				$data1->execSQL($sql);
				if($row1 = $data1->getRow())
				{
					$teacher = "$row1->name $row1->surname";
				}
                /*$result = sqlQuery($sql);
                foreach ($result as $value) {
                    $name = $value[0][4];
                    $surname = $value[0][5];
                    $teacher = "$name $surname";
                    break;
                }*/
                

                //Get Teacher Details
                break;
            
            case 'substitude_id':
                switch ($user_type) {
                    case 1://STAFF
                    case 2://LEARN
                    case 3://PARENT
                    case 5://MANAGE
                    case 6://SUPPORT 
                        $sql = "select $display_field from $tablename where $select_field = '$substitute_id'";
						//echo "<br/>$sql<br/>";
						$data1->execSQL($sql);
						if($row1 = $data1->getRow())
						{
							$substitute = $row1->$display_field;
						}
                        /*$result = sqlQuery($sql);
                        foreach ($result as $value) {
                            $substitute = $value[0][0];
                        }*/
                        break;
                        
                    case 4://TEACHER
                        $sql = "SELECT class_label FROM schoollms_schema_userdata_school_classes WHERE class_id IN (SELECT class_id FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = $timetable_id AND year_id = $year_id AND day_id = $day_id AND period_label_id = $period_label_id AND teacher_id = $teacher_id)";
                       // echo "<br/>$sql<br/>";
						$data1->execSQL($sql);
						if($row1 = $data1->getRow())
						{
							$substitute = $row1->class_label;
						}
						/*$result = sqlQuery($sql);
                        foreach ($result as $value) {
                            $substitute = $value[0][0];
                        }*/
                        //echo "CLASS $substitute <br>";
                        break;
                }
                break;
            
            default:
                break;
        }
    }
	//echo "<br/>EXIT FIELD : $field <br/>";
    
    switch ($user_type) {
        case 2:
            
        case 4:
		//echo "From here <br/>";
            $links = get_timetable_slot_links($timetable_id, $date_stamp, $day_id, $period_label_id, $class_id, $user_type, $user_id);
            break;
        
        case 5:
            
        case 6:
            $links = "";
			//$links = get_timetable_slot_links($timetable_id, $date_stamp, $day_id, $period_label_id, $class_id, $user_type, $user_id);
            break;
        
        default:
            break;
    }
    $links = urlencode($links);
	if(!isset($substitute))
	{
		$substitute = $class;
	}
    //echo "<b>$subject</b><br>$teacher<br>ROOM $room --<br>$substitute<br>$links";
    return @"<b>$subject</b><br>$teacher<br>$room<br>$substitute <br>~ $links";
   
    
}

//get time table links
function get_timetable_slot_links($timetable_id, $date_stamp, $day_id, $period_label_id, $class_id, $user_type, $user_id){
    
    $links = "";
    //echo "$timetable_id, $date_stamp, $day_id, $period_label_id, $class_id, $user_type, $user_id <br/>";
    $today = date('D:d M:m Y H:i:s');
    
    $today_items = explode(" ", $today);
    
    $year = $today_items[2];
    $month_items = explode(":", $today_items[1]);
    $day_items = explode(":", $today_items[0]);
    $clock_items = explode(":", $today_items[3]);
    
    $today_token1 = "$day_items[1]-$month_items[0]-$year";
    
    $today_token2 = "$day_items[1]-$month_items[1]-$year";
   
     if($user_type == 4) { 
        $today_token2 = $date_stamp; 
     } 
    //echo "if ($date_stamp == $today_token2){<br>"; 
    //if (strcmp($date_stamp,$today_token2) == 0){ 
       $q = "SELECT lesson_url,lesson_title,subject_id FROM schoollms_schema_userdata_school_timetable_subject_lessons WHERE day_id = $day_id AND period_label_id = $period_label_id AND class_id = $class_id AND date_format(str_to_date(lesson_date,'%d-%b-%Y'),'%d-%m-%Y') = '$today_token2'";
    
    //echo "if ($date_stamp == $today_token2){<br>";
    
    //if (strcmp($date_stamp,$today_token2) == 0){
        
        
//        $q = "SELECT lesson_url,lesson_title FROM schoollms_schema_userdata_school_timetable_subject_lessons WHERE day_id = $day_id AND period_label_id = $period_label_id AND lesson_date = '$today_token1'";
		//alert($q);

        $result = sqlQuery($q);

        if (count($result) > 0){
            $links .= "<b><i> LESSON(S):</i></b> <br>";
            $lessons = array ();
            foreach ($result as $value) {
                $lesson_title = $value[0][1];
                $lesson_url = $value[0][0];
				$subject_id = $value[0][2];
                $lessons["$lesson_url"] = "$lesson_title-|!~#-$subject_id";
                //$teacher = "$name $surname";
            }

            //echo "LESSON TITLE $lesson_title URL $lesson_url <br>";
            //Get USER DETAILS
            $q = "SELECT name, surname FROM schoollms_schema_userdata_access_profile WHERE user_id = $user_id";

            $result = sqlQuery($q);

            foreach ($result as $items) {
                $name = $items[0][0];
                $surname = $items[0][1];
                break;
            }
			
			$ip = $_SERVER['SERVER_ADDR'];
			$port = $_SERVER['SERVER_PORT'];
			if($port != 80)
			{
				$ip = "$ip:$port";
			}
			$protocol = strtolower(explode("/",$_SERVER['SERVER_PROTOCOL'])[0]);
			

            switch ($user_type) {
                case 2:
                    $q = "SELECT timetable_label FROM schoollms_schema_userdata_school_timetable WHERE timetabl_id = $timetable_id";
                    $result = sqlQuery($q);

                    foreach ($result as $items) {
                        $timetable_label = $items[0][0];
                        //$surname = $items[0][1];
                        break;
                    }
                    
                    //if ($timetable_label !== "$surname $name"){
                        $username = $timetable_label;
                   // }
                        
                    $passwd = "learn123";
                    //$url = "http://127.0.0.1:8081/learn/local_timetable_schoollms_link.php";
                    //$url = "http://192.168.43.52/mhslms/learndev/local_timetable_schoollms_link.php";
                    $url = "$protocol://$ip/learn/local_timetable_schoollms_link.php";
					foreach ($lessons as $lesson_url => $lesson_title) {
						$lesson_title = explode("-|!~#-",$lesson_title);
                        //$pars = "action=open_link&q=$lesson_url&username=$username&passwd=$passwd";
                        $pars = "action=open_link&q=$lesson_url&username=$username&passwd=$passwd&date=$date_stamp&day=$day_id&period_label_id=$period_label_id&user_type=$user_type&user_id=$user_id&lesson_title=$lesson_title[0]";
                        $links .= "<a href='$url?$pars' target='_blank'> $lesson_title[0] </a> <br><br>";
                    }
                    

                    break;

                case 4:
                    $passwd = "teach123";
                    //$url = "http://127.0.0.1:8081/teach/local_timetable_schoollms_link.php";
                    //$url = "http://192.168.43.52/mhslms/teachdev/local_timetable_schoollms_link.php";
 		   $url = "$protocol://$ip/teach/local_timetable_schoollms_link.php";
                    $username="$name $surname";                    
                    foreach ($lessons as $lesson_url => $lesson_title) {
						$lesson_title = explode("-|!~#-",$lesson_title);
                        //$pars = "action=open_link&q=$lesson_url&username=$username&passwd=$passwd";
                        $pars = "action=open_link&q=$lesson_url&username=$username&passwd=$passwd&date=$date_stamp&day=$day_id&period_label_id=$period_label_id&user_type=$user_type&user_id=$user_id&lesson_title=$lesson_title[0]";
                        $links .= "<a href=\" javascript:openLink('$url?$pars','$user_id','$user_type','Access Lesson','$lesson_title[0],$period_label_id,$day_id,$date_stamp,$lesson_url,$class_id,$lesson_title[1]');\" > $lesson_title[0] </a> &nbsp;--&nbsp; <a href=\"javascript:removelesson('$lesson_title[0]','$period_label_id','$day_id','$date_stamp','$lesson_url','$class_id','$lesson_title[1]')\">Unpublish</a> <br><br>";
                    }
                    //$pars = "action=open_link&q=$lesson_url&username=$name $surname&passwd=$passwd";

                    break;
                default:
					break;
            }
            $links .= "<b><i> RESOURCE LIBRARY:</i> </b> <br> <a href='http://172.16.0.3/#content_Resource~~~Library' target='_blank'> TYB </a> <br><br>";
            return $links;
        } else {
            return $links;
        }
//    } else {
//        return "";
//    }
//    $contents = do_post_request($url,$pars);
//    //echo "RESPONSE $contents PARA $pars<br>\n";
//    $remote_response = json_decode($contents, TRUE);
    
}

//Prepare School Time Table View for user;
function timetable_prepare_view($message){
    //echo "Time table ID : $time_table_id <br/>";
    global $timetable_id;
    global $data; 
    
    $message = explode("!~!", $message);
    $user_id = $message_tokens[0]; 
    $time_table_id = $message_tokens[1];
    $user_type = $message_tokens[2];
    $year_id = $message_tokens[3];
    $school_id = $message_tokens[4];
    $parent_id = $message_tokens[5];
    
    //if ($year_id == null){
     $today = date('D:d M:m Y H:i:s');

    //echo "TODAY $today\n";
    $day_tokens = explode(" ", $today);

    //$q = "SELECT  FROM "
    $year = $day_tokens[2];

//    $q = "SELECT year_id FROM schoollms_schema_userdata_school_year WHERE year_label = ?";
//    $q_data = array ($year);
//    
//    $data->prepareDataDatabaseQuery($q);
//    
//    $data->db_query->execute($q_data);
//                        
//    $row = $data->db_query->fetch();
//
//    $year_id = $row["year_id"];
//           
//    //Get User Details For Table Retrieval
//    switch ($user_type){
//        
//        case 2:
//            $q = "SELECT timetabl_id FROM schoollms_schema_userdata_learner_timetable WHERE user_id = ? AND year_id = ?";
//            $q_data = array ($user_id, $year_id);
//            break;
//        
//        case 4:
//            $q = "SELECT timetabl_id FROM schoollms_schema_userdata_teacher_timetable WHERE user_id = ? AND year_id = ?";
//            $q_data = array ($user_id, $year_id);
//            break;
//        
//        case 5:
//        
//        case 6:
//            $q = "SELECT timetabl_id FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
//            $q_data = array ($time_table_id, $year_id);
//            break;
//    }
//    
//    //echo "<br/>Q $q <br/>";
//   
//    //Get USER TIMETABLE ID
//    $data->prepareDataDatabaseQuery($q);
//    
//    $data->db_query->execute($q_data);
//                        
//    //$num_rows = $data->db_query->fetch();
//    
//    $num_rows = count($data->db_query->fetchAll());
//    
//    //echo $num_rows;
//	
//    if ($num_rows > 0){
//        //foreach ($timetable_result as $items) {
//            $timetable_id = $data->db_query->fetchColumn();
//            $q = "SELECT * FROM schoollms_schema_userdata_school_timetable_items WHERE timetabl_id = ? AND year_id = ?";
//            $q_data = array ($timetable_id, $year_id);                
//            $data->prepareDataDatabaseQuery($q);
//            $data->db_query->execute($q_data);
//
//            $num_rows = count($data->db_query->fetchAll());
//            $message = "$user_id!~!$year_id!~!$timetable_id";
//            switch($user_type){
//                
//                case 2://CHECK IF LEARNER TIMETABLE EMPTY
//                    if ($num_rows == 0){
//                        $timetable_id = build_learner_timetable($message);
//                    } else {
//                        $timetable_id = update_learner_timetable($message);
//                    }
//                    
//                    break;
//                
//                case 4://CHECK IF TEACHER TIMETABLE EMPTY
//                    if ($num_rows == 0){
//                        $timetable_id = build_teacher_timetable($message);
//                    } else {
//                        $timetable_id = update_teacher_timetable($message);
//                    }
//                    break;
//            }
//    } else {
//        switch ($user_type){
//            case 2:
//                $message = "$user_id!~!$year_id!~!0";
//                $timetable_id = build_learner_timetable($message);
//                break;
//            
//            case 4:
//                $message = "$user_id!~!$year_id";
//                $timetable_id = build_teacher_timetable($message);
//                break;
//            
//            case 5:
//            
//            case 6:
//                $message = "$time_table_id!~!$year_id";
//                $timetable_id = build_class_timetable($message);
//                break;
//        }
//    }
	
    $timetable_id = $time_table_id;
    
    $q = "delete from schoollms_schema_userdata_school_timetable_view where timetabl_id = ?";
    
    $q_data = array ($timetable_id);
    
    $data->prepareDataDatabaseQuery($q);
    
    $data->db_query->execute($q_data);
    
    //Get TimeDays From Today
    $days = days($today, $school_id);
    
    //REMOVE PREVIOUS TIMETABLE LOAD IF FIRST DATE IS DIFFERENT TO TODAY
    
    //FOR EACH DAY LOAD USER TIMETABLE
    $row = 1;
    //echo "<hr/>";
	//var_dump($days);
	//echo "<hr/>";
    $sql = "select l.* 
		from schoollms_schema_userdata_school_timetable_period_labels l
		join schoollms_schema_userdata_school_timetable_period p on p.period_label_id = l.period_label_id and l.school_id = p.school_id
		where l.school_id = $school_id 
		and week_day_id = 1
		order by UNIX_TIMESTAMP(concat('2016-01-01',' ',period_start))  asc";
    //$period_labels = sqlQuery("select * from schoollms_schema_userdata_school_timetable_period_labels where school_id = $school_id order by period_label_id ASC");
    $period_labels = sqlQuery($sql);

    
    //echo "P SQL $sql <br>";
    
    //CHECK IF SCHOOL HAS REGISTRATION PERIOD
    $q = "select * from schoollms_schema_userdata_timetable_settings WHERE school_id = $school_id";
    $settings = sqlQuery($q);
     
    $has_registration = FALSE;
    foreach ($settings as $s_items){
      $settings_tokens = explode("|", $s_items[0][1]);
      $register_tokens = explode ("=", $settings_tokens[11]);
      if ($register_tokens[1] == 'Yes'){
        $has_registration = TRUE;
      }
      break;
    }
    
    foreach ($days as $day) {
        
        $timetable_day = $day['timetable_day'];
        $timetable_day_date = $day['timetable_day_date'];
        
        $tokens = explode(" ", $timetable_day_date);
        
        $year = $tokens[2];
        $month_items = explode(":", $tokens[1]);
        $day_items = explode(":", $tokens[0]);
        $clock_items = explode(":", $tokens[3]);
        
        $date_stamp = "$day_items[1]-$month_items[1]-$year";
        
        $temp_period_labels = $period_labels; 
        $col = 1;
        foreach ($temp_period_labels as $period_label) {
    
       
            $period_label_id = $period_label[0][0];
            //$start = $period[0][3];
            //$label_id = $period[0][5];
            $label = $period_label[0][2];//sqlQuery("select period_label from schoollms_schema_userdata_school_timetable_period_labels where period_label_id = $label_id");
    //        foreach ($period_label as $period_label_data) {
    //            $label = $period_label_data[0][0];
    //            break;
    //        }
    //        $end = $period[0][4];

            //echo "PID $period_label_id PL $label <br>";
            if ($label == "Registration" && !$has_registration){
                //echo "SKIPPED REGISTRATION $period_label_id $label <br>";
                continue;
            }

            if ($label == "Break"){
               $sql = "insert into schoollms_schema_userdata_school_timetable_view (timetabl_id, day_date, tbl_row, tbl_col, slot_code, slot_details) values ($timetable_id,'$date_stamp',$row,$period_label_id,'s-0',' ')";
                //echo "SQL $sql <br />";
                $result = sqlQuery($sql);
                continue;
            }
        //GET DAY ITEMS
        //switch ($user_type){
        
            //case 2:
            $sql = "select distinct timetabl_id, day_id, period_label_id, grade_id, class_id, 
    room_id, subject_id, teacher_id, substitude_id from schoollms_schema_userdata_school_timetable_items where timetabl_id = $timetable_id and day_id =  $timetable_day and period_label_id = $period_label_id";
                  //  break;

                //case 4:
                //    $sql = "select * from schoollms_schema_userdata_school_timetable_items where teacher_id = $user_id and day_id =  $timetable_day order by period_label_id asc";
              //      break;

            //}

            //echo "$label P SQL $sql <br>";
            
            $timetable_items = sqlQuery($sql);

            $col = 1;
            $item_count = count($timetable_items);
            //echo "TTITEMS = $item_count SQL $sql <br> date_stamp : $date_stamp  --- <br/>";

            $slot_details = "";
            //echo "<hr/> num : ".count($timetable_items);
            foreach ($timetable_items as $items) {

                foreach ($items as  $item){
                    //echo "<hr/>num : ".count($items);
                                    //var_dump($item);
                    $item_count = count($items);

                    //echo "ITEMS = $item_count<br>";

                    $period_label_id = $item[2];
                    $grade_id = $item[3];
                    $class_id = $item[4];
                    $room_id = $item[5];
                    $subject_id = $item[6];
                    $teacher_id = $item[7];
                    $substitute_id = $item[8];

                                    //echo "<br/>$period_label_id | $grade_id  | $class_id | $room_id | $subject_id | $teacher_id | $substitute_id | $user_type";
                    //echo "USER TYPE $user_type <br>";

                    switch ($user_type) {
                        case 1:
                        case 2:
                            if(!is_null($parent_id)){
                                $slot_details = user_stats($timetable_id, $timetable_day, $date_stamp, $period_label_id, $grade_id, $class_id, $room_id, $subject_id, $teacher_id, $substitute_id, $user_type, $user_id);
                                break;
                            }
                        case 3:
                        case 5:
                        case 6:
                            //echo "I GET HERE <br>";
                            $slot_details = items($timetable_id, $timetable_day, $date_stamp, $period_label_id, $grade_id, $class_id, $room_id, $subject_id, $teacher_id, $substitute_id, $user_type, $user_id); 
                            break;

                        case 4:
                            //echo "if ($teacher_id == $user_id) <br>";
                                                    //alert("$teacher_id == $user_id ---  timetable_id|$timetable_id, timetable_day|$timetable_day, date_stamp|$date_stamp, period_label_id|$period_label_id, grade_id|$grade_id");
                            if ($teacher_id == $user_id){
                                                            //echo "  before items >>> ";
                                $slot_details = items($timetable_id, $timetable_day, $date_stamp, $period_label_id, $grade_id, $class_id, $room_id, $subject_id, $teacher_id, $substitute_id, $user_type, $user_id); 
                                                            //echo "  << after items ";
                            } else {
                                $slot_details = "";
                            }
                            break;

                        default:
                            break;
                    }

                    $sql = "insert into schoollms_schema_userdata_school_timetable_view (timetabl_id, day_date, tbl_row, tbl_col, slot_code, slot_details) values ($timetable_id,'$date_stamp',$row,$period_label_id,'s-$subject_id','$slot_details')";
                    //echo "$period_label_id $label SQL $sql <br />";
                    $result = sqlQuery($sql);

                }
            }
        }
        
        $row++;
    }
	
    return $timetable_id;
}

//MESSAGE
function timetable_print_days($time_table_id = 22, $user_type, $user_id, $year_id, $school_id, $startdate=null, $today=null, $data=null, $parent_id=null){
    
    $slots = array ();
    //echo "FIRST TODAY $today STARTDATE $startdate<br>";
//    if (!is_null($startdate)){
//        if (!is_null($today)){
//            $today = get_today($startdate, $today,$school_id);
//        } else {
//            $today = date('D:d M:m Y H:i:s');
//            $today = get_today($startdate,$today,$school_id);
//        }
//    } else {
//        $today = date('D:d M:m Y H:i:s');
//    }

    //Get TimeDays From Today
    $today = date('D:d M:m Y H:i:s');
    $school_id = 1;
    $message = "$today!~!$school_id";

    $days = timetable_days($message);
    //var_dump($days);
    //REMOVE PREVIOUS TIMETABLE LOAD IF FIRST DATE IS DIFFERENT TO TODAY
    
    //FOR EACH DAY LOAD USER TIMETABLE
    foreach ($days as $key=>$day) {
        
        $timetable_day = $day['timetable_day'];
        $timetable_day_date = $day['timetable_day_date'];
        $tokens = explode(" ", $timetable_day_date);
        
        $year = $tokens[2];
        $month_items = explode(":", $tokens[1]);
        $day_items = explode(":", $tokens[0]);
        $clock_items = explode(":", $tokens[3]);
        $day_string = "<b>Day $timetable_day</b><br>$day_items[0]<br>$day_items[1]-$month_items[0]-$year";
//        //GET DAY
//        print " <tr height='75px'><td class='mark dark'><div class='tableFirstCol'> $day_string </div></td></tr>";
        //GET DAY SLOTS
        $message = "$day_string!~!$slot_key!~!$time_table_id!~!$user_type!~!$user_id!~!$year_id!~!$school_id!~!$parent_id";
        $slots[$key] = timetable_print_day($message);
    }
    
    return $slots;
}

// create timetable row
function timetable_get_period_slot_data($message) {
    
        global $data;
	global $rs;
        //global $user_id;
        global $timetable_id;
        $message_tokens = explode("!~!", $message);
        
        $day = $message_tokens[0];
        $slot_row = $message_tokens[1];
        $time_table_id = $message_tokens[2];
        $user_type = $message_tokens[3];
        $user_id = $message_tokens[4]; 
        $year_id = $message_tokens[5]; 
        $school_id = $message_tokens[6];
        $parent_id = $message_tokens[7];
        
	if ($rs == null) {
		//echo "<br/>Then it is here<br/>";
//                switch($user_type){
//                    case 2:
//                    case 4:
//                        $message = "$user_id!~!$time_table_id!~!$user_type!~!$year_id!~!$school_id!~!$parent_id";
//                        $time_table_id = timetable_prepare_view($message);
//                        break;
//                    
//                    case 3:
//                    case 5:
//                        $time_table_id = prepareTrackerView($user_id,$time_table_id,$user_type, $year_id);
//                        break;
//                }
		
                //$time_table_id = 1058;
                        
		// first column of the query is used as key in returned array
		$q = "SELECT CONCAT(tbl_row,'_',tbl_col) AS pos, timetabl_id, slot_code, slot_details
						FROM schoollms_schema_userdata_school_timetable_view
						WHERE timetabl_id = ?";
                $q_data = array ($time_table_id);
	
                $data->prepareDataDatabaseQuery($q);
                
                $data->db_query->execute($q_data);
                
		$rs = $data->db_query->fetchAll(PDO::FETCH_NUM);
                
				
	}
  	
        //GET PERIOD TIMES PER WEEKDAY
        
        $day_tokens = explode("<br>", $day);
        $weekday = $day_tokens[1];
        //$period_labels = sqlQuery("select *  from schoollms_schema_userdata_school_timetable_period_labels WHERE school_id = $school_id order by period_label_id");
        $periods = array ();
        $period_labels = array();
        $period_label_titles = array();
        $q = "SELECT l.*, p.* FROM schoollms_schema_userdata_school_timetable_period_labels l"
            . " JOIN schoollms_schema_userdata_school_timetable_period p ON p.period_label_id = l.period_label_id and l.school_id = p.school_id"
            . " WHERE l.school_id = ? AND week_day_id = 1"
            . " ORDER BY UNIX_TIMESTAMP(concat('2016-01-01', ' ', period_start)) ASC";

        $data->prepareDataDatabaseQuery($q);
        $q_data = array ($school_id);
        $data->db_query->execute($q_data);
        $index = 1;
        while ($row = $data->db_query->fetch())
        {   
            $period_labels[$index] = $row["period_label_id"];
            $period_label_titles [$index] = $row["period_label"];
            $periods [$index] = $row;
            $index++;
        }
        
  	
        //CHECK IF SCHOOL HAS REGISTRATION PERIOD
        $q = "SELECT settings FROM schoollms_schema_userdata_timetable_settings WHERE school_id = ?";
        $q_data = array ($school_id);
        $data->prepareDataDatabaseQuery($q);
        $data->db_query->execute($q_data);
        $settings = $data->db_query->fetchColumn();

        $has_registration = FALSE;
        $settings_tokens = explode("|", $settings);
        $register_tokens = explode ("=", $settings_tokens[11]);
        if ($register_tokens[1] == 'Yes'){
            $has_registration = TRUE;
        }
        

	//echo "HAS REGISTRATION ".$has_registration."<br>";
	//echo "<br/>";
        //exit;
        $return_slots = array ();
        
        if ($slot_row == 1){
            $return_slots [] = "tr!?!height!:!75px!,!id!:!firstTr";
        } else {
            $return_slots [] = "tr!?!height!:!75px";
        }
//	print '<tr>';
//	print '<td class="mark dark">' . $day . '</td>';
	// column loop starts from 1 because column 0 is for hours
	$result = "";
        //echo "COUNT LABLES ".count($period_labels);
        

        
        //echo "COUNT LABELS ".count($period_labels);
        //exit;
	for ($col=1; $col <= count($period_labels); $col++) {
//                $pkey = $col-1;
//                print "if ($period_label_titles[$pkey] == 'Registration' && !$has_registration){";
//                if ($period_label_titles[$pkey] == 'Registration' && !$has_registration){
//                    continue;
//                }
                
		// create table cell
                $return_slots[] = "td!?!";
                $return_slots[] = "div!?!style!:!'width:161px; max-height:75px; overflow:auto;'";
		//$return_slots .= '<td><div style="width:150px; max-height:75px; overflow:auto">';
		// prepare position key in the same way as the array key looks
		$pos = $slot_row . '_' . $col;
		// if content for the current position exists
		//echo "SEE pos $pos RS $rs[0]<br/>";
		//var_dump($rs);
                //exit;
                foreach($rs as $rs_key=>$rs_items){
                    if (strcmp($pos, $rs_items[0]) == 0) {
                    //if (array_key_exists($pos, $rs)) {
                            // prepare elements for defined position (it could be more than one element per table cell)
                            //$elements = $rs[$pos];
                            //echo "ELEMENTS <br>";
                            //var_dump($elements);
                            //exit;
                            //echo "Ingenile <hr/>";

                            // open loop for each element in table cell
    //			for ($i=0; $i < count($elements); $i++) {
    //				// id of DIV element will start with sub_id and followed with 'b' (because cloned elements on the page have 'c') and with tbl_id
    //				// this way content from the database will not be in collision with new content dragged from the left table and each id stays unique
                                    $id = $rs_items[2] . 'b' . $rs_items[1];
                                    //echo "<br> <b>ID </b> $id <br>";
                                    $name = $rs_items[3];
                                    //echo "<br> <b>NAME </b> $name <br><br>";
                                    //var_dump($rs[3]);
                                    $param = str_replace("\r","",$rs_items[3]);
//                                    if (is_array($param)){
//                                        echo "FOUND ARRAY <br>";
//                                        var_dump($param);
//                                        exit;
//                                    }

                                    $datas = explode("<br>",$param);
                                    //echo "<br> <b>DATAS </b> <br>";
                                    //var_dump($datas);
                                    $result="";
                                    $display = "";
                                    $dname = explode("~",$name);
                                    //echo "<br> <b>DNAME </b> <br>";
                                    //var_dump($dname);
                                    //echo "<br> <b>NEW NAME </b> <br>";
                                    if (count($dname) > 1){
                                        $name = $dname[0].urldecode($dname[1]);
                                    }
                                    //echo $name;
                                    //exit;
    
                                    $removeSlot = "";
    //				
    //				
    //				
    //				if(count($datas) == 4 )
    //				{
    //					$result.= "<table border=1 id=tblpopup name=tblpopup>";
    //					//$result.= "<tr><td>Subject</td><td>$data[0]</td></tr>";
    //					$result.= "<tr><td id=subjectColumn name=subjectColumn>Subject</td><td>:SUBJECT</td></tr>";
    //                                        
    //                                        switch ($user_type){
    //                                            case 1:
    //                                            case 2:
    //                                            case 3:
    //                                            case 5:
    //                                            case 6:
    //                                                $result.= "<tr><td id=teacherColumn name=teacherColumn>Teacher</td><td>$datas[1]</td></tr>";
    //                                                $result.= "<tr><td id=classroomColumn name=classroomColumn>Classroom</td><td>$datas[2]</td></tr>";
    //                                                $result.= "<tr><td id=subsColumn name=subsColumn>Substitutes</td><td>$datas[3]</td></tr>";
    //												$removeSlot = "<div class=\"drag $class\"> <a href=\"javascript:removeslot()\">Clear this  Slot</a></div>";											
    //												
    //                                                break;
    //                                            
    //                                            case 4:
    //                                                $result.= "<tr><td id=classroomColumn name=classroomColumn>Classroom</td><td>$datas[2]</td></tr>";
    //                                                $result.= "<tr><td id=subsClassColumn name=subsClassColumn>Class</td><td>$datas[3]</td></tr>";
    //                                                break;
    //                                            
    //                                            
    //                                        }
    //					
    //					
    //					$result.= "<tr><td id=dayColumn name=dayColumn>Day</td><td>$day</td></tr>";
    //					//echo $i;
    //					//var_dump($periods[1][0][1]);
    //					$start = $periods[$col][0][3];
    //					$end = $periods[$col][0][4];
    //					$result.= "<tr><td>Period Time</td><td>$start - $end </td></tr>";
    //					$result.= "</table>";
    //                                        //echo "RESULT $result <br> USER_TYPE $user_type <br>";
    //				}
    //                                
    				
                                    $class = $rs_items[2];
                                    $theperiod = $period_labels[$col ];

    //                                echo "PERIODS <br>";
    //				var_dump($periods);
    //                                
    //                                exit;
                                    $start= $periods[$col]["period_start"];
                                    $end = $periods[$col]["period_end"];;

    //				foreach($periods as $key=>$value)
    //				{
    //					var_dump($periods);
    //					echo "<br/>";
    //					//$start = $periods[$key][0][3];
    //					//$end = $periods[$key][0][4];   
    //					
    //                                        exit;
    //					//break;					
    //				}
    				
                                    $name_tokens = explode(" ", $name);
                                    $subject_class = FALSE;
                                    $subject_class_name = "";
                                    foreach ($name_tokens as $key => $value) {
                                        if (strpos($value,"(S)") !== FALSE){
                                            break;
                                        }
                                        if (is_numeric($value)){
                                            $subject_class = TRUE;
                                            $dclass = "$value"."X";
                                            $subject_class_name = $datas[3];
                                            break;
                                        }
                                    }

                                    if (!$subject_class){
                                        $dd = explode("CLASS",$name);
                                        $num = count($dd);
                                        //echo "WHAT IS IN DD $name<br>";
                                        //($dd);
                                        $class1 = "NOCLASS";
                                        if(count($dd) ==2)
                                        {
                                                //$class1 = "CLASS ".str_replace("<br>","",trim($dd[1]));
                                                $class1 = str_replace("<br>","",trim($dd[1]));
                                                $class1 = str_replace("\n","",$class1 );
                                                $class1 = str_replace("\r","",$class1 );

                                        } 
                        //echo strlen ($class1);
                                        $dclass = "";
                                        for($i = 0;$i < strlen ($class1);$i++)
                                        {
                                                if ($class1[$i] == '<'){
                                                        break;
                                                }

                                                if(!empty(trim($class1[$i])))
                                                {
                                                        //echo $class1[$i]."<br/>";
                                                        $dclass .=$class1[$i];
                                                }
                                        }
                                    }
    //				//$name = str_replace("<br>","",trim($name));
    //				//echo "$name <br/>";
                                    $name = str_replace("\n","",$name );
                                    $name = str_replace("\r","",$name );
    //				//$dclass_tokens = explode("<", $dclass1);
    //				//$dclass = $dclass_tokens[0];
    //				//echo "$class1 <br>\n";
    //				//$onclick = "viewTimeTableSlot('$result','$datas[0]','$class1','$start-$end~$day')";
    //				//onclick=\"viewTimeTableSlot('$result','$datas[0]','$class1','$start-$end~$day')\"
    //				//echo "$onclick  <br/>";
    //				//echo "into endtehrswehhbfdsmhfj$class1"."gsdhjgfhsdmjfhdsjhfmdshgfhdsgfnhsgdfhngsdnfhgsdnfhvdsnbvfbsndbvfnsdbvfnsdbvfnsdbvfnsdbvfnbsdvfndsbvfndsvbn <br />";
    //				//alert("viewTimeTableSlot");
    //				//echo $name;
    //                                //$dname = explode("<>LESSON",$name);
                                    if($user_type == 6)
                                    {
                                            $theDayInfo = explode("</b>", str_replace("<b>","",$day));
                                            $theDayInfo[1] = " - ".$theDayInfo[1];
                                            $date = explode("br",$theDayInfo[1]);
                                            $subject = str_replace("<b>","",$datas[0]);

                                            $removeSlot = "<div class=\"drag $class\"> <a href=\"javascript:removeslot('$theDayInfo[0]','$theperiod','$time_table_id','$school_id','$date[2]','$subject','CLASS $dclass')\">Clear this  Slot</a></div>";			
                                    }

                                    $dclass = str_replace("<br>","",trim($dclass));
                                    $dclass = str_replace("\n","",$dclass );
                                $dclass = str_replace("\r","",$dclass );

                                    //$dname[0] = str_replace("<br>","",trim($dname[0]));
                                    $dname[0] = str_replace("\n","",$dname[0]);
                                $dname[0] = str_replace("\r","",$dname[0]);

                                    /*$dname[0] = str_replace("<br>","",trim($dname[0]));
                                    $dname[0] = str_replace("\n","",$dname[0] );
                                $dname[0] = str_replace("\r","",$dname[0] );

                                    $datas[0] = str_replace("<br>","",trim($datas[0]));
                                    $datas[0] = str_replace("\n","",$datas[0] );
                                $datas[0] = str_replace("\r","",$datas[0] );*/
                                    if($user_type == 6)
                                    {
                                            $return_slots[] = "div!?!id!:!$id!,!class!:!'drag $class'";
                                            $return_slots[] = "paragraph!?!style!:!''!,!text!:!$slot_details";
                                            $return_slots[] = "/paragraph!?!";
                                            $return_slots[] = "/div!?!";
                                            //$return_slots []= "<div id=\"$id\" class=\"drag $class\" onClick=\"viewTimeTableSlot('$dname[0]','$datas[0]','CLASS $dclass','$start-$end~$day~$user_id~$theperiod~$time_table_id')\" >$dname[0]</div>
                                            //$removeSlot
                                            //<div class=\"drag $class\">".urldecode($dname[1])."</div>";
                                    } elseif ($subject_class){
                                            $parameters = "$dname[0]::$datas[0]::CLASS $dclass::$start-$end~$day~$user_id~$theperiod~$time_table_id::$subject_class_name";
                                            $return_slots[] = "div!?!id!:!$id!,!class!:!'thecontextmenu drag $class'!,!name!:!$id!,!onclick!:!'newViewTimeTableSlot($parameters,this)'";
                                            $return_slots[] = "paragraph!?!style!:!''!,!text!:!$dname[0]";
                                            $return_slots[] = "/paragraph!?!";
                                            $return_slots[] = "/div!?!";
                                            //$return_slots []= "<div id=\"$id\" name=\"$id\" class=\"thecontextmenu drag $class\" onClick=\"newViewTimeTableSlot('$dname[0]::$datas[0]::CLASS $dclass::$start-$end~$day~$user_id~$theperiod~$time_table_id::$subject_class_name',this)\" >$dname[0]</div>
                                            //$removeSlot
                                            if (count($dname) > 1){
                                                $return_slots[] = "div!?!id!:!$id!,!class!:!'drag $class'";
                                                $return_slots[] = "paragraph!?!style!:!''!,!text!:!".urldecode($dname[1]);
                                                $return_slots[] = "/paragraph!?!";
                                                $return_slots[] = "/div!?!";
                                            }
                                            //<div class=\"drag $class\">".urldecode($dname[1])."</div>";
                                    } else {
                                            $parameters = "$dname[0]::$datas[0]::CLASS $dclass::$start-$end~$day~$user_id~$theperiod~$time_table_id";
                                            $return_slots[] = "div!?!id!:!$id!,!class!:!'thecontextmenu drag $class'!,!name!:!$id!,!onclick!:!'newViewTimeTableSlot($parameters,this)'";
                                            $return_slots[] = "paragraph!?!style!:!''!,!text!:!$dname[0]";
                                            $return_slots[] = "/paragraph!?!";
                                            $return_slots[] = "/div!?!";
    //					$return_slots []= "<div id=\"$id\" name=\"$id\" class=\"thecontextmenu drag $class\" onClick=\"newViewTimeTableSlot('$dname[0]::$datas[0]::CLASS $dclass::$start-$end~$day~$user_id~$theperiod~$time_table_id',this)\" >$dname[0]</div>
    //					$removeSlot
                                            if (count($dname) > 1){
                                                $return_slots[] = "div!?!id!:!$id!,!class!:!'drag $class'";
                                                $return_slots[] = "paragraph!?!style!:!''!,!text!:!".urldecode($dname[1]);
                                                $return_slots[] = "/paragraph!?!";
                                                $return_slots[] = "/div!?!";
                                            }
    //					<div class=\"drag $class\">".urldecode($dname[1])."</div>";
                                    }

    ////				if($user_type == 6)
    ////				{
    ////					$theDayInfo = explode("</b>", str_replace("<b>","",$day));
    ////					$theDayInfo[1] = " - ".$theDayInfo[1];
    ////					$date = explode("br",$theDayInfo[1]);
    ////					$subject = str_replace("<b>","",$datas[0]);
    ////					$removeSlot = "<div class=\"drag $class\"> <a href=\"javascript:removeslot('$theDayInfo[0]','$theperiod','$time_table_id','$school_id','$date[2]','$subject','CLASS $dclass')\">Clear this  Slot</a></div>";			
    ////				}
    ////				
    ////				$dclass = str_replace("<br>","",trim($dclass));
    ////				$dclass = str_replace("<br/>","",trim($dclass));
    ////				$dclass = str_replace("\n","",$dclass );
    ////			    $dclass = str_replace("\r","",$dclass );
    ////				
    ////				//$dname[0] = str_replace("<br>","",trim($dname[0]));
    ////				$dname[0] = str_replace("\n","",$dname[0] );
    ////			    $dname[0] = str_replace("\r","",$dname[0] );
    ////				
    ////				//$datas[0] = str_replace("<br>","",trim($datas[0]));
    ////				$datas[0] = str_replace("\n","",$datas[0] );
    ////			    $datas[0] = str_replace("\r","",$datas[0] );
    ////				
    ////				$coursename = $dname[0];
    ////				$dname[0] = str_replace("<b>","<b style='font-weight:bold'>",$dname[0]);
    ////				
    ////				$return_slots .= "<div id=\"$id\" class=\"drag $class\" onClick=\"viewTimeTableSlot('$coursename','$datas[0]','CLASS $dclass','$start-$end~$day~$theperiod~$time_table_id~$user_type')\" >$dname[0]</div>
    ////				$removeSlot
    ////				<div class=\"drag $class\">".urldecode($dname[1])."</div>";
    //			}
                    
                    break;                
                    }
                }
		// close table cell
                $return_slots[] = "/div!?!";
                $return_slots[] = "/td!?!";
		//$return_slots .= '</div></td>';
	}
        $return_slots[] = "/tr!?!";
	//$return_slots .= "</tr>\n";
        //exit;
        return $return_slots;
}

function timetable_adjust_time($bit_type, $time){
    
    switch ($bit_type){
    
        case 64:
            
            //SERVER SETTING 64 BIT INT
            $time = strtotime($time)*1000;
            $days = 2 * 86400000;
            $time = $time + $days;
            break;
    
        case 32:
            //LOCALHOST SETTING 32 BIT INT
            $time = strtotime($time);
            $days = 2 * 86400;
            $time = $time + $days;
            break;
    }
    
    return $time;
}
